import{a as D}from"./D8PmxC0_.js";class I{async obterKardex(e){try{console.log("üìä Buscando kardex:",e);const{almoxarifadoId:o,tipoEpiId:d,dataInicio:n,dataFim:r}=e,s=new URLSearchParams;n&&s.append("dataInicio",n),r&&s.append("dataFim",r);const c=s.toString(),l=`/estoque/kardex/${o}/${d}${c?`?${c}`:""}`;console.log("üì° Chamando endpoint:",l);const i=await D.get(l);if(i.success&&i.data){const t=i.data,a={movimentacoes:t.movimentacoes||[],saldoInicial:t.saldoInicial||0,saldoFinal:t.saldoFinal||0,totalEntradas:t.totalEntradas||0,totalSaidas:t.totalSaidas||0};return a.movimentacoes.sort((m,S)=>new Date(S.data).getTime()-new Date(m.data).getTime()),console.log("‚úÖ Kardex carregado:",{movimentacoes:a.movimentacoes.length,saldoInicial:a.saldoInicial,saldoFinal:a.saldoFinal,totalEntradas:a.totalEntradas,totalSaidas:a.totalSaidas}),a}throw new Error("Dados de kardex n√£o encontrados")}catch(o){throw console.error("‚ùå Erro ao buscar kardex:",o),o}}async obterKardexPorPeriodo(e,o,d){const n=new Date().toISOString().split("T")[0],r=new Date(Date.now()-d*24*60*60*1e3).toISOString().split("T")[0];return this.obterKardex({almoxarifadoId:e,tipoEpiId:o,dataInicio:r,dataFim:n})}getMockKardexData(){return{movimentacoes:[{data:new Date(Date.now()-1*24*60*60*1e3).toISOString(),documento:"E4U302",tipoMovimentacao:"SAIDA_ENTREGA",entrada:0,saida:2,saldo:78,observacoes:"Entrega para Jo√£o Silva"},{data:new Date(Date.now()-2*24*60*60*1e3).toISOString(),documento:"ENT-2025-000123",tipoMovimentacao:"ENTRADA_NOTA",entrada:50,saida:0,saldo:80,observacoes:"Compra de EPIs"},{data:new Date(Date.now()-5*24*60*60*1e3).toISOString(),documento:"DEV-2025-000045",tipoMovimentacao:"ENTRADA_DEVOLUCAO",entrada:3,saida:0,saldo:30,observacoes:"Devolu√ß√£o de Maria Santos"},{data:new Date(Date.now()-7*24*60*60*1e3).toISOString(),documento:"TRF-2025-000012",tipoMovimentacao:"SAIDA_TRANSFERENCIA",entrada:0,saida:5,saldo:27,observacoes:"Transfer√™ncia para Almoxarifado Central"},{data:new Date(Date.now()-10*24*60*60*1e3).toISOString(),documento:"AJU-2025-000003",tipoMovimentacao:"AJUSTE_POSITIVO",entrada:2,saida:0,saldo:32,observacoes:"Ajuste de invent√°rio"}],saldoInicial:30,saldoFinal:78,totalEntradas:55,totalSaidas:7}}}const E=new I;export{E as k};
