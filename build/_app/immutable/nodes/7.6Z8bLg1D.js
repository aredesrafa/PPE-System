import{S as Qe,i as Ze,s as Ge,d as g,A as B,m as C,o as k,p as _e,q as ve,b as q,c as d,B as Q,O as E,a4 as Wa,h as V,e as $,f as D,T as ke,C as Z,k as F,j as b,D as G,Y as Xe,n as Ae,g as M,t as R,a as oe,r as Ie,M as xe,G as bt,J as Et,K as kt,L as It,v as ir,E as ft,H as Dt,a6 as Ct,ab as qt,z as yt,Z as Le,a7 as Ue,a8 as Be,x as cr,l as Ka,U as Ya}from"../chunks/BMdB51sm.js";import"../chunks/IHki7fMi.js";import{f as $t}from"../chunks/DQAhpDP7.js";import{B as Ne,e as ot,a as Te,g as fr,d as ur}from"../chunks/Dwq3Do7L.js";import{a as Pt,E as Nt,T as dr,c as mr,d as gr,R as Xa,e as ht,f as pr,g as _t,L as We,b as er,S as tr,i as hr,h as _r}from"../chunks/CWIIKvcO.js";import{I as At,n as Re,b as vr}from"../chunks/DV0aLKez.js";import{e as Fe,u as st,o as ut,d as $r}from"../chunks/BIKDjfmO.js";import{C as br}from"../chunks/BVvHLR6M.js";import{C as Er}from"../chunks/Bc5r9wXl.js";import{E as kr}from"../chunks/urJgHiP9.js";import{P as it}from"../chunks/C1IGLM4g.js";import{S as ar}from"../chunks/zy2cWNNC.js";import{S as nt,a as dt,T as Ir,D as wr}from"../chunks/CBvgytH_.js";import{U as Ye}from"../chunks/D1bAV70r.js";import{w as Dr}from"../chunks/B-FKEqiI.js";import{I as rr}from"../chunks/B-kfmAqx.js";import{E as St}from"../chunks/WMDR_Hax.js";import{C as Cr}from"../chunks/CkEY7Pra.js";import{C as lr}from"../chunks/BDKByL26.js";import{f as wt}from"../chunks/5lP0jMhK.js";import{T as yr,Q as Pr,F as Ar,G as Vr,P as Fr}from"../chunks/Dt_Q5vBM.js";import{M as qr}from"../chunks/DmcNV7vt.js";function Rt(l,e,t){const a=l.slice();return a[21]=e[t],a}function Nr(l){let e,t,a;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){G(e.$$.fragment),t=R(`
        Nova Ficha`)},l(r){Z(e.$$.fragment,r),t=M(r,`
        Nova Ficha`)},m(r,n){Q(e,r,n),q(r,t,n),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),a=!1},d(r){r&&g(t),B(e,r)}}}function Sr(l){let e,t;return e=new br({props:{size:"sm",class:"rounded-sm",$$slots:{default:[Rr]},$$scope:{ctx:l}}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&16777232&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function zr(l){let e,t,a,r,n,s,o,i,c,f,u,p,m,h,w,I,A,N,S,x,z,L,O,H;n=new ar({props:{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}}),o=new At({props:{type:"text",placeholder:"Buscar por nome, CPF ou matr√≠cula...",class:"pl-10 rounded-sm h-10 text-sm",value:l[4].searchTerm}}),o.$on("input",l[7]),f=new nt({props:{options:l[5].empresas,value:l[4].empresaFilter,placeholder:"Empresa",color:"alternative"}}),f.$on("change",l[8]),m=new nt({props:{options:l[5].cargos,value:l[4].cargoFilter,placeholder:"Cargo",color:"alternative"}}),m.$on("change",l[9]),I=new Er({props:{checked:l[4].devolucaoPendente,$$slots:{default:[xr]},$$scope:{ctx:l}}}),I.$on("change",l[10]);const W=[Hr,jr],_=[];function P(y,v){return y[4].hasActiveFilters?0:1}N=P(l),S=_[N]=W[N](l),L=new dr({props:{hoverable:!0,$$slots:{default:[rl]},$$scope:{ctx:l}}});let T=l[3].totalPages>1&&Qt(l);return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("div"),G(n.$$.fragment),s=F(),G(o.$$.fragment),i=F(),c=b("div"),G(f.$$.fragment),u=F(),p=b("div"),G(m.$$.fragment),h=F(),w=b("div"),G(I.$$.fragment),A=F(),S.c(),x=F(),z=b("div"),G(L.$$.fragment),O=F(),T&&T.c(),this.h()},l(y){e=$(y,"DIV",{class:!0});var v=D(e);t=$(v,"DIV",{class:!0});var j=D(t);a=$(j,"DIV",{class:!0});var J=D(a);r=$(J,"DIV",{class:!0});var te=D(r);Z(n.$$.fragment,te),s=V(te),Z(o.$$.fragment,te),te.forEach(g),i=V(J),c=$(J,"DIV",{class:!0});var ne=D(c);Z(f.$$.fragment,ne),ne.forEach(g),u=V(J),p=$(J,"DIV",{class:!0});var le=D(p);Z(m.$$.fragment,le),le.forEach(g),h=V(J),w=$(J,"DIV",{class:!0});var ae=D(w);Z(I.$$.fragment,ae),ae.forEach(g),A=V(J),S.l(J),J.forEach(g),j.forEach(g),x=V(v),z=$(v,"DIV",{class:!0});var K=D(z);Z(L.$$.fragment,K),K.forEach(g),O=V(v),T&&T.l(v),v.forEach(g),this.h()},h(){E(r,"class","relative"),E(c,"class","relative z-30"),E(p,"class","relative z-20"),E(w,"class","flex items-center"),E(a,"class","grid grid-cols-1 md:grid-cols-5 gap-4 relative"),E(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),E(z,"class","min-w-[680px] overflow-x-auto"),E(e,"class","bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden")},m(y,v){q(y,e,v),d(e,t),d(t,a),d(a,r),Q(n,r,null),d(r,s),Q(o,r,null),d(a,i),d(a,c),Q(f,c,null),d(a,u),d(a,p),Q(m,p,null),d(a,h),d(a,w),Q(I,w,null),d(a,A),_[N].m(a,null),d(e,x),d(e,z),Q(L,z,null),d(e,O),T&&T.m(e,null),H=!0},p(y,v){const j={};v&16&&(j.value=y[4].searchTerm),o.$set(j);const J={};v&32&&(J.options=y[5].empresas),v&16&&(J.value=y[4].empresaFilter),f.$set(J);const te={};v&32&&(te.options=y[5].cargos),v&16&&(te.value=y[4].cargoFilter),m.$set(te);const ne={};v&16&&(ne.checked=y[4].devolucaoPendente),v&16777216&&(ne.$$scope={dirty:v,ctx:y}),I.$set(ne);let le=N;N=P(y),N===le?_[N].p(y,v):(_e(),C(_[le],1,1,()=>{_[le]=null}),ve(),S=_[N],S?S.p(y,v):(S=_[N]=W[N](y),S.c()),k(S,1),S.m(a,null));const ae={};v&16777217&&(ae.$$scope={dirty:v,ctx:y}),L.$set(ae),y[3].totalPages>1?T?(T.p(y,v),v&8&&k(T,1)):(T=Qt(y),T.c(),k(T,1),T.m(e,null)):T&&(_e(),C(T,1,1,()=>{T=null}),ve())},i(y){H||(k(n.$$.fragment,y),k(o.$$.fragment,y),k(f.$$.fragment,y),k(m.$$.fragment,y),k(I.$$.fragment,y),k(S),k(L.$$.fragment,y),k(T),H=!0)},o(y){C(n.$$.fragment,y),C(o.$$.fragment,y),C(f.$$.fragment,y),C(m.$$.fragment,y),C(I.$$.fragment,y),C(S),C(L.$$.fragment,y),C(T),H=!1},d(y){y&&g(e),B(n),B(o),B(f),B(m),B(I),_[N].d(),B(L),T&&T.d()}}}function Tr(l){let e,t;return e=new Nt({props:{error:l[2],onRetry:l[15]}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&4&&(n.error=a[2]),r&8&&(n.onRetry=a[15]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Or(l){let e,t;return e=new Pt({}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Mr(l){let e,t,a=l[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha",r,n;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){G(e.$$.fragment),t=F(),r=R(a)},l(s){Z(e.$$.fragment,s),t=V(s),r=M(s,a)},m(s,o){Q(e,s,o),q(s,t,o),q(s,r,o),n=!0},p(s,o){(!n||o&16)&&a!==(a=s[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha")&&oe(r,a)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){C(e.$$.fragment,s),n=!1},d(s){s&&(g(t),g(r)),B(e,s)}}}function Rr(l){let e,t,a,r,n,s="Nenhuma ficha encontrada",o,i,c=l[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI",f,u,p,m;return a=new ar({props:{class:"w-8 h-8 text-gray-400"}}),p=new Ne({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Mr]},$$scope:{ctx:l}}}),p.$on("click",l[14]),{c(){e=b("div"),t=b("div"),G(a.$$.fragment),r=F(),n=b("h3"),n.textContent=s,o=F(),i=b("p"),f=R(c),u=F(),G(p.$$.fragment),this.h()},l(h){e=$(h,"DIV",{class:!0});var w=D(e);t=$(w,"DIV",{class:!0});var I=D(t);Z(a.$$.fragment,I),I.forEach(g),r=V(w),n=$(w,"H3",{class:!0,"data-svelte-h":!0}),ke(n)!=="svelte-qm1del"&&(n.textContent=s),o=V(w),i=$(w,"P",{class:!0});var A=D(i);f=M(A,c),A.forEach(g),u=V(w),Z(p.$$.fragment,w),w.forEach(g),this.h()},h(){E(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"),E(n,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),E(i,"class","text-gray-500 dark:text-gray-400 mb-6"),E(e,"class","text-center py-12")},m(h,w){q(h,e,w),d(e,t),Q(a,t,null),d(e,r),d(e,n),d(e,o),d(e,i),d(i,f),d(e,u),Q(p,e,null),m=!0},p(h,w){(!m||w&16)&&c!==(c=h[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI")&&oe(f,c);const I={};w&16777232&&(I.$$scope={dirty:w,ctx:h}),p.$set(I)},i(h){m||(k(a.$$.fragment,h),k(p.$$.fragment,h),m=!0)},o(h){C(a.$$.fragment,h),C(p.$$.fragment,h),m=!1},d(h){h&&g(e),B(a),B(p)}}}function xr(l){let e;return{c(){e=R("Pendentes devolu√ß√£o")},l(t){e=M(t,"Pendentes devolu√ß√£o")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function jr(l){let e;return{c(){e=b("div")},l(t){e=$(t,"DIV",{}),D(e).forEach(g)},m(t,a){q(t,e,a)},p:Ae,i:Ae,o:Ae,d(t){t&&g(e)}}}function Hr(l){let e,t;return e=new Ne({props:{color:"alternative",class:"rounded-sm h-10 w-10 p-0 flex items-center justify-center",title:"Limpar Filtros",$$slots:{default:[Lr]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&16777216&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Lr(l){let e,t;return e=new Xa({props:{class:"w-4 h-4"}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Ur(l){let e;return{c(){e=R("Colaborador")},l(t){e=M(t,"Colaborador")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Br(l){let e;return{c(){e=R("Empresa")},l(t){e=M(t,"Empresa")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Qr(l){let e;return{c(){e=R("EPIs Ativos")},l(t){e=M(t,"EPIs Ativos")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Zr(l){let e;return{c(){e=R("A√ß√µes")},l(t){e=M(t,"A√ß√µes")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Gr(l){let e,t,a,r,n,s,o,i;return e=new ht({props:{$$slots:{default:[Ur]},$$scope:{ctx:l}}}),a=new ht({props:{$$slots:{default:[Br]},$$scope:{ctx:l}}}),n=new ht({props:{$$slots:{default:[Qr]},$$scope:{ctx:l}}}),o=new ht({props:{$$slots:{default:[Zr]},$$scope:{ctx:l}}}),{c(){G(e.$$.fragment),t=F(),G(a.$$.fragment),r=F(),G(n.$$.fragment),s=F(),G(o.$$.fragment)},l(c){Z(e.$$.fragment,c),t=V(c),Z(a.$$.fragment,c),r=V(c),Z(n.$$.fragment,c),s=V(c),Z(o.$$.fragment,c)},m(c,f){Q(e,c,f),q(c,t,f),Q(a,c,f),q(c,r,f),Q(n,c,f),q(c,s,f),Q(o,c,f),i=!0},p(c,f){const u={};f&16777216&&(u.$$scope={dirty:f,ctx:c}),e.$set(u);const p={};f&16777216&&(p.$$scope={dirty:f,ctx:c}),a.$set(p);const m={};f&16777216&&(m.$$scope={dirty:f,ctx:c}),n.$set(m);const h={};f&16777216&&(h.$$scope={dirty:f,ctx:c}),o.$set(h)},i(c){i||(k(e.$$.fragment,c),k(a.$$.fragment,c),k(n.$$.fragment,c),k(o.$$.fragment,c),i=!0)},o(c){C(e.$$.fragment,c),C(a.$$.fragment,c),C(n.$$.fragment,c),C(o.$$.fragment,c),i=!1},d(c){c&&(g(t),g(r),g(s)),B(e,c),B(a,c),B(n,c),B(o,c)}}}function xt(l){let e,t,a=l[21].colaborador.matricula+"",r;return{c(){e=b("span"),t=R("Matr√≠cula: "),r=R(a),this.h()},l(n){e=$(n,"SPAN",{class:!0});var s=D(e);t=M(s,"Matr√≠cula: "),r=M(s,a),s.forEach(g),this.h()},h(){E(e,"class","text-xs text-gray-400 dark:text-gray-500")},m(n,s){q(n,e,s),d(e,t),d(e,r)},p(n,s){s&1&&a!==(a=n[21].colaborador.matricula+"")&&oe(r,a)},d(n){n&&g(e)}}}function Jr(l){let e,t,a=l[21].colaborador.nome+"",r,n,s,o=Zt(l[21].colaborador.cpf)+"",i,c,f=l[21].colaborador.matricula&&xt(l);return{c(){e=b("div"),t=b("span"),r=R(a),n=F(),s=b("span"),i=R(o),c=F(),f&&f.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=D(e);t=$(p,"SPAN",{class:!0});var m=D(t);r=M(m,a),m.forEach(g),n=V(p),s=$(p,"SPAN",{class:!0});var h=D(s);i=M(h,o),h.forEach(g),c=V(p),f&&f.l(p),p.forEach(g),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(s,"class","text-sm text-gray-500 dark:text-gray-400"),E(e,"class","flex flex-col")},m(u,p){q(u,e,p),d(e,t),d(t,r),d(e,n),d(e,s),d(s,i),d(e,c),f&&f.m(e,null)},p(u,p){p&1&&a!==(a=u[21].colaborador.nome+"")&&oe(r,a),p&1&&o!==(o=Zt(u[21].colaborador.cpf)+"")&&oe(i,o),u[21].colaborador.matricula?f?f.p(u,p):(f=xt(u),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(u){u&&g(e),f&&f.d()}}}function jt(l){let e,t=l[21].colaborador.cargo+"",a;return{c(){e=b("div"),a=R(t),this.h()},l(r){e=$(r,"DIV",{class:!0});var n=D(e);a=M(n,t),n.forEach(g),this.h()},h(){E(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(r,n){q(r,e,n),d(e,a)},p(r,n){n&1&&t!==(t=r[21].colaborador.cargo+"")&&oe(a,t)},d(r){r&&g(e)}}}function Wr(l){let e,t,a=(l[21].colaborador.empresa||"Empresa n√£o informada")+"",r,n,s=l[21].colaborador.cargo&&jt(l);return{c(){e=b("div"),t=b("span"),r=R(a),n=F(),s&&s.c(),this.h()},l(o){e=$(o,"DIV",{});var i=D(e);t=$(i,"SPAN",{class:!0});var c=D(t);r=M(c,a),c.forEach(g),n=V(i),s&&s.l(i),i.forEach(g),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white")},m(o,i){q(o,e,i),d(e,t),d(t,r),d(e,n),s&&s.m(e,null)},p(o,i){i&1&&a!==(a=(o[21].colaborador.empresa||"Empresa n√£o informada")+"")&&oe(r,a),o[21].colaborador.cargo?s?s.p(o,i):(s=jt(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(o){o&&g(e),s&&s.d()}}}function Kr(l){var r;let e=(l[21].totalEpisAtivos||((r=l[21].episInfo)==null?void 0:r.totalEpisComColaborador)||0)+"",t,a;return{c(){t=R(e),a=R(" EPIs")},l(n){t=M(n,e),a=M(n," EPIs")},m(n,s){q(n,t,s),q(n,a,s)},p(n,s){var o;s&1&&e!==(e=(n[21].totalEpisAtivos||((o=n[21].episInfo)==null?void 0:o.totalEpisComColaborador)||0)+"")&&oe(t,e)},d(n){n&&(g(t),g(a))}}}function Ht(l){let e,t;return e=new ot({props:{color:"red",class:"w-fit rounded-sm",$$slots:{default:[Yr]},$$scope:{ctx:l}}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&16777217&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Yr(l){var r;let e=(((r=l[21].episInfo)==null?void 0:r.episExpirados)||l[21].totalEpisVencidos)+"",t,a;return{c(){t=R(e),a=R(" vencido(s)")},l(n){t=M(n,e),a=M(n," vencido(s)")},m(n,s){q(n,t,s),q(n,a,s)},p(n,s){var o;s&1&&e!==(e=(((o=n[21].episInfo)==null?void 0:o.episExpirados)||n[21].totalEpisVencidos)+"")&&oe(t,e)},d(n){n&&(g(t),g(a))}}}function Lt(l){let e,t=l[21].episInfo.tiposEpisAtivos.slice(0,2).map(Gt).join(", ")+"",a,r,n=l[21].episInfo.tiposEpisAtivos.length>2&&Ut(l);return{c(){e=b("div"),a=R(t),r=F(),n&&n.c(),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=D(e);a=M(o,t),r=V(o),n&&n.l(o),o.forEach(g),this.h()},h(){E(e,"class","text-xs text-gray-500 dark:text-gray-400 mt-1")},m(s,o){q(s,e,o),d(e,a),d(e,r),n&&n.m(e,null)},p(s,o){o&1&&t!==(t=s[21].episInfo.tiposEpisAtivos.slice(0,2).map(Gt).join(", ")+"")&&oe(a,t),s[21].episInfo.tiposEpisAtivos.length>2?n?n.p(s,o):(n=Ut(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(s){s&&g(e),n&&n.d()}}}function Ut(l){let e,t,a=l[21].episInfo.tiposEpisAtivos.length-2+"",r;return{c(){e=b("span"),t=R("... +"),r=R(a)},l(n){e=$(n,"SPAN",{});var s=D(e);t=M(s,"... +"),r=M(s,a),s.forEach(g)},m(n,s){q(n,e,s),d(e,t),d(e,r)},p(n,s){s&1&&a!==(a=n[21].episInfo.tiposEpisAtivos.length-2+"")&&oe(r,a)},d(n){n&&g(e)}}}function Xr(l){var c,f,u;let e,t,a,r,n,s;t=new ot({props:{color:"blue",class:"w-fit rounded-sm",$$slots:{default:[Kr]},$$scope:{ctx:l}}});let o=(((c=l[21].episInfo)==null?void 0:c.episExpirados)||l[21].totalEpisVencidos)&&((((f=l[21].episInfo)==null?void 0:f.episExpirados)||0)>0||(l[21].totalEpisVencidos||0)>0)&&Ht(l),i=((u=l[21].episInfo)==null?void 0:u.tiposEpisAtivos)&&l[21].episInfo.tiposEpisAtivos.length>0&&Lt(l);return{c(){e=b("div"),G(t.$$.fragment),a=F(),o&&o.c(),r=F(),i&&i.c(),n=Ie(),this.h()},l(p){e=$(p,"DIV",{class:!0});var m=D(e);Z(t.$$.fragment,m),a=V(m),o&&o.l(m),m.forEach(g),r=V(p),i&&i.l(p),n=Ie(),this.h()},h(){E(e,"class","flex flex-wrap gap-1")},m(p,m){q(p,e,m),Q(t,e,null),d(e,a),o&&o.m(e,null),q(p,r,m),i&&i.m(p,m),q(p,n,m),s=!0},p(p,m){var w,I,A;const h={};m&16777217&&(h.$$scope={dirty:m,ctx:p}),t.$set(h),((w=p[21].episInfo)!=null&&w.episExpirados||p[21].totalEpisVencidos)&&((((I=p[21].episInfo)==null?void 0:I.episExpirados)||0)>0||(p[21].totalEpisVencidos||0)>0)?o?(o.p(p,m),m&1&&k(o,1)):(o=Ht(p),o.c(),k(o,1),o.m(e,null)):o&&(_e(),C(o,1,1,()=>{o=null}),ve()),(A=p[21].episInfo)!=null&&A.tiposEpisAtivos&&p[21].episInfo.tiposEpisAtivos.length>0?i?i.p(p,m):(i=Lt(p),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i(p){s||(k(t.$$.fragment,p),k(o),s=!0)},o(p){C(t.$$.fragment,p),C(o),s=!1},d(p){p&&(g(e),g(r),g(n)),B(t),o&&o.d(),i&&i.d(p)}}}function el(l){let e,t,a,r,n,s;a=new kr({props:{class:"w-4 h-4"}});function o(...i){return l[16](l[21],...i)}return{c(){e=b("div"),t=b("button"),G(a.$$.fragment),this.h()},l(i){e=$(i,"DIV",{class:!0});var c=D(e);t=$(c,"BUTTON",{class:!0,title:!0});var f=D(t);Z(a.$$.fragment,f),f.forEach(g),c.forEach(g),this.h()},h(){E(t,"class","p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700"),E(t,"title","Ver Detalhes"),E(e,"class","flex space-x-1")},m(i,c){q(i,e,c),d(e,t),Q(a,t,null),r=!0,n||(s=xe(t,"click",o),n=!0)},p(i,c){l=i},i(i){r||(k(a.$$.fragment,i),r=!0)},o(i){C(a.$$.fragment,i),r=!1},d(i){i&&g(e),B(a),n=!1,s()}}}function tl(l){let e,t,a,r,n,s,o,i,c;return e=new _t({props:{$$slots:{default:[Jr]},$$scope:{ctx:l}}}),a=new _t({props:{$$slots:{default:[Wr]},$$scope:{ctx:l}}}),n=new _t({props:{$$slots:{default:[Xr]},$$scope:{ctx:l}}}),o=new _t({props:{$$slots:{default:[el]},$$scope:{ctx:l}}}),{c(){G(e.$$.fragment),t=F(),G(a.$$.fragment),r=F(),G(n.$$.fragment),s=F(),G(o.$$.fragment),i=F()},l(f){Z(e.$$.fragment,f),t=V(f),Z(a.$$.fragment,f),r=V(f),Z(n.$$.fragment,f),s=V(f),Z(o.$$.fragment,f),i=V(f)},m(f,u){Q(e,f,u),q(f,t,u),Q(a,f,u),q(f,r,u),Q(n,f,u),q(f,s,u),Q(o,f,u),q(f,i,u),c=!0},p(f,u){const p={};u&16777217&&(p.$$scope={dirty:u,ctx:f}),e.$set(p);const m={};u&16777217&&(m.$$scope={dirty:u,ctx:f}),a.$set(m);const h={};u&16777217&&(h.$$scope={dirty:u,ctx:f}),n.$set(h);const w={};u&16777217&&(w.$$scope={dirty:u,ctx:f}),o.$set(w)},i(f){c||(k(e.$$.fragment,f),k(a.$$.fragment,f),k(n.$$.fragment,f),k(o.$$.fragment,f),c=!0)},o(f){C(e.$$.fragment,f),C(a.$$.fragment,f),C(n.$$.fragment,f),C(o.$$.fragment,f),c=!1},d(f){f&&(g(t),g(r),g(s),g(i)),B(e,f),B(a,f),B(n,f),B(o,f)}}}function Bt(l,e){let t,a,r;function n(){return e[17](e[21])}return a=new pr({props:{class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",$$slots:{default:[tl]},$$scope:{ctx:e}}}),a.$on("click",n),{key:l,first:null,c(){t=Ie(),G(a.$$.fragment),this.h()},l(s){t=Ie(),Z(a.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){q(s,t,o),Q(a,s,o),r=!0},p(s,o){e=s;const i={};o&16777217&&(i.$$scope={dirty:o,ctx:e}),a.$set(i)},i(s){r||(k(a.$$.fragment,s),r=!0)},o(s){C(a.$$.fragment,s),r=!1},d(s){s&&g(t),B(a,s)}}}function al(l){let e=[],t=new Map,a,r,n=Fe(l[0]);const s=o=>o[21].id;for(let o=0;o<n.length;o+=1){let i=Rt(l,n,o),c=s(i);t.set(c,e[o]=Bt(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();a=Ie()},l(o){for(let i=0;i<e.length;i+=1)e[i].l(o);a=Ie()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);q(o,a,i),r=!0},p(o,i){i&8193&&(n=Fe(o[0]),_e(),e=st(e,i,s,1,o,n,t,a.parentNode,ut,Bt,a,Rt),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(e[i]);r=!0}},o(o){for(let i=0;i<e.length;i+=1)C(e[i]);r=!1},d(o){o&&g(a);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function rl(l){let e,t,a,r;return e=new mr({props:{$$slots:{default:[Gr]},$$scope:{ctx:l}}}),a=new gr({props:{$$slots:{default:[al]},$$scope:{ctx:l}}}),{c(){G(e.$$.fragment),t=F(),G(a.$$.fragment)},l(n){Z(e.$$.fragment,n),t=V(n),Z(a.$$.fragment,n)},m(n,s){Q(e,n,s),q(n,t,s),Q(a,n,s),r=!0},p(n,s){const o={};s&16777216&&(o.$$scope={dirty:s,ctx:n}),e.$set(o);const i={};s&16777217&&(i.$$scope={dirty:s,ctx:n}),a.$set(i)},i(n){r||(k(e.$$.fragment,n),k(a.$$.fragment,n),r=!0)},o(n){C(e.$$.fragment,n),C(a.$$.fragment,n),r=!1},d(n){n&&g(t),B(e,n),B(a,n)}}}function Qt(l){let e,t,a,r=Math.min((l[3].currentPage-1)*l[3].pageSize+1,l[3].total)+"",n,s,o=Math.min(l[3].currentPage*l[3].pageSize,l[3].total)+"",i,c,f=l[3].total+"",u,p,m,h,w,I,A,N,S=l[3].currentPage+"",x,z,L=l[3].totalPages+"",O,H,W,_;return w=new Ne({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasPrev,$$slots:{default:[ll]},$$scope:{ctx:l}}}),w.$on("click",l[18]),W=new Ne({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasNext,$$slots:{default:[nl]},$$scope:{ctx:l}}}),W.$on("click",l[19]),{c(){e=b("div"),t=b("div"),a=R("Mostrando "),n=R(r),s=R(" a "),i=R(o),c=R(" de "),u=R(f),p=R(" resultados"),m=F(),h=b("div"),G(w.$$.fragment),I=F(),A=b("span"),N=R("P√°gina "),x=R(S),z=R(" de "),O=R(L),H=F(),G(W.$$.fragment),this.h()},l(P){e=$(P,"DIV",{class:!0});var T=D(e);t=$(T,"DIV",{class:!0});var y=D(t);a=M(y,"Mostrando "),n=M(y,r),s=M(y," a "),i=M(y,o),c=M(y," de "),u=M(y,f),p=M(y," resultados"),y.forEach(g),m=V(T),h=$(T,"DIV",{class:!0});var v=D(h);Z(w.$$.fragment,v),I=V(v),A=$(v,"SPAN",{class:!0});var j=D(A);N=M(j,"P√°gina "),x=M(j,S),z=M(j," de "),O=M(j,L),j.forEach(g),H=V(v),Z(W.$$.fragment,v),v.forEach(g),T.forEach(g),this.h()},h(){E(t,"class","text-sm text-gray-500 dark:text-gray-400"),E(A,"class","flex items-center px-3 text-sm text-gray-500 dark:text-gray-400"),E(h,"class","flex space-x-2"),E(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700")},m(P,T){q(P,e,T),d(e,t),d(t,a),d(t,n),d(t,s),d(t,i),d(t,c),d(t,u),d(t,p),d(e,m),d(e,h),Q(w,h,null),d(h,I),d(h,A),d(A,N),d(A,x),d(A,z),d(A,O),d(h,H),Q(W,h,null),_=!0},p(P,T){(!_||T&8)&&r!==(r=Math.min((P[3].currentPage-1)*P[3].pageSize+1,P[3].total)+"")&&oe(n,r),(!_||T&8)&&o!==(o=Math.min(P[3].currentPage*P[3].pageSize,P[3].total)+"")&&oe(i,o),(!_||T&8)&&f!==(f=P[3].total+"")&&oe(u,f);const y={};T&8&&(y.disabled=!P[3].hasPrev),T&16777216&&(y.$$scope={dirty:T,ctx:P}),w.$set(y),(!_||T&8)&&S!==(S=P[3].currentPage+"")&&oe(x,S),(!_||T&8)&&L!==(L=P[3].totalPages+"")&&oe(O,L);const v={};T&8&&(v.disabled=!P[3].hasNext),T&16777216&&(v.$$scope={dirty:T,ctx:P}),W.$set(v)},i(P){_||(k(w.$$.fragment,P),k(W.$$.fragment,P),_=!0)},o(P){C(w.$$.fragment,P),C(W.$$.fragment,P),_=!1},d(P){P&&g(e),B(w),B(W)}}}function ll(l){let e;return{c(){e=R("Anterior")},l(t){e=M(t,"Anterior")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function nl(l){let e;return{c(){e=R("Pr√≥ximo")},l(t){e=M(t,"Pr√≥ximo")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ol(l){let e,t,a,r,n='<h1 class="text-xl font-medium text-gray-900 dark:text-white">Fichas de EPI</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Gerencie as fichas individuais de equipamentos de prote√ß√£o</p>',s,o,i,c,f,u,p;i=new Ne({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Nr]},$$scope:{ctx:l}}}),i.$on("click",l[14]);const m=[Or,Tr,zr,Sr],h=[];function w(I,A){return I[1]?0:I[2]?1:I[0].length>0?2:3}return f=w(l),u=h[f]=m[f](l),{c(){e=F(),t=b("div"),a=b("div"),r=b("div"),r.innerHTML=n,s=F(),o=b("div"),G(i.$$.fragment),c=F(),u.c(),this.h()},l(I){Wa("svelte-161hi6l",document.head).forEach(g),e=V(I),t=$(I,"DIV",{class:!0});var N=D(t);a=$(N,"DIV",{class:!0});var S=D(a);r=$(S,"DIV",{"data-svelte-h":!0}),ke(r)!=="svelte-pifbsf"&&(r.innerHTML=n),s=V(S),o=$(S,"DIV",{class:!0});var x=D(o);Z(i.$$.fragment,x),x.forEach(g),S.forEach(g),c=V(N),u.l(N),N.forEach(g),this.h()},h(){document.title="Fichas de EPI - DataLife EPI",E(o,"class","flex space-x-2"),E(a,"class","flex items-center justify-between"),E(t,"class","space-y-6")},m(I,A){q(I,e,A),q(I,t,A),d(t,a),d(a,r),d(a,s),d(a,o),Q(i,o,null),d(t,c),h[f].m(t,null),p=!0},p(I,[A]){const N={};A&16777216&&(N.$$scope={dirty:A,ctx:I}),i.$set(N);let S=f;f=w(I),f===S?h[f].p(I,A):(_e(),C(h[S],1,1,()=>{h[S]=null}),ve(),u=h[f],u?u.p(I,A):(u=h[f]=m[f](I),u.c()),k(u,1),u.m(t,null))},i(I){p||(k(i.$$.fragment,I),k(u),p=!0)},o(I){C(i.$$.fragment,I),C(u),p=!1},d(I){I&&(g(e),g(t)),B(i),h[f].d()}}}function Zt(l){if(!l||l==="CPF n√£o dispon√≠vel"||l==="")return"CPF n√£o dispon√≠vel";const e=l.replace(/\D/g,"");return e.length!==11?l.includes("n√£o")?l:"CPF inv√°lido":e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}const Gt=l=>`${l.quantidade}x ${l.tipoEpiNome}`;function sl(l,e,t){let{items:a=[]}=e,{loading:r=!1}=e,{error:n=null}=e,{pagination:s}=e,{filters:o}=e,{filterOptions:i}=e;const c=Xe();function f(O){const H=O.target;c("searchChange",H.value)}function u(O){c("empresaFilterChange",O.detail)}function p(O){c("cargoFilterChange",O.detail)}function m(O){const H=O.target;console.log("‚òëÔ∏è FichasTablePresenter: Devolu√ß√£o pendente changed:",H.checked),c("devolucaoPendenteChange",H.checked)}function h(){c("clearFilters")}function w(O){c("pageChange",O)}function I(O){c("viewDetail",O)}function A(){c("novaFicha")}const N=()=>c("pageChange",s.currentPage),S=(O,H)=>{H.stopPropagation(),I(O.id.startsWith("FICHA")?O.id.substring(5):O.id)},x=O=>I(O.id),z=()=>w(s.currentPage-1),L=()=>w(s.currentPage+1);return l.$$set=O=>{"items"in O&&t(0,a=O.items),"loading"in O&&t(1,r=O.loading),"error"in O&&t(2,n=O.error),"pagination"in O&&t(3,s=O.pagination),"filters"in O&&t(4,o=O.filters),"filterOptions"in O&&t(5,i=O.filterOptions)},[a,r,n,s,o,i,c,f,u,p,m,h,w,I,A,N,S,x,z,L]}class il extends Qe{constructor(e){super(),Ze(this,e,sl,ol,Ge,{items:0,loading:1,error:2,pagination:3,filters:4,filterOptions:5})}}const nr={ESTOQUE_ITEM:/^I[2-9A-HJ-NP-Z][2-9A-HJ-NP-Z][2-9A-HJ-NP-Z][2-9A-HJ-NP-Z][2-9A-HJ-NP-Z]$/,UUID:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i};function cl(l){return typeof l=="string"&&nr.ESTOQUE_ITEM.test(l)}function or(l){return typeof l=="string"&&nr.UUID.test(l)}function ct(l){return!l||typeof l!="string"?l:or(l)?l.toLowerCase():l.toUpperCase()}function Ft(l,e="estoqueItem"){if(!l||typeof l!="string")return{originalId:l,mappedId:l,format:"unknown",isValid:!1,needsMapping:!1};const t=l.trim();return or(t)?{originalId:l,mappedId:ct(t),format:"uuid",isValid:!0,needsMapping:!1}:e==="estoqueItem"&&cl(t)?{originalId:l,mappedId:ct(t),format:"custom",isValid:!0,needsMapping:!1}:t.match(/^FICHA(\d+)$/i)&&e==="fichaEpi"?{originalId:l,mappedId:t.toUpperCase(),format:"legacy",isValid:!0,needsMapping:!1}:t.match(/^[0-9A-F]{4,8}$/i)&&e==="estoqueItem"?{originalId:l,mappedId:t.toUpperCase(),format:"legacy",isValid:!0,needsMapping:!1}:{originalId:l,mappedId:t,format:"legacy",isValid:!1,needsMapping:!0}}function fl(l){const e=[],t=[],a=Ft(l.fichaEpiId,"fichaEpi");a.format==="legacy"&&t.push(`fichaEpiId "${l.fichaEpiId}" est√° em formato legado mas √© aceito`);const r=Ft(l.responsavelId,"responsavel");r.format==="legacy"&&t.push(`responsavelId "${l.responsavelId}" est√° em formato legado mas √© aceito`);const n=l.itens.map((o,i)=>{const c=Ft(o.estoqueItemId,"estoqueItem");return c.format==="legacy"&&t.push(`itens[${i}].estoqueItemId "${o.estoqueItemId}" est√° em formato legado mas √© aceito`),c.isValid||e.push(`itens[${i}].estoqueItemId "${o.estoqueItemId}" √© inv√°lido`),{estoqueItemId:c.mappedId,quantidade:o.quantidade,mapping:c}}),s=n.filter(o=>!o.mapping.isValid);return s.length>0&&e.push(`IDs de estoque inv√°lidos: ${s.map(o=>o.estoqueItemId).join(", ")}`),e.length>0?{isValid:!1,errors:e,warnings:t}:{isValid:!0,mappedPayload:{fichaEpiId:a.mappedId,responsavelId:r.mappedId,itens:n.map(o=>({estoqueItemId:o.estoqueItemId,quantidade:o.quantidade}))},errors:[],warnings:t}}class ul{async createDelivery(e){var r,n,s,o,i,c;if(console.log("üöö DeliveryProcessAdapter: Criando entrega via ficha espec√≠fica..."),console.log("üîç FichaEpiId:",e.fichaEpiId),console.log("üîç ResponsavelId:",e.responsavelId),console.log("üîç Itens count:",((r=e.itens)==null?void 0:r.length)||0),!e.fichaEpiId)throw new Error("fichaEpiId √© obrigat√≥rio");if(!e.responsavelId)throw new Error("responsavelId √© obrigat√≥rio");if(!e.itens||e.itens.length===0)throw new Error("Pelo menos um item √© obrigat√≥rio");console.log("üîç Validando e mapeando IDs do payload...");const t=fl(e);if(t.warnings.length>0&&console.warn("‚ö†Ô∏è Avisos no mapeamento de IDs:",t.warnings),!t.isValid)throw console.error("‚ùå Erro no mapeamento de IDs:",t.errors),new Error(`IDs inv√°lidos: ${t.errors.join(", ")}`);const a=t.mappedPayload||e;console.log("‚úÖ Payload validado e mapeado:",{original:{fichaEpiId:e.fichaEpiId,responsavelId:e.responsavelId,itemCount:e.itens.length},mapped:{fichaEpiId:a.fichaEpiId,responsavelId:a.responsavelId,itemCount:a.itens.length}});try{const f=[];a.itens.forEach(m=>{var h,w;console.log("üîç Processando item para expans√£o:",{estoqueItemId:m.estoqueItemId,quantidade:m.quantidade,isUUID:(h=m.estoqueItemId)==null?void 0:h.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:(w=m.estoqueItemId)==null?void 0:w.match(/^[A-Z0-9]{6}$/i)});for(let I=0;I<m.quantidade;I++){const A=ct(m.estoqueItemId);f.push({estoqueItemOrigemId:A,numeroSerie:`SER-${A}-${I+1}`})}});const u={fichaEpiId:ct(a.fichaEpiId),quantidade:f.length,itens:f,assinaturaColaborador:"placeholder_signature",observacoes:e.observacoes||"",usuarioId:ct(a.responsavelId)};console.log("üìã Payload formatado para backend:",u),console.log("üîç Valida√ß√£o de IDs no payload:",{fichaEpiId:{value:a.fichaEpiId,isUUID:(n=a.fichaEpiId)==null?void 0:n.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:(s=a.fichaEpiId)==null?void 0:s.match(/^[A-Z0-9]{6}$/i)},usuarioId:{value:a.responsavelId,isUUID:(o=a.responsavelId)==null?void 0:o.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:(i=a.responsavelId)==null?void 0:i.match(/^[A-Z0-9]{6}$/i)},estoqueItemIds:f.map(m=>{var h,w;return{value:m.estoqueItemOrigemId,isUUID:(h=m.estoqueItemOrigemId)==null?void 0:h.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:(w=m.estoqueItemOrigemId)==null?void 0:w.match(/^[A-Z0-9]{6}$/i)}})});const p=await Te.post(`/fichas-epi/${a.fichaEpiId}/entregas`,u);return console.log("‚úÖ Entrega criada via endpoint da ficha:"),console.log(`  - Ficha ID: ${a.fichaEpiId} (original: ${e.fichaEpiId})`),console.log("  - Response:",p),p}catch(f){if(console.error("‚ùå Erro ao criar entrega via ficha:",f),f&&typeof f=="object"&&"response"in f){const u=f;(c=u.response)!=null&&c.data&&console.error("‚ùå Detalhes do erro do backend:",u.response.data)}throw f}}async validateDelivery(e){console.log("üîç DeliveryProcessAdapter: Validando entrega antes de criar:",e);try{const t=await Te.post("/fichas-epi/entregas/validar",e);return console.log("‚úÖ Valida√ß√£o da entrega conclu√≠da:",t),t}catch(t){throw console.error("‚ùå Erro na valida√ß√£o da entrega:",t),t}}async confirmSignature(e,t){console.log("‚úçÔ∏è DeliveryProcessAdapter: Confirmando assinatura:",e);try{const a={assinaturaColaborador:t.assinatura,observacoes:"Entrega assinada pelo colaborador"};await Te.put(`/fichas-epi/entregas/${e}/assinar`,a),console.log("‚úÖ Assinatura confirmada")}catch(a){throw console.error("‚ùå Erro ao confirmar assinatura:",a),a}}async cancelDelivery(e,t){console.log("‚ùå DeliveryProcessAdapter: Cancelando entrega:",e);try{await Te.post(`/entregas/${e}/cancel`,t),console.log("‚úÖ Entrega cancelada")}catch(a){throw console.error("‚ùå Erro ao cancelar entrega:",a),a}}async printDelivery(e){console.log("üñ®Ô∏è DeliveryProcessAdapter: Gerando PDF da entrega:",e);try{const t=await Te.get(`/entregas/${e}/print`);return console.log("‚úÖ PDF gerado"),t}catch(t){throw console.error("‚ùå Erro ao gerar PDF:",t),t}}async updateDelivery(e,t){console.log("‚úèÔ∏è DeliveryProcessAdapter: Editando entrega:",e);try{const a=await Te.put(`/entregas/${e}`,t);return console.log("‚úÖ Entrega editada"),a}catch(a){throw console.error("‚ùå Erro ao editar entrega:",a),a}}async createDevolucao(e,t){console.log("üîÑ DeliveryProcessAdapter: Criando devolu√ß√£o:",e,t);try{const a=await Te.post(`/fichas-epi/entregas/${e}/devolucao`,t);return console.log("‚úÖ Devolu√ß√£o criada com sucesso:",a),a}catch(a){throw console.error("‚ùå Erro ao criar devolu√ß√£o:",a),a}}async validateDevolucao(e,t){console.log("üîç DeliveryProcessAdapter: Validando devolu√ß√£o:",e,t);try{const a=await Te.post(`/fichas-epi/entregas/${e}/devolucao/validar`,t);return console.log("‚úÖ Valida√ß√£o de devolu√ß√£o conclu√≠da:",a),a}catch(a){throw console.error("‚ùå Erro na valida√ß√£o de devolu√ß√£o:",a),a}}async processBatchDevolucao(e){console.log("üîÑ DeliveryProcessAdapter: Processando devolu√ß√µes em lote:",e);try{const t=await Te.post("/devolucoes/process-batch",e);return console.log("‚úÖ Devolu√ß√µes em lote processadas:",t),t}catch(t){throw console.error("‚ùå Erro ao processar devolu√ß√µes em lote:",t),t}}}const vt=new ul;class dl{async processReturns(e){console.log("üîÑ ReturnProcessAdapter: Processando devolu√ß√µes em lote:",e),console.log(`  - Total de itens: ${e.devolucoes.length}`);try{console.log("üîç Endpoint atual sendo usado: /devolucoes/process-batch");const t=await Te.post("/devolucoes/process-batch",e);return console.log("‚úÖ Devolu√ß√µes processadas:"),console.log(`  - Processadas: ${t.data.processadas}`),console.log(`  - Erros: ${t.data.erros.length}`),console.log(`  - Fichas atualizadas: ${t.data.fichasAtualizadas.length}`),t}catch(t){throw console.error("‚ùå Erro ao processar devolu√ß√µes:",t),t}}async validateReturn(e){console.log("üîç ReturnProcessAdapter: Validando devolu√ß√£o:",e);try{const t=await Te.get(`/devolucoes/validate/${e}`);return t.podeDevolver?console.log("‚úÖ Equipamento pode ser devolvido"):console.log("‚ö†Ô∏è Equipamento n√£o pode ser devolvido:",t.motivo),t}catch(t){throw console.error("‚ùå Erro ao validar devolu√ß√£o:",t),t}}async getReturnHistory(e){console.log("üìã ReturnProcessAdapter: Buscando hist√≥rico de devolu√ß√µes:",e);try{const t=await Te.get(`/devolucoes/historico/${e}`);return console.log("‚úÖ Hist√≥rico de devolu√ß√µes carregado"),t}catch(t){throw console.error("‚ùå Erro ao buscar hist√≥rico de devolu√ß√µes:",t),t}}async cancelReturn(e,t){console.log("‚ùå ReturnProcessAdapter: Cancelando devolu√ß√£o:",e);try{await Te.post(`/devolucoes/${e}/cancel`,{motivo:t}),console.log("‚úÖ Devolu√ß√£o cancelada")}catch(a){throw console.error("‚ùå Erro ao cancelar devolu√ß√£o:",a),a}}async processIndividualReturn(e,t,a,r,n,s){var o;console.log("üîÑ ReturnProcessAdapter: Processando devolu√ß√£o individual via endpoint da documenta√ß√£o"),console.log(`  - FichaId: ${e}`),console.log(`  - EntregaId: ${t}`),console.log(`  - ItemEntregaId: ${a}`),console.log(`  - Motivo: ${r}`),console.log(`  - UsuarioId: ${n}`);try{const i={entregaId:t,itensParaDevolucao:[{itemId:a,motivo:r,condicaoItem:"BOM",observacoes:s||"Devolu√ß√£o via interface da ficha"}],usuarioId:n};console.log("üìã Payload da devolu√ß√£o individual:",JSON.stringify(i,null,2));const c=await Te.post(`/fichas-epi/${e}/devolucoes`,i);return console.log("‚úÖ Devolu√ß√£o individual processada via endpoint da documenta√ß√£o"),c}catch(i){throw console.error("‚ùå Erro ao processar devolu√ß√£o individual:",i),console.log("üîç Detalhes do erro:",((o=i.response)==null?void 0:o.data)||i.message),i}}}const ml=new dl,gl=Dr(new Map),pl=l=>({}),Jt=l=>({});function Wt(l){let e,t;return{c(){e=b("p"),t=R(l[2]),this.h()},l(a){e=$(a,"P",{class:!0});var r=D(e);t=M(r,l[2]),r.forEach(g),this.h()},h(){E(e,"class","text-xs mt-1 text-gray-400 dark:text-gray-500")},m(a,r){q(a,e,r),d(e,t)},p(a,r){r&4&&oe(t,a[2])},d(a){a&&g(e)}}}function hl(l){let e,t,a,r,n,s,o,i,c;t=new rr({props:{name:l[0],className:l[5][l[3]]+" mx-auto mb-2 text-gray-400 dark:text-gray-500"}});let f=l[2]&&Wt(l);const u=l[7].actions,p=bt(u,l,l[6],Jt);return{c(){e=b("div"),G(t.$$.fragment),a=F(),r=b("p"),n=R(l[1]),s=F(),f&&f.c(),o=F(),p&&p.c(),this.h()},l(m){e=$(m,"DIV",{class:!0});var h=D(e);Z(t.$$.fragment,h),a=V(h),r=$(h,"P",{class:!0});var w=D(r);n=M(w,l[1]),w.forEach(g),s=V(h),f&&f.l(h),o=V(h),p&&p.l(h),h.forEach(g),this.h()},h(){E(r,"class","font-medium text-sm"),E(e,"class",i="text-center "+l[4][l[3]]+" text-gray-500 dark:text-gray-400")},m(m,h){q(m,e,h),Q(t,e,null),d(e,a),d(e,r),d(r,n),d(e,s),f&&f.m(e,null),d(e,o),p&&p.m(e,null),c=!0},p(m,[h]){const w={};h&1&&(w.name=m[0]),h&40&&(w.className=m[5][m[3]]+" mx-auto mb-2 text-gray-400 dark:text-gray-500"),t.$set(w),(!c||h&2)&&oe(n,m[1]),m[2]?f?f.p(m,h):(f=Wt(m),f.c(),f.m(e,o)):f&&(f.d(1),f=null),p&&p.p&&(!c||h&64)&&Et(p,u,m,m[6],c?It(u,m[6],h,pl):kt(m[6]),Jt),(!c||h&24&&i!==(i="text-center "+m[4][m[3]]+" text-gray-500 dark:text-gray-400"))&&E(e,"class",i)},i(m){c||(k(t.$$.fragment,m),k(p,m),c=!0)},o(m){C(t.$$.fragment,m),C(p,m),c=!1},d(m){m&&g(e),B(t),f&&f.d(),p&&p.d(m)}}}function _l(l,e,t){let a,r,{$$slots:n={},$$scope:s}=e,{icon:o}=e,{message:i}=e,{description:c=""}=e,{size:f="md"}=e;return l.$$set=u=>{"icon"in u&&t(0,o=u.icon),"message"in u&&t(1,i=u.message),"description"in u&&t(2,c=u.description),"size"in u&&t(3,f=u.size),"$$scope"in u&&t(6,s=u.$$scope)},t(5,a={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}),t(4,r={sm:"py-4",md:"py-8",lg:"py-12"}),[o,i,c,f,r,a,s,n]}class Vt extends Qe{constructor(e){super(),Ze(this,e,_l,hl,Ge,{icon:0,message:1,description:2,size:3})}}const vl=l=>({}),Kt=l=>({}),$l=l=>({}),Yt=l=>({}),bl=l=>({}),Xt=l=>({});function ea(l){let e,t;const a=l[6].actions,r=bt(a,l,l[5],Yt);return{c(){e=b("div"),r&&r.c(),this.h()},l(n){e=$(n,"DIV",{class:!0});var s=D(e);r&&r.l(s),s.forEach(g),this.h()},h(){E(e,"class","flex-shrink-0 ml-4")},m(n,s){q(n,e,s),r&&r.m(e,null),t=!0},p(n,s){r&&r.p&&(!t||s&32)&&Et(r,a,n,n[5],t?It(a,n[5],s,$l):kt(n[5]),Yt)},i(n){t||(k(r,n),t=!0)},o(n){C(r,n),t=!1},d(n){n&&g(e),r&&r.d(n)}}}function El(l){let e,t,a,r,n,s,o,i;const c=l[6].content,f=bt(c,l,l[5],Xt);let u=l[1].actions&&ea(l);const p=l[6].footer,m=bt(p,l,l[5],Kt);return{c(){e=b("div"),t=b("div"),a=b("div"),f&&f.c(),r=F(),u&&u.c(),n=F(),m&&m.c(),this.h()},l(h){e=$(h,"DIV",{class:!0});var w=D(e);t=$(w,"DIV",{class:!0});var I=D(t);a=$(I,"DIV",{class:!0});var A=D(a);f&&f.l(A),A.forEach(g),r=V(I),u&&u.l(I),I.forEach(g),n=V(w),m&&m.l(w),w.forEach(g),this.h()},h(){E(a,"class","flex-1 min-w-0"),E(t,"class","flex justify-between items-start"),E(e,"class",l[0])},m(h,w){q(h,e,w),d(e,t),d(t,a),f&&f.m(a,null),d(t,r),u&&u.m(t,null),d(e,n),m&&m.m(e,null),s=!0,o||(i=xe(e,"click",l[7]),o=!0)},p(h,[w]){f&&f.p&&(!s||w&32)&&Et(f,c,h,h[5],s?It(c,h[5],w,bl):kt(h[5]),Xt),h[1].actions?u?(u.p(h,w),w&2&&k(u,1)):(u=ea(h),u.c(),k(u,1),u.m(t,null)):u&&(_e(),C(u,1,1,()=>{u=null}),ve()),m&&m.p&&(!s||w&32)&&Et(m,p,h,h[5],s?It(p,h[5],w,vl):kt(h[5]),Kt),(!s||w&1)&&E(e,"class",h[0])},i(h){s||(k(f,h),k(u),k(m,h),s=!0)},o(h){C(f,h),C(u),C(m,h),s=!1},d(h){h&&g(e),f&&f.d(h),u&&u.d(),m&&m.d(h),o=!1,i()}}}function kl(l,e,t){let a,{$$slots:r={},$$scope:n}=e;const s=ir(r);let{className:o=""}=e,{hoverable:i=!1}=e,{clickable:c=!1}=e;function f(u){ft.call(this,l,u)}return l.$$set=u=>{"className"in u&&t(2,o=u.className),"hoverable"in u&&t(3,i=u.hoverable),"clickable"in u&&t(4,c=u.clickable),"$$scope"in u&&t(5,n=u.$$scope)},l.$$.update=()=>{l.$$.dirty&28&&t(0,a=["border border-gray-200 dark:border-gray-700 rounded-sm p-4",i?"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors":"",c?"cursor-pointer":"",o].filter(Boolean).join(" "))},[a,s,o,i,c,n,r,f]}class sr extends Qe{constructor(e){super(),Ze(this,e,kl,El,Ge,{className:2,hoverable:3,clickable:4})}}function ta(l,e,t){const a=l.slice();return a[27]=e[t],a[28]=e,a[29]=t,a}function aa(l){let e,t,a,r,n,s,o,i,c,f,u,p,m,h,w,I,A,N,S,x,z,L;r=new dt({props:{title:"Nova Entrega de EPI",objectType:"NOVA ENTREGA",iconName:"PlusOutline",primaryAction:{text:l[1]?"Salvando...":"Criar Entrega",icon:l[1]?"":"CheckOutline",disabled:!l[6]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[13]),r.$on("primaryAction",l[12]),r.$on("secondaryAction",l[13]),i=new We({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Il]},$$scope:{ctx:l}}}),f=new nt({props:{options:l[7],value:l[3],placeholder:"Selecione um respons√°vel...",disabled:l[1]}}),f.$on("change",l[17]),h=new We({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[wl]},$$scope:{ctx:l}}}),I=new Ne({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Dl]},$$scope:{ctx:l}}}),I.$on("click",l[8]);const O=[yl,Cl],H=[];function W(_,P){return _[0].length===0?0:1}return N=W(l),S=H[N]=O[N](l),{c(){e=b("div"),t=F(),a=b("div"),G(r.$$.fragment),n=F(),s=b("div"),o=b("div"),G(i.$$.fragment),c=F(),G(f.$$.fragment),u=F(),p=b("div"),m=b("div"),G(h.$$.fragment),w=F(),G(I.$$.fragment),A=F(),S.c(),this.h()},l(_){e=$(_,"DIV",{class:!0,role:!0}),D(e).forEach(g),t=V(_),a=$(_,"DIV",{class:!0,role:!0,"aria-modal":!0});var P=D(a);Z(r.$$.fragment,P),n=V(P),s=$(P,"DIV",{class:!0,style:!0});var T=D(s);o=$(T,"DIV",{class:!0});var y=D(o);Z(i.$$.fragment,y),c=V(y),Z(f.$$.fragment,y),y.forEach(g),u=V(T),p=$(T,"DIV",{class:!0});var v=D(p);m=$(v,"DIV",{class:!0});var j=D(m);Z(h.$$.fragment,j),w=V(j),Z(I.$$.fragment,j),j.forEach(g),A=V(v),S.l(v),v.forEach(g),T.forEach(g),P.forEach(g),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(o,"class","mb-6"),E(m,"class","flex items-center justify-between mb-4"),E(p,"class","mb-6"),E(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(s,"height","calc(100% - 80px)"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(_,P){q(_,e,P),q(_,t,P),q(_,a,P),Q(r,a,null),d(a,n),d(a,s),d(s,o),Q(i,o,null),d(o,c),Q(f,o,null),d(s,u),d(s,p),d(p,m),Q(h,m,null),d(m,w),Q(I,m,null),d(p,A),H[N].m(p,null),x=!0,z||(L=[xe(e,"click",l[13]),xe(a,"click",Ct(l[16]))],z=!0)},p(_,P){const T={};P&66&&(T.primaryAction={text:_[1]?"Salvando...":"Criar Entrega",icon:_[1]?"":"CheckOutline",disabled:!_[6]}),P&2&&(T.secondaryAction={text:"Cancelar",disabled:_[1]}),r.$set(T);const y={};P&1073741824&&(y.$$scope={dirty:P,ctx:_}),i.$set(y);const v={};P&128&&(v.options=_[7]),P&8&&(v.value=_[3]),P&2&&(v.disabled=_[1]),f.$set(v);const j={};P&1073741824&&(j.$$scope={dirty:P,ctx:_}),h.$set(j);const J={};P&2&&(J.disabled=_[1]),P&1073741824&&(J.$$scope={dirty:P,ctx:_}),I.$set(J);let te=N;N=W(_),N===te?H[N].p(_,P):(_e(),C(H[te],1,1,()=>{H[te]=null}),ve(),S=H[N],S?S.p(_,P):(S=H[N]=O[N](_),S.c()),k(S,1),S.m(p,null))},i(_){x||(k(r.$$.fragment,_),k(i.$$.fragment,_),k(f.$$.fragment,_),k(h.$$.fragment,_),k(I.$$.fragment,_),k(S),x=!0)},o(_){C(r.$$.fragment,_),C(i.$$.fragment,_),C(f.$$.fragment,_),C(h.$$.fragment,_),C(I.$$.fragment,_),C(S),x=!1},d(_){_&&(g(e),g(t),g(a)),B(r),B(i),B(f),B(h),B(I),H[N].d(),z=!1,Dt(L)}}}function Il(l){let e;return{c(){e=R("Respons√°vel pela Entrega *")},l(t){e=M(t,"Respons√°vel pela Entrega *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function wl(l){let e;return{c(){e=R("EPIs para Entrega *")},l(t){e=M(t,"EPIs para Entrega *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Dl(l){let e,t,a;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){G(e.$$.fragment),t=R(`
              Adicionar Item`)},l(r){Z(e.$$.fragment,r),t=M(r,`
              Adicionar Item`)},m(r,n){Q(e,r,n),q(r,t,n),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),a=!1},d(r){r&&g(t),B(e,r)}}}function Cl(l){let e,t,a,r=Fe(l[4]),n=[];for(let i=0;i<r.length;i+=1)n[i]=na(ta(l,r,i));const s=i=>C(n[i],1,1,()=>{n[i]=null});let o=l[4].length===0&&oa(l);return{c(){e=b("div");for(let i=0;i<n.length;i+=1)n[i].c();t=F(),o&&o.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var c=D(e);for(let f=0;f<n.length;f+=1)n[f].l(c);t=V(c),o&&o.l(c),c.forEach(g),this.h()},h(){E(e,"class","space-y-4")},m(i,c){q(i,e,c);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);d(e,t),o&&o.m(e,null),a=!0},p(i,c){if(c&17970){r=Fe(i[4]);let f;for(f=0;f<r.length;f+=1){const u=ta(i,r,f);n[f]?(n[f].p(u,c),k(n[f],1)):(n[f]=na(u),n[f].c(),k(n[f],1),n[f].m(e,t))}for(_e(),f=r.length;f<n.length;f+=1)s(f);ve()}i[4].length===0?o?(o.p(i,c),c&16&&k(o,1)):(o=oa(i),o.c(),k(o,1),o.m(e,null)):o&&(_e(),C(o,1,1,()=>{o=null}),ve())},i(i){if(!a){for(let c=0;c<r.length;c+=1)k(n[c]);k(o),a=!0}},o(i){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)C(n[c]);C(o),a=!1},d(i){i&&g(e),yt(n,i),o&&o.d()}}}function yl(l){let e,t,a,r,n,s="Nenhum EPI Dispon√≠vel",o,i,c="N√£o h√° EPIs dispon√≠veis para entrega no momento. Verifique o estoque ou entre em contato com o administrador.",f;return a=new St({props:{class:"mx-auto mb-2 text-red-500 w-8 h-8"}}),{c(){e=b("div"),t=b("div"),G(a.$$.fragment),r=F(),n=b("h4"),n.textContent=s,o=F(),i=b("p"),i.textContent=c,this.h()},l(u){e=$(u,"DIV",{class:!0});var p=D(e);t=$(p,"DIV",{class:!0});var m=D(t);Z(a.$$.fragment,m),r=V(m),n=$(m,"H4",{class:!0,"data-svelte-h":!0}),ke(n)!=="svelte-1y6kxv5"&&(n.textContent=s),o=V(m),i=$(m,"P",{class:!0,"data-svelte-h":!0}),ke(i)!=="svelte-4gen4i"&&(i.textContent=c),m.forEach(g),p.forEach(g),this.h()},h(){E(n,"class","text-sm font-medium text-red-800 dark:text-red-200 mb-1"),E(i,"class","text-sm text-red-600 dark:text-red-400"),E(t,"class","text-center"),E(e,"class","p-4 border-2 border-dashed border-red-300 rounded-lg bg-red-50 dark:bg-red-900/20")},m(u,p){q(u,e,p),d(e,t),Q(a,t,null),d(t,r),d(t,n),d(t,o),d(t,i),f=!0},p:Ae,i(u){f||(k(a.$$.fragment,u),f=!0)},o(u){C(a.$$.fragment,u),f=!1},d(u){u&&g(e),B(a)}}}function ra(l){let e,t,a,r,n;t=new er({props:{class:"w-4 h-4"}});function s(){return l[18](l[29])}return{c(){e=b("button"),G(t.$$.fragment),this.h()},l(o){e=$(o,"BUTTON",{class:!0,title:!0});var i=D(e);Z(t.$$.fragment,i),i.forEach(g),this.h()},h(){E(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],E(e,"title","Remover item")},m(o,i){q(o,e,i),Q(t,e,null),a=!0,r||(n=xe(e,"click",s),r=!0)},p(o,i){l=o,(!a||i&2)&&(e.disabled=l[1])},i(o){a||(k(t.$$.fragment,o),a=!0)},o(o){C(t.$$.fragment,o),a=!1},d(o){o&&g(e),B(t),r=!1,n()}}}function Pl(l){let e;return{c(){e=R("Equipamento")},l(t){e=M(t,"Equipamento")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Al(l){let e;return{c(){e=R("Quantidade")},l(t){e=M(t,"Quantidade")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function la(l){let e,t,a,r,n=l[27].nomeEquipamento+"",s,o,i,c,f=l[27].registroCA+"",u,p,m,h,w,I=l[27].quantidade+"",A;return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),s=R(n),o=F(),i=b("p"),c=R("CA "),u=R(f),p=F(),m=b("div"),h=b("p"),w=R("Qtd: "),A=R(I),this.h()},l(N){e=$(N,"DIV",{class:!0});var S=D(e);t=$(S,"DIV",{class:!0});var x=D(t);a=$(x,"DIV",{});var z=D(a);r=$(z,"P",{class:!0});var L=D(r);s=M(L,n),L.forEach(g),o=V(z),i=$(z,"P",{class:!0});var O=D(i);c=M(O,"CA "),u=M(O,f),O.forEach(g),z.forEach(g),p=V(x),m=$(x,"DIV",{class:!0});var H=D(m);h=$(H,"P",{class:!0});var W=D(h);w=M(W,"Qtd: "),A=M(W,I),W.forEach(g),H.forEach(g),x.forEach(g),S.forEach(g),this.h()},h(){E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","text-xs text-gray-500 dark:text-gray-400"),E(h,"class","text-sm font-medium text-gray-900 dark:text-white"),E(m,"class","text-right"),E(t,"class","flex items-center justify-between"),E(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(N,S){q(N,e,S),d(e,t),d(t,a),d(a,r),d(r,s),d(a,o),d(a,i),d(i,c),d(i,u),d(t,p),d(t,m),d(m,h),d(h,w),d(h,A)},p(N,S){S&16&&n!==(n=N[27].nomeEquipamento+"")&&oe(s,n),S&16&&f!==(f=N[27].registroCA+"")&&oe(u,f),S&16&&I!==(I=N[27].quantidade+"")&&oe(A,I)},d(N){N&&g(e)}}}function na(l){let e,t,a,r,n=l[29]+1+"",s,o,i,c,f,u,p,m,h,w,I,A,N,S,x,z,L,O=l[4].length>1&&ra(l);u=new We({props:{for:"epi-"+l[29],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Pl]},$$scope:{ctx:l}}});function H(...y){return l[19](l[29],...y)}m=new nt({props:{options:l[5],value:l[27].episDisponivelId,placeholder:"Selecione um EPI...",disabled:l[1]}}),m.$on("change",H),I=new We({props:{for:"quantidade-"+l[29],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Al]},$$scope:{ctx:l}}});function W(y){l[20](y,l[27])}function _(...y){return l[21](l[29],...y)}let P={id:"quantidade-"+l[29],type:"number",min:"1",max:"100",class:"rounded-sm",disabled:l[1]};l[27].quantidade!==void 0&&(P.value=l[27].quantidade),N=new At({props:P}),Le.push(()=>Ue(N,"value",W)),N.$on("input",_);let T=l[27].nomeEquipamento&&la(l);return{c(){e=b("div"),t=b("div"),a=b("h4"),r=R("Item "),s=R(n),o=F(),O&&O.c(),i=F(),c=b("div"),f=b("div"),G(u.$$.fragment),p=F(),G(m.$$.fragment),h=F(),w=b("div"),G(I.$$.fragment),A=F(),G(N.$$.fragment),x=F(),T&&T.c(),z=F(),this.h()},l(y){e=$(y,"DIV",{class:!0});var v=D(e);t=$(v,"DIV",{class:!0});var j=D(t);a=$(j,"H4",{class:!0});var J=D(a);r=M(J,"Item "),s=M(J,n),J.forEach(g),o=V(j),O&&O.l(j),j.forEach(g),i=V(v),c=$(v,"DIV",{class:!0});var te=D(c);f=$(te,"DIV",{class:!0});var ne=D(f);Z(u.$$.fragment,ne),p=V(ne),Z(m.$$.fragment,ne),ne.forEach(g),h=V(te),w=$(te,"DIV",{});var le=D(w);Z(I.$$.fragment,le),A=V(le),Z(N.$$.fragment,le),le.forEach(g),te.forEach(g),x=V(v),T&&T.l(v),z=V(v),v.forEach(g),this.h()},h(){E(a,"class","text-sm font-medium text-gray-900 dark:text-white"),E(t,"class","flex items-start justify-between mb-4"),E(f,"class","md:col-span-2"),E(c,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(y,v){q(y,e,v),d(e,t),d(t,a),d(a,r),d(a,s),d(t,o),O&&O.m(t,null),d(e,i),d(e,c),d(c,f),Q(u,f,null),d(f,p),Q(m,f,null),d(c,h),d(c,w),Q(I,w,null),d(w,A),Q(N,w,null),d(e,x),T&&T.m(e,null),d(e,z),L=!0},p(y,v){l=y,l[4].length>1?O?(O.p(l,v),v&16&&k(O,1)):(O=ra(l),O.c(),k(O,1),O.m(t,null)):O&&(_e(),C(O,1,1,()=>{O=null}),ve());const j={};v&1073741824&&(j.$$scope={dirty:v,ctx:l}),u.$set(j);const J={};v&32&&(J.options=l[5]),v&16&&(J.value=l[27].episDisponivelId),v&2&&(J.disabled=l[1]),m.$set(J);const te={};v&1073741824&&(te.$$scope={dirty:v,ctx:l}),I.$set(te);const ne={};v&2&&(ne.disabled=l[1]),!S&&v&16&&(S=!0,ne.value=l[27].quantidade,Be(()=>S=!1)),N.$set(ne),l[27].nomeEquipamento?T?T.p(l,v):(T=la(l),T.c(),T.m(e,z)):T&&(T.d(1),T=null)},i(y){L||(k(O),k(u.$$.fragment,y),k(m.$$.fragment,y),k(I.$$.fragment,y),k(N.$$.fragment,y),L=!0)},o(y){C(O),C(u.$$.fragment,y),C(m.$$.fragment,y),C(I.$$.fragment,y),C(N.$$.fragment,y),L=!1},d(y){y&&g(e),O&&O.d(),B(u),B(m),B(I),B(N),T&&T.d()}}}function oa(l){let e,t,a,r,n="Nenhum item adicionado",s,o,i;return t=new it({props:{class:"w-8 h-8 mx-auto mb-3 text-gray-400"}}),o=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Vl]},$$scope:{ctx:l}}}),o.$on("click",l[8]),{c(){e=b("div"),G(t.$$.fragment),a=F(),r=b("p"),r.textContent=n,s=F(),G(o.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var f=D(e);Z(t.$$.fragment,f),a=V(f),r=$(f,"P",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-1e863on"&&(r.textContent=n),s=V(f),Z(o.$$.fragment,f),f.forEach(g),this.h()},h(){E(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),E(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(c,f){q(c,e,f),Q(t,e,null),d(e,a),d(e,r),d(e,s),Q(o,e,null),i=!0},p(c,f){const u={};f&2&&(u.disabled=c[1]),f&1073741824&&(u.$$scope={dirty:f,ctx:c}),o.$set(u)},i(c){i||(k(t.$$.fragment,c),k(o.$$.fragment,c),i=!0)},o(c){C(t.$$.fragment,c),C(o.$$.fragment,c),i=!1},d(c){c&&g(e),B(t),B(o)}}}function Vl(l){let e;return{c(){e=R("Adicionar Primeiro Item")},l(t){e=M(t,"Adicionar Primeiro Item")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Fl(l){let e,t,a=l[2]&&aa(l);return{c(){a&&a.c(),e=Ie()},l(r){a&&a.l(r),e=Ie()},m(r,n){a&&a.m(r,n),q(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&k(a,1)):(a=aa(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(_e(),C(a,1,1,()=>{a=null}),ve())},i(r){t||(k(a),t=!0)},o(r){C(a),t=!1},d(r){r&&g(e),a&&a.d(r)}}}function ql(l,e,t){let a,r,n,{episDisponiveis:s=[]}=e,{usuarios:o=[]}=e,{loading:i=!1}=e,{show:c=!1}=e;const f=Xe();let u="",p="",m=[];function h(){u="",t(3,p=""),t(4,m=[])}function w(){t(4,m=[...m,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function I(y){t(4,m=m.filter((v,j)=>j!==y))}function A(y,v){const j=s.find(J=>J.id===v);j&&t(4,m[y]={...m[y],episDisponivelId:v,nomeEquipamento:j.nomeEquipamento,registroCA:j.numeroCA||j.registroCA},m)}function N(y,v){t(4,m[y]={...m[y],quantidade:v},m)}function S(y){const v=o.find(j=>j.id===y);v&&(t(3,p=y),u=v.nome)}function x(){if(console.log("üìù NovaEntregaDrawer: Preparando dados do formul√°rio..."),console.log("üìã Itens selecionados originais:",m),console.log("üë§ Usuario respons√°vel ID:",p),console.log("üì¶ Validando itens..."),!p.trim()){console.error("‚ùå Erro: usu√°rio respons√°vel n√£o selecionado");return}if(m.length===0){console.error("‚ùå Erro: nenhum item selecionado");return}const y=m.filter(J=>J.episDisponivelId&&J.quantidade>0);if(y.length===0){console.error("‚ùå Erro: nenhum item v√°lido selecionado");return}const v={responsavel:u.trim(),usuarioResponsavelId:p.trim(),responsavelId:p.trim(),itens:y.map(J=>({episDisponivelId:J.episDisponivelId,nomeEquipamento:J.nomeEquipamento,registroCA:J.registroCA,quantidade:J.quantidade,estoqueItemId:J.episDisponivelId}))};console.log("‚úÖ FormData montado:",{responsavel:v.responsavel,usuarioId:v.usuarioResponsavelId,totalItens:v.itens.length,itens:v.itens.map((J,te)=>({index:te+1,id:J.episDisponivelId,nome:J.nomeEquipamento,ca:J.registroCA,quantidade:J.quantidade}))});const j=new Set(v.itens.map(J=>J.episDisponivelId));console.log(`üéØ Verifica√ß√£o de tipos √∫nicos: ${j.size} tipos √∫nicos de ${v.itens.length} itens totais`),j.size<v.itens.length&&console.warn("‚ö†Ô∏è ALERTA: Alguns itens t√™m o mesmo episDisponivelId - isso pode causar problemas na expans√£o"),f("salvar",v)}function z(){f("cancelar")}function L(y,v){const j=y.currentTarget;N(v,parseInt(j.value)||1)}function O(y){ft.call(this,l,y)}const H=y=>S(y.detail),W=y=>I(y),_=(y,v)=>A(y,v.detail);function P(y,v){l.$$.not_equal(v.quantidade,y)&&(v.quantidade=y,t(4,m))}const T=(y,v)=>L(v,y);return l.$$set=y=>{"episDisponiveis"in y&&t(0,s=y.episDisponiveis),"usuarios"in y&&t(15,o=y.usuarios),"loading"in y&&t(1,i=y.loading),"show"in y&&t(2,c=y.show)},l.$$.update=()=>{l.$$.dirty&20&&c&&m.length===0&&(h(),w()),l.$$.dirty&32776&&o.length>0&&!p&&(t(3,p=o[0].id),u=o[0].nome),l.$$.dirty&1&&t(5,a=[{value:"",label:"Selecione um EPI..."},...s.map(y=>({value:y.id,label:`${y.nomeEquipamento} (CA ${y.numeroCA||y.registroCA}) - ${y.quantidadeDisponivel} dispon√≠veis`}))]),l.$$.dirty&33&&(s==null?void 0:s.length)>0&&(console.log("üéØ NovaEntregaDrawer: EPIs dispon√≠veis atualizados:",s.length),console.log("üì¶ Amostra de EPIs no drawer:",s.slice(0,2)),console.log("üîß Op√ß√µes do select:",a.slice(0,3))),l.$$.dirty&32768&&t(7,r=[{value:"",label:"Selecione um respons√°vel..."},...o.map(y=>({value:y.id,label:`${y.nome} (${y.email})`}))]),l.$$.dirty&27&&t(6,n=p.trim()&&m.length>0&&!i&&s.length>0)},[s,i,c,p,m,a,n,r,w,I,A,S,x,z,L,o,O,H,W,_,P,T]}class Nl extends Qe{constructor(e){super(),Ze(this,e,ql,Fl,Ge,{episDisponiveis:0,usuarios:15,loading:1,show:2})}}function sa(l,e,t){const a=l.slice();return a[28]=e[t],a[29]=e,a[30]=t,a}function ia(l){var pe;let e,t,a,r,n,s,o,i,c,f,u,p,m,h,w,I,A,N,S,x,z,L,O,H,W,_,P,T,y,v,j,J,te,ne;r=new dt({props:{title:"Editar Entrega #"+(((pe=l[0])==null?void 0:pe.id)||"")}}),r.$on("close",l[12]);let le=l[0]&&ca(l);f=new We({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Sl]},$$scope:{ctx:l}}});function ae(U){l[16](U)}let K={id:"responsavel",type:"text",placeholder:"Nome do respons√°vel pela entrega",class:"rounded-sm "+(l[5].responsavel?"border-red-500":""),disabled:l[1]};l[3]!==void 0&&(K.value=l[3]),p=new At({props:K}),Le.push(()=>Ue(p,"value",ae));let ce=l[5].responsavel&&fa(l);N=new We({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[zl]},$$scope:{ctx:l}}}),x=new Ne({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Tl]},$$scope:{ctx:l}}}),x.$on("click",l[8]);let fe=l[5].items&&ua(l),de=Fe(l[4]),ie=[];for(let U=0;U<de.length;U+=1)ie[U]=ha(sa(l,de,U));const Y=U=>C(ie[U],1,1,()=>{ie[U]=null});let X=l[4].length===0&&_a(l),se=l[4].length>0&&va(l);return y=new Ne({props:{color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[xl]},$$scope:{ctx:l}}}),y.$on("click",l[12]),j=new Ne({props:{color:"primary",class:"rounded-sm",disabled:!l[6],$$slots:{default:[Ll]},$$scope:{ctx:l}}}),j.$on("click",l[11]),{c(){e=b("div"),t=F(),a=b("div"),G(r.$$.fragment),n=F(),s=b("div"),o=b("div"),le&&le.c(),i=F(),c=b("div"),G(f.$$.fragment),u=F(),G(p.$$.fragment),h=F(),ce&&ce.c(),w=F(),I=b("div"),A=b("div"),G(N.$$.fragment),S=F(),G(x.$$.fragment),z=F(),fe&&fe.c(),L=F(),O=b("div");for(let U=0;U<ie.length;U+=1)ie[U].c();H=F(),X&&X.c(),W=F(),se&&se.c(),_=F(),P=b("div"),T=b("div"),G(y.$$.fragment),v=F(),G(j.$$.fragment),this.h()},l(U){e=$(U,"DIV",{class:!0,role:!0}),D(e).forEach(g),t=V(U),a=$(U,"DIV",{class:!0,role:!0,"aria-modal":!0});var re=D(a);Z(r.$$.fragment,re),n=V(re),s=$(re,"DIV",{class:!0});var me=D(s);o=$(me,"DIV",{class:!0,style:!0});var $e=D(o);le&&le.l($e),i=V($e),c=$($e,"DIV",{class:!0});var Ee=D(c);Z(f.$$.fragment,Ee),u=V(Ee),Z(p.$$.fragment,Ee),h=V(Ee),ce&&ce.l(Ee),Ee.forEach(g),w=V($e),I=$($e,"DIV",{class:!0});var Ve=D(I);A=$(Ve,"DIV",{class:!0});var De=D(A);Z(N.$$.fragment,De),S=V(De),Z(x.$$.fragment,De),De.forEach(g),z=V(Ve),fe&&fe.l(Ve),L=V(Ve),O=$(Ve,"DIV",{class:!0});var ye=D(O);for(let ge=0;ge<ie.length;ge+=1)ie[ge].l(ye);H=V(ye),X&&X.l(ye),ye.forEach(g),Ve.forEach(g),W=V($e),se&&se.l($e),$e.forEach(g),_=V(me),P=$(me,"DIV",{class:!0});var Se=D(P);T=$(Se,"DIV",{class:!0});var qe=D(T);Z(y.$$.fragment,qe),v=V(qe),Z(j.$$.fragment,qe),qe.forEach(g),Se.forEach(g),me.forEach(g),re.forEach(g),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(c,"class","mb-6"),E(A,"class","flex items-center justify-between mb-4"),E(O,"class","space-y-4"),E(I,"class","mb-6"),E(o,"class","flex-1 overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(o,"height","calc(100% - 80px)"),E(T,"class","flex items-center justify-end space-x-3"),E(P,"class","flex-shrink-0 bg-gray-50 dark:bg-gray-800 px-6 py-4 border-t border-gray-200 dark:border-gray-700"),E(s,"class","flex flex-col h-full"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(U,re){q(U,e,re),q(U,t,re),q(U,a,re),Q(r,a,null),d(a,n),d(a,s),d(s,o),le&&le.m(o,null),d(o,i),d(o,c),Q(f,c,null),d(c,u),Q(p,c,null),d(c,h),ce&&ce.m(c,null),d(o,w),d(o,I),d(I,A),Q(N,A,null),d(A,S),Q(x,A,null),d(I,z),fe&&fe.m(I,null),d(I,L),d(I,O);for(let me=0;me<ie.length;me+=1)ie[me]&&ie[me].m(O,null);d(O,H),X&&X.m(O,null),d(o,W),se&&se.m(o,null),d(s,_),d(s,P),d(P,T),Q(y,T,null),d(T,v),Q(j,T,null),J=!0,te||(ne=[xe(e,"click",l[12]),xe(a,"click",Ct(l[15]))],te=!0)},p(U,re){var qe;const me={};re[0]&1&&(me.title="Editar Entrega #"+(((qe=U[0])==null?void 0:qe.id)||"")),r.$set(me),U[0]?le?le.p(U,re):(le=ca(U),le.c(),le.m(o,i)):le&&(le.d(1),le=null);const $e={};re[1]&1&&($e.$$scope={dirty:re,ctx:U}),f.$set($e);const Ee={};re[0]&32&&(Ee.class="rounded-sm "+(U[5].responsavel?"border-red-500":"")),re[0]&2&&(Ee.disabled=U[1]),!m&&re[0]&8&&(m=!0,Ee.value=U[3],Be(()=>m=!1)),p.$set(Ee),U[5].responsavel?ce?ce.p(U,re):(ce=fa(U),ce.c(),ce.m(c,null)):ce&&(ce.d(1),ce=null);const Ve={};re[1]&1&&(Ve.$$scope={dirty:re,ctx:U}),N.$set(Ve);const De={};if(re[0]&2&&(De.disabled=U[1]),re[1]&1&&(De.$$scope={dirty:re,ctx:U}),x.$set(De),U[5].items?fe?fe.p(U,re):(fe=ua(U),fe.c(),fe.m(I,L)):fe&&(fe.d(1),fe=null),re[0]&9906){de=Fe(U[4]);let ge;for(ge=0;ge<de.length;ge+=1){const ze=sa(U,de,ge);ie[ge]?(ie[ge].p(ze,re),k(ie[ge],1)):(ie[ge]=ha(ze),ie[ge].c(),k(ie[ge],1),ie[ge].m(O,H))}for(_e(),ge=de.length;ge<ie.length;ge+=1)Y(ge);ve()}U[4].length===0?X?(X.p(U,re),re[0]&16&&k(X,1)):(X=_a(U),X.c(),k(X,1),X.m(O,null)):X&&(_e(),C(X,1,1,()=>{X=null}),ve()),U[4].length>0?se?se.p(U,re):(se=va(U),se.c(),se.m(o,null)):se&&(se.d(1),se=null);const ye={};re[0]&2&&(ye.disabled=U[1]),re[1]&1&&(ye.$$scope={dirty:re,ctx:U}),y.$set(ye);const Se={};re[0]&64&&(Se.disabled=!U[6]),re[0]&2|re[1]&1&&(Se.$$scope={dirty:re,ctx:U}),j.$set(Se)},i(U){if(!J){k(r.$$.fragment,U),k(f.$$.fragment,U),k(p.$$.fragment,U),k(N.$$.fragment,U),k(x.$$.fragment,U);for(let re=0;re<de.length;re+=1)k(ie[re]);k(X),k(y.$$.fragment,U),k(j.$$.fragment,U),J=!0}},o(U){C(r.$$.fragment,U),C(f.$$.fragment,U),C(p.$$.fragment,U),C(N.$$.fragment,U),C(x.$$.fragment,U),ie=ie.filter(Boolean);for(let re=0;re<ie.length;re+=1)C(ie[re]);C(X),C(y.$$.fragment,U),C(j.$$.fragment,U),J=!1},d(U){U&&(g(e),g(t),g(a)),B(r),le&&le.d(),B(f),B(p),ce&&ce.d(),B(N),B(x),fe&&fe.d(),yt(ie,U),X&&X.d(),se&&se.d(),B(y),B(j),te=!1,Dt(ne)}}}function ca(l){let e,t,a="Informa√ß√µes da Entrega Original",r,n,s,o,i=new Date(l[0].dataEntrega).toLocaleDateString("pt-BR")+"",c,f,u,p,m=l[0].status==="assinado"?"Assinado":"Pendente Assinatura",h,w,I,A,N=l[0].id+"",S;return{c(){e=b("div"),t=b("h4"),t.textContent=a,r=F(),n=b("div"),s=b("p"),o=R("‚Ä¢ Data: "),c=R(i),f=F(),u=b("p"),p=R("‚Ä¢ Status: "),h=R(m),w=F(),I=b("p"),A=R("‚Ä¢ ID: #"),S=R(N),this.h()},l(x){e=$(x,"DIV",{class:!0});var z=D(e);t=$(z,"H4",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-1p8cqi4"&&(t.textContent=a),r=V(z),n=$(z,"DIV",{class:!0});var L=D(n);s=$(L,"P",{});var O=D(s);o=M(O,"‚Ä¢ Data: "),c=M(O,i),O.forEach(g),f=V(L),u=$(L,"P",{});var H=D(u);p=M(H,"‚Ä¢ Status: "),h=M(H,m),H.forEach(g),w=V(L),I=$(L,"P",{});var W=D(I);A=M(W,"‚Ä¢ ID: #"),S=M(W,N),W.forEach(g),L.forEach(g),z.forEach(g),this.h()},h(){E(t,"class","text-sm font-medium text-blue-900 dark:text-blue-100 mb-2"),E(n,"class","text-sm text-blue-800 dark:text-blue-200"),E(e,"class","mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800")},m(x,z){q(x,e,z),d(e,t),d(e,r),d(e,n),d(n,s),d(s,o),d(s,c),d(n,f),d(n,u),d(u,p),d(u,h),d(n,w),d(n,I),d(I,A),d(I,S)},p(x,z){z[0]&1&&i!==(i=new Date(x[0].dataEntrega).toLocaleDateString("pt-BR")+"")&&oe(c,i),z[0]&1&&m!==(m=x[0].status==="assinado"?"Assinado":"Pendente Assinatura")&&oe(h,m),z[0]&1&&N!==(N=x[0].id+"")&&oe(S,N)},d(x){x&&g(e)}}}function Sl(l){let e;return{c(){e=R("Respons√°vel pela Entrega *")},l(t){e=M(t,"Respons√°vel pela Entrega *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function fa(l){let e,t=l[5].responsavel+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=D(e);a=M(n,t),n.forEach(g),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){q(r,e,n),d(e,a)},p(r,n){n[0]&32&&t!==(t=r[5].responsavel+"")&&oe(a,t)},d(r){r&&g(e)}}}function zl(l){let e;return{c(){e=R("EPIs da Entrega *")},l(t){e=M(t,"EPIs da Entrega *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Tl(l){let e,t,a;return e=new it({props:{class:"mr-2 w-4 h-4"}}),{c(){G(e.$$.fragment),t=R(`
              Adicionar Item`)},l(r){Z(e.$$.fragment,r),t=M(r,`
              Adicionar Item`)},m(r,n){Q(e,r,n),q(r,t,n),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),a=!1},d(r){r&&g(t),B(e,r)}}}function ua(l){let e,t=l[5].items+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=D(e);a=M(n,t),n.forEach(g),this.h()},h(){E(e,"class","mb-3 text-sm text-red-600 dark:text-red-400")},m(r,n){q(r,e,n),d(e,a)},p(r,n){n[0]&32&&t!==(t=r[5].items+"")&&oe(a,t)},d(r){r&&g(e)}}}function da(l){let e,t,a,r,n;t=new er({props:{class:"w-4 h-4"}});function s(){return l[17](l[30])}return{c(){e=b("button"),G(t.$$.fragment),this.h()},l(o){e=$(o,"BUTTON",{class:!0,title:!0});var i=D(e);Z(t.$$.fragment,i),i.forEach(g),this.h()},h(){E(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],E(e,"title","Remover item")},m(o,i){q(o,e,i),Q(t,e,null),a=!0,r||(n=xe(e,"click",s),r=!0)},p(o,i){l=o,(!a||i[0]&2)&&(e.disabled=l[1])},i(o){a||(k(t.$$.fragment,o),a=!0)},o(o){C(t.$$.fragment,o),a=!1},d(o){o&&g(e),B(t),r=!1,n()}}}function Ol(l){let e;return{c(){e=R("Equipamento")},l(t){e=M(t,"Equipamento")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ma(l){let e,t=l[5][`item-${l[30]}`]+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=D(e);a=M(n,t),n.forEach(g),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){q(r,e,n),d(e,a)},p(r,n){n[0]&32&&t!==(t=r[5][`item-${r[30]}`]+"")&&oe(a,t)},d(r){r&&g(e)}}}function Ml(l){let e;return{c(){e=R("Quantidade")},l(t){e=M(t,"Quantidade")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ga(l){let e,t=l[5][`quantidade-${l[30]}`]+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=D(e);a=M(n,t),n.forEach(g),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){q(r,e,n),d(e,a)},p(r,n){n[0]&32&&t!==(t=r[5][`quantidade-${r[30]}`]+"")&&oe(a,t)},d(r){r&&g(e)}}}function pa(l){let e,t,a,r,n=l[28].nomeEquipamento+"",s,o,i,c,f=l[28].registroCA+"",u,p,m,h,w,I=l[28].quantidade+"",A;return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),s=R(n),o=F(),i=b("p"),c=R("CA "),u=R(f),p=F(),m=b("div"),h=b("p"),w=R("Qtd: "),A=R(I),this.h()},l(N){e=$(N,"DIV",{class:!0});var S=D(e);t=$(S,"DIV",{class:!0});var x=D(t);a=$(x,"DIV",{});var z=D(a);r=$(z,"P",{class:!0});var L=D(r);s=M(L,n),L.forEach(g),o=V(z),i=$(z,"P",{class:!0});var O=D(i);c=M(O,"CA "),u=M(O,f),O.forEach(g),z.forEach(g),p=V(x),m=$(x,"DIV",{class:!0});var H=D(m);h=$(H,"P",{class:!0});var W=D(h);w=M(W,"Qtd: "),A=M(W,I),W.forEach(g),H.forEach(g),x.forEach(g),S.forEach(g),this.h()},h(){E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","text-xs text-gray-500 dark:text-gray-400"),E(h,"class","text-sm font-medium text-gray-900 dark:text-white"),E(m,"class","text-right"),E(t,"class","flex items-center justify-between"),E(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(N,S){q(N,e,S),d(e,t),d(t,a),d(a,r),d(r,s),d(a,o),d(a,i),d(i,c),d(i,u),d(t,p),d(t,m),d(m,h),d(h,w),d(h,A)},p(N,S){S[0]&16&&n!==(n=N[28].nomeEquipamento+"")&&oe(s,n),S[0]&16&&f!==(f=N[28].registroCA+"")&&oe(u,f),S[0]&16&&I!==(I=N[28].quantidade+"")&&oe(A,I)},d(N){N&&g(e)}}}function ha(l){let e,t,a,r,n=l[30]+1+"",s,o,i,c,f,u,p,m,h,w,I,A,N,S,x,z,L,O,H,W,_=l[4].length>1&&da(l);u=new We({props:{for:"epi-"+l[30],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Ol]},$$scope:{ctx:l}}});function P(ae){l[18](ae,l[28])}function T(...ae){return l[19](l[30],...ae)}let y={id:"epi-"+l[30],items:l[7],class:"rounded-sm "+(l[5][`item-${l[30]}`]?"border-red-500":""),disabled:l[1]};l[28].episDisponivelId!==void 0&&(y.value=l[28].episDisponivelId),m=new tr({props:y}),Le.push(()=>Ue(m,"value",P)),m.$on("change",T);let v=l[5][`item-${l[30]}`]&&ma(l);N=new We({props:{for:"quantidade-"+l[30],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Ml]},$$scope:{ctx:l}}});function j(ae){l[20](ae,l[28])}function J(...ae){return l[21](l[30],...ae)}let te={id:"quantidade-"+l[30],type:"number",min:"1",max:"100",class:"rounded-sm "+(l[5][`quantidade-${l[30]}`]?"border-red-500":""),disabled:l[1]};l[28].quantidade!==void 0&&(te.value=l[28].quantidade),x=new At({props:te}),Le.push(()=>Ue(x,"value",j)),x.$on("input",J);let ne=l[5][`quantidade-${l[30]}`]&&ga(l),le=l[28].nomeEquipamento&&pa(l);return{c(){e=b("div"),t=b("div"),a=b("h4"),r=R("Item "),s=R(n),o=F(),_&&_.c(),i=F(),c=b("div"),f=b("div"),G(u.$$.fragment),p=F(),G(m.$$.fragment),w=F(),v&&v.c(),I=F(),A=b("div"),G(N.$$.fragment),S=F(),G(x.$$.fragment),L=F(),ne&&ne.c(),O=F(),le&&le.c(),H=F(),this.h()},l(ae){e=$(ae,"DIV",{class:!0});var K=D(e);t=$(K,"DIV",{class:!0});var ce=D(t);a=$(ce,"H4",{class:!0});var fe=D(a);r=M(fe,"Item "),s=M(fe,n),fe.forEach(g),o=V(ce),_&&_.l(ce),ce.forEach(g),i=V(K),c=$(K,"DIV",{class:!0});var de=D(c);f=$(de,"DIV",{class:!0});var ie=D(f);Z(u.$$.fragment,ie),p=V(ie),Z(m.$$.fragment,ie),w=V(ie),v&&v.l(ie),ie.forEach(g),I=V(de),A=$(de,"DIV",{});var Y=D(A);Z(N.$$.fragment,Y),S=V(Y),Z(x.$$.fragment,Y),L=V(Y),ne&&ne.l(Y),Y.forEach(g),de.forEach(g),O=V(K),le&&le.l(K),H=V(K),K.forEach(g),this.h()},h(){E(a,"class","text-sm font-medium text-gray-900 dark:text-white"),E(t,"class","flex items-start justify-between mb-4"),E(f,"class","md:col-span-2"),E(c,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(ae,K){q(ae,e,K),d(e,t),d(t,a),d(a,r),d(a,s),d(t,o),_&&_.m(t,null),d(e,i),d(e,c),d(c,f),Q(u,f,null),d(f,p),Q(m,f,null),d(f,w),v&&v.m(f,null),d(c,I),d(c,A),Q(N,A,null),d(A,S),Q(x,A,null),d(A,L),ne&&ne.m(A,null),d(e,O),le&&le.m(e,null),d(e,H),W=!0},p(ae,K){l=ae,l[4].length>1?_?(_.p(l,K),K[0]&16&&k(_,1)):(_=da(l),_.c(),k(_,1),_.m(t,null)):_&&(_e(),C(_,1,1,()=>{_=null}),ve());const ce={};K[1]&1&&(ce.$$scope={dirty:K,ctx:l}),u.$set(ce);const fe={};K[0]&128&&(fe.items=l[7]),K[0]&32&&(fe.class="rounded-sm "+(l[5][`item-${l[30]}`]?"border-red-500":"")),K[0]&2&&(fe.disabled=l[1]),!h&&K[0]&16&&(h=!0,fe.value=l[28].episDisponivelId,Be(()=>h=!1)),m.$set(fe),l[5][`item-${l[30]}`]?v?v.p(l,K):(v=ma(l),v.c(),v.m(f,null)):v&&(v.d(1),v=null);const de={};K[1]&1&&(de.$$scope={dirty:K,ctx:l}),N.$set(de);const ie={};K[0]&32&&(ie.class="rounded-sm "+(l[5][`quantidade-${l[30]}`]?"border-red-500":"")),K[0]&2&&(ie.disabled=l[1]),!z&&K[0]&16&&(z=!0,ie.value=l[28].quantidade,Be(()=>z=!1)),x.$set(ie),l[5][`quantidade-${l[30]}`]?ne?ne.p(l,K):(ne=ga(l),ne.c(),ne.m(A,null)):ne&&(ne.d(1),ne=null),l[28].nomeEquipamento?le?le.p(l,K):(le=pa(l),le.c(),le.m(e,H)):le&&(le.d(1),le=null)},i(ae){W||(k(_),k(u.$$.fragment,ae),k(m.$$.fragment,ae),k(N.$$.fragment,ae),k(x.$$.fragment,ae),W=!0)},o(ae){C(_),C(u.$$.fragment,ae),C(m.$$.fragment,ae),C(N.$$.fragment,ae),C(x.$$.fragment,ae),W=!1},d(ae){ae&&g(e),_&&_.d(),B(u),B(m),v&&v.d(),B(N),B(x),ne&&ne.d(),le&&le.d()}}}function _a(l){let e,t,a,r,n="Nenhum item na entrega",s,o,i;return t=new it({props:{class:"mx-auto mb-3 text-gray-400 w-8 h-8"}}),o=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Rl]},$$scope:{ctx:l}}}),o.$on("click",l[8]),{c(){e=b("div"),G(t.$$.fragment),a=F(),r=b("p"),r.textContent=n,s=F(),G(o.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var f=D(e);Z(t.$$.fragment,f),a=V(f),r=$(f,"P",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-iymvfb"&&(r.textContent=n),s=V(f),Z(o.$$.fragment,f),f.forEach(g),this.h()},h(){E(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),E(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(c,f){q(c,e,f),Q(t,e,null),d(e,a),d(e,r),d(e,s),Q(o,e,null),i=!0},p(c,f){const u={};f[0]&2&&(u.disabled=c[1]),f[1]&1&&(u.$$scope={dirty:f,ctx:c}),o.$set(u)},i(c){i||(k(t.$$.fragment,c),k(o.$$.fragment,c),i=!0)},o(c){C(t.$$.fragment,c),C(o.$$.fragment,c),i=!1},d(c){c&&g(e),B(t),B(o)}}}function Rl(l){let e;return{c(){e=R("Adicionar Primeiro Item")},l(t){e=M(t,"Adicionar Primeiro Item")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function va(l){let e,t,a="Resumo das Altera√ß√µes",r,n,s,o,i=l[4].length+"",c,f,u,p,m=l[4].reduce($a,0)+"",h,w,I,A,N,S=(l[3]||"N√£o informado")+"",x;return{c(){e=b("div"),t=b("h4"),t.textContent=a,r=F(),n=b("div"),s=b("p"),o=R("‚Ä¢ Total de itens: "),c=R(i),f=F(),u=b("p"),p=R("‚Ä¢ Quantidade total: "),h=R(m),w=R(" unidades"),I=F(),A=b("p"),N=R("‚Ä¢ Respons√°vel: "),x=R(S),this.h()},l(z){e=$(z,"DIV",{class:!0});var L=D(e);t=$(L,"H4",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-sxfnj2"&&(t.textContent=a),r=V(L),n=$(L,"DIV",{class:!0});var O=D(n);s=$(O,"P",{});var H=D(s);o=M(H,"‚Ä¢ Total de itens: "),c=M(H,i),H.forEach(g),f=V(O),u=$(O,"P",{});var W=D(u);p=M(W,"‚Ä¢ Quantidade total: "),h=M(W,m),w=M(W," unidades"),W.forEach(g),I=V(O),A=$(O,"P",{});var _=D(A);N=M(_,"‚Ä¢ Respons√°vel: "),x=M(_,S),_.forEach(g),O.forEach(g),L.forEach(g),this.h()},h(){E(t,"class","text-sm font-medium text-yellow-900 dark:text-yellow-100 mb-2"),E(n,"class","text-sm text-yellow-800 dark:text-yellow-200"),E(e,"class","mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800")},m(z,L){q(z,e,L),d(e,t),d(e,r),d(e,n),d(n,s),d(s,o),d(s,c),d(n,f),d(n,u),d(u,p),d(u,h),d(u,w),d(n,I),d(n,A),d(A,N),d(A,x)},p(z,L){L[0]&16&&i!==(i=z[4].length+"")&&oe(c,i),L[0]&16&&m!==(m=z[4].reduce($a,0)+"")&&oe(h,m),L[0]&8&&S!==(S=(z[3]||"N√£o informado")+"")&&oe(x,S)},d(z){z&&g(e)}}}function xl(l){let e;return{c(){e=R("Cancelar")},l(t){e=M(t,"Cancelar")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function jl(l){let e,t,a;return e=new Cr({props:{class:"mr-2 w-4 h-4"}}),{c(){G(e.$$.fragment),t=R(`
              Salvar Altera√ß√µes`)},l(r){Z(e.$$.fragment,r),t=M(r,`
              Salvar Altera√ß√µes`)},m(r,n){Q(e,r,n),q(r,t,n),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),a=!1},d(r){r&&g(t),B(e,r)}}}function Hl(l){let e,t,a;return e=new Xa({props:{class:"mr-2 animate-spin w-4 h-4"}}),{c(){G(e.$$.fragment),t=R(`
              Salvando...`)},l(r){Z(e.$$.fragment,r),t=M(r,`
              Salvando...`)},m(r,n){Q(e,r,n),q(r,t,n),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),a=!1},d(r){r&&g(t),B(e,r)}}}function Ll(l){let e,t,a,r;const n=[Hl,jl],s=[];function o(i,c){return i[1]?0:1}return e=o(l),t=s[e]=n[e](l),{c(){t.c(),a=Ie()},l(i){t.l(i),a=Ie()},m(i,c){s[e].m(i,c),q(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e!==f&&(_e(),C(s[f],1,1,()=>{s[f]=null}),ve(),t=s[e],t||(t=s[e]=n[e](i),t.c()),k(t,1),t.m(a.parentNode,a))},i(i){r||(k(t),r=!0)},o(i){C(t),r=!1},d(i){i&&g(a),s[e].d(i)}}}function Ul(l){let e,t,a=l[2]&&ia(l);return{c(){a&&a.c(),e=Ie()},l(r){a&&a.l(r),e=Ie()},m(r,n){a&&a.m(r,n),q(r,e,n),t=!0},p(r,n){r[2]?a?(a.p(r,n),n[0]&4&&k(a,1)):(a=ia(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(_e(),C(a,1,1,()=>{a=null}),ve())},i(r){t||(k(a),t=!0)},o(r){C(a),t=!1},d(r){r&&g(e),a&&a.d(r)}}}const $a=(l,e)=>l+e.quantidade;function Bl(l,e,t){let a,r,{episDisponiveis:n=[]}=e,{entrega:s=null}=e,{loading:o=!1}=e,{show:i=!1}=e;const c=Xe();let f="",u=[],p={};function m(){s&&(t(3,f="Respons√°vel da Entrega"),t(4,u=[{episDisponivelId:"1",nomeEquipamento:"Capacete de Seguran√ßa",registroCA:"31469",quantidade:1}]),t(5,p={}))}function h(){t(4,u=[...u,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function w(v){t(4,u=u.filter((j,J)=>J!==v))}function I(v,j){const J=j.target;A(v,J.value)}function A(v,j){const J=n.find(te=>te.id===j);J&&(t(4,u[v]={...u[v],episDisponivelId:j,nomeEquipamento:J.nomeEquipamento,registroCA:J.registroCA},u),delete p[`item-${v}`],t(5,p={...p}))}function N(v,j){t(4,u[v]={...u[v],quantidade:j},u),delete p[`quantidade-${v}`],t(5,p={...p})}function S(){const v={};return f.trim()||(v.responsavel="Respons√°vel √© obrigat√≥rio"),u.length===0&&(v.items="Adicione pelo menos um item"),u.forEach((j,J)=>{j.episDisponivelId||(v[`item-${J}`]="Selecione um EPI"),j.quantidade<1&&(v[`quantidade-${J}`]="Quantidade deve ser maior que 0")}),t(5,p=v),Object.keys(v).length===0}function x(){if(!S())return;const v={responsavel:f.trim(),usuarioResponsavelId:f.trim(),responsavelId:f.trim(),itens:u.map(j=>({episDisponivelId:j.episDisponivelId,nomeEquipamento:j.nomeEquipamento,registroCA:j.registroCA,quantidade:j.quantidade,estoqueItemId:j.episDisponivelId}))};c("salvar",v)}function z(){c("cancelar")}function L(v,j){const J=v.currentTarget;N(j,parseInt(J.value)||1)}function O(v){ft.call(this,l,v)}function H(v){f=v,t(3,f)}const W=v=>w(v);function _(v,j){l.$$.not_equal(j.episDisponivelId,v)&&(j.episDisponivelId=v,t(4,u))}const P=(v,j)=>I(v,j);function T(v,j){l.$$.not_equal(j.quantidade,v)&&(j.quantidade=v,t(4,u))}const y=(v,j)=>L(j,v);return l.$$set=v=>{"episDisponiveis"in v&&t(14,n=v.episDisponiveis),"entrega"in v&&t(0,s=v.entrega),"loading"in v&&t(1,o=v.loading),"show"in v&&t(2,i=v.show)},l.$$.update=()=>{l.$$.dirty[0]&5&&i&&s&&m(),l.$$.dirty[0]&16384&&t(7,a=[{value:"",label:"Selecione um EPI...",name:"select"},...n.filter(v=>v.disponivel).map(v=>({value:v.id,label:`${v.nomeEquipamento} (CA ${v.registroCA})${v.quantidade?` - ${v.quantidade} dispon√≠veis`:""}`,name:v.nomeEquipamento}))]),l.$$.dirty[0]&26&&t(6,r=f.trim()&&u.length>0&&!o)},[s,o,i,f,u,p,r,a,h,w,I,x,z,L,n,O,H,W,_,P,T,y]}class Ql extends Qe{constructor(e){super(),Ze(this,e,Bl,Ul,Ge,{episDisponiveis:14,entrega:0,loading:1,show:2},null,[-1,-1])}}function ba(l){let e,t,a,r,n,s,o,i,c;r=new dt({props:{title:l[0]?`Devolver ${l[0].nomeEquipamento}`:"Devolver Equipamento",objectType:"DEVOLU√á√ÉO EPI",iconName:"TrashBinOutline",primaryAction:{text:l[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:l[1]?"":"CheckOutline",disabled:!l[8]}}}),r.$on("close",l[11]),r.$on("primaryAction",l[10]);let f=l[0]&&Ea(l);return{c(){e=b("div"),t=F(),a=b("div"),G(r.$$.fragment),n=F(),s=b("div"),f&&f.c(),this.h()},l(u){e=$(u,"DIV",{class:!0,role:!0}),D(e).forEach(g),t=V(u),a=$(u,"DIV",{class:!0,role:!0,"aria-modal":!0});var p=D(a);Z(r.$$.fragment,p),n=V(p),s=$(p,"DIV",{class:!0});var m=D(s);f&&f.l(m),m.forEach(g),p.forEach(g),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(s,"class","flex-1 overflow-y-auto p-6 custom-scrollbar svelte-fw4j42"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(u,p){q(u,e,p),q(u,t,p),q(u,a,p),Q(r,a,null),d(a,n),d(a,s),f&&f.m(s,null),o=!0,i||(c=[xe(e,"click",l[11]),xe(a,"click",Ct(l[12]))],i=!0)},p(u,p){const m={};p&1&&(m.title=u[0]?`Devolver ${u[0].nomeEquipamento}`:"Devolver Equipamento"),p&258&&(m.primaryAction={text:u[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:u[1]?"":"CheckOutline",disabled:!u[8]}),r.$set(m),u[0]?f?(f.p(u,p),p&1&&k(f,1)):(f=Ea(u),f.c(),k(f,1),f.m(s,null)):f&&(_e(),C(f,1,1,()=>{f=null}),ve())},i(u){o||(k(r.$$.fragment,u),k(f),o=!0)},o(u){C(r.$$.fragment,u),C(f),o=!1},d(u){u&&(g(e),g(t),g(a)),B(r),f&&f.d(),i=!1,Dt(c)}}}function Ea(l){let e,t,a,r="1",n,s,o,i=l[0].nomeEquipamento+"",c,f,u,p,m=l[0].registroCA+"",h,w,I=l[0].entregaId+"",A,N,S,x,z,L,O="Prazo de Devolu√ß√£o",H,W,_=wt(l[0].prazoMaximoDevolucao)+"",P,T,y,v,j,J,te,ne,le,ae,K,ce,fe,de,ie,Y,X,se,pe,U,re="Campo opcional para detalhes espec√≠ficos da devolu√ß√£o",me,$e,Ee;const Ve=[Gl,Zl],De=[];function ye(ue,be){return ue[7]?0:1}v=ye(l),j=De[v]=Ve[v](l),ne=new We({props:{for:"motivo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Jl]},$$scope:{ctx:l}}});function Se(ue){l[13](ue)}let qe={id:"motivo",class:"rounded-sm "+(l[5].motivo?"border-red-500":""),disabled:l[1],items:l[9]};l[3]!==void 0&&(qe.value=l[3]),ae=new tr({props:qe}),Le.push(()=>Ue(ae,"value",Se));let ge=l[5].motivo&&ka(l);ie=new We({props:{for:"observacoes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Wl]},$$scope:{ctx:l}}});function ze(ue){l[14](ue)}let ee={id:"observacoes",placeholder:"Observa√ß√µes adicionais sobre a devolu√ß√£o...",rows:2,class:"rounded-sm",disabled:l[1]};l[4]!==void 0&&(ee.value=l[4]),X=new Ir({props:ee}),Le.push(()=>Ue(X,"value",ze));let we=l[7]&&Ia(l);return{c(){e=b("div"),t=b("div"),a=b("div"),a.textContent=r,n=F(),s=b("div"),o=b("h4"),c=R(i),f=F(),u=b("p"),p=R("CA "),h=R(m),w=R(" ‚Ä¢ Entrega #"),A=R(I),N=F(),S=b("div"),x=b("div"),z=b("div"),L=b("p"),L.textContent=O,H=F(),W=b("p"),P=R(_),T=F(),y=b("div"),j.c(),J=F(),te=b("div"),G(ne.$$.fragment),le=F(),G(ae.$$.fragment),ce=F(),ge&&ge.c(),fe=F(),de=b("div"),G(ie.$$.fragment),Y=F(),G(X.$$.fragment),pe=F(),U=b("p"),U.textContent=re,me=F(),we&&we.c(),$e=Ie(),this.h()},l(ue){e=$(ue,"DIV",{class:!0});var be=D(e);t=$(be,"DIV",{class:!0});var Oe=D(t);a=$(Oe,"DIV",{class:!0,"data-svelte-h":!0}),ke(a)!=="svelte-bog2zm"&&(a.textContent=r),n=V(Oe),s=$(Oe,"DIV",{class:!0});var Me=D(s);o=$(Me,"H4",{class:!0});var Ce=D(o);c=M(Ce,i),Ce.forEach(g),f=V(Me),u=$(Me,"P",{class:!0});var he=D(u);p=M(he,"CA "),h=M(he,m),w=M(he," ‚Ä¢ Entrega #"),A=M(he,I),he.forEach(g),Me.forEach(g),Oe.forEach(g),N=V(be),S=$(be,"DIV",{class:!0});var Pe=D(S);x=$(Pe,"DIV",{class:!0});var je=D(x);z=$(je,"DIV",{});var He=D(z);L=$(He,"P",{class:!0,"data-svelte-h":!0}),ke(L)!=="svelte-13u3t5e"&&(L.textContent=O),H=V(He),W=$(He,"P",{class:!0});var tt=D(W);P=M(tt,_),tt.forEach(g),He.forEach(g),T=V(je),y=$(je,"DIV",{class:!0});var et=D(y);j.l(et),et.forEach(g),je.forEach(g),Pe.forEach(g),be.forEach(g),J=V(ue),te=$(ue,"DIV",{class:!0});var Ke=D(te);Z(ne.$$.fragment,Ke),le=V(Ke),Z(ae.$$.fragment,Ke),ce=V(Ke),ge&&ge.l(Ke),Ke.forEach(g),fe=V(ue),de=$(ue,"DIV",{class:!0});var Je=D(de);Z(ie.$$.fragment,Je),Y=V(Je),Z(X.$$.fragment,Je),pe=V(Je),U=$(Je,"P",{class:!0,"data-svelte-h":!0}),ke(U)!=="svelte-1gkgsxh"&&(U.textContent=re),Je.forEach(g),me=V(ue),we&&we.l(ue),$e=Ie(),this.h()},h(){E(a,"class","flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-md flex items-center justify-center font-semibold text-sm"),E(o,"class","font-medium text-gray-900 dark:text-white"),E(u,"class","text-sm text-gray-500 dark:text-gray-400"),E(s,"class","flex-1"),E(t,"class","flex items-start space-x-3 mb-3"),E(L,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(W,"class","text-sm text-gray-900 dark:text-white"),E(y,"class","text-right"),E(x,"class","flex items-center justify-between"),E(S,"class","pt-3 border-t border-gray-200 dark:border-gray-700"),E(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),E(te,"class","mb-6"),E(U,"class","mt-1 text-xs text-gray-500 dark:text-gray-400"),E(de,"class","mb-6")},m(ue,be){q(ue,e,be),d(e,t),d(t,a),d(t,n),d(t,s),d(s,o),d(o,c),d(s,f),d(s,u),d(u,p),d(u,h),d(u,w),d(u,A),d(e,N),d(e,S),d(S,x),d(x,z),d(z,L),d(z,H),d(z,W),d(W,P),d(x,T),d(x,y),De[v].m(y,null),q(ue,J,be),q(ue,te,be),Q(ne,te,null),d(te,le),Q(ae,te,null),d(te,ce),ge&&ge.m(te,null),q(ue,fe,be),q(ue,de,be),Q(ie,de,null),d(de,Y),Q(X,de,null),d(de,pe),d(de,U),q(ue,me,be),we&&we.m(ue,be),q(ue,$e,be),Ee=!0},p(ue,be){(!Ee||be&1)&&i!==(i=ue[0].nomeEquipamento+"")&&oe(c,i),(!Ee||be&1)&&m!==(m=ue[0].registroCA+"")&&oe(h,m),(!Ee||be&1)&&I!==(I=ue[0].entregaId+"")&&oe(A,I),(!Ee||be&1)&&_!==(_=wt(ue[0].prazoMaximoDevolucao)+"")&&oe(P,_);let Oe=v;v=ye(ue),v===Oe?De[v].p(ue,be):(_e(),C(De[Oe],1,1,()=>{De[Oe]=null}),ve(),j=De[v],j?j.p(ue,be):(j=De[v]=Ve[v](ue),j.c()),k(j,1),j.m(y,null));const Me={};be&262144&&(Me.$$scope={dirty:be,ctx:ue}),ne.$set(Me);const Ce={};be&32&&(Ce.class="rounded-sm "+(ue[5].motivo?"border-red-500":"")),be&2&&(Ce.disabled=ue[1]),!K&&be&8&&(K=!0,Ce.value=ue[3],Be(()=>K=!1)),ae.$set(Ce),ue[5].motivo?ge?ge.p(ue,be):(ge=ka(ue),ge.c(),ge.m(te,null)):ge&&(ge.d(1),ge=null);const he={};be&262144&&(he.$$scope={dirty:be,ctx:ue}),ie.$set(he);const Pe={};be&2&&(Pe.disabled=ue[1]),!se&&be&16&&(se=!0,Pe.value=ue[4],Be(()=>se=!1)),X.$set(Pe),ue[7]?we?(we.p(ue,be),be&128&&k(we,1)):(we=Ia(ue),we.c(),k(we,1),we.m($e.parentNode,$e)):we&&(_e(),C(we,1,1,()=>{we=null}),ve())},i(ue){Ee||(k(j),k(ne.$$.fragment,ue),k(ae.$$.fragment,ue),k(ie.$$.fragment,ue),k(X.$$.fragment,ue),k(we),Ee=!0)},o(ue){C(j),C(ne.$$.fragment,ue),C(ae.$$.fragment,ue),C(ie.$$.fragment,ue),C(X.$$.fragment,ue),C(we),Ee=!1},d(ue){ue&&(g(e),g(J),g(te),g(fe),g(de),g(me),g($e)),De[v].d(),B(ne),B(ae),ge&&ge.d(),B(ie),B(X),we&&we.d(ue)}}}function Zl(l){let e,t,a,r;return t=new lr({props:{class:"mr-1 w-3 h-3"}}),{c(){e=b("div"),G(t.$$.fragment),a=R(`
                  No prazo`),this.h()},l(n){e=$(n,"DIV",{class:!0});var s=D(e);Z(t.$$.fragment,s),a=M(s,`
                  No prazo`),s.forEach(g),this.h()},h(){E(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200")},m(n,s){q(n,e,s),Q(t,e,null),d(e,a),r=!0},p:Ae,i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){C(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t)}}}function Gl(l){let e,t,a,r,n,s;return t=new St({props:{class:"mr-1 w-3 h-3"}}),{c(){e=b("div"),G(t.$$.fragment),a=R(`
                  Vencido h√° `),r=R(l[6]),n=R(" dias"),this.h()},l(o){e=$(o,"DIV",{class:!0});var i=D(e);Z(t.$$.fragment,i),a=M(i,`
                  Vencido h√° `),r=M(i,l[6]),n=M(i," dias"),i.forEach(g),this.h()},h(){E(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200")},m(o,i){q(o,e,i),Q(t,e,null),d(e,a),d(e,r),d(e,n),s=!0},p(o,i){(!s||i&64)&&oe(r,o[6])},i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){C(t.$$.fragment,o),s=!1},d(o){o&&g(e),B(t)}}}function Jl(l){let e;return{c(){e=R("Motivo da Devolu√ß√£o *")},l(t){e=M(t,"Motivo da Devolu√ß√£o *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ka(l){let e,t=l[5].motivo+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=D(e);a=M(n,t),n.forEach(g),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){q(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].motivo+"")&&oe(a,t)},d(r){r&&g(e)}}}function Wl(l){let e;return{c(){e=R("Observa√ß√µes (opcional)")},l(t){e=M(t,"Observa√ß√µes (opcional)")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Ia(l){let e,t,a,r,n,s,o="Equipamento com prazo vencido",i,c,f,u,p,m;return a=new St({props:{class:"text-red-600 dark:text-red-400 mt-0.5 mr-3 w-5 h-5"}}),{c(){e=b("div"),t=b("div"),G(a.$$.fragment),r=F(),n=b("div"),s=b("h4"),s.textContent=o,i=F(),c=b("p"),f=R("Este equipamento est√° "),u=R(l[6]),p=R(" dias em atraso para devolu√ß√£o."),this.h()},l(h){e=$(h,"DIV",{class:!0});var w=D(e);t=$(w,"DIV",{class:!0});var I=D(t);Z(a.$$.fragment,I),r=V(I),n=$(I,"DIV",{});var A=D(n);s=$(A,"H4",{class:!0,"data-svelte-h":!0}),ke(s)!=="svelte-1l5do2t"&&(s.textContent=o),i=V(A),c=$(A,"P",{class:!0});var N=D(c);f=M(N,"Este equipamento est√° "),u=M(N,l[6]),p=M(N," dias em atraso para devolu√ß√£o."),N.forEach(g),A.forEach(g),I.forEach(g),w.forEach(g),this.h()},h(){E(s,"class","text-sm font-medium text-red-800 dark:text-red-200"),E(c,"class","text-sm text-red-700 dark:text-red-300 mt-1"),E(t,"class","flex items-start"),E(e,"class","mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800")},m(h,w){q(h,e,w),d(e,t),Q(a,t,null),d(t,r),d(t,n),d(n,s),d(n,i),d(n,c),d(c,f),d(c,u),d(c,p),m=!0},p(h,w){(!m||w&64)&&oe(u,h[6])},i(h){m||(k(a.$$.fragment,h),m=!0)},o(h){C(a.$$.fragment,h),m=!1},d(h){h&&g(e),B(a)}}}function Kl(l){let e,t,a=l[2]&&ba(l);return{c(){a&&a.c(),e=Ie()},l(r){a&&a.l(r),e=Ie()},m(r,n){a&&a.m(r,n),q(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&k(a,1)):(a=ba(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(_e(),C(a,1,1,()=>{a=null}),ve())},i(r){t||(k(a),t=!0)},o(r){C(a),t=!1},d(r){r&&g(e),a&&a.d(r)}}}function Yl(l,e,t){let a,r,n,{equipamento:s=null}=e,{loading:o=!1}=e,{show:i=!1}=e;const c=Xe();let f="devolu√ß√£o padr√£o",u="",p={};const m=[{value:"devolu√ß√£o padr√£o",name:"Devolu√ß√£o Padr√£o - Fim do per√≠odo de uso"},{value:"danificado",name:"Danificado - EPI com defeito ou quebrado"},{value:"troca",name:"Troca - Substitui√ß√£o por outro equipamento"},{value:"outros",name:"Outros - Outro motivo espec√≠fico"}];function h(){t(3,f="devolu√ß√£o padr√£o"),t(4,u=""),t(5,p={})}function w(){const z={};return f||(z.motivo="Motivo da devolu√ß√£o √© obrigat√≥rio"),t(5,p=z),Object.keys(z).length===0}function I(){w()&&c("confirmar",{motivo:f,observacoes:u.trim()||void 0})}function A(){c("cancelar")}function N(z){ft.call(this,l,z)}function S(z){f=z,t(3,f)}function x(z){u=z,t(4,u)}return l.$$set=z=>{"equipamento"in z&&t(0,s=z.equipamento),"loading"in z&&t(1,o=z.loading),"show"in z&&t(2,i=z.show)},l.$$.update=()=>{l.$$.dirty&5&&i&&s&&h(),l.$$.dirty&10&&t(8,a=f&&!o),l.$$.dirty&1&&t(7,r=(s==null?void 0:s.vencido)||!1),l.$$.dirty&1&&t(6,n=(s==null?void 0:s.diasVencido)||0)},[s,o,i,f,u,p,n,r,a,m,I,A,N,S,x]}class Xl extends Qe{constructor(e){super(),Ze(this,e,Yl,Kl,Ge,{equipamento:0,loading:1,show:2})}}function wa(l){let e,t,a,r,n,s,o,i,c;r=new dt({props:{title:l[0]?`Assinatura da Entrega #${l[0].id}`:"Confirmar Assinatura Digital",objectType:"ASSINATURA DIGITAL",iconName:"TabletOutline",primaryAction:{text:l[1]?"Processando...":l[3]?"Assinatura Confirmada":"Foi assinado",icon:l[1]?"":l[3]?"CheckOutline":"CheckCircleOutline",disabled:!l[4]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[5]),r.$on("primaryAction",l[6]),r.$on("secondaryAction",l[5]);let f=l[0]&&Da(l);return{c(){e=b("div"),t=F(),a=b("div"),G(r.$$.fragment),n=F(),s=b("div"),f&&f.c(),this.h()},l(u){e=$(u,"DIV",{class:!0,role:!0}),D(e).forEach(g),t=V(u),a=$(u,"DIV",{class:!0,role:!0,"aria-modal":!0});var p=D(a);Z(r.$$.fragment,p),n=V(p),s=$(p,"DIV",{class:!0,style:!0});var m=D(s);f&&f.l(m),m.forEach(g),p.forEach(g),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(s,"height","calc(100% - 80px)"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(u,p){q(u,e,p),q(u,t,p),q(u,a,p),Q(r,a,null),d(a,n),d(a,s),f&&f.m(s,null),o=!0,i||(c=[xe(e,"click",l[5]),xe(a,"click",Ct(l[7]))],i=!0)},p(u,p){const m={};p&1&&(m.title=u[0]?`Assinatura da Entrega #${u[0].id}`:"Confirmar Assinatura Digital"),p&26&&(m.primaryAction={text:u[1]?"Processando...":u[3]?"Assinatura Confirmada":"Foi assinado",icon:u[1]?"":u[3]?"CheckOutline":"CheckCircleOutline",disabled:!u[4]}),p&2&&(m.secondaryAction={text:"Cancelar",disabled:u[1]}),r.$set(m),u[0]?f?(f.p(u,p),p&1&&k(f,1)):(f=Da(u),f.c(),k(f,1),f.m(s,null)):f&&(_e(),C(f,1,1,()=>{f=null}),ve())},i(u){o||(k(r.$$.fragment,u),k(f),o=!0)},o(u){C(r.$$.fragment,u),C(f),o=!1},d(u){u&&(g(e),g(t),g(a)),B(r),f&&f.d(),i=!1,Dt(c)}}}function Da(l){let e,t,a,r,n="Entrega",s,o,i,c=l[0].id+"",f,u,p,m,h="Data da Entrega",w,I,A=wt(l[0].dataEntrega)+"",N,S,x,z='<h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-3">EPIs a serem confirmados:</h4> <div class="space-y-2"><div class="flex items-center justify-between py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-sm border border-gray-200 dark:border-gray-600"><div class="flex flex-col"><span class="text-sm text-gray-900 dark:text-white font-medium">Capacete de Seguran√ßa</span> <span class="text-xs text-gray-500 dark:text-gray-400">CA 31469</span></div> <div class="text-right"><span class="text-sm font-medium text-gray-900 dark:text-white">Qtd: 1</span></div></div></div>',L,O,H,W,_,P,T,y,v="Assinatura Digital",j,J,te="Assine digitalmente atrav√©s do link ou QR Code",ne,le,ae,K,ce,fe,de,ie,Y,X="Escaneie o QR Code para assinar",se,pe,U,re,me,$e,Ee,Ve="Assinatura Manual",De,ye,Se="Imprima o documento para assinatura f√≠sica",qe,ge,ze,ee,we,ue="Ap√≥s assinatura f√≠sica, confirme abaixo",be,Oe,Me;_=new yr({props:{class:"text-blue-600 dark:text-blue-400 mt-0.5 mr-3 w-5 h-5"}}),ae=new Ne({props:{size:"xs",color:"primary",class:"rounded-sm w-full",$$slots:{default:[en]},$$scope:{ctx:l}}}),de=new Pr({props:{class:"text-gray-400 w-8 h-8"}}),re=new Ar({props:{class:"text-green-600 dark:text-green-400 mt-0.5 mr-3 w-5 h-5"}}),ze=new Ne({props:{size:"xs",color:"alternative",class:"rounded-sm w-full",$$slots:{default:[tn]},$$scope:{ctx:l}}});let Ce=l[3]&&Ca();return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),r.textContent=n,s=F(),o=b("p"),i=R("#"),f=R(c),u=F(),p=b("div"),m=b("p"),m.textContent=h,w=F(),I=b("p"),N=R(A),S=F(),x=b("div"),x.innerHTML=z,L=F(),O=b("div"),H=b("div"),W=b("div"),G(_.$$.fragment),P=F(),T=b("div"),y=b("h4"),y.textContent=v,j=F(),J=b("p"),J.textContent=te,ne=F(),le=b("div"),G(ae.$$.fragment),K=F(),ce=b("div"),fe=b("div"),G(de.$$.fragment),ie=F(),Y=b("p"),Y.textContent=X,se=F(),pe=b("div"),U=b("div"),G(re.$$.fragment),me=F(),$e=b("div"),Ee=b("h4"),Ee.textContent=Ve,De=F(),ye=b("p"),ye.textContent=Se,qe=F(),ge=b("div"),G(ze.$$.fragment),ee=F(),we=b("p"),we.textContent=ue,be=F(),Ce&&Ce.c(),Oe=Ie(),this.h()},l(he){e=$(he,"DIV",{class:!0});var Pe=D(e);t=$(Pe,"DIV",{class:!0});var je=D(t);a=$(je,"DIV",{});var He=D(a);r=$(He,"P",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-15muixn"&&(r.textContent=n),s=V(He),o=$(He,"P",{class:!0});var tt=D(o);i=M(tt,"#"),f=M(tt,c),tt.forEach(g),He.forEach(g),u=V(je),p=$(je,"DIV",{});var et=D(p);m=$(et,"P",{class:!0,"data-svelte-h":!0}),ke(m)!=="svelte-1nce9zk"&&(m.textContent=h),w=V(et),I=$(et,"P",{class:!0});var Ke=D(I);N=M(Ke,A),Ke.forEach(g),et.forEach(g),je.forEach(g),Pe.forEach(g),S=V(he),x=$(he,"DIV",{class:!0,"data-svelte-h":!0}),ke(x)!=="svelte-udbm6m"&&(x.innerHTML=z),L=V(he),O=$(he,"DIV",{class:!0});var Je=D(O);H=$(Je,"DIV",{class:!0});var zt=D(H);W=$(zt,"DIV",{class:!0});var mt=D(W);Z(_.$$.fragment,mt),P=V(mt),T=$(mt,"DIV",{});var at=D(T);y=$(at,"H4",{class:!0,"data-svelte-h":!0}),ke(y)!=="svelte-1yxfyqp"&&(y.textContent=v),j=V(at),J=$(at,"P",{class:!0,"data-svelte-h":!0}),ke(J)!=="svelte-mz9p7b"&&(J.textContent=te),ne=V(at),le=$(at,"DIV",{class:!0});var rt=D(le);Z(ae.$$.fragment,rt),K=V(rt),ce=$(rt,"DIV",{class:!0});var Tt=D(ce);fe=$(Tt,"DIV",{class:!0});var Ot=D(fe);Z(de.$$.fragment,Ot),Ot.forEach(g),Tt.forEach(g),ie=V(rt),Y=$(rt,"P",{class:!0,"data-svelte-h":!0}),ke(Y)!=="svelte-1u6pcnc"&&(Y.textContent=X),rt.forEach(g),at.forEach(g),mt.forEach(g),zt.forEach(g),se=V(Je),pe=$(Je,"DIV",{class:!0});var Mt=D(pe);U=$(Mt,"DIV",{class:!0});var gt=D(U);Z(re.$$.fragment,gt),me=V(gt),$e=$(gt,"DIV",{});var lt=D($e);Ee=$(lt,"H4",{class:!0,"data-svelte-h":!0}),ke(Ee)!=="svelte-uzpa23"&&(Ee.textContent=Ve),De=V(lt),ye=$(lt,"P",{class:!0,"data-svelte-h":!0}),ke(ye)!=="svelte-1vt0diy"&&(ye.textContent=Se),qe=V(lt),ge=$(lt,"DIV",{class:!0});var pt=D(ge);Z(ze.$$.fragment,pt),ee=V(pt),we=$(pt,"P",{class:!0,"data-svelte-h":!0}),ke(we)!=="svelte-kjygt1"&&(we.textContent=ue),pt.forEach(g),lt.forEach(g),gt.forEach(g),Mt.forEach(g),Je.forEach(g),be=V(he),Ce&&Ce.l(he),Oe=Ie(),this.h()},h(){E(r,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(o,"class","text-sm text-gray-900 dark:text-white font-semibold"),E(m,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(I,"class","text-sm text-gray-900 dark:text-white font-semibold"),E(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),E(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),E(x,"class","mb-6"),E(y,"class","text-sm font-medium text-blue-900 dark:text-blue-100"),E(J,"class","text-sm text-blue-800 dark:text-blue-200 mt-1"),E(fe,"class","w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center"),E(ce,"class","flex items-center justify-center p-3 bg-white dark:bg-gray-700 rounded border"),E(Y,"class","text-xs text-blue-700 dark:text-blue-300 text-center"),E(le,"class","mt-3 space-y-2"),E(W,"class","flex items-start"),E(H,"class","p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"),E(Ee,"class","text-sm font-medium text-green-900 dark:text-green-100"),E(ye,"class","text-sm text-green-800 dark:text-green-200 mt-1"),E(we,"class","text-xs text-green-700 dark:text-green-300 text-center"),E(ge,"class","mt-3 space-y-2"),E(U,"class","flex items-start"),E(pe,"class","p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"),E(O,"class","mb-6 grid grid-cols-1 md:grid-cols-2 gap-4")},m(he,Pe){q(he,e,Pe),d(e,t),d(t,a),d(a,r),d(a,s),d(a,o),d(o,i),d(o,f),d(t,u),d(t,p),d(p,m),d(p,w),d(p,I),d(I,N),q(he,S,Pe),q(he,x,Pe),q(he,L,Pe),q(he,O,Pe),d(O,H),d(H,W),Q(_,W,null),d(W,P),d(W,T),d(T,y),d(T,j),d(T,J),d(T,ne),d(T,le),Q(ae,le,null),d(le,K),d(le,ce),d(ce,fe),Q(de,fe,null),d(le,ie),d(le,Y),d(O,se),d(O,pe),d(pe,U),Q(re,U,null),d(U,me),d(U,$e),d($e,Ee),d($e,De),d($e,ye),d($e,qe),d($e,ge),Q(ze,ge,null),d(ge,ee),d(ge,we),q(he,be,Pe),Ce&&Ce.m(he,Pe),q(he,Oe,Pe),Me=!0},p(he,Pe){(!Me||Pe&1)&&c!==(c=he[0].id+"")&&oe(f,c),(!Me||Pe&1)&&A!==(A=wt(he[0].dataEntrega)+"")&&oe(N,A);const je={};Pe&2048&&(je.$$scope={dirty:Pe,ctx:he}),ae.$set(je);const He={};Pe&2048&&(He.$$scope={dirty:Pe,ctx:he}),ze.$set(He),he[3]?Ce?Pe&8&&k(Ce,1):(Ce=Ca(),Ce.c(),k(Ce,1),Ce.m(Oe.parentNode,Oe)):Ce&&(_e(),C(Ce,1,1,()=>{Ce=null}),ve())},i(he){Me||(k(_.$$.fragment,he),k(ae.$$.fragment,he),k(de.$$.fragment,he),k(re.$$.fragment,he),k(ze.$$.fragment,he),k(Ce),Me=!0)},o(he){C(_.$$.fragment,he),C(ae.$$.fragment,he),C(de.$$.fragment,he),C(re.$$.fragment,he),C(ze.$$.fragment,he),C(Ce),Me=!1},d(he){he&&(g(e),g(S),g(x),g(L),g(O),g(be),g(Oe)),B(_),B(ae),B(de),B(re),B(ze),Ce&&Ce.d(he)}}}function en(l){let e,t,a;return e=new Vr({props:{class:"mr-2 w-3 h-3"}}),{c(){G(e.$$.fragment),t=R(`
                  Abrir Link de Assinatura`)},l(r){Z(e.$$.fragment,r),t=M(r,`
                  Abrir Link de Assinatura`)},m(r,n){Q(e,r,n),q(r,t,n),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),a=!1},d(r){r&&g(t),B(e,r)}}}function tn(l){let e,t,a;return e=new Fr({props:{class:"mr-2 w-3 h-3"}}),{c(){G(e.$$.fragment),t=R(`
                  Imprimir Documento`)},l(r){Z(e.$$.fragment,r),t=M(r,`
                  Imprimir Documento`)},m(r,n){Q(e,r,n),q(r,t,n),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),a=!1},d(r){r&&g(t),B(e,r)}}}function Ca(l){let e,t,a,r,n,s='<h4 class="text-sm font-medium text-green-900 dark:text-green-100">Assinatura Confirmada</h4> <p class="text-sm text-green-800 dark:text-green-200">Processando assinatura digital...</p>',o;return a=new lr({props:{class:"text-green-600 dark:text-green-400 mr-3 w-5 h-5"}}),{c(){e=b("div"),t=b("div"),G(a.$$.fragment),r=F(),n=b("div"),n.innerHTML=s,this.h()},l(i){e=$(i,"DIV",{class:!0});var c=D(e);t=$(c,"DIV",{class:!0});var f=D(t);Z(a.$$.fragment,f),r=V(f),n=$(f,"DIV",{"data-svelte-h":!0}),ke(n)!=="svelte-9s52he"&&(n.innerHTML=s),f.forEach(g),c.forEach(g),this.h()},h(){E(t,"class","flex items-center"),E(e,"class","mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800")},m(i,c){q(i,e,c),d(e,t),Q(a,t,null),d(t,r),d(t,n),o=!0},i(i){o||(k(a.$$.fragment,i),o=!0)},o(i){C(a.$$.fragment,i),o=!1},d(i){i&&g(e),B(a)}}}function an(l){let e,t,a=l[2]&&wa(l);return{c(){a&&a.c(),e=Ie()},l(r){a&&a.l(r),e=Ie()},m(r,n){a&&a.m(r,n),q(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&k(a,1)):(a=wa(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(_e(),C(a,1,1,()=>{a=null}),ve())},i(r){t||(k(a),t=!0)},o(r){C(a),t=!1},d(r){r&&g(e),a&&a.d(r)}}}function rn(l,e,t){let a,{entrega:r=null}=e,{loading:n=!1}=e,{show:s=!1}=e;const o=Xe();let i=!1;function c(){t(3,i=!1)}function f(){const h=`assinatura_digital_${Date.now()}`;o("confirmar",{assinatura:h})}function u(){o("cancelar")}function p(){t(3,i=!0),setTimeout(()=>{f()},500)}function m(h){ft.call(this,l,h)}return l.$$set=h=>{"entrega"in h&&t(0,r=h.entrega),"loading"in h&&t(1,n=h.loading),"show"in h&&t(2,s=h.show)},l.$$.update=()=>{l.$$.dirty&4&&s&&c(),l.$$.dirty&10&&t(4,a=!n&&!i)},[r,n,s,i,a,u,p,m]}class ln extends Qe{constructor(e){super(),Ze(this,e,rn,an,Ge,{entrega:0,loading:1,show:2})}}function ya(l,e,t){const a=l.slice();return a[74]=e[t],a}function Pa(l,e,t){const a=l.slice();return a[65]=e[t],a}function Aa(l,e,t){const a=l.slice();return a[71]=e[t],a}function Va(l,e,t){const a=l.slice();return a[68]=e[t],a}function Fa(l,e,t){const a=l.slice();return a[62]=e[t],a}function qa(l,e,t){const a=l.slice();return a[59]=e[t],a}function Na(l,e,t){const a=l.slice();return a[77]=e[t],a}function nn(l){let e,t="<p>Nenhum dado dispon√≠vel</p>";return{c(){e=b("div"),e.innerHTML=t,this.h()},l(a){e=$(a,"DIV",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-tlgdc6"&&(e.innerHTML=t),this.h()},h(){E(e,"class","text-center py-8 text-gray-500 dark:text-gray-400")},m(a,r){q(a,e,r)},p:Ae,i:Ae,o:Ae,d(a){a&&g(e)}}}function on(l){let e,t,a,r,n,s,o,i=Fe([{id:"equipamentos",label:"Equipamentos",count:l[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:l[19].length},{id:"entregas",label:"Entregas",count:l[18].length},{id:"historico",label:"Hist√≥rico",count:l[17].length}]),c=[];for(let m=0;m<4;m+=1)c[m]=Sa(Na(l,i,m));const f=[mn,dn,un,fn],u=[];function p(m,h){return m[21]==="equipamentos"?0:m[21]==="devolucoes"?1:m[21]==="entregas"?2:m[21]==="historico"?3:-1}return~(n=p(l))&&(s=u[n]=f[n](l)),{c(){e=b("div"),t=b("nav");for(let m=0;m<4;m+=1)c[m].c();a=F(),r=b("div"),s&&s.c(),this.h()},l(m){e=$(m,"DIV",{class:!0});var h=D(e);t=$(h,"NAV",{class:!0,"aria-label":!0});var w=D(t);for(let A=0;A<4;A+=1)c[A].l(w);w.forEach(g),h.forEach(g),a=V(m),r=$(m,"DIV",{class:!0});var I=D(r);s&&s.l(I),I.forEach(g),this.h()},h(){E(t,"class","flex space-x-8 px-6"),E(t,"aria-label","Tabs"),E(e,"class","border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"),E(r,"class","p-6")},m(m,h){q(m,e,h),d(e,t);for(let w=0;w<4;w+=1)c[w]&&c[w].m(t,null);q(m,a,h),q(m,r,h),~n&&u[n].m(r,null),o=!0},p(m,h){if(h[0]&4063232){i=Fe([{id:"equipamentos",label:"Equipamentos",count:m[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:m[19].length},{id:"entregas",label:"Entregas",count:m[18].length},{id:"historico",label:"Hist√≥rico",count:m[17].length}]);let I;for(I=0;I<4;I+=1){const A=Na(m,i,I);c[I]?c[I].p(A,h):(c[I]=Sa(A),c[I].c(),c[I].m(t,null))}for(;I<4;I+=1)c[I].d(1)}let w=n;n=p(m),n===w?~n&&u[n].p(m,h):(s&&(_e(),C(u[w],1,1,()=>{u[w]=null}),ve()),~n?(s=u[n],s?s.p(m,h):(s=u[n]=f[n](m),s.c()),k(s,1),s.m(r,null)):s=null)},i(m){o||(k(s),o=!0)},o(m){C(s),o=!1},d(m){m&&(g(e),g(a),g(r)),yt(c,m),~n&&u[n].d()}}}function sn(l){let e,t;return e=new Nt({props:{error:l[7]}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r[0]&128&&(n.error=a[7]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function cn(l){let e,t,a;return t=new Pt({}),{c(){e=b("div"),G(t.$$.fragment),this.h()},l(r){e=$(r,"DIV",{class:!0});var n=D(e);Z(t.$$.fragment,n),n.forEach(g),this.h()},h(){E(e,"class","flex justify-center items-center py-12")},m(r,n){q(r,e,n),Q(t,e,null),a=!0},p:Ae,i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){C(t.$$.fragment,r),a=!1},d(r){r&&g(e),B(t)}}}function Sa(l){let e,t=l[77].label+"",a,r,n,s=l[77].count+"",o,i,c,f,u;function p(){return l[37](l[77])}return{c(){e=b("button"),a=R(t),r=F(),n=b("span"),o=R(s),i=F(),this.h()},l(m){e=$(m,"BUTTON",{class:!0});var h=D(e);a=M(h,t),r=V(h),n=$(h,"SPAN",{class:!0});var w=D(n);o=M(w,s),w.forEach(g),i=V(h),h.forEach(g),this.h()},h(){E(n,"class","ml-2 py-0.5 px-2 rounded-full text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),E(e,"class",c="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))},m(m,h){q(m,e,h),d(e,a),d(e,r),d(e,n),d(n,o),d(e,i),f||(u=xe(e,"click",p),f=!0)},p(m,h){l=m,h[0]&1966080&&t!==(t=l[77].label+"")&&oe(a,t),h[0]&1966080&&s!==(s=l[77].count+"")&&oe(o,s),h[0]&4063232&&c!==(c="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))&&E(e,"class",c)},d(m){m&&g(e),f=!1,u()}}}function fn(l){let e,t,a="Hist√≥rico Completo",r,n,s,o;const i=[pn,gn],c=[];function f(u,p){return u[17].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=D(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-n7dg6t"&&(t.textContent=a),r=V(p),s.l(p),p.forEach(g),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(u,p){q(u,e,p),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,p){let m=n;n=f(u),n===m?c[n].p(u,p):(_e(),C(c[m],1,1,()=>{c[m]=null}),ve(),s=c[n],s?s.p(u,p):(s=c[n]=i[n](u),s.c()),k(s,1),s.m(e,null))},i(u){o||(k(s),o=!0)},o(u){C(s),o=!1},d(u){u&&g(e),c[n].d()}}}function un(l){let e,t,a="Entregas Registradas",r,n,s,o;const i=[_n,hn],c=[];function f(u,p){return u[18].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=D(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-s07e4q"&&(t.textContent=a),r=V(p),s.l(p),p.forEach(g),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(u,p){q(u,e,p),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,p){let m=n;n=f(u),n===m?c[n].p(u,p):(_e(),C(c[m],1,1,()=>{c[m]=null}),ve(),s=c[n],s?s.p(u,p):(s=c[n]=i[n](u),s.c()),k(s,1),s.m(e,null))},i(u){o||(k(s),o=!0)},o(u){C(s),o=!1},d(u){u&&g(e),c[n].d()}}}function dn(l){let e,t,a="Devolu√ß√µes Efetuadas",r,n,s,o;const i=[Pn,yn],c=[];function f(u,p){return u[19].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=D(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-1yyam8h"&&(t.textContent=a),r=V(p),s.l(p),p.forEach(g),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(u,p){q(u,e,p),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,p){let m=n;n=f(u),n===m?c[n].p(u,p):(_e(),C(c[m],1,1,()=>{c[m]=null}),ve(),s=c[n],s?s.p(u,p):(s=c[n]=i[n](u),s.c()),k(s,1),s.m(e,null))},i(u){o||(k(s),o=!0)},o(u){C(s),o=!1},d(u){u&&g(e),c[n].d()}}}function mn(l){let e,t,a='<h3 class="text-xl font-semibold text-gray-900 dark:text-white">Equipamentos com o Colaborador</h3>',r,n,s,o;const i=[qn,Fn],c=[];function f(u,p){return u[20].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=b("div"),t=b("div"),t.innerHTML=a,r=F(),s.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=D(e);t=$(p,"DIV",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-1ffw2a3"&&(t.innerHTML=a),r=V(p),s.l(p),p.forEach(g),this.h()},h(){E(t,"class","flex justify-between items-center"),E(e,"class","space-y-4")},m(u,p){q(u,e,p),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,p){let m=n;n=f(u),n===m?c[n].p(u,p):(_e(),C(c[m],1,1,()=>{c[m]=null}),ve(),s=c[n],s?s.p(u,p):(s=c[n]=i[n](u),s.c()),k(s,1),s.m(e,null))},i(u){o||(k(s),o=!0)},o(u){C(s),o=!1},d(u){u&&g(e),c[n].d()}}}function gn(l){let e,t=[],a=new Map,r,n=Fe(l[17]);const s=o=>o[74].id;for(let o=0;o<n.length;o+=1){let i=ya(l,n,o),c=s(i);a.set(c,t[o]=Oa(c,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var i=D(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(g),this.h()},h(){E(e,"class","space-y-4")},m(o,i){q(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&131072|i[1]&3&&(n=Fe(o[17]),_e(),t=st(t,i,s,1,o,n,a,e,ut,Oa,null,ya),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)C(t[i]);r=!1},d(o){o&&g(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function pn(l){let e,t;return e=new Vt({props:{icon:"ClockOutline",message:"Nenhum evento registrado",description:"N√£o h√° hist√≥rico de atividades para esta ficha"}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function za(l){let e,t=l[74].mudancaStatus+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=D(e);a=M(n,t),n.forEach(g),this.h()},h(){E(e,"class","text-sm text-blue-600 dark:text-blue-400 mt-1")},m(r,n){q(r,e,n),d(e,a)},p(r,n){n[0]&131072&&t!==(t=r[74].mudancaStatus+"")&&oe(a,t)},d(r){r&&g(e)}}}function Ta(l){let e,t=l[74].detalhes.resumo+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=D(e);a=M(n,t),n.forEach(g),this.h()},h(){E(e,"class","text-sm text-gray-600 dark:text-gray-300 mt-1")},m(r,n){q(r,e,n),d(e,a)},p(r,n){n[0]&131072&&t!==(t=r[74].detalhes.resumo+"")&&oe(a,t)},d(r){r&&g(e)}}}function Oa(l,e){var J;let t,a,r,n,s,o,i,c,f,u=e[74].tipoDisplay.label+"",p,m,h,w=e[74].acao+"",I,A,N,S=e[74].dataFormatada+"",x,z,L,O,H,W,_=e[74].responsavel+"",P,T,y;r=new rr({props:{name:e[31](e[74].tipoDisplay.tipo),className:"w-5 h-5"}});let v=e[74].mudancaStatus&&za(e),j=((J=e[74].detalhes)==null?void 0:J.resumo)&&Ta(e);return{key:l,first:null,c(){t=b("div"),a=b("div"),G(r.$$.fragment),s=F(),o=b("div"),i=b("div"),c=b("div"),f=b("h4"),p=R(u),m=F(),h=b("p"),I=R(w),A=F(),N=b("span"),x=R(S),z=F(),v&&v.c(),L=F(),j&&j.c(),O=F(),H=b("p"),W=R("Respons√°vel: "),P=R(_),T=F(),this.h()},l(te){t=$(te,"DIV",{class:!0});var ne=D(t);a=$(ne,"DIV",{class:!0});var le=D(a);Z(r.$$.fragment,le),le.forEach(g),s=V(ne),o=$(ne,"DIV",{class:!0});var ae=D(o);i=$(ae,"DIV",{class:!0});var K=D(i);c=$(K,"DIV",{});var ce=D(c);f=$(ce,"H4",{class:!0});var fe=D(f);p=M(fe,u),fe.forEach(g),m=V(ce),h=$(ce,"P",{class:!0});var de=D(h);I=M(de,w),de.forEach(g),ce.forEach(g),A=V(K),N=$(K,"SPAN",{class:!0});var ie=D(N);x=M(ie,S),ie.forEach(g),K.forEach(g),z=V(ae),v&&v.l(ae),L=V(ae),j&&j.l(ae),O=V(ae),H=$(ae,"P",{class:!0});var Y=D(H);W=M(Y,"Respons√°vel: "),P=M(Y,_),Y.forEach(g),ae.forEach(g),T=V(ne),ne.forEach(g),this.h()},h(){E(a,"class",n=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`),E(f,"class","font-medium text-gray-900 dark:text-white"),E(h,"class","text-sm text-gray-600 dark:text-gray-300"),E(N,"class","text-sm text-gray-500 dark:text-gray-400"),E(i,"class","flex items-center justify-between"),E(H,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),E(o,"class","flex-1 min-w-0"),E(t,"class","flex items-start space-x-4"),this.first=t},m(te,ne){q(te,t,ne),d(t,a),Q(r,a,null),d(t,s),d(t,o),d(o,i),d(i,c),d(c,f),d(f,p),d(c,m),d(c,h),d(h,I),d(i,A),d(i,N),d(N,x),d(o,z),v&&v.m(o,null),d(o,L),j&&j.m(o,null),d(o,O),d(o,H),d(H,W),d(H,P),d(t,T),y=!0},p(te,ne){var ae;e=te;const le={};ne[0]&131072&&(le.name=e[31](e[74].tipoDisplay.tipo)),r.$set(le),(!y||ne[0]&131072&&n!==(n=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`))&&E(a,"class",n),(!y||ne[0]&131072)&&u!==(u=e[74].tipoDisplay.label+"")&&oe(p,u),(!y||ne[0]&131072)&&w!==(w=e[74].acao+"")&&oe(I,w),(!y||ne[0]&131072)&&S!==(S=e[74].dataFormatada+"")&&oe(x,S),e[74].mudancaStatus?v?v.p(e,ne):(v=za(e),v.c(),v.m(o,L)):v&&(v.d(1),v=null),(ae=e[74].detalhes)!=null&&ae.resumo?j?j.p(e,ne):(j=Ta(e),j.c(),j.m(o,O)):j&&(j.d(1),j=null),(!y||ne[0]&131072)&&_!==(_=e[74].responsavel+"")&&oe(P,_)},i(te){y||(k(r.$$.fragment,te),y=!0)},o(te){C(r.$$.fragment,te),y=!1},d(te){te&&g(t),B(r),v&&v.d(),j&&j.d()}}}function hn(l){let e,t=[],a=new Map,r,n=Fe(l[18]);const s=o=>o[65].id;for(let o=0;o<n.length;o+=1){let i=Pa(l,n,o),c=s(i);a.set(c,t[o]=xa(c,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var i=D(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(g),this.h()},h(){E(e,"class","space-y-3")},m(o,i){q(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&1476657152&&(n=Fe(o[18]),_e(),t=st(t,i,s,1,o,n,a,e,ut,xa,null,Pa),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)C(t[i]);r=!1},d(o){o&&g(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function _n(l){let e,t;return e=new Vt({props:{icon:"TruckOutline",message:"Nenhuma entrega registrada",description:"N√£o h√° hist√≥rico de entregas para este colaborador"}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function vn(l){let e=l[65].statusDisplay.label+"",t;return{c(){t=R(e)},l(a){t=M(a,e)},m(a,r){q(a,t,r)},p(a,r){r[0]&262144&&e!==(e=a[65].statusDisplay.label+"")&&oe(t,e)},d(a){a&&g(t)}}}function Ma(l,e){let t,a,r=e[71].quantidade+"",n,s,o,i=e[71].nomeEquipamento+"",c,f,u=(e[71].numeroCA||e[71].registroCA)+"",p,m,h;return{key:l,first:null,c(){t=b("div"),a=b("span"),n=R(r),s=F(),o=b("div"),c=R(i),f=R(" (CA: "),p=R(u),m=R(")"),h=F(),this.h()},l(w){t=$(w,"DIV",{class:!0});var I=D(t);a=$(I,"SPAN",{class:!0});var A=D(a);n=M(A,r),A.forEach(g),s=V(I),o=$(I,"DIV",{class:!0});var N=D(o);c=M(N,i),f=M(N," (CA: "),p=M(N,u),m=M(N,")"),N.forEach(g),h=V(I),I.forEach(g),this.h()},h(){E(a,"class","inline-flex items-center justify-center w-5 h-5 text-xs font-medium text-white bg-gray-700 rounded"),E(o,"class","px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono text-gray-800 dark:text-gray-200"),E(t,"class","flex items-center space-x-2"),this.first=t},m(w,I){q(w,t,I),d(t,a),d(a,n),d(t,s),d(t,o),d(o,c),d(o,f),d(o,p),d(o,m),d(t,h)},p(w,I){e=w,I[0]&262144&&r!==(r=e[71].quantidade+"")&&oe(n,r),I[0]&262144&&i!==(i=e[71].nomeEquipamento+"")&&oe(c,i),I[0]&262144&&u!==(u=(e[71].numeroCA||e[71].registroCA)+"")&&oe(p,u)},d(w){w&&g(t)}}}function $n(l){let e,t,a,r=l[65].numero+"",n,s,o,i,c=l[65].dataEntrega+"",f,u,p,m,h,w,I,A="Itens:",N,S,x=[],z=new Map,L,O;m=new ot({props:{color:Ye.getBadgeColor(l[65].statusDisplay.cor),class:"rounded-sm",$$slots:{default:[vn]},$$scope:{ctx:l}}});let H=Fe(l[65].itens);const W=_=>_[71].id;for(let _=0;_<H.length;_+=1){let P=Aa(l,H,_),T=W(P);z.set(T,x[_]=Ma(T,P))}return{c(){e=b("div"),t=b("h4"),a=R("Entrega "),n=R(r),s=F(),o=b("p"),i=R("Data: "),f=R(c),u=F(),p=b("div"),G(m.$$.fragment),h=F(),w=b("div"),I=b("p"),I.textContent=A,N=F(),S=b("div");for(let _=0;_<x.length;_+=1)x[_].c();L=F(),this.h()},l(_){e=$(_,"DIV",{slot:!0});var P=D(e);t=$(P,"H4",{class:!0});var T=D(t);a=M(T,"Entrega "),n=M(T,r),T.forEach(g),s=V(P),o=$(P,"P",{class:!0});var y=D(o);i=M(y,"Data: "),f=M(y,c),y.forEach(g),u=V(P),p=$(P,"DIV",{class:!0});var v=D(p);Z(m.$$.fragment,v),v.forEach(g),h=V(P),w=$(P,"DIV",{class:!0});var j=D(w);I=$(j,"P",{class:!0,"data-svelte-h":!0}),ke(I)!=="svelte-tel3c5"&&(I.textContent=A),N=V(j),S=$(j,"DIV",{class:!0});var J=D(S);for(let te=0;te<x.length;te+=1)x[te].l(J);J.forEach(g),j.forEach(g),L=V(P),P.forEach(g),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(o,"class","text-sm text-gray-600 dark:text-gray-300"),E(p,"class","mt-2"),E(I,"class","text-sm font-medium text-gray-900 dark:text-white"),E(S,"class","mt-1 space-y-1"),E(w,"class","mt-2"),E(e,"slot","content")},m(_,P){q(_,e,P),d(e,t),d(t,a),d(t,n),d(e,s),d(e,o),d(o,i),d(o,f),d(e,u),d(e,p),Q(m,p,null),d(e,h),d(e,w),d(w,I),d(w,N),d(w,S);for(let T=0;T<x.length;T+=1)x[T]&&x[T].m(S,null);d(e,L),O=!0},p(_,P){(!O||P[0]&262144)&&r!==(r=_[65].numero+"")&&oe(n,r),(!O||P[0]&262144)&&c!==(c=_[65].dataEntrega+"")&&oe(f,c);const T={};P[0]&262144&&(T.color=Ye.getBadgeColor(_[65].statusDisplay.cor)),P[0]&262144|P[2]&262144&&(T.$$scope={dirty:P,ctx:_}),m.$set(T),P[0]&262144&&(H=Fe(_[65].itens),x=st(x,P,W,1,_,H,z,S,$r,Ma,null,Aa))},i(_){O||(k(m.$$.fragment,_),O=!0)},o(_){C(m.$$.fragment,_),O=!1},d(_){_&&g(e),B(m);for(let P=0;P<x.length;P+=1)x[P].d()}}}function bn(l){let e,t;function a(){return l[41](l[65])}return e=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[In]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){G(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,n){Q(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function En(l){let e,t;function a(){return l[40](l[65])}return e=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[wn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){G(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,n){Q(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function kn(l){let e,t;function a(){return l[39](l[65])}return e=new Ne({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Dn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){G(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,n){Q(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function In(l){let e;return{c(){e=R("Editar")},l(t){e=M(t,"Editar")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function wn(l){let e;return{c(){e=R("Imprimir")},l(t){e=M(t,"Imprimir")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Dn(l){let e;return{c(){e=R("Assinar")},l(t){e=M(t,"Assinar")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Ra(l){let e,t,a,r;const n=[kn,En,bn],s=[];function o(i,c){return i[68]==="assinar"?0:i[68]==="imprimir"?1:i[68]==="editar"?2:-1}return~(e=o(l))&&(t=s[e]=n[e](l)),{c(){t&&t.c(),a=Ie()},l(i){t&&t.l(i),a=Ie()},m(i,c){~e&&s[e].m(i,c),q(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e===f?~e&&s[e].p(i,c):(t&&(_e(),C(s[f],1,1,()=>{s[f]=null}),ve()),~e?(t=s[e],t?t.p(i,c):(t=s[e]=n[e](i),t.c()),k(t,1),t.m(a.parentNode,a)):t=null)},i(i){r||(k(t),r=!0)},o(i){C(t),r=!1},d(i){i&&g(a),~e&&s[e].d(i)}}}function Cn(l){let e,t,a,r=Fe(l[65].acoes),n=[];for(let o=0;o<r.length;o+=1)n[o]=Ra(Va(l,r,o));const s=o=>C(n[o],1,1,()=>{n[o]=null});return{c(){e=b("div");for(let o=0;o<n.length;o+=1)n[o].c();t=F(),this.h()},l(o){e=$(o,"DIV",{slot:!0,class:!0});var i=D(e);for(let c=0;c<n.length;c+=1)n[c].l(i);t=V(i),i.forEach(g),this.h()},h(){E(e,"slot","actions"),E(e,"class","flex space-x-2")},m(o,i){q(o,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);d(e,t),a=!0},p(o,i){if(i[0]&1476657152){r=Fe(o[65].acoes);let c;for(c=0;c<r.length;c+=1){const f=Va(o,r,c);n[c]?(n[c].p(f,i),k(n[c],1)):(n[c]=Ra(f),n[c].c(),k(n[c],1),n[c].m(e,t))}for(_e(),c=r.length;c<n.length;c+=1)s(c);ve()}},i(o){if(!a){for(let i=0;i<r.length;i+=1)k(n[i]);a=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)C(n[i]);a=!1},d(o){o&&g(e),yt(n,o)}}}function xa(l,e){let t,a,r;return a=new sr({props:{$$slots:{actions:[Cn],content:[$n]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ie(),G(a.$$.fragment),this.h()},l(n){t=Ie(),Z(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){q(n,t,s),Q(a,n,s),r=!0},p(n,s){e=n;const o={};s[0]&262144|s[2]&262144&&(o.$$scope={dirty:s,ctx:e}),a.$set(o)},i(n){r||(k(a.$$.fragment,n),r=!0)},o(n){C(a.$$.fragment,n),r=!1},d(n){n&&g(t),B(a,n)}}}function yn(l){let e,t=[],a=new Map,r,n=Fe(l[19]);const s=o=>o[62].id;for(let o=0;o<n.length;o+=1){let i=Fa(l,n,o),c=s(i);a.set(c,t[o]=La(c,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var i=D(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(g),this.h()},h(){E(e,"class","space-y-3")},m(o,i){q(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&524288&&(n=Fe(o[19]),_e(),t=st(t,i,s,1,o,n,a,e,ut,La,null,Fa),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)C(t[i]);r=!1},d(o){o&&g(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Pn(l){let e,t;return e=new Vt({props:{icon:"TrashBinOutline",message:"Nenhuma devolu√ß√£o registrada",description:"N√£o h√° hist√≥rico de devolu√ß√µes para este colaborador"}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function An(l){let e=l[62].status==="processada"?"Processada":"Cancelada",t;return{c(){t=R(e)},l(a){t=M(a,e)},m(a,r){q(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].status==="processada"?"Processada":"Cancelada")&&oe(t,e)},d(a){a&&g(t)}}}function ja(l){let e,t,a;return t=new ot({props:{color:l[62].condicaoItem==="DANIFICADO"?"yellow":"red",class:"rounded-sm text-xs",$$slots:{default:[Vn]},$$scope:{ctx:l}}}),{c(){e=b("div"),G(t.$$.fragment),this.h()},l(r){e=$(r,"DIV",{class:!0});var n=D(e);Z(t.$$.fragment,n),n.forEach(g),this.h()},h(){E(e,"class","flex items-center space-x-2")},m(r,n){q(r,e,n),Q(t,e,null),a=!0},p(r,n){const s={};n[0]&524288&&(s.color=r[62].condicaoItem==="DANIFICADO"?"yellow":"red"),n[0]&524288|n[2]&262144&&(s.$$scope={dirty:n,ctx:r}),t.$set(s)},i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){C(t.$$.fragment,r),a=!1},d(r){r&&g(e),B(t)}}}function Vn(l){let e=l[62].condicaoItem+"",t;return{c(){t=R(e)},l(a){t=M(a,e)},m(a,r){q(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].condicaoItem+"")&&oe(t,e)},d(a){a&&g(t)}}}function Ha(l){let e,t,a,r=l[62].observacoes+"",n,s;return{c(){e=b("div"),t=b("p"),a=R('"'),n=R(r),s=R('"'),this.h()},l(o){e=$(o,"DIV",{class:!0});var i=D(e);t=$(i,"P",{class:!0});var c=D(t);a=M(c,'"'),n=M(c,r),s=M(c,'"'),c.forEach(g),i.forEach(g),this.h()},h(){E(t,"class","text-sm text-gray-700 dark:text-gray-300 italic"),E(e,"class","mt-3 p-2 bg-gray-50 dark:bg-gray-700 rounded border-l-4 border-blue-400")},m(o,i){q(o,e,i),d(e,t),d(t,a),d(t,n),d(t,s)},p(o,i){i[0]&524288&&r!==(r=o[62].observacoes+"")&&oe(n,r)},d(o){o&&g(e)}}}function La(l,e){let t,a,r,n,s,o=e[62].nomeEquipamento+"",i,c,f,u,p,m,h,w="CA / Categoria",I,A,N=e[62].numeroCA+"",S,x,z=e[62].categoria+"",L,O,H,W,_="Data Devolu√ß√£o",P,T,y=e[62].dataDevolucao+"",v,j,J,te,ne="Motivo",le,ae,K=e[62].motivoDisplay+"",ce,fe,de,ie,Y;f=new ot({props:{color:e[62].status==="processada"?"green":"red",class:"rounded-sm",$$slots:{default:[An]},$$scope:{ctx:e}}});let X=e[62].condicaoItem&&e[62].condicaoItem!=="BOM"&&ja(e),se=e[62].observacoes&&Ha(e);return{key:l,first:null,c(){t=b("div"),a=b("div"),r=b("div"),n=b("div"),s=b("h4"),i=R(o),c=F(),G(f.$$.fragment),u=F(),p=b("div"),m=b("div"),h=b("span"),h.textContent=w,I=F(),A=b("p"),S=R(N),x=R(" ‚Ä¢ "),L=R(z),O=F(),H=b("div"),W=b("span"),W.textContent=_,P=F(),T=b("p"),v=R(y),j=F(),J=b("div"),te=b("span"),te.textContent=ne,le=F(),ae=b("p"),ce=R(K),fe=F(),X&&X.c(),de=F(),se&&se.c(),ie=F(),this.h()},l(pe){t=$(pe,"DIV",{class:!0});var U=D(t);a=$(U,"DIV",{class:!0});var re=D(a);r=$(re,"DIV",{class:!0});var me=D(r);n=$(me,"DIV",{class:!0});var $e=D(n);s=$($e,"H4",{class:!0});var Ee=D(s);i=M(Ee,o),Ee.forEach(g),c=V($e),Z(f.$$.fragment,$e),$e.forEach(g),u=V(me),p=$(me,"DIV",{class:!0});var Ve=D(p);m=$(Ve,"DIV",{});var De=D(m);h=$(De,"SPAN",{class:!0,"data-svelte-h":!0}),ke(h)!=="svelte-1uekrmz"&&(h.textContent=w),I=V(De),A=$(De,"P",{class:!0});var ye=D(A);S=M(ye,N),x=M(ye," ‚Ä¢ "),L=M(ye,z),ye.forEach(g),De.forEach(g),O=V(Ve),H=$(Ve,"DIV",{});var Se=D(H);W=$(Se,"SPAN",{class:!0,"data-svelte-h":!0}),ke(W)!=="svelte-1nqkj5n"&&(W.textContent=_),P=V(Se),T=$(Se,"P",{class:!0});var qe=D(T);v=M(qe,y),qe.forEach(g),Se.forEach(g),Ve.forEach(g),j=V(me),J=$(me,"DIV",{class:!0});var ge=D(J);te=$(ge,"SPAN",{class:!0,"data-svelte-h":!0}),ke(te)!=="svelte-ti63bd"&&(te.textContent=ne),le=V(ge),ae=$(ge,"P",{class:!0});var ze=D(ae);ce=M(ze,K),ze.forEach(g),ge.forEach(g),fe=V(me),X&&X.l(me),de=V(me),se&&se.l(me),me.forEach(g),re.forEach(g),ie=V(U),U.forEach(g),this.h()},h(){E(s,"class","font-semibold text-gray-900 dark:text-white"),E(n,"class","flex items-center justify-between mb-3"),E(h,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(A,"class","text-sm text-gray-900 dark:text-white"),E(W,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(T,"class","text-sm text-gray-900 dark:text-white"),E(p,"class","grid grid-cols-2 gap-4 mb-3"),E(te,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(ae,"class","text-sm text-gray-900 dark:text-white"),E(J,"class","mb-3"),E(r,"class","flex-1"),E(a,"class","flex justify-between items-start"),E(t,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"),this.first=t},m(pe,U){q(pe,t,U),d(t,a),d(a,r),d(r,n),d(n,s),d(s,i),d(n,c),Q(f,n,null),d(r,u),d(r,p),d(p,m),d(m,h),d(m,I),d(m,A),d(A,S),d(A,x),d(A,L),d(p,O),d(p,H),d(H,W),d(H,P),d(H,T),d(T,v),d(r,j),d(r,J),d(J,te),d(J,le),d(J,ae),d(ae,ce),d(r,fe),X&&X.m(r,null),d(r,de),se&&se.m(r,null),d(t,ie),Y=!0},p(pe,U){e=pe,(!Y||U[0]&524288)&&o!==(o=e[62].nomeEquipamento+"")&&oe(i,o);const re={};U[0]&524288&&(re.color=e[62].status==="processada"?"green":"red"),U[0]&524288|U[2]&262144&&(re.$$scope={dirty:U,ctx:e}),f.$set(re),(!Y||U[0]&524288)&&N!==(N=e[62].numeroCA+"")&&oe(S,N),(!Y||U[0]&524288)&&z!==(z=e[62].categoria+"")&&oe(L,z),(!Y||U[0]&524288)&&y!==(y=e[62].dataDevolucao+"")&&oe(v,y),(!Y||U[0]&524288)&&K!==(K=e[62].motivoDisplay+"")&&oe(ce,K),e[62].condicaoItem&&e[62].condicaoItem!=="BOM"?X?(X.p(e,U),U[0]&524288&&k(X,1)):(X=ja(e),X.c(),k(X,1),X.m(r,de)):X&&(_e(),C(X,1,1,()=>{X=null}),ve()),e[62].observacoes?se?se.p(e,U):(se=Ha(e),se.c(),se.m(r,null)):se&&(se.d(1),se=null)},i(pe){Y||(k(f.$$.fragment,pe),k(X),Y=!0)},o(pe){C(f.$$.fragment,pe),C(X),Y=!1},d(pe){pe&&g(t),B(f),X&&X.d(),se&&se.d()}}}function Fn(l){let e,t=[],a=new Map,r,n=Fe(l[20]);const s=o=>o[59].id;for(let o=0;o<n.length;o+=1){let i=qa(l,n,o),c=s(i);a.set(c,t[o]=Ba(c,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var i=D(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(g),this.h()},h(){E(e,"class","space-y-3")},m(o,i){q(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&537919488&&(n=Fe(o[20]),_e(),t=st(t,i,s,1,o,n,a,e,ut,Ba,null,qa),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)C(t[i]);r=!1},d(o){o&&g(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function qn(l){let e,t;return e=new Vt({props:{icon:"ClipboardDocumentListOutline",message:"Nenhum equipamento em posse",description:"Este colaborador n√£o possui equipamentos atualmente"}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Nn(l){let e=l[59].statusVencimentoDisplay.texto+"",t;return{c(){t=R(e)},l(a){t=M(a,e)},m(a,r){q(a,t,r)},p(a,r){r[0]&1048576&&e!==(e=a[59].statusVencimentoDisplay.texto+"")&&oe(t,e)},d(a){a&&g(t)}}}function Sn(l){let e,t,a=l[59].nomeEquipamento+"",r,n,s,o,i=(l[59].numeroCA||l[59].registroCA)+"",c,f,u=l[59].categoria+"",p,m,h,w,I=l[59].dataEntrega+"",A,N,S,x,z,L,O=Ye.formatDaysRemaining(l[59].statusVencimentoDisplay.diasRestantes,l[59].statusVencimentoDisplay.statusDetalhado)+"",H,W,_;return x=new ot({props:{color:Ye.getBadgeColor(l[59].statusVencimentoDisplay.cor),class:"rounded-sm",$$slots:{default:[Nn]},$$scope:{ctx:l}}}),{c(){e=b("div"),t=b("h4"),r=R(a),n=F(),s=b("p"),o=R("CA: "),c=R(i),f=R(" ‚Ä¢ "),p=R(u),m=F(),h=b("p"),w=R("Entregue em: "),A=R(I),N=F(),S=b("div"),G(x.$$.fragment),z=F(),L=b("span"),H=R(O),W=F(),this.h()},l(P){e=$(P,"DIV",{slot:!0});var T=D(e);t=$(T,"H4",{class:!0});var y=D(t);r=M(y,a),y.forEach(g),n=V(T),s=$(T,"P",{class:!0});var v=D(s);o=M(v,"CA: "),c=M(v,i),f=M(v," ‚Ä¢ "),p=M(v,u),v.forEach(g),m=V(T),h=$(T,"P",{class:!0});var j=D(h);w=M(j,"Entregue em: "),A=M(j,I),j.forEach(g),N=V(T),S=$(T,"DIV",{class:!0});var J=D(S);Z(x.$$.fragment,J),z=V(J),L=$(J,"SPAN",{class:!0});var te=D(L);H=M(te,O),te.forEach(g),J.forEach(g),W=V(T),T.forEach(g),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(s,"class","text-sm text-gray-600 dark:text-gray-300"),E(h,"class","text-sm text-gray-600 dark:text-gray-300"),E(L,"class","ml-2 text-sm text-gray-600 dark:text-gray-300"),E(S,"class","mt-2"),E(e,"slot","content")},m(P,T){q(P,e,T),d(e,t),d(t,r),d(e,n),d(e,s),d(s,o),d(s,c),d(s,f),d(s,p),d(e,m),d(e,h),d(h,w),d(h,A),d(e,N),d(e,S),Q(x,S,null),d(S,z),d(S,L),d(L,H),d(e,W),_=!0},p(P,T){(!_||T[0]&1048576)&&a!==(a=P[59].nomeEquipamento+"")&&oe(r,a),(!_||T[0]&1048576)&&i!==(i=(P[59].numeroCA||P[59].registroCA)+"")&&oe(c,i),(!_||T[0]&1048576)&&u!==(u=P[59].categoria+"")&&oe(p,u),(!_||T[0]&1048576)&&I!==(I=P[59].dataEntrega+"")&&oe(A,I);const y={};T[0]&1048576&&(y.color=Ye.getBadgeColor(P[59].statusVencimentoDisplay.cor)),T[0]&1048576|T[2]&262144&&(y.$$scope={dirty:T,ctx:P}),x.$set(y),(!_||T[0]&1048576)&&O!==(O=Ye.formatDaysRemaining(P[59].statusVencimentoDisplay.diasRestantes,P[59].statusVencimentoDisplay.statusDetalhado)+"")&&oe(H,O)},i(P){_||(k(x.$$.fragment,P),_=!0)},o(P){C(x.$$.fragment,P),_=!1},d(P){P&&g(e),B(x)}}}function Ua(l){let e,t;function a(){return l[38](l[59])}return e=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[zn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){G(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,n){Q(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function zn(l){let e;return{c(){e=R("Devolver")},l(t){e=M(t,"Devolver")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Tn(l){let e,t,a,r=l[59].podeDevolver&&Ua(l);return{c(){e=b("div"),r&&r.c(),t=F(),this.h()},l(n){e=$(n,"DIV",{slot:!0});var s=D(e);r&&r.l(s),t=V(s),s.forEach(g),this.h()},h(){E(e,"slot","actions")},m(n,s){q(n,e,s),r&&r.m(e,null),d(e,t),a=!0},p(n,s){n[59].podeDevolver?r?(r.p(n,s),s[0]&1048576&&k(r,1)):(r=Ua(n),r.c(),k(r,1),r.m(e,t)):r&&(_e(),C(r,1,1,()=>{r=null}),ve())},i(n){a||(k(r),a=!0)},o(n){C(r),a=!1},d(n){n&&g(e),r&&r.d()}}}function Ba(l,e){let t,a,r;return a=new sr({props:{$$slots:{actions:[Tn],content:[Sn]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ie(),G(a.$$.fragment),this.h()},l(n){t=Ie(),Z(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){q(n,t,s),Q(a,n,s),r=!0},p(n,s){e=n;const o={};s[0]&1048576|s[2]&262144&&(o.$$scope={dirty:s,ctx:e}),a.$set(o)},i(n){r||(k(a.$$.fragment,n),r=!0)},o(n){C(a.$$.fragment,n),r=!1},d(n){n&&g(t),B(a,n)}}}function On(l){var f,u,p;let e,t,a,r,n,s;e=new dt({props:{title:((f=l[15])==null?void 0:f.nome)||"Nome n√£o dispon√≠vel",objectType:"FICHA EPI",iconName:"UserOutline",status:(p=(u=l[16])==null?void 0:u.ficha)==null?void 0:p.status,statusType:"ficha",additionalInfo:l[23],primaryAction:{text:"Nova Entrega",icon:"PlusOutline"}}}),e.$on("close",l[25]),e.$on("primaryAction",l[26]);const o=[cn,sn,on,nn],i=[];function c(m,h){return m[6]?0:m[7]?1:m[16]?2:3}return a=c(l),r=i[a]=o[a](l),{c(){G(e.$$.fragment),t=F(),r.c(),n=Ie()},l(m){Z(e.$$.fragment,m),t=V(m),r.l(m),n=Ie()},m(m,h){Q(e,m,h),q(m,t,h),i[a].m(m,h),q(m,n,h),s=!0},p(m,h){var A,N,S;const w={};h[0]&32768&&(w.title=((A=m[15])==null?void 0:A.nome)||"Nome n√£o dispon√≠vel"),h[0]&65536&&(w.status=(S=(N=m[16])==null?void 0:N.ficha)==null?void 0:S.status),h[0]&8388608&&(w.additionalInfo=m[23]),e.$set(w);let I=a;a=c(m),a===I?i[a].p(m,h):(_e(),C(i[I],1,1,()=>{i[I]=null}),ve(),r=i[a],r?r.p(m,h):(r=i[a]=o[a](m),r.c()),k(r,1),r.m(n.parentNode,n))},i(m){s||(k(e.$$.fragment,m),k(r),s=!0)},o(m){C(e.$$.fragment,m),C(r),s=!1},d(m){m&&(g(t),g(n)),B(e,m),i[a].d(m)}}}function Mn(l){let e,t,a,r,n,s,o,i,c,f,u,p,m,h,w;function I(_){l[42](_)}let A={placement:"right",width:"w-full max-w-[940px]",backdrop:!l[22],activateClickOutside:!l[22],bgOpacity:"bg-black/50",position:"fixed",id:"ficha-detail-drawer",class:"drawer-ficha",$$slots:{default:[On]},$$scope:{ctx:l}};l[14]!==void 0&&(A.hidden=l[14]),e=new wr({props:A}),Le.push(()=>Ue(e,"hidden",I));function N(_){l[43](_)}let S={episDisponiveis:l[4],usuarios:l[5],loading:l[8]};l[0]!==void 0&&(S.show=l[0]),r=new Nl({props:S}),Le.push(()=>Ue(r,"show",N)),r.$on("salvar",l[44]),r.$on("cancelar",l[45]);function x(_){l[46](_)}let z={episDisponiveis:l[4],entrega:l[11],loading:l[8]};l[1]!==void 0&&(z.show=l[1]),o=new Ql({props:z}),Le.push(()=>Ue(o,"show",x)),o.$on("salvar",l[47]),o.$on("cancelar",l[48]);function L(_){l[49](_)}let O={equipamento:l[12],loading:l[10]};l[2]!==void 0&&(O.show=l[2]),f=new Xl({props:O}),Le.push(()=>Ue(f,"show",L)),f.$on("confirmar",l[50]),f.$on("cancelar",l[51]);function H(_){l[52](_)}let W={entrega:l[13],loading:l[9]};return l[3]!==void 0&&(W.show=l[3]),m=new ln({props:W}),Le.push(()=>Ue(m,"show",H)),m.$on("confirmar",l[53]),m.$on("cancelar",l[54]),{c(){G(e.$$.fragment),a=F(),G(r.$$.fragment),s=F(),G(o.$$.fragment),c=F(),G(f.$$.fragment),p=F(),G(m.$$.fragment)},l(_){Z(e.$$.fragment,_),a=V(_),Z(r.$$.fragment,_),s=V(_),Z(o.$$.fragment,_),c=V(_),Z(f.$$.fragment,_),p=V(_),Z(m.$$.fragment,_)},m(_,P){Q(e,_,P),q(_,a,P),Q(r,_,P),q(_,s,P),Q(o,_,P),q(_,c,P),Q(f,_,P),q(_,p,P),Q(m,_,P),w=!0},p(_,P){const T={};P[0]&4194304&&(T.backdrop=!_[22]),P[0]&4194304&&(T.activateClickOutside=!_[22]),P[0]&12550336|P[2]&262144&&(T.$$scope={dirty:P,ctx:_}),!t&&P[0]&16384&&(t=!0,T.hidden=_[14],Be(()=>t=!1)),e.$set(T);const y={};P[0]&16&&(y.episDisponiveis=_[4]),P[0]&32&&(y.usuarios=_[5]),P[0]&256&&(y.loading=_[8]),!n&&P[0]&1&&(n=!0,y.show=_[0],Be(()=>n=!1)),r.$set(y);const v={};P[0]&16&&(v.episDisponiveis=_[4]),P[0]&2048&&(v.entrega=_[11]),P[0]&256&&(v.loading=_[8]),!i&&P[0]&2&&(i=!0,v.show=_[1],Be(()=>i=!1)),o.$set(v);const j={};P[0]&4096&&(j.equipamento=_[12]),P[0]&1024&&(j.loading=_[10]),!u&&P[0]&4&&(u=!0,j.show=_[2],Be(()=>u=!1)),f.$set(j);const J={};P[0]&8192&&(J.entrega=_[13]),P[0]&512&&(J.loading=_[9]),!h&&P[0]&8&&(h=!0,J.show=_[3],Be(()=>h=!1)),m.$set(J)},i(_){w||(k(e.$$.fragment,_),k(r.$$.fragment,_),k(o.$$.fragment,_),k(f.$$.fragment,_),k(m.$$.fragment,_),w=!0)},o(_){C(e.$$.fragment,_),C(r.$$.fragment,_),C(o.$$.fragment,_),C(f.$$.fragment,_),C(m.$$.fragment,_),w=!1},d(_){_&&(g(a),g(s),g(c),g(p)),B(e,_),B(r,_),B(o,_),B(f,_),B(m,_)}}}function Rn(l,e,t){let a,r,n,s,o,i,c,f,{fichaCompleteData:u=null}=e,{episDisponiveis:p=[]}=e,{usuarios:m=[]}=e,{loading:h=!1}=e,{error:w=null}=e,{entregaLoading:I=!1}=e,{assinaturaLoading:A=!1}=e,{devolucaoLoading:N=!1}=e,{showNovaEntregaDrawer:S=!1}=e,{showEditarEntregaDrawer:x=!1}=e,{showDevolucaoModal:z=!1}=e,{showAssinaturaModal:L=!1}=e,{entregaEdicao:O=null}=e,{equipamentoDevolucao:H=null}=e,{entregaAssinatura:W=null}=e,{open:_=!1}=e,P=!_,T=_,y="equipamentos";const v=Xe();function j(){v("close")}let J=P;function te(){v("novaEntrega")}function ne(ee){v("editarEntrega",{entrega:ee})}function le(ee){v("assinarEntrega",{entrega:ee})}function ae(ee){v("devolverEquipamento",{equipamento:ee})}function K(ee){v("imprimirEntrega",{entrega:ee})}function ce(ee){return Ye.getEventIcon(ee)}function fe(ee){return Ye.getColorClasses(ee)}const de=ee=>t(21,y=ee.id),ie=ee=>ae(ee),Y=ee=>le(ee),X=ee=>K(ee),se=ee=>ne(ee);function pe(ee){P=ee,t(14,P),t(34,_),t(35,T)}function U(ee){S=ee,t(0,S)}const re=ee=>v("salvarNovaEntrega",ee.detail),me=()=>v("cancelarNovaEntrega");function $e(ee){x=ee,t(1,x)}const Ee=ee=>v("salvarEdicaoEntrega",ee.detail),Ve=()=>v("cancelarEdicaoEntrega");function De(ee){z=ee,t(2,z)}const ye=ee=>v("confirmarDevolucao",ee.detail),Se=()=>v("cancelarDevolucao");function qe(ee){L=ee,t(3,L)}const ge=ee=>v("confirmarAssinatura",ee.detail),ze=()=>v("cancelarAssinatura");return l.$$set=ee=>{"fichaCompleteData"in ee&&t(33,u=ee.fichaCompleteData),"episDisponiveis"in ee&&t(4,p=ee.episDisponiveis),"usuarios"in ee&&t(5,m=ee.usuarios),"loading"in ee&&t(6,h=ee.loading),"error"in ee&&t(7,w=ee.error),"entregaLoading"in ee&&t(8,I=ee.entregaLoading),"assinaturaLoading"in ee&&t(9,A=ee.assinaturaLoading),"devolucaoLoading"in ee&&t(10,N=ee.devolucaoLoading),"showNovaEntregaDrawer"in ee&&t(0,S=ee.showNovaEntregaDrawer),"showEditarEntregaDrawer"in ee&&t(1,x=ee.showEditarEntregaDrawer),"showDevolucaoModal"in ee&&t(2,z=ee.showDevolucaoModal),"showAssinaturaModal"in ee&&t(3,L=ee.showAssinaturaModal),"entregaEdicao"in ee&&t(11,O=ee.entregaEdicao),"equipamentoDevolucao"in ee&&t(12,H=ee.equipamentoDevolucao),"entregaAssinatura"in ee&&t(13,W=ee.entregaAssinatura),"open"in ee&&t(34,_=ee.open)},l.$$.update=()=>{var ee,we;l.$$.dirty[0]&16384|l.$$.dirty[1]&24&&_!==T&&(console.log("üîÑ Sincronizando drawer (open changed):",{open:_,hidden:P,lastOpen:T}),t(14,P=!_),t(35,T=_)),l.$$.dirty[0]&16448|l.$$.dirty[1]&12&&_&&console.log("üéØ FichaDetailPresenter: Drawer foi aberto, carregando dados...",{open:_,hidden:P,fichaCompleteData:!!u,loading:h}),l.$$.dirty[1]&4&&t(16,a=u==null?void 0:u.data),l.$$.dirty[0]&65536&&t(15,r=(ee=a==null?void 0:a.ficha)==null?void 0:ee.colaborador),l.$$.dirty[0]&65536&&t(20,n=(a==null?void 0:a.equipamentosEmPosse)||[]),l.$$.dirty[0]&65536&&t(19,s=(a==null?void 0:a.devolucoes)||[]),l.$$.dirty[0]&65536&&t(18,o=(a==null?void 0:a.entregas)||[]),l.$$.dirty[0]&65536&&t(17,i=(a==null?void 0:a.historico)||[]),l.$$.dirty[0]&65536&&(a==null||a.estatisticas),l.$$.dirty[0]&2031616&&a&&(console.log("üéØ FichaDetailPresenter - dados reativos atualizados:"),console.log("  - Equipamentos em posse:",(n==null?void 0:n.length)||0),console.log("  - Devolu√ß√µes:",(s==null?void 0:s.length)||0),console.log("  - Entregas:",(o==null?void 0:o.length)||0),console.log("  - Hist√≥rico:",(i==null?void 0:i.length)||0)),l.$$.dirty[0]&65536&&(we=a==null?void 0:a.ficha)!=null&&we.statusDisplay&&Ye.getStatusConfig(a.ficha.statusDisplay.label,a.ficha.statusDisplay.cor),l.$$.dirty[0]&32768&&t(23,c=r?[r.cpfDisplay||r.cpf||"CPF n√£o dispon√≠vel",`${r.cargo||"Cargo n√£o informado"} ‚Ä¢ ${r.empresa||"Empresa n√£o informada"}`]:[]),l.$$.dirty[0]&16384|l.$$.dirty[1]&40&&P!==J&&(console.log("üîÑ Hidden changed:",{hidden:P,lastHidden:J,open:_}),P&&_&&(console.log("üéØ Drawer fechado externamente, notificando Container"),v("close")),t(36,J=P)),l.$$.dirty[0]&15&&t(22,f=S||x||z||L)},[S,x,z,L,p,m,h,w,I,A,N,O,H,W,P,r,a,i,o,s,n,y,f,c,v,j,te,ne,le,ae,K,ce,fe,u,_,T,J,de,ie,Y,X,se,pe,U,re,me,$e,Ee,Ve,De,ye,Se,qe,ge,ze]}class xn extends Qe{constructor(e){super(),Ze(this,e,Rn,Mn,Ge,{fichaCompleteData:33,episDisponiveis:4,usuarios:5,loading:6,error:7,entregaLoading:8,assinaturaLoading:9,devolucaoLoading:10,showNovaEntregaDrawer:0,showEditarEntregaDrawer:1,showDevolucaoModal:2,showAssinaturaModal:3,entregaEdicao:11,equipamentoDevolucao:12,entregaAssinatura:13,open:34},null,[-1,-1,-1])}}function jn(l){let e,t;const a=[l[0]];let r={};for(let n=0;n<a.length;n+=1)r=cr(r,a[n]);return e=new xn({props:r}),e.$on("close",l[1]),e.$on("novaEntrega",l[2]),e.$on("salvarNovaEntrega",l[3]),e.$on("cancelarNovaEntrega",l[4]),e.$on("editarEntrega",l[5]),e.$on("salvarEdicaoEntrega",l[6]),e.$on("cancelarEdicaoEntrega",l[7]),e.$on("assinarEntrega",l[8]),e.$on("confirmarAssinatura",l[9]),e.$on("cancelarAssinatura",l[10]),e.$on("devolverEquipamento",l[11]),e.$on("confirmarDevolucao",l[12]),e.$on("cancelarDevolucao",l[13]),e.$on("cancelarEntrega",l[14]),e.$on("imprimirEntrega",l[15]),{c(){G(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,s){Q(e,n,s),t=!0},p(n,s){const o=s[0]&1?fr(a,[ur(n[0])]):{};e.$set(o)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Hn(l,e,t){let a,r;Ka(l,gl,Y=>t(34,r=Y));let{open:n=!1}=e,{fichaId:s=null}=e;const o=Xe();let i=null,c=[],f=[],u=!0,p=null,m=!1,h=!1,w=!1,I=!1,A=!1,N=!1,S=!1,x=null,z=null,L=null,O=null;Ya(()=>{console.log("üöÄ FichaDetailContainer: Inicializando..."),Promise.all([W(),_()])});async function H(){var Y,X,se,pe,U,re,me,$e;if(s){t(21,u=!0),t(22,p=null),t(33,O=s);try{console.log("üìã FichaDetailContainer: Carregando ficha completa:",s),t(18,i=await $t.getFichaComplete(s)),console.log("‚úÖ Dados da ficha carregados"),console.log("üîç Equipamentos em posse:",((X=(Y=i==null?void 0:i.data)==null?void 0:Y.equipamentosEmPosse)==null?void 0:X.length)||0),console.log("üîÑ Devolu√ß√µes:",((pe=(se=i==null?void 0:i.data)==null?void 0:se.devolucoes)==null?void 0:pe.length)||0),console.log("üöö Entregas:",((re=(U=i==null?void 0:i.data)==null?void 0:U.entregas)==null?void 0:re.length)||0),console.log("üìù Hist√≥rico:",(($e=(me=i==null?void 0:i.data)==null?void 0:me.historico)==null?void 0:$e.length)||0)}catch(Ee){console.error("‚ùå Erro ao carregar ficha:",Ee),t(22,p=Ee instanceof Error?Ee.message:"Erro desconhecido"),Re.error("Erro ao carregar ficha","N√£o foi poss√≠vel carregar os dados da ficha")}finally{t(21,u=!1)}}}async function W(){try{console.log("üöÄ FichaDetailContainer: Carregando EPIs dispon√≠veis..."),t(19,c=await $t.getEPIsDisponiveis()),console.log("üì¶ EPIs dispon√≠veis carregados:",c.length),console.log("üì¶ Estrutura dos EPIs:",c.slice(0,2));const Y=c.filter(X=>X.disponivel&&X.quantidadeDisponivel>0);console.log("üéØ EPIs com estoque dispon√≠vel:",Y.length),Y.length===0&&(console.warn("‚ö†Ô∏è ATEN√á√ÉO: Nenhum EPI com estoque dispon√≠vel encontrado!"),console.log("üîç EPIs sem estoque:",c.map(X=>({nome:X.nomeEquipamento,quantidade:X.quantidadeDisponivel,disponivel:X.disponivel}))))}catch(Y){throw console.error("‚ùå Erro ao carregar EPIs dispon√≠veis:",Y),Y}}async function _(){try{console.log("üë§ FichaDetailContainer: Carregando usu√°rios..."),t(20,f=await $t.getUsuarios()),console.log("üë• Usu√°rios carregados:",f==null?void 0:f.length),console.log("üë• Estrutura dos usu√°rios:",f==null?void 0:f.slice(0,2))}catch(Y){throw console.error("‚ùå Erro ao carregar usu√°rios:",Y),Y}}function P(){t(16,n=!1),t(33,O=null),t(18,i=null),t(22,p=null),t(23,m=!1),t(24,h=!1),t(25,w=!1),t(26,I=!1),o("close"),console.log("‚ùå Drawer fechado")}async function T(){console.log("‚ûï Abrindo formul√°rio de nova entrega"),console.log("üì¶ Estado atual dos EPIs:",c.length,"EPIs carregados"),c.length===0&&(console.log("üîÑ EPIs n√£o carregados, carregando agora..."),await W(),console.log("üì¶ Ap√≥s recarregar:",c.length,"EPIs dispon√≠veis")),console.log("üì¶ EPIs que ser√£o passados para o drawer:",c),t(23,m=!0)}async function y(Y){var X;if(s){t(27,A=!0);try{if(console.log("üíæ FichaDetailContainer: Criando nova entrega..."),console.log("üîç Respons√°vel ID:",Y.detail.usuarioResponsavelId),console.log("üîç Quantidade de itens:",((X=Y.detail.itens)==null?void 0:X.length)||0),!Y.detail.usuarioResponsavelId)throw new Error("usuarioResponsavelId √© obrigat√≥rio");if(!Y.detail.itens||Y.detail.itens.length===0)throw new Error("Pelo menos um item deve ser selecionado");console.log("üîç Verificando fichaId:",{fichaId:s,fichaIdType:typeof s,isUUID:s==null?void 0:s.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:s==null?void 0:s.match(/^[A-Z0-9]{6}$/i)});const se={fichaEpiId:s,responsavelId:Y.detail.usuarioResponsavelId,itens:Y.detail.itens.map(U=>{const re=c.find($e=>$e.id===U.episDisponivelId);console.log("üîç Mapeando item:",{itemEpisDisponivelId:U.episDisponivelId,epiCorrespondente:re?{id:re.id,estoqueItemId:re.estoqueItemId,episDisponivelId:re.episDisponivelId,nome:re.nomeEquipamento}:null});const me=(re==null?void 0:re.estoqueItemId)||(re==null?void 0:re.id)||U.episDisponivelId;return console.log("üîç Verificando ID do estoque item:",{estoqueItemId:me,isValidFormat:(me==null?void 0:me.match(/^[A-Z0-9]{6}$/))||(me==null?void 0:me.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)),needsMapping:!(me!=null&&me.match(/^[A-Z0-9]{6}$/))&&!(me!=null&&me.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))}),{estoqueItemId:me,quantidade:U.quantidade}}),observacoes:Y.detail.observacoes||""};console.log("üìã Payload da entrega:",se);const pe=await vt.createDelivery(se);t(23,m=!1),await H(),Re.success("Entrega criada",`Entrega ${pe.data.entregaId} criada com ${pe.data.totalItens} itens`),o("fichaUpdated",{fichaId:s})}catch(se){console.error("‚ùå Erro ao salvar nova entrega:",se);let pe="Erro ao criar entrega",U="Erro desconhecido";if(se instanceof Error)switch(se.name){case"EstoqueItemNotFoundError":pe="Item de estoque n√£o encontrado",U="Os EPIs selecionados n√£o possuem estoque dispon√≠vel no almoxarifado. Verifique se h√° itens em estoque antes de criar a entrega.";break;case"ValidationError":pe="Dados de entrega inv√°lidos",U="Verifique se todos os campos obrigat√≥rios est√£o preenchidos e tente novamente.";break;default:se.message.includes("Cannot GET")||se.message.includes("404")?(pe="Servi√ßo indispon√≠vel",U="O servi√ßo de entregas est√° temporariamente indispon√≠vel. Alguns endpoints do backend n√£o est√£o implementados. Tente novamente mais tarde."):se.message.includes("Network error")||se.message.includes("timeout")?(pe="Erro de conex√£o",U="Problema de conex√£o com o servidor. Verifique sua internet e tente novamente."):se.message.includes("Validation error")?(pe="Dados inv√°lidos",U="Os dados fornecidos s√£o inv√°lidos. Verifique os campos e tente novamente. Detalhes: "+se.message):U=se.message;break}Re.error(pe,U),console.log("‚ÑπÔ∏è Drawer mantido aberto para corre√ß√£o dos dados")}finally{t(27,A=!1)}}}function v(){t(23,m=!1),console.log("‚ùå Nova entrega cancelada")}function j(Y){t(30,x=Y.detail.entrega),t(24,h=!0),console.log("‚úèÔ∏è Editando entrega:",x.id)}async function J(Y){if(x){t(27,A=!0);try{console.log("üíæ FichaDetailContainer: Editando entrega:",Y.detail);const X={responsavelId:Y.detail.responsavelId,itens:Y.detail.itens.map(se=>({estoqueItemId:se.estoqueItemId,quantidade:se.quantidade})),observacoes:Y.detail.observacoes};await vt.updateDelivery(x.id,X),t(24,h=!1),t(30,x=null),await H(),Re.success("Entrega atualizada","Entrega foi atualizada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(X){console.error("‚ùå Erro ao editar entrega:",X),Re.error("Erro ao editar","N√£o foi poss√≠vel atualizar a entrega")}finally{t(27,A=!1)}}}function te(){t(24,h=!1),t(30,x=null),console.log("‚ùå Edi√ß√£o de entrega cancelada")}function ne(Y){t(32,L=Y.detail.entrega),t(26,I=!0),console.log("‚úçÔ∏è Iniciando assinatura da entrega:",L.id)}async function le(Y){if(L){t(28,N=!0);try{console.log("‚úçÔ∏è FichaDetailContainer: Confirmando assinatura:",Y.detail);const X={assinatura:Y.detail.assinatura};await vt.confirmSignature(L.id,X),t(26,I=!1),t(32,L=null),await H(),Re.success("Assinatura registrada","Entrega foi assinada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(X){console.error("‚ùå Erro ao processar assinatura:",X),Re.error("Erro na assinatura","N√£o foi poss√≠vel registrar a assinatura")}finally{t(28,N=!1)}}}function ae(){t(26,I=!1),t(32,L=null),console.log("‚ùå Assinatura cancelada")}function K(Y){t(31,z=Y.detail.equipamento),t(25,w=!0),console.log("üîÑ Iniciando devolu√ß√£o:",z.id)}async function ce(Y){var X,se;if(!(!z||!s)){t(29,S=!0);try{if(console.log("üîÑ FichaDetailContainer: Processando devolu√ß√£o via endpoint individual:",Y.detail),console.log("üìã Dados do equipamento:",{id:z.id,entregaId:z.entregaId,itemEntregaId:z.itemEntregaId}),!z.entregaId||!z.itemEntregaId)throw new Error("Dados incompletos do equipamento para devolu√ß√£o");const U=await ml.processIndividualReturn(s,z.entregaId,z.itemEntregaId,Y.detail.motivo,"cffc2197-acbe-4a64-bfd7-435370e9c226",Y.detail.observacoes);t(25,w=!1),t(31,z=null),await H(),Re.success("Devolu√ß√£o registrada","Equipamento foi devolvido com sucesso"),o("fichaUpdated",{fichaId:s})}catch(pe){console.error("‚ùå Erro ao processar devolu√ß√£o:",pe);let U="N√£o foi poss√≠vel registrar a devolu√ß√£o";(se=(X=pe.response)==null?void 0:X.data)!=null&&se.message?U=pe.response.data.message:pe.message&&(U=pe.message),Re.error("Erro na devolu√ß√£o",U)}finally{t(29,S=!1)}}}function fe(){t(25,w=!1),t(31,z=null),console.log("‚ùå Devolu√ß√£o cancelada")}async function de(Y){try{console.log("‚ùå FichaDetailContainer: Cancelando entrega:",Y.detail);const X={motivo:Y.detail.motivo};await vt.cancelDelivery(Y.detail.entrega.id,X),await H(),Re.success("Entrega cancelada","Entrega foi cancelada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(X){console.error("‚ùå Erro ao cancelar entrega:",X),Re.error("Erro ao cancelar","N√£o foi poss√≠vel cancelar a entrega")}}function ie(Y){console.log("üñ®Ô∏è Imprimindo entrega:",Y.detail.entrega.id),Re.info("Fun√ß√£o em desenvolvimento","Impress√£o ser√° implementada em breve")}return l.$$set=Y=>{"open"in Y&&t(16,n=Y.open),"fichaId"in Y&&t(17,s=Y.fichaId)},l.$$.update=()=>{if(l.$$.dirty[0]&196608&&n&&s&&console.log("üéØ FichaDetailContainer: Estado open mudou para true, fichaId:",s),l.$$.dirty[0]&131072|l.$$.dirty[1]&8&&s&&r.has(s)){const Y=r.get(s);Y&&(t(18,i={success:!0,data:Y}),console.log("üîÑ Dados completos atualizados via store reativo:",s))}l.$$.dirty[0]&196608|l.$$.dirty[1]&4&&n&&s&&s!==O&&H(),l.$$.dirty[0]&2147287040|l.$$.dirty[1]&3&&t(0,a={fichaCompleteData:i,episDisponiveis:c,usuarios:f,loading:u,error:p,entregaLoading:A,assinaturaLoading:N,devolucaoLoading:S,showNovaEntregaDrawer:m,showEditarEntregaDrawer:h,showDevolucaoModal:w,showAssinaturaModal:I,entregaEdicao:x,equipamentoDevolucao:z,entregaAssinatura:L,open:n})},[a,P,T,y,v,j,J,te,ne,le,ae,K,ce,fe,de,ie,n,s,i,c,f,u,p,m,h,w,I,A,N,S,x,z,L,O,r]}class Ln extends Qe{constructor(e){super(),Ze(this,e,Hn,jn,Ge,{open:16,fichaId:17},null,[-1,-1])}}function Qa(l){let e,t;return e=new Nt({props:{error:l[2],onRetry:l[14]}}),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&4&&(n.error=a[2]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Un(l){let e,t;return e=new nt({props:{options:l[3],value:l[6],placeholder:"Selecione uma contratada...",disabled:l[1]}}),e.$on("change",l[11]),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&8&&(n.options=a[3]),r&64&&(n.value=a[6]),r&2&&(n.disabled=a[1]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Bn(l){let e,t,a,r,n="Carregando...",s;return t=new Pt({props:{size:"sm"}}),{c(){e=b("div"),G(t.$$.fragment),a=F(),r=b("span"),r.textContent=n,this.h()},l(o){e=$(o,"DIV",{class:!0});var i=D(e);Z(t.$$.fragment,i),a=V(i),r=$(i,"SPAN",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-1v5o0hb"&&(r.textContent=n),i.forEach(g),this.h()},h(){E(r,"class","ml-2 text-sm text-gray-600"),E(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(o,i){q(o,e,i),Q(t,e,null),d(e,a),d(e,r),s=!0},p:Ae,i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){C(t.$$.fragment,o),s=!1},d(o){o&&g(e),B(t)}}}function Qn(l){let e,t,a,r;e=new nt({props:{options:l[9],value:l[7],placeholder:l[6]?"Selecione um colaborador sem ficha...":"Primeiro selecione uma contratada",disabled:l[1]||!l[6]}}),e.$on("change",l[12]);let n=l[9].length===0&&l[6]&&Za();return{c(){G(e.$$.fragment),t=F(),n&&n.c(),a=Ie()},l(s){Z(e.$$.fragment,s),t=V(s),n&&n.l(s),a=Ie()},m(s,o){Q(e,s,o),q(s,t,o),n&&n.m(s,o),q(s,a,o),r=!0},p(s,o){const i={};o&512&&(i.options=s[9]),o&128&&(i.value=s[7]),o&64&&(i.placeholder=s[6]?"Selecione um colaborador sem ficha...":"Primeiro selecione uma contratada"),o&66&&(i.disabled=s[1]||!s[6]),e.$set(i),s[9].length===0&&s[6]?n||(n=Za(),n.c(),n.m(a.parentNode,a)):n&&(n.d(1),n=null)},i(s){r||(k(e.$$.fragment,s),r=!0)},o(s){C(e.$$.fragment,s),r=!1},d(s){s&&(g(t),g(a)),B(e,s),n&&n.d(s)}}}function Zn(l){let e,t,a,r,n="Carregando...",s;return t=new Pt({props:{size:"sm"}}),{c(){e=b("div"),G(t.$$.fragment),a=F(),r=b("span"),r.textContent=n,this.h()},l(o){e=$(o,"DIV",{class:!0});var i=D(e);Z(t.$$.fragment,i),a=V(i),r=$(i,"SPAN",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-1v5o0hb"&&(r.textContent=n),i.forEach(g),this.h()},h(){E(r,"class","ml-2 text-sm text-gray-600"),E(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(o,i){q(o,e,i),Q(t,e,null),d(e,a),d(e,r),s=!0},p:Ae,i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){C(t.$$.fragment,o),s=!1},d(o){o&&g(e),B(t)}}}function Za(l){let e,t="Todos os colaboradores desta contratada j√° possuem ficha EPI";return{c(){e=b("p"),e.textContent=t,this.h()},l(a){e=$(a,"P",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-1689xbi"&&(e.textContent=t),this.h()},h(){E(e,"class","text-sm text-gray-500 mt-1")},m(a,r){q(a,e,r)},d(a){a&&g(e)}}}function Gn(l){let e,t,a,r,n="Contratada",s,o,i,c,f,u,p="Colaborador",m,h,w,I,A=l[2]&&Qa(l);const N=[Bn,Un],S=[];function x(H,W){return H[4]?0:1}o=x(l),i=S[o]=N[o](l);const z=[Zn,Qn],L=[];function O(H,W){return H[5]?0:1}return h=O(l),w=L[h]=z[h](l),{c(){A&&A.c(),e=F(),t=b("div"),a=b("div"),r=b("label"),r.textContent=n,s=F(),i.c(),c=F(),f=b("div"),u=b("label"),u.textContent=p,m=F(),w.c(),this.h()},l(H){A&&A.l(H),e=V(H),t=$(H,"DIV",{class:!0});var W=D(t);a=$(W,"DIV",{});var _=D(a);r=$(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-6kjk6u"&&(r.textContent=n),s=V(_),i.l(_),_.forEach(g),c=V(W),f=$(W,"DIV",{});var P=D(f);u=$(P,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(u)!=="svelte-funhjy"&&(u.textContent=p),m=V(P),w.l(P),P.forEach(g),W.forEach(g),this.h()},h(){E(r,"for","contratada-select"),E(r,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(u,"for","colaborador-select"),E(u,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(t,"class","space-y-4")},m(H,W){A&&A.m(H,W),q(H,e,W),q(H,t,W),d(t,a),d(a,r),d(a,s),S[o].m(a,null),d(t,c),d(t,f),d(f,u),d(f,m),L[h].m(f,null),I=!0},p(H,W){H[2]?A?(A.p(H,W),W&4&&k(A,1)):(A=Qa(H),A.c(),k(A,1),A.m(e.parentNode,e)):A&&(_e(),C(A,1,1,()=>{A=null}),ve());let _=o;o=x(H),o===_?S[o].p(H,W):(_e(),C(S[_],1,1,()=>{S[_]=null}),ve(),i=S[o],i?i.p(H,W):(i=S[o]=N[o](H),i.c()),k(i,1),i.m(a,null));let P=h;h=O(H),h===P?L[h].p(H,W):(_e(),C(L[P],1,1,()=>{L[P]=null}),ve(),w=L[h],w?w.p(H,W):(w=L[h]=z[h](H),w.c()),k(w,1),w.m(f,null))},i(H){I||(k(A),k(i),k(w),I=!0)},o(H){C(A),C(i),C(w),I=!1},d(H){H&&(g(e),g(t)),A&&A.d(H),S[o].d(),L[h].d()}}}function Jn(l){let e;return{c(){e=R("Cancelar")},l(t){e=M(t,"Cancelar")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Wn(l){let e;return{c(){e=R("Criar Ficha")},l(t){e=M(t,"Criar Ficha")},m(t,a){q(t,e,a)},i:Ae,o:Ae,d(t){t&&g(e)}}}function Kn(l){let e,t,a;return e=new hr({props:{class:"mr-2",size:"4"}}),{c(){G(e.$$.fragment),t=R(`
        Criando...`)},l(r){Z(e.$$.fragment,r),t=M(r,`
        Criando...`)},m(r,n){Q(e,r,n),q(r,t,n),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),a=!1},d(r){r&&g(t),B(e,r)}}}function Yn(l){let e,t,a,r;const n=[Kn,Wn],s=[];function o(i,c){return i[1]?0:1}return e=o(l),t=s[e]=n[e](l),{c(){t.c(),a=Ie()},l(i){t.l(i),a=Ie()},m(i,c){s[e].m(i,c),q(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e!==f&&(_e(),C(s[f],1,1,()=>{s[f]=null}),ve(),t=s[e],t||(t=s[e]=n[e](i),t.c()),k(t,1),t.m(a.parentNode,a))},i(i){r||(k(t),r=!0)},o(i){C(t),r=!1},d(i){i&&g(a),s[e].d(i)}}}function Xn(l){let e,t,a,r;return e=new Ne({props:{color:"alternative",size:"sm",class:"rounded-sm",disabled:l[1],$$slots:{default:[Jn]},$$scope:{ctx:l}}}),e.$on("click",l[10]),a=new Ne({props:{color:"primary",size:"sm",class:"rounded-sm",disabled:!l[8],$$slots:{default:[Yn]},$$scope:{ctx:l}}}),a.$on("click",l[13]),{c(){G(e.$$.fragment),t=F(),G(a.$$.fragment)},l(n){Z(e.$$.fragment,n),t=V(n),Z(a.$$.fragment,n)},m(n,s){Q(e,n,s),q(n,t,s),Q(a,n,s),r=!0},p(n,s){const o={};s&2&&(o.disabled=n[1]),s&524288&&(o.$$scope={dirty:s,ctx:n}),e.$set(o);const i={};s&256&&(i.disabled=!n[8]),s&524290&&(i.$$scope={dirty:s,ctx:n}),a.$set(i)},i(n){r||(k(e.$$.fragment,n),k(a.$$.fragment,n),r=!0)},o(n){C(e.$$.fragment,n),C(a.$$.fragment,n),r=!1},d(n){n&&g(t),B(e,n),B(a,n)}}}function eo(l){let e,t,a;function r(s){l[16](s)}let n={size:"md",outsideclose:!l[1],autoclose:!1,$$slots:{footer:[Xn],default:[Gn]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.open=l[0]),e=new qr({props:n}),Le.push(()=>Ue(e,"open",r)),{c(){G(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,o){Q(e,s,o),a=!0},p(s,[o]){const i={};o&2&&(i.outsideclose=!s[1]),o&525310&&(i.$$scope={dirty:o,ctx:s}),!t&&o&1&&(t=!0,i.open=s[0],Be(()=>t=!1)),e.$set(i)},i(s){a||(k(e.$$.fragment,s),a=!0)},o(s){C(e.$$.fragment,s),a=!1},d(s){B(e,s)}}}function to(l,e,t){let a,r,{open:n=!1}=e,{submitting:s=!1}=e,{error:o=null}=e,{contratadas:i=[]}=e,{colaboradores:c=[]}=e,{loadingContratadas:f=!1}=e,{loadingColaboradores:u=!1}=e;const p=Xe();let m="",h="";function w(){s||(t(6,m=""),t(7,h=""),p("close"))}function I(z){t(6,m=z.detail),t(7,h=""),p("contratadaChange",m)}function A(z){t(7,h=z.detail),p("colaboradorChange",h)}function N(){a&&p("submit",{contratadaId:m,colaboradorId:h})}function S(){p("retry")}function x(z){n=z,t(0,n)}return l.$$set=z=>{"open"in z&&t(0,n=z.open),"submitting"in z&&t(1,s=z.submitting),"error"in z&&t(2,o=z.error),"contratadas"in z&&t(3,i=z.contratadas),"colaboradores"in z&&t(15,c=z.colaboradores),"loadingContratadas"in z&&t(4,f=z.loadingContratadas),"loadingColaboradores"in z&&t(5,u=z.loadingColaboradores)},l.$$.update=()=>{l.$$.dirty&1&&(n||(t(6,m=""),t(7,h=""))),l.$$.dirty&194&&t(8,a=!!m&&!!h&&!s),l.$$.dirty&32832&&t(9,r=c.filter(z=>!m||z.empresa===m))},[n,s,o,i,f,u,m,h,a,r,w,I,A,N,S,c,x]}class ao extends Qe{constructor(e){super(),Ze(this,e,to,eo,Ge,{open:0,submitting:1,error:2,contratadas:3,colaboradores:15,loadingContratadas:4,loadingColaboradores:5})}}function Ga(l){let e,t;return e=new Ln({props:{fichaId:l[3],open:l[2]}}),e.$on("close",l[14]),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r[0]&8&&(n.fichaId=a[3]),r[0]&4&&(n.open=a[2]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Ja(l){let e,t;return e=new ao({props:{contratadas:l[11],colaboradores:l[12],loadingContratadas:lo,loadingColaboradores:no,loading:oo}}),e.$on("close",l[16]),e.$on("submit",l[30]),{c(){G(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function ro(l){let e,t,a,r,n;t=new il({props:{items:l[9],loading:l[8],error:l[7],pagination:{currentPage:l[6].page,totalPages:l[6].totalPages,pageSize:l[6].pageSize,total:l[6].total,hasNext:l[6].page<l[6].totalPages,hasPrev:l[6].page>1},filters:{searchTerm:l[1],empresaFilter:l[0].empresa,cargoFilter:l[0].cargo,devolucaoPendente:l[0].devolucaoPendente,hasActiveFilters:l[1]!==""||l[0].empresa!=="todas"||l[0].cargo!=="todos"||l[0].devolucaoPendente},filterOptions:l[5]}}),t.$on("searchChange",l[24]),t.$on("empresaFilterChange",l[25]),t.$on("cargoFilterChange",l[26]),t.$on("devolucaoPendenteChange",l[27]),t.$on("clearFilters",l[28]),t.$on("pageChange",l[29]),t.$on("viewDetail",l[13]),t.$on("refresh",l[17]),t.$on("novaFicha",l[15]);let s=l[2]&&l[3]&&Ga(l),o=l[4]&&Ja(l);return{c(){e=b("div"),G(t.$$.fragment),a=F(),s&&s.c(),r=F(),o&&o.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var c=D(e);Z(t.$$.fragment,c),a=V(c),s&&s.l(c),r=V(c),o&&o.l(c),c.forEach(g),this.h()},h(){E(e,"class","fichas-container h-full svelte-zg0loa")},m(i,c){q(i,e,c),Q(t,e,null),d(e,a),s&&s.m(e,null),d(e,r),o&&o.m(e,null),n=!0},p(i,c){const f={};c[0]&512&&(f.items=i[9]),c[0]&256&&(f.loading=i[8]),c[0]&128&&(f.error=i[7]),c[0]&64&&(f.pagination={currentPage:i[6].page,totalPages:i[6].totalPages,pageSize:i[6].pageSize,total:i[6].total,hasNext:i[6].page<i[6].totalPages,hasPrev:i[6].page>1}),c[0]&3&&(f.filters={searchTerm:i[1],empresaFilter:i[0].empresa,cargoFilter:i[0].cargo,devolucaoPendente:i[0].devolucaoPendente,hasActiveFilters:i[1]!==""||i[0].empresa!=="todas"||i[0].cargo!=="todos"||i[0].devolucaoPendente}),c[0]&32&&(f.filterOptions=i[5]),t.$set(f),i[2]&&i[3]?s?(s.p(i,c),c[0]&12&&k(s,1)):(s=Ga(i),s.c(),k(s,1),s.m(e,r)):s&&(_e(),C(s,1,1,()=>{s=null}),ve()),i[4]?o?(o.p(i,c),c[0]&16&&k(o,1)):(o=Ja(i),o.c(),k(o,1),o.m(e,null)):o&&(_e(),C(o,1,1,()=>{o=null}),ve())},i(i){n||(k(t.$$.fragment,i),k(s),k(o),n=!0)},o(i){C(t.$$.fragment,i),C(s),C(o),n=!1},d(i){i&&g(e),B(t),s&&s.d(),o&&o.d()}}}let lo=!1,no=!1,oo=!1;function so(l,e,t){let a,r,n,s,o,{initialPageSize:i=10}=e;const c=!1,f=3e4,u=_r(K=>(console.log("üîç FichasContainer: Par√¢metros de busca:",K),$t.getFichasWithColaboradores({page:K.page||1,limit:K.limit||i,searchTerm:K.search||void 0,empresaFilter:K.empresa!=="todas"?K.empresa:void 0,cargoFilter:K.cargo!=="todos"?K.cargo:void 0,statusFilter:K.status!=="todos"?K.status:void 0,devolucaoPendente:K.devolucaoPendente===!0}).then(ce=>{var fe;return console.log("üì¶ FichasContainer: Resposta da API:",{total:ce.total,fichas:((fe=ce.fichas)==null?void 0:fe.length)||0,filtros:{devolucaoPendente:K.devolucaoPendente,empresa:K.empresa,cargo:K.cargo}}),{data:ce.fichas,total:ce.total,page:ce.page||K.page||1,pageSize:ce.pageSize||K.limit||i,totalPages:Math.ceil(ce.total/(K.limit||i))}})),{initialPageSize:i});Ka(l,u,K=>t(23,o=K));let p=!1,m=null,h=!1,w=[],I=[],A={empresas:[{value:"todas",label:"Todas as Empresas"}],cargos:[{value:"todos",label:"Todos os Cargos"}]},N=!1,S=!0;Ya(async()=>{console.log("üöÄ FichasContainer: Inicializando...");try{typeof window<"u"&&(await vr.initialize(),await Promise.all([x(),z()]),console.log("‚úÖ FichasContainer: Inicializado com sucesso"))}catch(K){console.error("‚ùå Erro ao inicializar FichasContainer:",K)}finally{t(21,S=!1)}});async function x(){try{await u.fetchPage(),console.log("üìã Dados de fichas carregados")}catch(K){console.error("‚ùå Erro ao carregar fichas:",K),Re.error("Erro ao carregar fichas","N√£o foi poss√≠vel carregar os dados das fichas")}}async function z(){var K,ce;try{N=!0,console.log("üîß Carregando op√ß√µes dos filtros...");const[fe,de]=await Promise.all([Te.get("/contratadas?limit=100"),Te.get("/colaboradores?limit=1000")]);if(fe!=null&&fe.success&&((K=fe.data)!=null&&K.contratadas)){const ie=fe.data.contratadas.map(Y=>({value:Y.nome,label:Y.nome}));t(5,A.empresas=[{value:"todas",label:"Todas as Empresas"},...ie],A),console.log("‚úÖ Empresas carregadas:",ie.length)}if(de!=null&&de.success&&((ce=de.data)!=null&&ce.colaboradores)){const Y=[...new Set(de.data.colaboradores.map(X=>X.cargo).filter(X=>X&&X.trim()))].map(X=>({value:X,label:X}));t(5,A.cargos=[{value:"todos",label:"Todos os Cargos"},...Y],A),console.log("‚úÖ Cargos √∫nicos carregados:",Y.length)}t(5,A={...A})}catch(fe){console.error("‚ùå Erro ao carregar op√ß√µes dos filtros:",fe)}finally{N=!1}}let L={empresa:"todas",cargo:"todos",devolucaoPendente:!1},O="",H;function W(K){t(3,m=K.detail),t(2,p=!0)}function _(){t(2,p=!1),t(3,m=null)}function P(){t(4,h=!0)}function T(){t(4,h=!1)}function y(){x()}const v=K=>t(1,O=K.detail),j=K=>t(0,L.empresa=K.detail,L),J=K=>t(0,L.cargo=K.detail,L),te=K=>t(0,L.devolucaoPendente=K.detail,L),ne=()=>{t(1,O=""),t(0,L={empresa:"todas",cargo:"todos",devolucaoPendente:!1})},le=K=>u.goToPage(K.detail),ae=K=>console.log("Nova ficha:",K.detail);return l.$$set=K=>{"initialPageSize"in K&&t(18,i=K.initialPageSize)},l.$$.update=()=>{l.$$.dirty[0]&4194306&&typeof window<"u"&&(H&&clearTimeout(H),t(22,H=setTimeout(()=>{u.setSearch(O)},300))),l.$$.dirty[0]&1&&typeof window<"u"&&(console.log("üîÑ FichasContainer: Aplicando filtros:",L),u.setFilters({empresa:L.empresa,cargo:L.cargo,devolucaoPendente:L.devolucaoPendente})),l.$$.dirty[0]&8388608&&t(9,a=o.items||[]),l.$$.dirty[0]&10485760&&t(8,r=S||o.loading),l.$$.dirty[0]&8388608&&t(7,n=o.error),l.$$.dirty[0]&8388608&&t(6,s={page:o.page,total:o.total,pageSize:o.pageSize,totalPages:o.totalPages})},[L,O,p,m,h,A,s,n,r,a,u,w,I,W,_,P,T,y,i,c,f,S,H,o,v,j,J,te,ne,le,ae]}class io extends Qe{constructor(e){super(),Ze(this,e,so,ro,Ge,{initialPageSize:18,autoRefresh:19,refreshInterval:20},null,[-1,-1])}get autoRefresh(){return this.$$.ctx[19]}get refreshInterval(){return this.$$.ctx[20]}}function co(l){let e,t,a;return t=new io({props:{initialPageSize:10,autoRefresh:!1}}),{c(){e=F(),G(t.$$.fragment),this.h()},l(r){Wa("svelte-161hi6l",document.head).forEach(g),e=V(r),Z(t.$$.fragment,r),this.h()},h(){document.title="Fichas de EPI - DataLife EPI"},m(r,n){q(r,e,n),Q(t,r,n),a=!0},p:Ae,i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){C(t.$$.fragment,r),a=!1},d(r){r&&g(e),B(t,r)}}}class No extends Qe{constructor(e){super(),Ze(this,e,null,co,Ge,{})}}export{No as component};
