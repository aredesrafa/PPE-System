import{S as Qe,i as Ge,s as Je,d as m,A as Q,m as y,o as w,p as _e,q as ve,b as N,c as d,B as G,O as E,X as Qa,h as A,e as b,f as I,P as De,C as J,k as F,j as $,D as K,Z as Ye,n as Ve,g as R,t as M,a as oe,r as Ce,M as He,G as bt,J as $t,K as Et,L as kt,v as ar,E as ct,H as Dt,a0 as Ct,a3 as Ft,z as It,a4 as Me,a7 as je,a8 as Le,x as rr,l as Ga,Q as Ja}from"../chunks/D8ZBcRFv.js";import"../chunks/IHki7fMi.js";import{f as vt}from"../chunks/CKqOu_MD.js";import{a as xe,B as ze,e as Se,u as ot,o as ft,d as st,l as lr,g as nr,f as or}from"../chunks/INiUvie6.js";import{U as Ze}from"../chunks/BM9Rxo7V.js";import{a as yt,E as Vt,T as sr,c as ir,d as cr,R as Ka,e as ht,f as fr,g as pt,L as We,b as Wa,S as Xa,k as ur,h as dr}from"../chunks/Rh-Jv65z.js";import{I as Pt,n as Oe,b as mr}from"../chunks/V03hm1sS.js";import{C as gr,E as qt}from"../chunks/PUFNlXKg.js";import{C as hr}from"../chunks/CpV_bJed.js";import{E as pr}from"../chunks/DHPQ42Rt.js";import{P as it,I as Za}from"../chunks/n0KSuBaQ.js";import{S as Ya}from"../chunks/D284B5Ly.js";import{S as nt,a as ut,T as _r,D as vr}from"../chunks/N0OUQu58.js";import{w as br}from"../chunks/H0tinE9G.js";import{C as $r}from"../chunks/SalECnM0.js";import{C as er}from"../chunks/p6El4uXM.js";import{f as wt}from"../chunks/5lP0jMhK.js";import{T as Er,Q as kr,F as wr,G as Dr,P as Cr}from"../chunks/BIKzyLxb.js";import{M as Ir}from"../chunks/D5Pksgt-.js";class yr{async createDelivery(e){var t,a;if(console.log("üöö DeliveryProcessAdapter: Criando entrega via ficha espec√≠fica..."),console.log("üîç FichaEpiId:",e.fichaEpiId),console.log("üîç ResponsavelId:",e.responsavelId),console.log("üîç Itens count:",((t=e.itens)==null?void 0:t.length)||0),!e.fichaEpiId)throw new Error("fichaEpiId √© obrigat√≥rio");if(!e.responsavelId)throw new Error("responsavelId √© obrigat√≥rio");if(!e.itens||e.itens.length===0)throw new Error("Pelo menos um item √© obrigat√≥rio");try{const r=[];e.itens.forEach(o=>{for(let i=0;i<o.quantidade;i++)r.push({estoqueItemOrigemId:o.estoqueItemId,numeroSerie:`SER-${o.estoqueItemId}-${i+1}`})});const n={fichaEpiId:e.fichaEpiId,quantidade:r.length,itens:r,assinaturaColaborador:"placeholder_signature",observacoes:e.observacoes||"",usuarioId:e.responsavelId};console.log("üìã Payload formatado para backend:",n);const s=await xe.post(`/fichas-epi/${e.fichaEpiId}/entregas`,n);return console.log("‚úÖ Entrega criada via endpoint da ficha:"),console.log(`  - Ficha ID: ${e.fichaEpiId}`),console.log("  - Response:",s),s}catch(r){throw console.error("‚ùå Erro ao criar entrega via ficha:",r),(a=r.response)!=null&&a.data&&console.error("‚ùå Detalhes do erro do backend:",r.response.data),r}}async validateDelivery(e){console.log("üîç DeliveryProcessAdapter: Validando entrega antes de criar:",e);try{const t=await xe.post("/fichas-epi/entregas/validar",e);return console.log("‚úÖ Valida√ß√£o da entrega conclu√≠da:",t),t}catch(t){throw console.error("‚ùå Erro na valida√ß√£o da entrega:",t),t}}async confirmSignature(e,t){console.log("‚úçÔ∏è DeliveryProcessAdapter: Confirmando assinatura:",e);try{const a={assinaturaColaborador:t.assinatura,observacoes:"Entrega assinada pelo colaborador"};await xe.put(`/fichas-epi/entregas/${e}/assinar`,a),console.log("‚úÖ Assinatura confirmada")}catch(a){throw console.error("‚ùå Erro ao confirmar assinatura:",a),a}}async cancelDelivery(e,t){console.log("‚ùå DeliveryProcessAdapter: Cancelando entrega:",e);try{await xe.post(`/entregas/${e}/cancel`,t),console.log("‚úÖ Entrega cancelada")}catch(a){throw console.error("‚ùå Erro ao cancelar entrega:",a),a}}async printDelivery(e){console.log("üñ®Ô∏è DeliveryProcessAdapter: Gerando PDF da entrega:",e);try{const t=await xe.get(`/entregas/${e}/print`,{responseType:"blob"});return console.log("‚úÖ PDF gerado"),t}catch(t){throw console.error("‚ùå Erro ao gerar PDF:",t),t}}async updateDelivery(e,t){console.log("‚úèÔ∏è DeliveryProcessAdapter: Editando entrega:",e);try{const a=await xe.put(`/entregas/${e}`,t);return console.log("‚úÖ Entrega editada"),a}catch(a){throw console.error("‚ùå Erro ao editar entrega:",a),a}}async createDevolucao(e,t){console.log("üîÑ DeliveryProcessAdapter: Criando devolu√ß√£o:",e,t);try{const a=await xe.post(`/fichas-epi/entregas/${e}/devolucao`,t);return console.log("‚úÖ Devolu√ß√£o criada com sucesso:",a),a}catch(a){throw console.error("‚ùå Erro ao criar devolu√ß√£o:",a),a}}async validateDevolucao(e,t){console.log("üîç DeliveryProcessAdapter: Validando devolu√ß√£o:",e,t);try{const a=await xe.post(`/fichas-epi/entregas/${e}/devolucao/validar`,t);return console.log("‚úÖ Valida√ß√£o de devolu√ß√£o conclu√≠da:",a),a}catch(a){throw console.error("‚ùå Erro na valida√ß√£o de devolu√ß√£o:",a),a}}async processBatchDevolucao(e){console.log("üîÑ DeliveryProcessAdapter: Processando devolu√ß√µes em lote:",e);try{const t=await xe.post("/devolucoes/process-batch",e);return console.log("‚úÖ Devolu√ß√µes em lote processadas:",t),t}catch(t){throw console.error("‚ùå Erro ao processar devolu√ß√µes em lote:",t),t}}}const _t=new yr;class Pr{async processReturns(e){console.log("üîÑ ReturnProcessAdapter: Processando devolu√ß√µes em lote:",e),console.log(`  - Total de itens: ${e.devolucoes.length}`);try{const t=await xe.post("/devolucoes/process-batch",e);return console.log("‚úÖ Devolu√ß√µes processadas:"),console.log(`  - Processadas: ${t.data.processadas}`),console.log(`  - Erros: ${t.data.erros.length}`),console.log(`  - Fichas atualizadas: ${t.data.fichasAtualizadas.length}`),t}catch(t){throw console.error("‚ùå Erro ao processar devolu√ß√µes:",t),t}}async validateReturn(e){console.log("üîç ReturnProcessAdapter: Validando devolu√ß√£o:",e);try{const t=await xe.get(`/devolucoes/validate/${e}`);return t.podeDevolver?console.log("‚úÖ Equipamento pode ser devolvido"):console.log("‚ö†Ô∏è Equipamento n√£o pode ser devolvido:",t.motivo),t}catch(t){throw console.error("‚ùå Erro ao validar devolu√ß√£o:",t),t}}async getReturnHistory(e){console.log("üìã ReturnProcessAdapter: Buscando hist√≥rico de devolu√ß√µes:",e);try{const t=await xe.get(`/devolucoes/historico/${e}`);return console.log("‚úÖ Hist√≥rico de devolu√ß√µes carregado"),t}catch(t){throw console.error("‚ùå Erro ao buscar hist√≥rico de devolu√ß√µes:",t),t}}async cancelReturn(e,t){console.log("‚ùå ReturnProcessAdapter: Cancelando devolu√ß√£o:",e);try{await xe.post(`/devolucoes/${e}/cancel`,{motivo:t}),console.log("‚úÖ Devolu√ß√£o cancelada")}catch(a){throw console.error("‚ùå Erro ao cancelar devolu√ß√£o:",a),a}}}const Ar=new Pr;function xt(l,e,t){const a=l.slice();return a[21]=e[t],a}function Fr(l){let e,t,a;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){K(e.$$.fragment),t=M(`
        Nova Ficha`)},l(r){J(e.$$.fragment,r),t=R(r,`
        Nova Ficha`)},m(r,n){G(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),Q(e,r)}}}function Vr(l){let e,t;return e=new gr({props:{size:"sm",class:"rounded-sm",$$slots:{default:[Or]},$$scope:{ctx:l}}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p(a,r){const n={};r&16777232&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function qr(l){let e,t,a,r,n,s,o,i,c,f,u,h,g,p,C,D,P,z,O,x,q,L;n=new Ya({props:{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}}),o=new Pt({props:{type:"text",placeholder:"Buscar colaborador...",class:"pl-10 rounded-sm h-10 text-sm",value:l[4].searchTerm}}),o.$on("input",l[7]),c=new nt({props:{options:l[5].empresas,value:l[4].empresaFilter,placeholder:"Empresa"}}),c.$on("change",l[8]),u=new nt({props:{options:l[5].cargos,value:l[4].cargoFilter,placeholder:"Cargo"}}),u.$on("change",l[9]),p=new hr({props:{checked:l[4].devolucaoPendente,$$slots:{default:[xr]},$$scope:{ctx:l}}}),p.$on("change",l[10]);const T=[Rr,Tr],j=[];function W(k,v){return k[4].hasActiveFilters?0:1}D=W(l),P=j[D]=T[D](l),x=new sr({props:{hoverable:!0,$$slots:{default:[el]},$$scope:{ctx:l}}});let _=l[3].totalPages>1&&Ht(l);return{c(){e=$("div"),t=$("div"),a=$("div"),r=$("div"),K(n.$$.fragment),s=F(),K(o.$$.fragment),i=F(),K(c.$$.fragment),f=F(),K(u.$$.fragment),h=F(),g=$("div"),K(p.$$.fragment),C=F(),P.c(),z=F(),O=$("div"),K(x.$$.fragment),q=F(),_&&_.c(),this.h()},l(k){e=b(k,"DIV",{class:!0});var v=I(e);t=b(v,"DIV",{class:!0});var S=I(t);a=b(S,"DIV",{class:!0});var V=I(a);r=b(V,"DIV",{class:!0});var B=I(r);J(n.$$.fragment,B),s=A(B),J(o.$$.fragment,B),B.forEach(m),i=A(V),J(c.$$.fragment,V),f=A(V),J(u.$$.fragment,V),h=A(V),g=b(V,"DIV",{class:!0});var ee=I(g);J(p.$$.fragment,ee),ee.forEach(m),C=A(V),P.l(V),V.forEach(m),S.forEach(m),z=A(v),O=b(v,"DIV",{class:!0});var te=I(O);J(x.$$.fragment,te),te.forEach(m),q=A(v),_&&_.l(v),v.forEach(m),this.h()},h(){E(r,"class","relative"),E(g,"class","flex items-center"),E(a,"class","grid grid-cols-1 md:grid-cols-5 gap-4"),E(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),E(O,"class","min-w-[680px] overflow-x-auto"),E(e,"class","bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden")},m(k,v){N(k,e,v),d(e,t),d(t,a),d(a,r),G(n,r,null),d(r,s),G(o,r,null),d(a,i),G(c,a,null),d(a,f),G(u,a,null),d(a,h),d(a,g),G(p,g,null),d(a,C),j[D].m(a,null),d(e,z),d(e,O),G(x,O,null),d(e,q),_&&_.m(e,null),L=!0},p(k,v){const S={};v&16&&(S.value=k[4].searchTerm),o.$set(S);const V={};v&32&&(V.options=k[5].empresas),v&16&&(V.value=k[4].empresaFilter),c.$set(V);const B={};v&32&&(B.options=k[5].cargos),v&16&&(B.value=k[4].cargoFilter),u.$set(B);const ee={};v&16&&(ee.checked=k[4].devolucaoPendente),v&16777216&&(ee.$$scope={dirty:v,ctx:k}),p.$set(ee);let te=D;D=W(k),D===te?j[D].p(k,v):(_e(),y(j[te],1,1,()=>{j[te]=null}),ve(),P=j[D],P?P.p(k,v):(P=j[D]=T[D](k),P.c()),w(P,1),P.m(a,null));const re={};v&16777217&&(re.$$scope={dirty:v,ctx:k}),x.$set(re),k[3].totalPages>1?_?(_.p(k,v),v&8&&w(_,1)):(_=Ht(k),_.c(),w(_,1),_.m(e,null)):_&&(_e(),y(_,1,1,()=>{_=null}),ve())},i(k){L||(w(n.$$.fragment,k),w(o.$$.fragment,k),w(c.$$.fragment,k),w(u.$$.fragment,k),w(p.$$.fragment,k),w(P),w(x.$$.fragment,k),w(_),L=!0)},o(k){y(n.$$.fragment,k),y(o.$$.fragment,k),y(c.$$.fragment,k),y(u.$$.fragment,k),y(p.$$.fragment,k),y(P),y(x.$$.fragment,k),y(_),L=!1},d(k){k&&m(e),Q(n),Q(o),Q(c),Q(u),Q(p),j[D].d(),Q(x),_&&_.d()}}}function Nr(l){let e,t;return e=new Vt({props:{error:l[2],onRetry:l[15]}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p(a,r){const n={};r&4&&(n.error=a[2]),r&8&&(n.onRetry=a[15]),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Sr(l){let e,t;return e=new yt({}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function zr(l){let e,t,a=l[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha",r,n;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){K(e.$$.fragment),t=F(),r=M(a)},l(s){J(e.$$.fragment,s),t=A(s),r=R(s,a)},m(s,o){G(e,s,o),N(s,t,o),N(s,r,o),n=!0},p(s,o){(!n||o&16)&&a!==(a=s[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha")&&oe(r,a)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){s&&(m(t),m(r)),Q(e,s)}}}function Or(l){let e,t,a,r,n,s="Nenhuma ficha encontrada",o,i,c=l[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI",f,u,h,g;return a=new Ya({props:{class:"w-8 h-8 text-gray-400"}}),h=new ze({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[zr]},$$scope:{ctx:l}}}),h.$on("click",l[14]),{c(){e=$("div"),t=$("div"),K(a.$$.fragment),r=F(),n=$("h3"),n.textContent=s,o=F(),i=$("p"),f=M(c),u=F(),K(h.$$.fragment),this.h()},l(p){e=b(p,"DIV",{class:!0});var C=I(e);t=b(C,"DIV",{class:!0});var D=I(t);J(a.$$.fragment,D),D.forEach(m),r=A(C),n=b(C,"H3",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-qm1del"&&(n.textContent=s),o=A(C),i=b(C,"P",{class:!0});var P=I(i);f=R(P,c),P.forEach(m),u=A(C),J(h.$$.fragment,C),C.forEach(m),this.h()},h(){E(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"),E(n,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),E(i,"class","text-gray-500 dark:text-gray-400 mb-6"),E(e,"class","text-center py-12")},m(p,C){N(p,e,C),d(e,t),G(a,t,null),d(e,r),d(e,n),d(e,o),d(e,i),d(i,f),d(e,u),G(h,e,null),g=!0},p(p,C){(!g||C&16)&&c!==(c=p[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI")&&oe(f,c);const D={};C&16777232&&(D.$$scope={dirty:C,ctx:p}),h.$set(D)},i(p){g||(w(a.$$.fragment,p),w(h.$$.fragment,p),g=!0)},o(p){y(a.$$.fragment,p),y(h.$$.fragment,p),g=!1},d(p){p&&m(e),Q(a),Q(h)}}}function xr(l){let e;return{c(){e=M("Pendentes devolu√ß√£o")},l(t){e=R(t,"Pendentes devolu√ß√£o")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Tr(l){let e;return{c(){e=$("div")},l(t){e=b(t,"DIV",{}),I(e).forEach(m)},m(t,a){N(t,e,a)},p:Ve,i:Ve,o:Ve,d(t){t&&m(e)}}}function Rr(l){let e,t;return e=new ze({props:{color:"alternative",class:"rounded-sm h-10 w-10 p-0 flex items-center justify-center",title:"Limpar Filtros",$$slots:{default:[Mr]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p(a,r){const n={};r&16777216&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Mr(l){let e,t;return e=new Ka({props:{class:"w-4 h-4"}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function jr(l){let e;return{c(){e=M("Colaborador")},l(t){e=R(t,"Colaborador")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Lr(l){let e;return{c(){e=M("Empresa")},l(t){e=R(t,"Empresa")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Hr(l){let e;return{c(){e=M("EPIs Ativos")},l(t){e=R(t,"EPIs Ativos")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Br(l){let e;return{c(){e=M("A√ß√µes")},l(t){e=R(t,"A√ß√µes")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Ur(l){let e,t,a,r,n,s,o,i;return e=new ht({props:{$$slots:{default:[jr]},$$scope:{ctx:l}}}),a=new ht({props:{$$slots:{default:[Lr]},$$scope:{ctx:l}}}),n=new ht({props:{$$slots:{default:[Hr]},$$scope:{ctx:l}}}),o=new ht({props:{$$slots:{default:[Br]},$$scope:{ctx:l}}}),{c(){K(e.$$.fragment),t=F(),K(a.$$.fragment),r=F(),K(n.$$.fragment),s=F(),K(o.$$.fragment)},l(c){J(e.$$.fragment,c),t=A(c),J(a.$$.fragment,c),r=A(c),J(n.$$.fragment,c),s=A(c),J(o.$$.fragment,c)},m(c,f){G(e,c,f),N(c,t,f),G(a,c,f),N(c,r,f),G(n,c,f),N(c,s,f),G(o,c,f),i=!0},p(c,f){const u={};f&16777216&&(u.$$scope={dirty:f,ctx:c}),e.$set(u);const h={};f&16777216&&(h.$$scope={dirty:f,ctx:c}),a.$set(h);const g={};f&16777216&&(g.$$scope={dirty:f,ctx:c}),n.$set(g);const p={};f&16777216&&(p.$$scope={dirty:f,ctx:c}),o.$set(p)},i(c){i||(w(e.$$.fragment,c),w(a.$$.fragment,c),w(n.$$.fragment,c),w(o.$$.fragment,c),i=!0)},o(c){y(e.$$.fragment,c),y(a.$$.fragment,c),y(n.$$.fragment,c),y(o.$$.fragment,c),i=!1},d(c){c&&(m(t),m(r),m(s)),Q(e,c),Q(a,c),Q(n,c),Q(o,c)}}}function Qr(l){let e,t,a=l[21].colaborador.nome+"",r,n,s,o=(l[21].colaborador.cpf||"CPF n√£o informado")+"",i;return{c(){e=$("div"),t=$("span"),r=M(a),n=F(),s=$("span"),i=M(o),this.h()},l(c){e=b(c,"DIV",{class:!0});var f=I(e);t=b(f,"SPAN",{class:!0});var u=I(t);r=R(u,a),u.forEach(m),n=A(f),s=b(f,"SPAN",{class:!0});var h=I(s);i=R(h,o),h.forEach(m),f.forEach(m),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(s,"class","text-sm text-gray-500 dark:text-gray-400"),E(e,"class","flex flex-col")},m(c,f){N(c,e,f),d(e,t),d(t,r),d(e,n),d(e,s),d(s,i)},p(c,f){f&1&&a!==(a=c[21].colaborador.nome+"")&&oe(r,a),f&1&&o!==(o=(c[21].colaborador.cpf||"CPF n√£o informado")+"")&&oe(i,o)},d(c){c&&m(e)}}}function Tt(l){let e,t=l[21].contratada.nome+"",a;return{c(){e=$("div"),a=M(t),this.h()},l(r){e=b(r,"DIV",{class:!0});var n=I(e);a=R(n,t),n.forEach(m),this.h()},h(){E(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&1&&t!==(t=r[21].contratada.nome+"")&&oe(a,t)},d(r){r&&m(e)}}}function Gr(l){let e,t,a=l[21].colaborador.empresa+"",r,n,s=l[21].contratada&&Tt(l);return{c(){e=$("div"),t=$("span"),r=M(a),n=F(),s&&s.c(),this.h()},l(o){e=b(o,"DIV",{});var i=I(e);t=b(i,"SPAN",{class:!0});var c=I(t);r=R(c,a),c.forEach(m),n=A(i),s&&s.l(i),i.forEach(m),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white")},m(o,i){N(o,e,i),d(e,t),d(t,r),d(e,n),s&&s.m(e,null)},p(o,i){i&1&&a!==(a=o[21].colaborador.empresa+"")&&oe(r,a),o[21].contratada?s?s.p(o,i):(s=Tt(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(o){o&&m(e),s&&s.d()}}}function Jr(l){var r;let e=(((r=l[21].episInfo)==null?void 0:r.totalEpisAtivos)||l[21].totalEpisAtivos||0)+"",t,a;return{c(){t=M(e),a=M(" EPIs")},l(n){t=R(n,e),a=R(n," EPIs")},m(n,s){N(n,t,s),N(n,a,s)},p(n,s){var o;s&1&&e!==(e=(((o=n[21].episInfo)==null?void 0:o.totalEpisAtivos)||n[21].totalEpisAtivos||0)+"")&&oe(t,e)},d(n){n&&(m(t),m(a))}}}function Rt(l){let e,t;return e=new st({props:{color:"red",class:"w-fit rounded-sm",$$slots:{default:[Kr]},$$scope:{ctx:l}}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p(a,r){const n={};r&16777217&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Kr(l){var r;let e=(((r=l[21].episInfo)==null?void 0:r.episExpirados)||l[21].totalEpisVencidos)+"",t,a;return{c(){t=M(e),a=M(" vencido(s)")},l(n){t=R(n,e),a=R(n," vencido(s)")},m(n,s){N(n,t,s),N(n,a,s)},p(n,s){var o;s&1&&e!==(e=(((o=n[21].episInfo)==null?void 0:o.episExpirados)||n[21].totalEpisVencidos)+"")&&oe(t,e)},d(n){n&&(m(t),m(a))}}}function Mt(l){let e,t=l[21].episInfo.tiposEpisAtivos.slice(0,2).map(Bt).join(", ")+"",a,r,n=l[21].episInfo.tiposEpisAtivos.length>2&&jt(l);return{c(){e=$("div"),a=M(t),r=F(),n&&n.c(),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=I(e);a=R(o,t),r=A(o),n&&n.l(o),o.forEach(m),this.h()},h(){E(e,"class","text-xs text-gray-500 dark:text-gray-400 mt-1")},m(s,o){N(s,e,o),d(e,a),d(e,r),n&&n.m(e,null)},p(s,o){o&1&&t!==(t=s[21].episInfo.tiposEpisAtivos.slice(0,2).map(Bt).join(", ")+"")&&oe(a,t),s[21].episInfo.tiposEpisAtivos.length>2?n?n.p(s,o):(n=jt(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(s){s&&m(e),n&&n.d()}}}function jt(l){let e,t,a=l[21].episInfo.tiposEpisAtivos.length-2+"",r;return{c(){e=$("span"),t=M("... +"),r=M(a)},l(n){e=b(n,"SPAN",{});var s=I(e);t=R(s,"... +"),r=R(s,a),s.forEach(m)},m(n,s){N(n,e,s),d(e,t),d(e,r)},p(n,s){s&1&&a!==(a=n[21].episInfo.tiposEpisAtivos.length-2+"")&&oe(r,a)},d(n){n&&m(e)}}}function Wr(l){var c,f,u;let e,t,a,r,n,s;t=new st({props:{color:"blue",class:"w-fit rounded-sm",$$slots:{default:[Jr]},$$scope:{ctx:l}}});let o=(((c=l[21].episInfo)==null?void 0:c.episExpirados)||l[21].totalEpisVencidos)&&(((f=l[21].episInfo)==null?void 0:f.episExpirados)>0||l[21].totalEpisVencidos>0)&&Rt(l),i=((u=l[21].episInfo)==null?void 0:u.tiposEpisAtivos)&&l[21].episInfo.tiposEpisAtivos.length>0&&Mt(l);return{c(){e=$("div"),K(t.$$.fragment),a=F(),o&&o.c(),r=F(),i&&i.c(),n=Ce(),this.h()},l(h){e=b(h,"DIV",{class:!0});var g=I(e);J(t.$$.fragment,g),a=A(g),o&&o.l(g),g.forEach(m),r=A(h),i&&i.l(h),n=Ce(),this.h()},h(){E(e,"class","flex flex-wrap gap-1")},m(h,g){N(h,e,g),G(t,e,null),d(e,a),o&&o.m(e,null),N(h,r,g),i&&i.m(h,g),N(h,n,g),s=!0},p(h,g){var C,D,P;const p={};g&16777217&&(p.$$scope={dirty:g,ctx:h}),t.$set(p),((C=h[21].episInfo)!=null&&C.episExpirados||h[21].totalEpisVencidos)&&(((D=h[21].episInfo)==null?void 0:D.episExpirados)>0||h[21].totalEpisVencidos>0)?o?(o.p(h,g),g&1&&w(o,1)):(o=Rt(h),o.c(),w(o,1),o.m(e,null)):o&&(_e(),y(o,1,1,()=>{o=null}),ve()),(P=h[21].episInfo)!=null&&P.tiposEpisAtivos&&h[21].episInfo.tiposEpisAtivos.length>0?i?i.p(h,g):(i=Mt(h),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i(h){s||(w(t.$$.fragment,h),w(o),s=!0)},o(h){y(t.$$.fragment,h),y(o),s=!1},d(h){h&&(m(e),m(r),m(n)),Q(t),o&&o.d(),i&&i.d(h)}}}function Xr(l){let e,t,a,r,n,s;a=new pr({props:{class:"w-4 h-4"}});function o(...i){return l[16](l[21],...i)}return{c(){e=$("div"),t=$("button"),K(a.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=I(e);t=b(c,"BUTTON",{class:!0,title:!0});var f=I(t);J(a.$$.fragment,f),f.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700"),E(t,"title","Ver Detalhes"),E(e,"class","flex space-x-1")},m(i,c){N(i,e,c),d(e,t),G(a,t,null),r=!0,n||(s=He(t,"click",o),n=!0)},p(i,c){l=i},i(i){r||(w(a.$$.fragment,i),r=!0)},o(i){y(a.$$.fragment,i),r=!1},d(i){i&&m(e),Q(a),n=!1,s()}}}function Zr(l){let e,t,a,r,n,s,o,i,c;return e=new pt({props:{$$slots:{default:[Qr]},$$scope:{ctx:l}}}),a=new pt({props:{$$slots:{default:[Gr]},$$scope:{ctx:l}}}),n=new pt({props:{$$slots:{default:[Wr]},$$scope:{ctx:l}}}),o=new pt({props:{$$slots:{default:[Xr]},$$scope:{ctx:l}}}),{c(){K(e.$$.fragment),t=F(),K(a.$$.fragment),r=F(),K(n.$$.fragment),s=F(),K(o.$$.fragment),i=F()},l(f){J(e.$$.fragment,f),t=A(f),J(a.$$.fragment,f),r=A(f),J(n.$$.fragment,f),s=A(f),J(o.$$.fragment,f),i=A(f)},m(f,u){G(e,f,u),N(f,t,u),G(a,f,u),N(f,r,u),G(n,f,u),N(f,s,u),G(o,f,u),N(f,i,u),c=!0},p(f,u){const h={};u&16777217&&(h.$$scope={dirty:u,ctx:f}),e.$set(h);const g={};u&16777217&&(g.$$scope={dirty:u,ctx:f}),a.$set(g);const p={};u&16777217&&(p.$$scope={dirty:u,ctx:f}),n.$set(p);const C={};u&16777217&&(C.$$scope={dirty:u,ctx:f}),o.$set(C)},i(f){c||(w(e.$$.fragment,f),w(a.$$.fragment,f),w(n.$$.fragment,f),w(o.$$.fragment,f),c=!0)},o(f){y(e.$$.fragment,f),y(a.$$.fragment,f),y(n.$$.fragment,f),y(o.$$.fragment,f),c=!1},d(f){f&&(m(t),m(r),m(s),m(i)),Q(e,f),Q(a,f),Q(n,f),Q(o,f)}}}function Lt(l,e){let t,a,r;function n(){return e[17](e[21])}return a=new fr({props:{class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",$$slots:{default:[Zr]},$$scope:{ctx:e}}}),a.$on("click",n),{key:l,first:null,c(){t=Ce(),K(a.$$.fragment),this.h()},l(s){t=Ce(),J(a.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){N(s,t,o),G(a,s,o),r=!0},p(s,o){e=s;const i={};o&16777217&&(i.$$scope={dirty:o,ctx:e}),a.$set(i)},i(s){r||(w(a.$$.fragment,s),r=!0)},o(s){y(a.$$.fragment,s),r=!1},d(s){s&&m(t),Q(a,s)}}}function Yr(l){let e=[],t=new Map,a,r,n=Se(l[0]);const s=o=>o[21].id;for(let o=0;o<n.length;o+=1){let i=xt(l,n,o),c=s(i);t.set(c,e[o]=Lt(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();a=Ce()},l(o){for(let i=0;i<e.length;i+=1)e[i].l(o);a=Ce()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);N(o,a,i),r=!0},p(o,i){i&8193&&(n=Se(o[0]),_e(),e=ot(e,i,s,1,o,n,t,a.parentNode,ft,Lt,a,xt),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(e[i]);r=!0}},o(o){for(let i=0;i<e.length;i+=1)y(e[i]);r=!1},d(o){o&&m(a);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function el(l){let e,t,a,r;return e=new ir({props:{$$slots:{default:[Ur]},$$scope:{ctx:l}}}),a=new cr({props:{$$slots:{default:[Yr]},$$scope:{ctx:l}}}),{c(){K(e.$$.fragment),t=F(),K(a.$$.fragment)},l(n){J(e.$$.fragment,n),t=A(n),J(a.$$.fragment,n)},m(n,s){G(e,n,s),N(n,t,s),G(a,n,s),r=!0},p(n,s){const o={};s&16777216&&(o.$$scope={dirty:s,ctx:n}),e.$set(o);const i={};s&16777217&&(i.$$scope={dirty:s,ctx:n}),a.$set(i)},i(n){r||(w(e.$$.fragment,n),w(a.$$.fragment,n),r=!0)},o(n){y(e.$$.fragment,n),y(a.$$.fragment,n),r=!1},d(n){n&&m(t),Q(e,n),Q(a,n)}}}function Ht(l){let e,t,a,r=Math.min((l[3].currentPage-1)*l[3].pageSize+1,l[3].total)+"",n,s,o=Math.min(l[3].currentPage*l[3].pageSize,l[3].total)+"",i,c,f=l[3].total+"",u,h,g,p,C,D,P,z,O=l[3].currentPage+"",x,q,L=l[3].totalPages+"",T,j,W,_;return C=new ze({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasPrev,$$slots:{default:[tl]},$$scope:{ctx:l}}}),C.$on("click",l[18]),W=new ze({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasNext,$$slots:{default:[al]},$$scope:{ctx:l}}}),W.$on("click",l[19]),{c(){e=$("div"),t=$("div"),a=M("Mostrando "),n=M(r),s=M(" a "),i=M(o),c=M(" de "),u=M(f),h=M(" resultados"),g=F(),p=$("div"),K(C.$$.fragment),D=F(),P=$("span"),z=M("P√°gina "),x=M(O),q=M(" de "),T=M(L),j=F(),K(W.$$.fragment),this.h()},l(k){e=b(k,"DIV",{class:!0});var v=I(e);t=b(v,"DIV",{class:!0});var S=I(t);a=R(S,"Mostrando "),n=R(S,r),s=R(S," a "),i=R(S,o),c=R(S," de "),u=R(S,f),h=R(S," resultados"),S.forEach(m),g=A(v),p=b(v,"DIV",{class:!0});var V=I(p);J(C.$$.fragment,V),D=A(V),P=b(V,"SPAN",{class:!0});var B=I(P);z=R(B,"P√°gina "),x=R(B,O),q=R(B," de "),T=R(B,L),B.forEach(m),j=A(V),J(W.$$.fragment,V),V.forEach(m),v.forEach(m),this.h()},h(){E(t,"class","text-sm text-gray-500 dark:text-gray-400"),E(P,"class","flex items-center px-3 text-sm text-gray-500 dark:text-gray-400"),E(p,"class","flex space-x-2"),E(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700")},m(k,v){N(k,e,v),d(e,t),d(t,a),d(t,n),d(t,s),d(t,i),d(t,c),d(t,u),d(t,h),d(e,g),d(e,p),G(C,p,null),d(p,D),d(p,P),d(P,z),d(P,x),d(P,q),d(P,T),d(p,j),G(W,p,null),_=!0},p(k,v){(!_||v&8)&&r!==(r=Math.min((k[3].currentPage-1)*k[3].pageSize+1,k[3].total)+"")&&oe(n,r),(!_||v&8)&&o!==(o=Math.min(k[3].currentPage*k[3].pageSize,k[3].total)+"")&&oe(i,o),(!_||v&8)&&f!==(f=k[3].total+"")&&oe(u,f);const S={};v&8&&(S.disabled=!k[3].hasPrev),v&16777216&&(S.$$scope={dirty:v,ctx:k}),C.$set(S),(!_||v&8)&&O!==(O=k[3].currentPage+"")&&oe(x,O),(!_||v&8)&&L!==(L=k[3].totalPages+"")&&oe(T,L);const V={};v&8&&(V.disabled=!k[3].hasNext),v&16777216&&(V.$$scope={dirty:v,ctx:k}),W.$set(V)},i(k){_||(w(C.$$.fragment,k),w(W.$$.fragment,k),_=!0)},o(k){y(C.$$.fragment,k),y(W.$$.fragment,k),_=!1},d(k){k&&m(e),Q(C),Q(W)}}}function tl(l){let e;return{c(){e=M("Anterior")},l(t){e=R(t,"Anterior")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function al(l){let e;return{c(){e=M("Pr√≥ximo")},l(t){e=R(t,"Pr√≥ximo")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function rl(l){let e,t,a,r,n='<h1 class="text-xl font-medium text-gray-900 dark:text-white">Fichas de EPI</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Gerencie as fichas individuais de equipamentos de prote√ß√£o</p>',s,o,i,c,f,u,h;i=new ze({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Fr]},$$scope:{ctx:l}}}),i.$on("click",l[14]);const g=[Sr,Nr,qr,Vr],p=[];function C(D,P){return D[1]?0:D[2]?1:D[0].length>0?2:3}return f=C(l),u=p[f]=g[f](l),{c(){e=F(),t=$("div"),a=$("div"),r=$("div"),r.innerHTML=n,s=F(),o=$("div"),K(i.$$.fragment),c=F(),u.c(),this.h()},l(D){Qa("svelte-161hi6l",document.head).forEach(m),e=A(D),t=b(D,"DIV",{class:!0});var z=I(t);a=b(z,"DIV",{class:!0});var O=I(a);r=b(O,"DIV",{"data-svelte-h":!0}),De(r)!=="svelte-pifbsf"&&(r.innerHTML=n),s=A(O),o=b(O,"DIV",{class:!0});var x=I(o);J(i.$$.fragment,x),x.forEach(m),O.forEach(m),c=A(z),u.l(z),z.forEach(m),this.h()},h(){document.title="Fichas de EPI - DataLife EPI",E(o,"class","flex space-x-2"),E(a,"class","flex items-center justify-between"),E(t,"class","space-y-6")},m(D,P){N(D,e,P),N(D,t,P),d(t,a),d(a,r),d(a,s),d(a,o),G(i,o,null),d(t,c),p[f].m(t,null),h=!0},p(D,[P]){const z={};P&16777216&&(z.$$scope={dirty:P,ctx:D}),i.$set(z);let O=f;f=C(D),f===O?p[f].p(D,P):(_e(),y(p[O],1,1,()=>{p[O]=null}),ve(),u=p[f],u?u.p(D,P):(u=p[f]=g[f](D),u.c()),w(u,1),u.m(t,null))},i(D){h||(w(i.$$.fragment,D),w(u),h=!0)},o(D){y(i.$$.fragment,D),y(u),h=!1},d(D){D&&(m(e),m(t)),Q(i),p[f].d()}}}const Bt=l=>`${l.quantidade}x ${l.tipoEpiNome}`;function ll(l,e,t){let{items:a=[]}=e,{loading:r=!1}=e,{error:n=null}=e,{pagination:s}=e,{filters:o}=e,{filterOptions:i}=e;const c=Ye();function f(T){const j=T.target;c("searchChange",j.value)}function u(T){c("empresaFilterChange",T.detail)}function h(T){c("cargoFilterChange",T.detail)}function g(T){const j=T.target;c("devolucaoPendenteChange",j.checked)}function p(){c("clearFilters")}function C(T){c("pageChange",T)}function D(T){c("viewDetail",T)}function P(){c("novaFicha")}const z=()=>c("pageChange",s.currentPage),O=(T,j)=>{j.stopPropagation(),D(T.id)},x=T=>D(T.id),q=()=>C(s.currentPage-1),L=()=>C(s.currentPage+1);return l.$$set=T=>{"items"in T&&t(0,a=T.items),"loading"in T&&t(1,r=T.loading),"error"in T&&t(2,n=T.error),"pagination"in T&&t(3,s=T.pagination),"filters"in T&&t(4,o=T.filters),"filterOptions"in T&&t(5,i=T.filterOptions)},[a,r,n,s,o,i,c,f,u,h,g,p,C,D,P,z,O,x,q,L]}class nl extends Qe{constructor(e){super(),Ge(this,e,ll,rl,Je,{items:0,loading:1,error:2,pagination:3,filters:4,filterOptions:5})}}const ol=br(new Map),sl=l=>({}),Ut=l=>({});function Qt(l){let e,t;return{c(){e=$("p"),t=M(l[2]),this.h()},l(a){e=b(a,"P",{class:!0});var r=I(e);t=R(r,l[2]),r.forEach(m),this.h()},h(){E(e,"class","text-xs mt-1 text-gray-400 dark:text-gray-500")},m(a,r){N(a,e,r),d(e,t)},p(a,r){r&4&&oe(t,a[2])},d(a){a&&m(e)}}}function il(l){let e,t,a,r,n,s,o,i,c;t=new Za({props:{name:l[0],class:l[5][l[3]]+" mx-auto mb-2 text-gray-400 dark:text-gray-500"}});let f=l[2]&&Qt(l);const u=l[7].actions,h=bt(u,l,l[6],Ut);return{c(){e=$("div"),K(t.$$.fragment),a=F(),r=$("p"),n=M(l[1]),s=F(),f&&f.c(),o=F(),h&&h.c(),this.h()},l(g){e=b(g,"DIV",{class:!0});var p=I(e);J(t.$$.fragment,p),a=A(p),r=b(p,"P",{class:!0});var C=I(r);n=R(C,l[1]),C.forEach(m),s=A(p),f&&f.l(p),o=A(p),h&&h.l(p),p.forEach(m),this.h()},h(){E(r,"class","font-medium text-sm"),E(e,"class",i="text-center "+l[4][l[3]]+" text-gray-500 dark:text-gray-400")},m(g,p){N(g,e,p),G(t,e,null),d(e,a),d(e,r),d(r,n),d(e,s),f&&f.m(e,null),d(e,o),h&&h.m(e,null),c=!0},p(g,[p]){const C={};p&1&&(C.name=g[0]),p&40&&(C.class=g[5][g[3]]+" mx-auto mb-2 text-gray-400 dark:text-gray-500"),t.$set(C),(!c||p&2)&&oe(n,g[1]),g[2]?f?f.p(g,p):(f=Qt(g),f.c(),f.m(e,o)):f&&(f.d(1),f=null),h&&h.p&&(!c||p&64)&&$t(h,u,g,g[6],c?kt(u,g[6],p,sl):Et(g[6]),Ut),(!c||p&24&&i!==(i="text-center "+g[4][g[3]]+" text-gray-500 dark:text-gray-400"))&&E(e,"class",i)},i(g){c||(w(t.$$.fragment,g),w(h,g),c=!0)},o(g){y(t.$$.fragment,g),y(h,g),c=!1},d(g){g&&m(e),Q(t),f&&f.d(),h&&h.d(g)}}}function cl(l,e,t){let a,r,{$$slots:n={},$$scope:s}=e,{icon:o}=e,{message:i}=e,{description:c=""}=e,{size:f="md"}=e;return l.$$set=u=>{"icon"in u&&t(0,o=u.icon),"message"in u&&t(1,i=u.message),"description"in u&&t(2,c=u.description),"size"in u&&t(3,f=u.size),"$$scope"in u&&t(6,s=u.$$scope)},t(5,a={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}),t(4,r={sm:"py-4",md:"py-8",lg:"py-12"}),[o,i,c,f,r,a,s,n]}class At extends Qe{constructor(e){super(),Ge(this,e,cl,il,Je,{icon:0,message:1,description:2,size:3})}}const fl=l=>({}),Gt=l=>({}),ul=l=>({}),Jt=l=>({}),dl=l=>({}),Kt=l=>({});function Wt(l){let e,t;const a=l[6].actions,r=bt(a,l,l[5],Jt);return{c(){e=$("div"),r&&r.c(),this.h()},l(n){e=b(n,"DIV",{class:!0});var s=I(e);r&&r.l(s),s.forEach(m),this.h()},h(){E(e,"class","flex-shrink-0 ml-4")},m(n,s){N(n,e,s),r&&r.m(e,null),t=!0},p(n,s){r&&r.p&&(!t||s&32)&&$t(r,a,n,n[5],t?kt(a,n[5],s,ul):Et(n[5]),Jt)},i(n){t||(w(r,n),t=!0)},o(n){y(r,n),t=!1},d(n){n&&m(e),r&&r.d(n)}}}function ml(l){let e,t,a,r,n,s,o,i;const c=l[6].content,f=bt(c,l,l[5],Kt);let u=l[1].actions&&Wt(l);const h=l[6].footer,g=bt(h,l,l[5],Gt);return{c(){e=$("div"),t=$("div"),a=$("div"),f&&f.c(),r=F(),u&&u.c(),n=F(),g&&g.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var C=I(e);t=b(C,"DIV",{class:!0});var D=I(t);a=b(D,"DIV",{class:!0});var P=I(a);f&&f.l(P),P.forEach(m),r=A(D),u&&u.l(D),D.forEach(m),n=A(C),g&&g.l(C),C.forEach(m),this.h()},h(){E(a,"class","flex-1 min-w-0"),E(t,"class","flex justify-between items-start"),E(e,"class",l[0])},m(p,C){N(p,e,C),d(e,t),d(t,a),f&&f.m(a,null),d(t,r),u&&u.m(t,null),d(e,n),g&&g.m(e,null),s=!0,o||(i=He(e,"click",l[7]),o=!0)},p(p,[C]){f&&f.p&&(!s||C&32)&&$t(f,c,p,p[5],s?kt(c,p[5],C,dl):Et(p[5]),Kt),p[1].actions?u?(u.p(p,C),C&2&&w(u,1)):(u=Wt(p),u.c(),w(u,1),u.m(t,null)):u&&(_e(),y(u,1,1,()=>{u=null}),ve()),g&&g.p&&(!s||C&32)&&$t(g,h,p,p[5],s?kt(h,p[5],C,fl):Et(p[5]),Gt),(!s||C&1)&&E(e,"class",p[0])},i(p){s||(w(f,p),w(u),w(g,p),s=!0)},o(p){y(f,p),y(u),y(g,p),s=!1},d(p){p&&m(e),f&&f.d(p),u&&u.d(),g&&g.d(p),o=!1,i()}}}function gl(l,e,t){let a,{$$slots:r={},$$scope:n}=e;const s=ar(r);let{className:o=""}=e,{hoverable:i=!1}=e,{clickable:c=!1}=e;function f(u){ct.call(this,l,u)}return l.$$set=u=>{"className"in u&&t(2,o=u.className),"hoverable"in u&&t(3,i=u.hoverable),"clickable"in u&&t(4,c=u.clickable),"$$scope"in u&&t(5,n=u.$$scope)},l.$$.update=()=>{l.$$.dirty&28&&t(0,a=["border border-gray-200 dark:border-gray-700 rounded-sm p-4",i?"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors":"",c?"cursor-pointer":"",o].filter(Boolean).join(" "))},[a,s,o,i,c,n,r,f]}class tr extends Qe{constructor(e){super(),Ge(this,e,gl,ml,Je,{className:2,hoverable:3,clickable:4})}}function Xt(l,e,t){const a=l.slice();return a[26]=e[t],a[27]=e,a[28]=t,a}function Zt(l){let e,t,a,r,n,s,o,i,c,f,u,h,g,p,C,D,P,z,O,x,q,L;r=new ut({props:{title:"Nova Entrega de EPI",objectType:"NOVA ENTREGA",iconName:"PlusOutline",primaryAction:{text:l[1]?"Salvando...":"Criar Entrega",icon:l[1]?"":"CheckOutline",disabled:!l[6]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[14]),r.$on("primaryAction",l[13]),r.$on("secondaryAction",l[14]),i=new We({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[hl]},$$scope:{ctx:l}}}),f=new nt({props:{options:l[7],value:l[3],placeholder:"Selecione um respons√°vel...",disabled:l[1]}}),f.$on("change",l[17]),p=new We({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[pl]},$$scope:{ctx:l}}}),D=new ze({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[_l]},$$scope:{ctx:l}}}),D.$on("click",l[8]);const T=[bl,vl],j=[];function W(_,k){return _[0].length===0?0:1}return z=W(l),O=j[z]=T[z](l),{c(){e=$("div"),t=F(),a=$("div"),K(r.$$.fragment),n=F(),s=$("div"),o=$("div"),K(i.$$.fragment),c=F(),K(f.$$.fragment),u=F(),h=$("div"),g=$("div"),K(p.$$.fragment),C=F(),K(D.$$.fragment),P=F(),O.c(),this.h()},l(_){e=b(_,"DIV",{class:!0,role:!0}),I(e).forEach(m),t=A(_),a=b(_,"DIV",{class:!0,role:!0,"aria-modal":!0});var k=I(a);J(r.$$.fragment,k),n=A(k),s=b(k,"DIV",{class:!0,style:!0});var v=I(s);o=b(v,"DIV",{class:!0});var S=I(o);J(i.$$.fragment,S),c=A(S),J(f.$$.fragment,S),S.forEach(m),u=A(v),h=b(v,"DIV",{class:!0});var V=I(h);g=b(V,"DIV",{class:!0});var B=I(g);J(p.$$.fragment,B),C=A(B),J(D.$$.fragment,B),B.forEach(m),P=A(V),O.l(V),V.forEach(m),v.forEach(m),k.forEach(m),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(o,"class","mb-6"),E(g,"class","flex items-center justify-between mb-4"),E(h,"class","mb-6"),E(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),Ft(s,"height","calc(100% - 80px)"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(_,k){N(_,e,k),N(_,t,k),N(_,a,k),G(r,a,null),d(a,n),d(a,s),d(s,o),G(i,o,null),d(o,c),G(f,o,null),d(s,u),d(s,h),d(h,g),G(p,g,null),d(g,C),G(D,g,null),d(h,P),j[z].m(h,null),x=!0,q||(L=[He(e,"click",l[14]),He(a,"click",Ct(l[16]))],q=!0)},p(_,k){const v={};k&66&&(v.primaryAction={text:_[1]?"Salvando...":"Criar Entrega",icon:_[1]?"":"CheckOutline",disabled:!_[6]}),k&2&&(v.secondaryAction={text:"Cancelar",disabled:_[1]}),r.$set(v);const S={};k&536870912&&(S.$$scope={dirty:k,ctx:_}),i.$set(S);const V={};k&128&&(V.options=_[7]),k&8&&(V.value=_[3]),k&2&&(V.disabled=_[1]),f.$set(V);const B={};k&536870912&&(B.$$scope={dirty:k,ctx:_}),p.$set(B);const ee={};k&2&&(ee.disabled=_[1]),k&536870912&&(ee.$$scope={dirty:k,ctx:_}),D.$set(ee);let te=z;z=W(_),z===te?j[z].p(_,k):(_e(),y(j[te],1,1,()=>{j[te]=null}),ve(),O=j[z],O?O.p(_,k):(O=j[z]=T[z](_),O.c()),w(O,1),O.m(h,null))},i(_){x||(w(r.$$.fragment,_),w(i.$$.fragment,_),w(f.$$.fragment,_),w(p.$$.fragment,_),w(D.$$.fragment,_),w(O),x=!0)},o(_){y(r.$$.fragment,_),y(i.$$.fragment,_),y(f.$$.fragment,_),y(p.$$.fragment,_),y(D.$$.fragment,_),y(O),x=!1},d(_){_&&(m(e),m(t),m(a)),Q(r),Q(i),Q(f),Q(p),Q(D),j[z].d(),q=!1,Dt(L)}}}function hl(l){let e;return{c(){e=M("Respons√°vel pela Entrega *")},l(t){e=R(t,"Respons√°vel pela Entrega *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function pl(l){let e;return{c(){e=M("EPIs para Entrega *")},l(t){e=R(t,"EPIs para Entrega *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function _l(l){let e,t,a;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){K(e.$$.fragment),t=M(`
              Adicionar Item`)},l(r){J(e.$$.fragment,r),t=R(r,`
              Adicionar Item`)},m(r,n){G(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),Q(e,r)}}}function vl(l){let e,t,a,r=Se(l[4]),n=[];for(let i=0;i<r.length;i+=1)n[i]=ta(Xt(l,r,i));const s=i=>y(n[i],1,1,()=>{n[i]=null});let o=l[4].length===0&&aa(l);return{c(){e=$("div");for(let i=0;i<n.length;i+=1)n[i].c();t=F(),o&&o.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=I(e);for(let f=0;f<n.length;f+=1)n[f].l(c);t=A(c),o&&o.l(c),c.forEach(m),this.h()},h(){E(e,"class","space-y-4")},m(i,c){N(i,e,c);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);d(e,t),o&&o.m(e,null),a=!0},p(i,c){if(c&3634){r=Se(i[4]);let f;for(f=0;f<r.length;f+=1){const u=Xt(i,r,f);n[f]?(n[f].p(u,c),w(n[f],1)):(n[f]=ta(u),n[f].c(),w(n[f],1),n[f].m(e,t))}for(_e(),f=r.length;f<n.length;f+=1)s(f);ve()}i[4].length===0?o?(o.p(i,c),c&16&&w(o,1)):(o=aa(i),o.c(),w(o,1),o.m(e,null)):o&&(_e(),y(o,1,1,()=>{o=null}),ve())},i(i){if(!a){for(let c=0;c<r.length;c+=1)w(n[c]);w(o),a=!0}},o(i){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);y(o),a=!1},d(i){i&&m(e),It(n,i),o&&o.d()}}}function bl(l){let e,t,a,r,n,s="Nenhum EPI Dispon√≠vel",o,i,c="N√£o h√° EPIs dispon√≠veis para entrega no momento. Verifique o estoque ou entre em contato com o administrador.",f;return a=new qt({props:{class:"mx-auto mb-2 text-red-500 w-8 h-8"}}),{c(){e=$("div"),t=$("div"),K(a.$$.fragment),r=F(),n=$("h4"),n.textContent=s,o=F(),i=$("p"),i.textContent=c,this.h()},l(u){e=b(u,"DIV",{class:!0});var h=I(e);t=b(h,"DIV",{class:!0});var g=I(t);J(a.$$.fragment,g),r=A(g),n=b(g,"H4",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-1y6kxv5"&&(n.textContent=s),o=A(g),i=b(g,"P",{class:!0,"data-svelte-h":!0}),De(i)!=="svelte-4gen4i"&&(i.textContent=c),g.forEach(m),h.forEach(m),this.h()},h(){E(n,"class","text-sm font-medium text-red-800 dark:text-red-200 mb-1"),E(i,"class","text-sm text-red-600 dark:text-red-400"),E(t,"class","text-center"),E(e,"class","p-4 border-2 border-dashed border-red-300 rounded-lg bg-red-50 dark:bg-red-900/20")},m(u,h){N(u,e,h),d(e,t),G(a,t,null),d(t,r),d(t,n),d(t,o),d(t,i),f=!0},p:Ve,i(u){f||(w(a.$$.fragment,u),f=!0)},o(u){y(a.$$.fragment,u),f=!1},d(u){u&&m(e),Q(a)}}}function Yt(l){let e,t,a,r,n;t=new Wa({props:{class:"w-4 h-4"}});function s(){return l[18](l[28])}return{c(){e=$("button"),K(t.$$.fragment),this.h()},l(o){e=b(o,"BUTTON",{class:!0,title:!0});var i=I(e);J(t.$$.fragment,i),i.forEach(m),this.h()},h(){E(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],E(e,"title","Remover item")},m(o,i){N(o,e,i),G(t,e,null),a=!0,r||(n=He(e,"click",s),r=!0)},p(o,i){l=o,(!a||i&2)&&(e.disabled=l[1])},i(o){a||(w(t.$$.fragment,o),a=!0)},o(o){y(t.$$.fragment,o),a=!1},d(o){o&&m(e),Q(t),r=!1,n()}}}function $l(l){let e;return{c(){e=M("Equipamento")},l(t){e=R(t,"Equipamento")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function El(l){let e;return{c(){e=M("Quantidade")},l(t){e=R(t,"Quantidade")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function ea(l){let e,t,a,r,n=l[26].nomeEquipamento+"",s,o,i,c,f=l[26].registroCA+"",u,h,g,p,C,D=l[26].quantidade+"",P;return{c(){e=$("div"),t=$("div"),a=$("div"),r=$("p"),s=M(n),o=F(),i=$("p"),c=M("CA "),u=M(f),h=F(),g=$("div"),p=$("p"),C=M("Qtd: "),P=M(D),this.h()},l(z){e=b(z,"DIV",{class:!0});var O=I(e);t=b(O,"DIV",{class:!0});var x=I(t);a=b(x,"DIV",{});var q=I(a);r=b(q,"P",{class:!0});var L=I(r);s=R(L,n),L.forEach(m),o=A(q),i=b(q,"P",{class:!0});var T=I(i);c=R(T,"CA "),u=R(T,f),T.forEach(m),q.forEach(m),h=A(x),g=b(x,"DIV",{class:!0});var j=I(g);p=b(j,"P",{class:!0});var W=I(p);C=R(W,"Qtd: "),P=R(W,D),W.forEach(m),j.forEach(m),x.forEach(m),O.forEach(m),this.h()},h(){E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","text-xs text-gray-500 dark:text-gray-400"),E(p,"class","text-sm font-medium text-gray-900 dark:text-white"),E(g,"class","text-right"),E(t,"class","flex items-center justify-between"),E(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(z,O){N(z,e,O),d(e,t),d(t,a),d(a,r),d(r,s),d(a,o),d(a,i),d(i,c),d(i,u),d(t,h),d(t,g),d(g,p),d(p,C),d(p,P)},p(z,O){O&16&&n!==(n=z[26].nomeEquipamento+"")&&oe(s,n),O&16&&f!==(f=z[26].registroCA+"")&&oe(u,f),O&16&&D!==(D=z[26].quantidade+"")&&oe(P,D)},d(z){z&&m(e)}}}function ta(l){let e,t,a,r,n=l[28]+1+"",s,o,i,c,f,u,h,g,p,C,D,P,z,O,x,q,L,T=l[4].length>1&&Yt(l);u=new We({props:{for:"epi-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[$l]},$$scope:{ctx:l}}});function j(...S){return l[19](l[28],...S)}g=new nt({props:{options:l[5],value:l[26].episDisponivelId,placeholder:"Selecione um EPI...",disabled:l[1]}}),g.$on("change",j),D=new We({props:{for:"quantidade-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[El]},$$scope:{ctx:l}}});function W(S){l[20](S,l[26])}function _(...S){return l[21](l[28],...S)}let k={id:"quantidade-"+l[28],type:"number",min:"1",max:"100",class:"rounded-sm",disabled:l[1]};l[26].quantidade!==void 0&&(k.value=l[26].quantidade),z=new Pt({props:k}),Me.push(()=>je(z,"value",W)),z.$on("input",_);let v=l[26].nomeEquipamento&&ea(l);return{c(){e=$("div"),t=$("div"),a=$("h4"),r=M("Item "),s=M(n),o=F(),T&&T.c(),i=F(),c=$("div"),f=$("div"),K(u.$$.fragment),h=F(),K(g.$$.fragment),p=F(),C=$("div"),K(D.$$.fragment),P=F(),K(z.$$.fragment),x=F(),v&&v.c(),q=F(),this.h()},l(S){e=b(S,"DIV",{class:!0});var V=I(e);t=b(V,"DIV",{class:!0});var B=I(t);a=b(B,"H4",{class:!0});var ee=I(a);r=R(ee,"Item "),s=R(ee,n),ee.forEach(m),o=A(B),T&&T.l(B),B.forEach(m),i=A(V),c=b(V,"DIV",{class:!0});var te=I(c);f=b(te,"DIV",{class:!0});var re=I(f);J(u.$$.fragment,re),h=A(re),J(g.$$.fragment,re),re.forEach(m),p=A(te),C=b(te,"DIV",{});var le=I(C);J(D.$$.fragment,le),P=A(le),J(z.$$.fragment,le),le.forEach(m),te.forEach(m),x=A(V),v&&v.l(V),q=A(V),V.forEach(m),this.h()},h(){E(a,"class","text-sm font-medium text-gray-900 dark:text-white"),E(t,"class","flex items-start justify-between mb-4"),E(f,"class","md:col-span-2"),E(c,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(S,V){N(S,e,V),d(e,t),d(t,a),d(a,r),d(a,s),d(t,o),T&&T.m(t,null),d(e,i),d(e,c),d(c,f),G(u,f,null),d(f,h),G(g,f,null),d(c,p),d(c,C),G(D,C,null),d(C,P),G(z,C,null),d(e,x),v&&v.m(e,null),d(e,q),L=!0},p(S,V){l=S,l[4].length>1?T?(T.p(l,V),V&16&&w(T,1)):(T=Yt(l),T.c(),w(T,1),T.m(t,null)):T&&(_e(),y(T,1,1,()=>{T=null}),ve());const B={};V&536870912&&(B.$$scope={dirty:V,ctx:l}),u.$set(B);const ee={};V&32&&(ee.options=l[5]),V&16&&(ee.value=l[26].episDisponivelId),V&2&&(ee.disabled=l[1]),g.$set(ee);const te={};V&536870912&&(te.$$scope={dirty:V,ctx:l}),D.$set(te);const re={};V&2&&(re.disabled=l[1]),!O&&V&16&&(O=!0,re.value=l[26].quantidade,Le(()=>O=!1)),z.$set(re),l[26].nomeEquipamento?v?v.p(l,V):(v=ea(l),v.c(),v.m(e,q)):v&&(v.d(1),v=null)},i(S){L||(w(T),w(u.$$.fragment,S),w(g.$$.fragment,S),w(D.$$.fragment,S),w(z.$$.fragment,S),L=!0)},o(S){y(T),y(u.$$.fragment,S),y(g.$$.fragment,S),y(D.$$.fragment,S),y(z.$$.fragment,S),L=!1},d(S){S&&m(e),T&&T.d(),Q(u),Q(g),Q(D),Q(z),v&&v.d()}}}function aa(l){let e,t,a,r,n="Nenhum item adicionado",s,o,i;return t=new it({props:{class:"w-8 h-8 mx-auto mb-3 text-gray-400"}}),o=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[kl]},$$scope:{ctx:l}}}),o.$on("click",l[8]),{c(){e=$("div"),K(t.$$.fragment),a=F(),r=$("p"),r.textContent=n,s=F(),K(o.$$.fragment),this.h()},l(c){e=b(c,"DIV",{class:!0});var f=I(e);J(t.$$.fragment,f),a=A(f),r=b(f,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1e863on"&&(r.textContent=n),s=A(f),J(o.$$.fragment,f),f.forEach(m),this.h()},h(){E(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),E(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(c,f){N(c,e,f),G(t,e,null),d(e,a),d(e,r),d(e,s),G(o,e,null),i=!0},p(c,f){const u={};f&2&&(u.disabled=c[1]),f&536870912&&(u.$$scope={dirty:f,ctx:c}),o.$set(u)},i(c){i||(w(t.$$.fragment,c),w(o.$$.fragment,c),i=!0)},o(c){y(t.$$.fragment,c),y(o.$$.fragment,c),i=!1},d(c){c&&m(e),Q(t),Q(o)}}}function kl(l){let e;return{c(){e=M("Adicionar Primeiro Item")},l(t){e=R(t,"Adicionar Primeiro Item")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function wl(l){let e,t,a=l[2]&&Zt(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),N(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&w(a,1)):(a=Zt(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(w(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Dl(l,e,t){let a,r,n,{episDisponiveis:s=[]}=e,{usuarios:o=[]}=e,{loading:i=!1}=e,{show:c=!1}=e;const f=Ye();let u="",h="",g=[];function p(){u="",t(3,h=""),t(4,g=[])}function C(){t(4,g=[...g,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function D(v){t(4,g=g.filter((S,V)=>V!==v))}function P(v,S){const V=s.find(B=>B.id===S);V&&t(4,g[v]={...g[v],episDisponivelId:S,nomeEquipamento:V.nomeEquipamento,registroCA:V.numeroCA||V.registroCA},g)}function z(v,S){t(4,g[v]={...g[v],quantidade:S},g)}function O(v){const S=o.find(V=>V.id===v);S&&(t(3,h=v),u=S.nome)}function x(){if(console.log("üìù NovaEntregaDrawer: Preparando dados do formul√°rio..."),console.log("üìã Itens selecionados originais:",g),console.log("üë§ Usuario respons√°vel ID:",h),console.log("üì¶ Validando itens..."),!h.trim()){console.error("‚ùå Erro: usu√°rio respons√°vel n√£o selecionado");return}if(g.length===0){console.error("‚ùå Erro: nenhum item selecionado");return}const v=g.filter(B=>B.episDisponivelId&&B.quantidade>0);if(v.length===0){console.error("‚ùå Erro: nenhum item v√°lido selecionado");return}const S={responsavel:u.trim(),usuarioResponsavelId:h.trim(),itens:v.map(B=>({episDisponivelId:B.episDisponivelId,nomeEquipamento:B.nomeEquipamento,registroCA:B.registroCA,quantidade:B.quantidade}))};console.log("‚úÖ FormData montado:",{responsavel:S.responsavel,usuarioId:S.usuarioResponsavelId,totalItens:S.itens.length,itens:S.itens.map((B,ee)=>({index:ee+1,id:B.episDisponivelId,nome:B.nomeEquipamento,ca:B.registroCA,quantidade:B.quantidade}))});const V=new Set(S.itens.map(B=>B.episDisponivelId));console.log(`üéØ Verifica√ß√£o de tipos √∫nicos: ${V.size} tipos √∫nicos de ${S.itens.length} itens totais`),V.size<S.itens.length&&console.warn("‚ö†Ô∏è ALERTA: Alguns itens t√™m o mesmo episDisponivelId - isso pode causar problemas na expans√£o"),f("salvar",S)}function q(){f("cancelar")}function L(v){ct.call(this,l,v)}const T=v=>O(v.detail),j=v=>D(v),W=(v,S)=>P(v,S.detail);function _(v,S){l.$$.not_equal(S.quantidade,v)&&(S.quantidade=v,t(4,g))}const k=(v,S)=>z(v,parseInt(S.target.value)||1);return l.$$set=v=>{"episDisponiveis"in v&&t(0,s=v.episDisponiveis),"usuarios"in v&&t(15,o=v.usuarios),"loading"in v&&t(1,i=v.loading),"show"in v&&t(2,c=v.show)},l.$$.update=()=>{l.$$.dirty&20&&c&&g.length===0&&(p(),C()),l.$$.dirty&32776&&o.length>0&&!h&&(t(3,h=o[0].id),u=o[0].nome),l.$$.dirty&1&&t(5,a=[{value:"",label:"Selecione um EPI..."},...s.map(v=>({value:v.id,label:`${v.nomeEquipamento} (CA ${v.numeroCA||v.registroCA}) - ${v.quantidadeDisponivel} dispon√≠veis`}))]),l.$$.dirty&33&&(s==null?void 0:s.length)>0&&(console.log("üéØ NovaEntregaDrawer: EPIs dispon√≠veis atualizados:",s.length),console.log("üì¶ Amostra de EPIs no drawer:",s.slice(0,2)),console.log("üîß Op√ß√µes do select:",a.slice(0,3))),l.$$.dirty&32768&&t(7,r=[{value:"",label:"Selecione um respons√°vel..."},...o.map(v=>({value:v.id,label:`${v.nome} (${v.email})`}))]),l.$$.dirty&27&&t(6,n=h.trim()&&g.length>0&&!i&&s.length>0)},[s,i,c,h,g,a,n,r,C,D,P,z,O,x,q,o,L,T,j,W,_,k]}class Cl extends Qe{constructor(e){super(),Ge(this,e,Dl,wl,Je,{episDisponiveis:0,usuarios:15,loading:1,show:2})}}function ra(l,e,t){const a=l.slice();return a[26]=e[t],a[27]=e,a[28]=t,a}function la(l){var be;let e,t,a,r,n,s,o,i,c,f,u,h,g,p,C,D,P,z,O,x,q,L,T,j,W,_,k,v,S,V,B,ee,te,re;r=new ut({props:{title:"Editar Entrega #"+(((be=l[0])==null?void 0:be.id)||"")}}),r.$on("close",l[13]);let le=l[0]&&na(l);f=new We({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Il]},$$scope:{ctx:l}}});function ae(H){l[16](H)}let ue={id:"responsavel",type:"text",placeholder:"Nome do respons√°vel pela entrega",class:"rounded-sm "+(l[5].responsavel?"border-red-500":""),disabled:l[1]};l[3]!==void 0&&(ue.value=l[3]),h=new Pt({props:ue}),Me.push(()=>je(h,"value",ae));let de=l[5].responsavel&&oa(l);z=new We({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[yl]},$$scope:{ctx:l}}}),x=new ze({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Pl]},$$scope:{ctx:l}}}),x.$on("click",l[8]);let me=l[5].items&&sa(l),ge=Se(l[4]),ie=[];for(let H=0;H<ge.length;H+=1)ie[H]=da(ra(l,ge,H));const X=H=>y(ie[H],1,1,()=>{ie[H]=null});let Z=l[4].length===0&&ma(l),se=l[4].length>0&&ga(l);return S=new ze({props:{color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[ql]},$$scope:{ctx:l}}}),S.$on("click",l[13]),B=new ze({props:{color:"primary",class:"rounded-sm",disabled:!l[6],$$slots:{default:[zl]},$$scope:{ctx:l}}}),B.$on("click",l[12]),{c(){e=$("div"),t=F(),a=$("div"),K(r.$$.fragment),n=F(),s=$("div"),o=$("div"),le&&le.c(),i=F(),c=$("div"),K(f.$$.fragment),u=F(),K(h.$$.fragment),p=F(),de&&de.c(),C=F(),D=$("div"),P=$("div"),K(z.$$.fragment),O=F(),K(x.$$.fragment),q=F(),me&&me.c(),L=F(),T=$("div");for(let H=0;H<ie.length;H+=1)ie[H].c();j=F(),Z&&Z.c(),W=F(),se&&se.c(),_=F(),k=$("div"),v=$("div"),K(S.$$.fragment),V=F(),K(B.$$.fragment),this.h()},l(H){e=b(H,"DIV",{class:!0,role:!0}),I(e).forEach(m),t=A(H),a=b(H,"DIV",{class:!0,role:!0,"aria-modal":!0});var ne=I(a);J(r.$$.fragment,ne),n=A(ne),s=b(ne,"DIV",{class:!0});var $e=I(s);o=b($e,"DIV",{class:!0,style:!0});var Ee=I(o);le&&le.l(Ee),i=A(Ee),c=b(Ee,"DIV",{class:!0});var ke=I(c);J(f.$$.fragment,ke),u=A(ke),J(h.$$.fragment,ke),p=A(ke),de&&de.l(ke),ke.forEach(m),C=A(Ee),D=b(Ee,"DIV",{class:!0});var qe=I(D);P=b(qe,"DIV",{class:!0});var U=I(P);J(z.$$.fragment,U),O=A(U),J(x.$$.fragment,U),U.forEach(m),q=A(qe),me&&me.l(qe),L=A(qe),T=b(qe,"DIV",{class:!0});var he=I(T);for(let fe=0;fe<ie.length;fe+=1)ie[fe].l(he);j=A(he),Z&&Z.l(he),he.forEach(m),qe.forEach(m),W=A(Ee),se&&se.l(Ee),Ee.forEach(m),_=A($e),k=b($e,"DIV",{class:!0});var Pe=I(k);v=b(Pe,"DIV",{class:!0});var ye=I(v);J(S.$$.fragment,ye),V=A(ye),J(B.$$.fragment,ye),ye.forEach(m),Pe.forEach(m),$e.forEach(m),ne.forEach(m),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(c,"class","mb-6"),E(P,"class","flex items-center justify-between mb-4"),E(T,"class","space-y-4"),E(D,"class","mb-6"),E(o,"class","flex-1 overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),Ft(o,"height","calc(100% - 80px)"),E(v,"class","flex items-center justify-end space-x-3"),E(k,"class","flex-shrink-0 bg-gray-50 dark:bg-gray-800 px-6 py-4 border-t border-gray-200 dark:border-gray-700"),E(s,"class","flex flex-col h-full"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(H,ne){N(H,e,ne),N(H,t,ne),N(H,a,ne),G(r,a,null),d(a,n),d(a,s),d(s,o),le&&le.m(o,null),d(o,i),d(o,c),G(f,c,null),d(c,u),G(h,c,null),d(c,p),de&&de.m(c,null),d(o,C),d(o,D),d(D,P),G(z,P,null),d(P,O),G(x,P,null),d(D,q),me&&me.m(D,null),d(D,L),d(D,T);for(let $e=0;$e<ie.length;$e+=1)ie[$e]&&ie[$e].m(T,null);d(T,j),Z&&Z.m(T,null),d(o,W),se&&se.m(o,null),d(s,_),d(s,k),d(k,v),G(S,v,null),d(v,V),G(B,v,null),ee=!0,te||(re=[He(e,"click",l[13]),He(a,"click",Ct(l[15]))],te=!0)},p(H,ne){var ye;const $e={};ne&1&&($e.title="Editar Entrega #"+(((ye=H[0])==null?void 0:ye.id)||"")),r.$set($e),H[0]?le?le.p(H,ne):(le=na(H),le.c(),le.m(o,i)):le&&(le.d(1),le=null);const Ee={};ne&536870912&&(Ee.$$scope={dirty:ne,ctx:H}),f.$set(Ee);const ke={};ne&32&&(ke.class="rounded-sm "+(H[5].responsavel?"border-red-500":"")),ne&2&&(ke.disabled=H[1]),!g&&ne&8&&(g=!0,ke.value=H[3],Le(()=>g=!1)),h.$set(ke),H[5].responsavel?de?de.p(H,ne):(de=oa(H),de.c(),de.m(c,null)):de&&(de.d(1),de=null);const qe={};ne&536870912&&(qe.$$scope={dirty:ne,ctx:H}),z.$set(qe);const U={};if(ne&2&&(U.disabled=H[1]),ne&536870912&&(U.$$scope={dirty:ne,ctx:H}),x.$set(U),H[5].items?me?me.p(H,ne):(me=sa(H),me.c(),me.m(D,L)):me&&(me.d(1),me=null),ne&3762){ge=Se(H[4]);let fe;for(fe=0;fe<ge.length;fe+=1){const Ne=ra(H,ge,fe);ie[fe]?(ie[fe].p(Ne,ne),w(ie[fe],1)):(ie[fe]=da(Ne),ie[fe].c(),w(ie[fe],1),ie[fe].m(T,j))}for(_e(),fe=ge.length;fe<ie.length;fe+=1)X(fe);ve()}H[4].length===0?Z?(Z.p(H,ne),ne&16&&w(Z,1)):(Z=ma(H),Z.c(),w(Z,1),Z.m(T,null)):Z&&(_e(),y(Z,1,1,()=>{Z=null}),ve()),H[4].length>0?se?se.p(H,ne):(se=ga(H),se.c(),se.m(o,null)):se&&(se.d(1),se=null);const he={};ne&2&&(he.disabled=H[1]),ne&536870912&&(he.$$scope={dirty:ne,ctx:H}),S.$set(he);const Pe={};ne&64&&(Pe.disabled=!H[6]),ne&536870914&&(Pe.$$scope={dirty:ne,ctx:H}),B.$set(Pe)},i(H){if(!ee){w(r.$$.fragment,H),w(f.$$.fragment,H),w(h.$$.fragment,H),w(z.$$.fragment,H),w(x.$$.fragment,H);for(let ne=0;ne<ge.length;ne+=1)w(ie[ne]);w(Z),w(S.$$.fragment,H),w(B.$$.fragment,H),ee=!0}},o(H){y(r.$$.fragment,H),y(f.$$.fragment,H),y(h.$$.fragment,H),y(z.$$.fragment,H),y(x.$$.fragment,H),ie=ie.filter(Boolean);for(let ne=0;ne<ie.length;ne+=1)y(ie[ne]);y(Z),y(S.$$.fragment,H),y(B.$$.fragment,H),ee=!1},d(H){H&&(m(e),m(t),m(a)),Q(r),le&&le.d(),Q(f),Q(h),de&&de.d(),Q(z),Q(x),me&&me.d(),It(ie,H),Z&&Z.d(),se&&se.d(),Q(S),Q(B),te=!1,Dt(re)}}}function na(l){let e,t,a="Informa√ß√µes da Entrega Original",r,n,s,o,i=new Date(l[0].dataEntrega).toLocaleDateString("pt-BR")+"",c,f,u,h,g=l[0].status==="assinado"?"Assinado":"Pendente Assinatura",p,C,D,P,z=l[0].id+"",O;return{c(){e=$("div"),t=$("h4"),t.textContent=a,r=F(),n=$("div"),s=$("p"),o=M("‚Ä¢ Data: "),c=M(i),f=F(),u=$("p"),h=M("‚Ä¢ Status: "),p=M(g),C=F(),D=$("p"),P=M("‚Ä¢ ID: #"),O=M(z),this.h()},l(x){e=b(x,"DIV",{class:!0});var q=I(e);t=b(q,"H4",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1p8cqi4"&&(t.textContent=a),r=A(q),n=b(q,"DIV",{class:!0});var L=I(n);s=b(L,"P",{});var T=I(s);o=R(T,"‚Ä¢ Data: "),c=R(T,i),T.forEach(m),f=A(L),u=b(L,"P",{});var j=I(u);h=R(j,"‚Ä¢ Status: "),p=R(j,g),j.forEach(m),C=A(L),D=b(L,"P",{});var W=I(D);P=R(W,"‚Ä¢ ID: #"),O=R(W,z),W.forEach(m),L.forEach(m),q.forEach(m),this.h()},h(){E(t,"class","text-sm font-medium text-blue-900 dark:text-blue-100 mb-2"),E(n,"class","text-sm text-blue-800 dark:text-blue-200"),E(e,"class","mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800")},m(x,q){N(x,e,q),d(e,t),d(e,r),d(e,n),d(n,s),d(s,o),d(s,c),d(n,f),d(n,u),d(u,h),d(u,p),d(n,C),d(n,D),d(D,P),d(D,O)},p(x,q){q&1&&i!==(i=new Date(x[0].dataEntrega).toLocaleDateString("pt-BR")+"")&&oe(c,i),q&1&&g!==(g=x[0].status==="assinado"?"Assinado":"Pendente Assinatura")&&oe(p,g),q&1&&z!==(z=x[0].id+"")&&oe(O,z)},d(x){x&&m(e)}}}function Il(l){let e;return{c(){e=M("Respons√°vel pela Entrega *")},l(t){e=R(t,"Respons√°vel pela Entrega *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function oa(l){let e,t=l[5].responsavel+"",a;return{c(){e=$("p"),a=M(t),this.h()},l(r){e=b(r,"P",{class:!0});var n=I(e);a=R(n,t),n.forEach(m),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].responsavel+"")&&oe(a,t)},d(r){r&&m(e)}}}function yl(l){let e;return{c(){e=M("EPIs da Entrega *")},l(t){e=R(t,"EPIs da Entrega *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Pl(l){let e,t,a;return e=new it({props:{class:"mr-2 w-4 h-4"}}),{c(){K(e.$$.fragment),t=M(`
              Adicionar Item`)},l(r){J(e.$$.fragment,r),t=R(r,`
              Adicionar Item`)},m(r,n){G(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),Q(e,r)}}}function sa(l){let e,t=l[5].items+"",a;return{c(){e=$("p"),a=M(t),this.h()},l(r){e=b(r,"P",{class:!0});var n=I(e);a=R(n,t),n.forEach(m),this.h()},h(){E(e,"class","mb-3 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].items+"")&&oe(a,t)},d(r){r&&m(e)}}}function ia(l){let e,t,a,r,n;t=new Wa({props:{class:"w-4 h-4"}});function s(){return l[17](l[28])}return{c(){e=$("button"),K(t.$$.fragment),this.h()},l(o){e=b(o,"BUTTON",{class:!0,title:!0});var i=I(e);J(t.$$.fragment,i),i.forEach(m),this.h()},h(){E(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],E(e,"title","Remover item")},m(o,i){N(o,e,i),G(t,e,null),a=!0,r||(n=He(e,"click",s),r=!0)},p(o,i){l=o,(!a||i&2)&&(e.disabled=l[1])},i(o){a||(w(t.$$.fragment,o),a=!0)},o(o){y(t.$$.fragment,o),a=!1},d(o){o&&m(e),Q(t),r=!1,n()}}}function Al(l){let e;return{c(){e=M("Equipamento")},l(t){e=R(t,"Equipamento")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function ca(l){let e,t=l[5][`item-${l[28]}`]+"",a;return{c(){e=$("p"),a=M(t),this.h()},l(r){e=b(r,"P",{class:!0});var n=I(e);a=R(n,t),n.forEach(m),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5][`item-${r[28]}`]+"")&&oe(a,t)},d(r){r&&m(e)}}}function Fl(l){let e;return{c(){e=M("Quantidade")},l(t){e=R(t,"Quantidade")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function fa(l){let e,t=l[5][`quantidade-${l[28]}`]+"",a;return{c(){e=$("p"),a=M(t),this.h()},l(r){e=b(r,"P",{class:!0});var n=I(e);a=R(n,t),n.forEach(m),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5][`quantidade-${r[28]}`]+"")&&oe(a,t)},d(r){r&&m(e)}}}function ua(l){let e,t,a,r,n=l[26].nomeEquipamento+"",s,o,i,c,f=l[26].registroCA+"",u,h,g,p,C,D=l[26].quantidade+"",P;return{c(){e=$("div"),t=$("div"),a=$("div"),r=$("p"),s=M(n),o=F(),i=$("p"),c=M("CA "),u=M(f),h=F(),g=$("div"),p=$("p"),C=M("Qtd: "),P=M(D),this.h()},l(z){e=b(z,"DIV",{class:!0});var O=I(e);t=b(O,"DIV",{class:!0});var x=I(t);a=b(x,"DIV",{});var q=I(a);r=b(q,"P",{class:!0});var L=I(r);s=R(L,n),L.forEach(m),o=A(q),i=b(q,"P",{class:!0});var T=I(i);c=R(T,"CA "),u=R(T,f),T.forEach(m),q.forEach(m),h=A(x),g=b(x,"DIV",{class:!0});var j=I(g);p=b(j,"P",{class:!0});var W=I(p);C=R(W,"Qtd: "),P=R(W,D),W.forEach(m),j.forEach(m),x.forEach(m),O.forEach(m),this.h()},h(){E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","text-xs text-gray-500 dark:text-gray-400"),E(p,"class","text-sm font-medium text-gray-900 dark:text-white"),E(g,"class","text-right"),E(t,"class","flex items-center justify-between"),E(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(z,O){N(z,e,O),d(e,t),d(t,a),d(a,r),d(r,s),d(a,o),d(a,i),d(i,c),d(i,u),d(t,h),d(t,g),d(g,p),d(p,C),d(p,P)},p(z,O){O&16&&n!==(n=z[26].nomeEquipamento+"")&&oe(s,n),O&16&&f!==(f=z[26].registroCA+"")&&oe(u,f),O&16&&D!==(D=z[26].quantidade+"")&&oe(P,D)},d(z){z&&m(e)}}}function da(l){let e,t,a,r,n=l[28]+1+"",s,o,i,c,f,u,h,g,p,C,D,P,z,O,x,q,L,T,j,W,_=l[4].length>1&&ia(l);u=new We({props:{for:"epi-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Al]},$$scope:{ctx:l}}});function k(ae){l[18](ae,l[26])}function v(...ae){return l[19](l[28],...ae)}let S={id:"epi-"+l[28],items:l[7],class:"rounded-sm "+(l[5][`item-${l[28]}`]?"border-red-500":""),disabled:l[1]};l[26].episDisponivelId!==void 0&&(S.value=l[26].episDisponivelId),g=new Xa({props:S}),Me.push(()=>je(g,"value",k)),g.$on("change",v);let V=l[5][`item-${l[28]}`]&&ca(l);z=new We({props:{for:"quantidade-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Fl]},$$scope:{ctx:l}}});function B(ae){l[20](ae,l[26])}function ee(...ae){return l[21](l[28],...ae)}let te={id:"quantidade-"+l[28],type:"number",min:"1",max:"100",class:"rounded-sm "+(l[5][`quantidade-${l[28]}`]?"border-red-500":""),disabled:l[1]};l[26].quantidade!==void 0&&(te.value=l[26].quantidade),x=new Pt({props:te}),Me.push(()=>je(x,"value",B)),x.$on("input",ee);let re=l[5][`quantidade-${l[28]}`]&&fa(l),le=l[26].nomeEquipamento&&ua(l);return{c(){e=$("div"),t=$("div"),a=$("h4"),r=M("Item "),s=M(n),o=F(),_&&_.c(),i=F(),c=$("div"),f=$("div"),K(u.$$.fragment),h=F(),K(g.$$.fragment),C=F(),V&&V.c(),D=F(),P=$("div"),K(z.$$.fragment),O=F(),K(x.$$.fragment),L=F(),re&&re.c(),T=F(),le&&le.c(),j=F(),this.h()},l(ae){e=b(ae,"DIV",{class:!0});var ue=I(e);t=b(ue,"DIV",{class:!0});var de=I(t);a=b(de,"H4",{class:!0});var me=I(a);r=R(me,"Item "),s=R(me,n),me.forEach(m),o=A(de),_&&_.l(de),de.forEach(m),i=A(ue),c=b(ue,"DIV",{class:!0});var ge=I(c);f=b(ge,"DIV",{class:!0});var ie=I(f);J(u.$$.fragment,ie),h=A(ie),J(g.$$.fragment,ie),C=A(ie),V&&V.l(ie),ie.forEach(m),D=A(ge),P=b(ge,"DIV",{});var X=I(P);J(z.$$.fragment,X),O=A(X),J(x.$$.fragment,X),L=A(X),re&&re.l(X),X.forEach(m),ge.forEach(m),T=A(ue),le&&le.l(ue),j=A(ue),ue.forEach(m),this.h()},h(){E(a,"class","text-sm font-medium text-gray-900 dark:text-white"),E(t,"class","flex items-start justify-between mb-4"),E(f,"class","md:col-span-2"),E(c,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(ae,ue){N(ae,e,ue),d(e,t),d(t,a),d(a,r),d(a,s),d(t,o),_&&_.m(t,null),d(e,i),d(e,c),d(c,f),G(u,f,null),d(f,h),G(g,f,null),d(f,C),V&&V.m(f,null),d(c,D),d(c,P),G(z,P,null),d(P,O),G(x,P,null),d(P,L),re&&re.m(P,null),d(e,T),le&&le.m(e,null),d(e,j),W=!0},p(ae,ue){l=ae,l[4].length>1?_?(_.p(l,ue),ue&16&&w(_,1)):(_=ia(l),_.c(),w(_,1),_.m(t,null)):_&&(_e(),y(_,1,1,()=>{_=null}),ve());const de={};ue&536870912&&(de.$$scope={dirty:ue,ctx:l}),u.$set(de);const me={};ue&128&&(me.items=l[7]),ue&32&&(me.class="rounded-sm "+(l[5][`item-${l[28]}`]?"border-red-500":"")),ue&2&&(me.disabled=l[1]),!p&&ue&16&&(p=!0,me.value=l[26].episDisponivelId,Le(()=>p=!1)),g.$set(me),l[5][`item-${l[28]}`]?V?V.p(l,ue):(V=ca(l),V.c(),V.m(f,null)):V&&(V.d(1),V=null);const ge={};ue&536870912&&(ge.$$scope={dirty:ue,ctx:l}),z.$set(ge);const ie={};ue&32&&(ie.class="rounded-sm "+(l[5][`quantidade-${l[28]}`]?"border-red-500":"")),ue&2&&(ie.disabled=l[1]),!q&&ue&16&&(q=!0,ie.value=l[26].quantidade,Le(()=>q=!1)),x.$set(ie),l[5][`quantidade-${l[28]}`]?re?re.p(l,ue):(re=fa(l),re.c(),re.m(P,null)):re&&(re.d(1),re=null),l[26].nomeEquipamento?le?le.p(l,ue):(le=ua(l),le.c(),le.m(e,j)):le&&(le.d(1),le=null)},i(ae){W||(w(_),w(u.$$.fragment,ae),w(g.$$.fragment,ae),w(z.$$.fragment,ae),w(x.$$.fragment,ae),W=!0)},o(ae){y(_),y(u.$$.fragment,ae),y(g.$$.fragment,ae),y(z.$$.fragment,ae),y(x.$$.fragment,ae),W=!1},d(ae){ae&&m(e),_&&_.d(),Q(u),Q(g),V&&V.d(),Q(z),Q(x),re&&re.d(),le&&le.d()}}}function ma(l){let e,t,a,r,n="Nenhum item na entrega",s,o,i;return t=new it({props:{class:"mx-auto mb-3 text-gray-400 w-8 h-8"}}),o=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Vl]},$$scope:{ctx:l}}}),o.$on("click",l[8]),{c(){e=$("div"),K(t.$$.fragment),a=F(),r=$("p"),r.textContent=n,s=F(),K(o.$$.fragment),this.h()},l(c){e=b(c,"DIV",{class:!0});var f=I(e);J(t.$$.fragment,f),a=A(f),r=b(f,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-iymvfb"&&(r.textContent=n),s=A(f),J(o.$$.fragment,f),f.forEach(m),this.h()},h(){E(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),E(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(c,f){N(c,e,f),G(t,e,null),d(e,a),d(e,r),d(e,s),G(o,e,null),i=!0},p(c,f){const u={};f&2&&(u.disabled=c[1]),f&536870912&&(u.$$scope={dirty:f,ctx:c}),o.$set(u)},i(c){i||(w(t.$$.fragment,c),w(o.$$.fragment,c),i=!0)},o(c){y(t.$$.fragment,c),y(o.$$.fragment,c),i=!1},d(c){c&&m(e),Q(t),Q(o)}}}function Vl(l){let e;return{c(){e=M("Adicionar Primeiro Item")},l(t){e=R(t,"Adicionar Primeiro Item")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function ga(l){let e,t,a="Resumo das Altera√ß√µes",r,n,s,o,i=l[4].length+"",c,f,u,h,g=l[4].reduce(ha,0)+"",p,C,D,P,z,O=(l[3]||"N√£o informado")+"",x;return{c(){e=$("div"),t=$("h4"),t.textContent=a,r=F(),n=$("div"),s=$("p"),o=M("‚Ä¢ Total de itens: "),c=M(i),f=F(),u=$("p"),h=M("‚Ä¢ Quantidade total: "),p=M(g),C=M(" unidades"),D=F(),P=$("p"),z=M("‚Ä¢ Respons√°vel: "),x=M(O),this.h()},l(q){e=b(q,"DIV",{class:!0});var L=I(e);t=b(L,"H4",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-sxfnj2"&&(t.textContent=a),r=A(L),n=b(L,"DIV",{class:!0});var T=I(n);s=b(T,"P",{});var j=I(s);o=R(j,"‚Ä¢ Total de itens: "),c=R(j,i),j.forEach(m),f=A(T),u=b(T,"P",{});var W=I(u);h=R(W,"‚Ä¢ Quantidade total: "),p=R(W,g),C=R(W," unidades"),W.forEach(m),D=A(T),P=b(T,"P",{});var _=I(P);z=R(_,"‚Ä¢ Respons√°vel: "),x=R(_,O),_.forEach(m),T.forEach(m),L.forEach(m),this.h()},h(){E(t,"class","text-sm font-medium text-yellow-900 dark:text-yellow-100 mb-2"),E(n,"class","text-sm text-yellow-800 dark:text-yellow-200"),E(e,"class","mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800")},m(q,L){N(q,e,L),d(e,t),d(e,r),d(e,n),d(n,s),d(s,o),d(s,c),d(n,f),d(n,u),d(u,h),d(u,p),d(u,C),d(n,D),d(n,P),d(P,z),d(P,x)},p(q,L){L&16&&i!==(i=q[4].length+"")&&oe(c,i),L&16&&g!==(g=q[4].reduce(ha,0)+"")&&oe(p,g),L&8&&O!==(O=(q[3]||"N√£o informado")+"")&&oe(x,O)},d(q){q&&m(e)}}}function ql(l){let e;return{c(){e=M("Cancelar")},l(t){e=R(t,"Cancelar")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Nl(l){let e,t,a;return e=new $r({props:{class:"mr-2 w-4 h-4"}}),{c(){K(e.$$.fragment),t=M(`
              Salvar Altera√ß√µes`)},l(r){J(e.$$.fragment,r),t=R(r,`
              Salvar Altera√ß√µes`)},m(r,n){G(e,r,n),N(r,t,n),a=!0},i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),Q(e,r)}}}function Sl(l){let e,t,a;return e=new Ka({props:{class:"mr-2 animate-spin w-4 h-4"}}),{c(){K(e.$$.fragment),t=M(`
              Salvando...`)},l(r){J(e.$$.fragment,r),t=R(r,`
              Salvando...`)},m(r,n){G(e,r,n),N(r,t,n),a=!0},i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),Q(e,r)}}}function zl(l){let e,t,a,r;const n=[Sl,Nl],s=[];function o(i,c){return i[1]?0:1}return e=o(l),t=s[e]=n[e](l),{c(){t.c(),a=Ce()},l(i){t.l(i),a=Ce()},m(i,c){s[e].m(i,c),N(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e!==f&&(_e(),y(s[f],1,1,()=>{s[f]=null}),ve(),t=s[e],t||(t=s[e]=n[e](i),t.c()),w(t,1),t.m(a.parentNode,a))},i(i){r||(w(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),s[e].d(i)}}}function Ol(l){let e,t,a=l[2]&&la(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),N(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&w(a,1)):(a=la(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(w(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}const ha=(l,e)=>l+e.quantidade;function xl(l,e,t){let a,r,{episDisponiveis:n=[]}=e,{entrega:s=null}=e,{loading:o=!1}=e,{show:i=!1}=e;const c=Ye();let f="",u=[],h={};function g(){s&&(t(3,f="Respons√°vel da Entrega"),t(4,u=[{episDisponivelId:"1",nomeEquipamento:"Capacete de Seguran√ßa",registroCA:"31469",quantidade:1}]),t(5,h={}))}function p(){t(4,u=[...u,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function C(v){t(4,u=u.filter((S,V)=>V!==v))}function D(v,S){const V=n.find(B=>B.id===S);V&&(t(4,u[v]={...u[v],episDisponivelId:S,nomeEquipamento:V.nomeEquipamento,registroCA:V.registroCA},u),delete h[`item-${v}`],t(5,h={...h}))}function P(v,S){t(4,u[v]={...u[v],quantidade:S},u),delete h[`quantidade-${v}`],t(5,h={...h})}function z(){const v={};return f.trim()||(v.responsavel="Respons√°vel √© obrigat√≥rio"),u.length===0&&(v.items="Adicione pelo menos um item"),u.forEach((S,V)=>{S.episDisponivelId||(v[`item-${V}`]="Selecione um EPI"),S.quantidade<1&&(v[`quantidade-${V}`]="Quantidade deve ser maior que 0")}),t(5,h=v),Object.keys(v).length===0}function O(){if(!z())return;const v={responsavel:f.trim(),itens:u.map(S=>({episDisponivelId:S.episDisponivelId,nomeEquipamento:S.nomeEquipamento,registroCA:S.registroCA,quantidade:S.quantidade}))};c("salvar",v)}function x(){c("cancelar")}function q(v){ct.call(this,l,v)}function L(v){f=v,t(3,f)}const T=v=>C(v);function j(v,S){l.$$.not_equal(S.episDisponivelId,v)&&(S.episDisponivelId=v,t(4,u))}const W=(v,S)=>D(v,S.target.value);function _(v,S){l.$$.not_equal(S.quantidade,v)&&(S.quantidade=v,t(4,u))}const k=(v,S)=>P(v,parseInt(S.target.value)||1);return l.$$set=v=>{"episDisponiveis"in v&&t(14,n=v.episDisponiveis),"entrega"in v&&t(0,s=v.entrega),"loading"in v&&t(1,o=v.loading),"show"in v&&t(2,i=v.show)},l.$$.update=()=>{l.$$.dirty&5&&i&&s&&g(),l.$$.dirty&16384&&t(7,a=[{value:"",label:"Selecione um EPI..."},...n.filter(v=>v.disponivel).map(v=>({value:v.id,label:`${v.nomeEquipamento} (CA ${v.registroCA})${v.quantidade?` - ${v.quantidade} dispon√≠veis`:""}`}))]),l.$$.dirty&26&&t(6,r=f.trim()&&u.length>0&&!o)},[s,o,i,f,u,h,r,a,p,C,D,P,O,x,n,q,L,T,j,W,_,k]}class Tl extends Qe{constructor(e){super(),Ge(this,e,xl,Ol,Je,{episDisponiveis:14,entrega:0,loading:1,show:2})}}function pa(l){let e,t,a,r,n,s,o,i,c;r=new ut({props:{title:l[0]?`Devolver ${l[0].nomeEquipamento}`:"Devolver Equipamento",objectType:"DEVOLU√á√ÉO EPI",iconName:"TrashBinOutline",primaryAction:{text:l[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:l[1]?"":"CheckOutline",disabled:!l[8]}}}),r.$on("close",l[11]),r.$on("primaryAction",l[10]);let f=l[0]&&_a(l);return{c(){e=$("div"),t=F(),a=$("div"),K(r.$$.fragment),n=F(),s=$("div"),f&&f.c(),this.h()},l(u){e=b(u,"DIV",{class:!0,role:!0}),I(e).forEach(m),t=A(u),a=b(u,"DIV",{class:!0,role:!0,"aria-modal":!0});var h=I(a);J(r.$$.fragment,h),n=A(h),s=b(h,"DIV",{class:!0});var g=I(s);f&&f.l(g),g.forEach(m),h.forEach(m),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(s,"class","flex-1 overflow-y-auto p-6 custom-scrollbar svelte-fw4j42"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(u,h){N(u,e,h),N(u,t,h),N(u,a,h),G(r,a,null),d(a,n),d(a,s),f&&f.m(s,null),o=!0,i||(c=[He(e,"click",l[11]),He(a,"click",Ct(l[12]))],i=!0)},p(u,h){const g={};h&1&&(g.title=u[0]?`Devolver ${u[0].nomeEquipamento}`:"Devolver Equipamento"),h&258&&(g.primaryAction={text:u[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:u[1]?"":"CheckOutline",disabled:!u[8]}),r.$set(g),u[0]?f?(f.p(u,h),h&1&&w(f,1)):(f=_a(u),f.c(),w(f,1),f.m(s,null)):f&&(_e(),y(f,1,1,()=>{f=null}),ve())},i(u){o||(w(r.$$.fragment,u),w(f),o=!0)},o(u){y(r.$$.fragment,u),y(f),o=!1},d(u){u&&(m(e),m(t),m(a)),Q(r),f&&f.d(),i=!1,Dt(c)}}}function _a(l){let e,t,a,r="1",n,s,o,i=l[0].nomeEquipamento+"",c,f,u,h,g=l[0].registroCA+"",p,C,D=l[0].entregaId+"",P,z,O,x,q,L,T="Prazo de Devolu√ß√£o",j,W,_=wt(l[0].prazoMaximoDevolucao)+"",k,v,S,V,B,ee,te,re,le,ae,ue,de,me,ge,ie,X,Z,se,be,H,ne="Campo opcional para detalhes espec√≠ficos da devolu√ß√£o",$e,Ee,ke;const qe=[Ml,Rl],U=[];function he(ce,we){return ce[7]?0:1}V=he(l),B=U[V]=qe[V](l),re=new We({props:{for:"motivo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[jl]},$$scope:{ctx:l}}});function Pe(ce){l[13](ce)}let ye={id:"motivo",class:"rounded-sm "+(l[5].motivo?"border-red-500":""),disabled:l[1],items:l[9]};l[3]!==void 0&&(ye.value=l[3]),ae=new Xa({props:ye}),Me.push(()=>je(ae,"value",Pe));let fe=l[5].motivo&&va(l);ie=new We({props:{for:"observacoes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Ll]},$$scope:{ctx:l}}});function Ne(ce){l[14](ce)}let Y={id:"observacoes",placeholder:"Observa√ß√µes adicionais sobre a devolu√ß√£o...",rows:2,class:"rounded-sm",disabled:l[1]};l[4]!==void 0&&(Y.value=l[4]),Z=new _r({props:Y}),Me.push(()=>je(Z,"value",Ne));let Ie=l[7]&&ba(l);return{c(){e=$("div"),t=$("div"),a=$("div"),a.textContent=r,n=F(),s=$("div"),o=$("h4"),c=M(i),f=F(),u=$("p"),h=M("CA "),p=M(g),C=M(" ‚Ä¢ Entrega #"),P=M(D),z=F(),O=$("div"),x=$("div"),q=$("div"),L=$("p"),L.textContent=T,j=F(),W=$("p"),k=M(_),v=F(),S=$("div"),B.c(),ee=F(),te=$("div"),K(re.$$.fragment),le=F(),K(ae.$$.fragment),de=F(),fe&&fe.c(),me=F(),ge=$("div"),K(ie.$$.fragment),X=F(),K(Z.$$.fragment),be=F(),H=$("p"),H.textContent=ne,$e=F(),Ie&&Ie.c(),Ee=Ce(),this.h()},l(ce){e=b(ce,"DIV",{class:!0});var we=I(e);t=b(we,"DIV",{class:!0});var Te=I(t);a=b(Te,"DIV",{class:!0,"data-svelte-h":!0}),De(a)!=="svelte-bog2zm"&&(a.textContent=r),n=A(Te),s=b(Te,"DIV",{class:!0});var Re=I(s);o=b(Re,"H4",{class:!0});var Ae=I(o);c=R(Ae,i),Ae.forEach(m),f=A(Re),u=b(Re,"P",{class:!0});var pe=I(u);h=R(pe,"CA "),p=R(pe,g),C=R(pe," ‚Ä¢ Entrega #"),P=R(pe,D),pe.forEach(m),Re.forEach(m),Te.forEach(m),z=A(we),O=b(we,"DIV",{class:!0});var Fe=I(O);x=b(Fe,"DIV",{class:!0});var Be=I(x);q=b(Be,"DIV",{});var Ue=I(q);L=b(Ue,"P",{class:!0,"data-svelte-h":!0}),De(L)!=="svelte-13u3t5e"&&(L.textContent=T),j=A(Ue),W=b(Ue,"P",{class:!0});var tt=I(W);k=R(tt,_),tt.forEach(m),Ue.forEach(m),v=A(Be),S=b(Be,"DIV",{class:!0});var et=I(S);B.l(et),et.forEach(m),Be.forEach(m),Fe.forEach(m),we.forEach(m),ee=A(ce),te=b(ce,"DIV",{class:!0});var Xe=I(te);J(re.$$.fragment,Xe),le=A(Xe),J(ae.$$.fragment,Xe),de=A(Xe),fe&&fe.l(Xe),Xe.forEach(m),me=A(ce),ge=b(ce,"DIV",{class:!0});var Ke=I(ge);J(ie.$$.fragment,Ke),X=A(Ke),J(Z.$$.fragment,Ke),be=A(Ke),H=b(Ke,"P",{class:!0,"data-svelte-h":!0}),De(H)!=="svelte-1gkgsxh"&&(H.textContent=ne),Ke.forEach(m),$e=A(ce),Ie&&Ie.l(ce),Ee=Ce(),this.h()},h(){E(a,"class","flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-md flex items-center justify-center font-semibold text-sm"),E(o,"class","font-medium text-gray-900 dark:text-white"),E(u,"class","text-sm text-gray-500 dark:text-gray-400"),E(s,"class","flex-1"),E(t,"class","flex items-start space-x-3 mb-3"),E(L,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(W,"class","text-sm text-gray-900 dark:text-white"),E(S,"class","text-right"),E(x,"class","flex items-center justify-between"),E(O,"class","pt-3 border-t border-gray-200 dark:border-gray-700"),E(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),E(te,"class","mb-6"),E(H,"class","mt-1 text-xs text-gray-500 dark:text-gray-400"),E(ge,"class","mb-6")},m(ce,we){N(ce,e,we),d(e,t),d(t,a),d(t,n),d(t,s),d(s,o),d(o,c),d(s,f),d(s,u),d(u,h),d(u,p),d(u,C),d(u,P),d(e,z),d(e,O),d(O,x),d(x,q),d(q,L),d(q,j),d(q,W),d(W,k),d(x,v),d(x,S),U[V].m(S,null),N(ce,ee,we),N(ce,te,we),G(re,te,null),d(te,le),G(ae,te,null),d(te,de),fe&&fe.m(te,null),N(ce,me,we),N(ce,ge,we),G(ie,ge,null),d(ge,X),G(Z,ge,null),d(ge,be),d(ge,H),N(ce,$e,we),Ie&&Ie.m(ce,we),N(ce,Ee,we),ke=!0},p(ce,we){(!ke||we&1)&&i!==(i=ce[0].nomeEquipamento+"")&&oe(c,i),(!ke||we&1)&&g!==(g=ce[0].registroCA+"")&&oe(p,g),(!ke||we&1)&&D!==(D=ce[0].entregaId+"")&&oe(P,D),(!ke||we&1)&&_!==(_=wt(ce[0].prazoMaximoDevolucao)+"")&&oe(k,_);let Te=V;V=he(ce),V===Te?U[V].p(ce,we):(_e(),y(U[Te],1,1,()=>{U[Te]=null}),ve(),B=U[V],B?B.p(ce,we):(B=U[V]=qe[V](ce),B.c()),w(B,1),B.m(S,null));const Re={};we&262144&&(Re.$$scope={dirty:we,ctx:ce}),re.$set(Re);const Ae={};we&32&&(Ae.class="rounded-sm "+(ce[5].motivo?"border-red-500":"")),we&2&&(Ae.disabled=ce[1]),!ue&&we&8&&(ue=!0,Ae.value=ce[3],Le(()=>ue=!1)),ae.$set(Ae),ce[5].motivo?fe?fe.p(ce,we):(fe=va(ce),fe.c(),fe.m(te,null)):fe&&(fe.d(1),fe=null);const pe={};we&262144&&(pe.$$scope={dirty:we,ctx:ce}),ie.$set(pe);const Fe={};we&2&&(Fe.disabled=ce[1]),!se&&we&16&&(se=!0,Fe.value=ce[4],Le(()=>se=!1)),Z.$set(Fe),ce[7]?Ie?(Ie.p(ce,we),we&128&&w(Ie,1)):(Ie=ba(ce),Ie.c(),w(Ie,1),Ie.m(Ee.parentNode,Ee)):Ie&&(_e(),y(Ie,1,1,()=>{Ie=null}),ve())},i(ce){ke||(w(B),w(re.$$.fragment,ce),w(ae.$$.fragment,ce),w(ie.$$.fragment,ce),w(Z.$$.fragment,ce),w(Ie),ke=!0)},o(ce){y(B),y(re.$$.fragment,ce),y(ae.$$.fragment,ce),y(ie.$$.fragment,ce),y(Z.$$.fragment,ce),y(Ie),ke=!1},d(ce){ce&&(m(e),m(ee),m(te),m(me),m(ge),m($e),m(Ee)),U[V].d(),Q(re),Q(ae),fe&&fe.d(),Q(ie),Q(Z),Ie&&Ie.d(ce)}}}function Rl(l){let e,t,a,r;return t=new er({props:{class:"mr-1 w-3 h-3"}}),{c(){e=$("div"),K(t.$$.fragment),a=M(`
                  No prazo`),this.h()},l(n){e=b(n,"DIV",{class:!0});var s=I(e);J(t.$$.fragment,s),a=R(s,`
                  No prazo`),s.forEach(m),this.h()},h(){E(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200")},m(n,s){N(n,e,s),G(t,e,null),d(e,a),r=!0},p:Ve,i(n){r||(w(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&m(e),Q(t)}}}function Ml(l){let e,t,a,r,n,s;return t=new qt({props:{class:"mr-1 w-3 h-3"}}),{c(){e=$("div"),K(t.$$.fragment),a=M(`
                  Vencido h√° `),r=M(l[6]),n=M(" dias"),this.h()},l(o){e=b(o,"DIV",{class:!0});var i=I(e);J(t.$$.fragment,i),a=R(i,`
                  Vencido h√° `),r=R(i,l[6]),n=R(i," dias"),i.forEach(m),this.h()},h(){E(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200")},m(o,i){N(o,e,i),G(t,e,null),d(e,a),d(e,r),d(e,n),s=!0},p(o,i){(!s||i&64)&&oe(r,o[6])},i(o){s||(w(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),Q(t)}}}function jl(l){let e;return{c(){e=M("Motivo da Devolu√ß√£o *")},l(t){e=R(t,"Motivo da Devolu√ß√£o *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function va(l){let e,t=l[5].motivo+"",a;return{c(){e=$("p"),a=M(t),this.h()},l(r){e=b(r,"P",{class:!0});var n=I(e);a=R(n,t),n.forEach(m),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].motivo+"")&&oe(a,t)},d(r){r&&m(e)}}}function Ll(l){let e;return{c(){e=M("Observa√ß√µes (opcional)")},l(t){e=R(t,"Observa√ß√µes (opcional)")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function ba(l){let e,t,a,r,n,s,o="Equipamento com prazo vencido",i,c,f,u,h,g;return a=new qt({props:{class:"text-red-600 dark:text-red-400 mt-0.5 mr-3 w-5 h-5"}}),{c(){e=$("div"),t=$("div"),K(a.$$.fragment),r=F(),n=$("div"),s=$("h4"),s.textContent=o,i=F(),c=$("p"),f=M("Este equipamento est√° "),u=M(l[6]),h=M(" dias em atraso para devolu√ß√£o."),this.h()},l(p){e=b(p,"DIV",{class:!0});var C=I(e);t=b(C,"DIV",{class:!0});var D=I(t);J(a.$$.fragment,D),r=A(D),n=b(D,"DIV",{});var P=I(n);s=b(P,"H4",{class:!0,"data-svelte-h":!0}),De(s)!=="svelte-1l5do2t"&&(s.textContent=o),i=A(P),c=b(P,"P",{class:!0});var z=I(c);f=R(z,"Este equipamento est√° "),u=R(z,l[6]),h=R(z," dias em atraso para devolu√ß√£o."),z.forEach(m),P.forEach(m),D.forEach(m),C.forEach(m),this.h()},h(){E(s,"class","text-sm font-medium text-red-800 dark:text-red-200"),E(c,"class","text-sm text-red-700 dark:text-red-300 mt-1"),E(t,"class","flex items-start"),E(e,"class","mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800")},m(p,C){N(p,e,C),d(e,t),G(a,t,null),d(t,r),d(t,n),d(n,s),d(n,i),d(n,c),d(c,f),d(c,u),d(c,h),g=!0},p(p,C){(!g||C&64)&&oe(u,p[6])},i(p){g||(w(a.$$.fragment,p),g=!0)},o(p){y(a.$$.fragment,p),g=!1},d(p){p&&m(e),Q(a)}}}function Hl(l){let e,t,a=l[2]&&pa(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),N(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&w(a,1)):(a=pa(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(w(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Bl(l,e,t){let a,r,n,{equipamento:s=null}=e,{loading:o=!1}=e,{show:i=!1}=e;const c=Ye();let f="devolu√ß√£o padr√£o",u="",h={};const g=[{value:"devolu√ß√£o padr√£o",name:"Devolu√ß√£o Padr√£o - Fim do per√≠odo de uso"},{value:"danificado",name:"Danificado - EPI com defeito ou quebrado"},{value:"troca",name:"Troca - Substitui√ß√£o por outro equipamento"},{value:"outros",name:"Outros - Outro motivo espec√≠fico"}];function p(){t(3,f="devolu√ß√£o padr√£o"),t(4,u=""),t(5,h={})}function C(){const q={};return f||(q.motivo="Motivo da devolu√ß√£o √© obrigat√≥rio"),t(5,h=q),Object.keys(q).length===0}function D(){C()&&c("confirmar",{motivo:f,observacoes:u.trim()||void 0})}function P(){c("cancelar")}function z(q){ct.call(this,l,q)}function O(q){f=q,t(3,f)}function x(q){u=q,t(4,u)}return l.$$set=q=>{"equipamento"in q&&t(0,s=q.equipamento),"loading"in q&&t(1,o=q.loading),"show"in q&&t(2,i=q.show)},l.$$.update=()=>{l.$$.dirty&5&&i&&s&&p(),l.$$.dirty&10&&t(8,a=f&&!o),l.$$.dirty&1&&t(7,r=(s==null?void 0:s.vencido)||!1),l.$$.dirty&1&&t(6,n=(s==null?void 0:s.diasVencido)||0)},[s,o,i,f,u,h,n,r,a,g,D,P,z,O,x]}class Ul extends Qe{constructor(e){super(),Ge(this,e,Bl,Hl,Je,{equipamento:0,loading:1,show:2})}}function $a(l){let e,t,a,r,n,s,o,i,c;r=new ut({props:{title:l[0]?`Assinatura da Entrega #${l[0].id}`:"Confirmar Assinatura Digital",objectType:"ASSINATURA DIGITAL",iconName:"TabletOutline",primaryAction:{text:l[1]?"Processando...":l[3]?"Assinatura Confirmada":"Foi assinado",icon:l[1]?"":l[3]?"CheckOutline":"CheckCircleOutline",disabled:!l[4]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[5]),r.$on("primaryAction",l[6]),r.$on("secondaryAction",l[5]);let f=l[0]&&Ea(l);return{c(){e=$("div"),t=F(),a=$("div"),K(r.$$.fragment),n=F(),s=$("div"),f&&f.c(),this.h()},l(u){e=b(u,"DIV",{class:!0,role:!0}),I(e).forEach(m),t=A(u),a=b(u,"DIV",{class:!0,role:!0,"aria-modal":!0});var h=I(a);J(r.$$.fragment,h),n=A(h),s=b(h,"DIV",{class:!0,style:!0});var g=I(s);f&&f.l(g),g.forEach(m),h.forEach(m),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),Ft(s,"height","calc(100% - 80px)"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(u,h){N(u,e,h),N(u,t,h),N(u,a,h),G(r,a,null),d(a,n),d(a,s),f&&f.m(s,null),o=!0,i||(c=[He(e,"click",l[5]),He(a,"click",Ct(l[7]))],i=!0)},p(u,h){const g={};h&1&&(g.title=u[0]?`Assinatura da Entrega #${u[0].id}`:"Confirmar Assinatura Digital"),h&26&&(g.primaryAction={text:u[1]?"Processando...":u[3]?"Assinatura Confirmada":"Foi assinado",icon:u[1]?"":u[3]?"CheckOutline":"CheckCircleOutline",disabled:!u[4]}),h&2&&(g.secondaryAction={text:"Cancelar",disabled:u[1]}),r.$set(g),u[0]?f?(f.p(u,h),h&1&&w(f,1)):(f=Ea(u),f.c(),w(f,1),f.m(s,null)):f&&(_e(),y(f,1,1,()=>{f=null}),ve())},i(u){o||(w(r.$$.fragment,u),w(f),o=!0)},o(u){y(r.$$.fragment,u),y(f),o=!1},d(u){u&&(m(e),m(t),m(a)),Q(r),f&&f.d(),i=!1,Dt(c)}}}function Ea(l){let e,t,a,r,n="Entrega",s,o,i,c=l[0].id+"",f,u,h,g,p="Data da Entrega",C,D,P=wt(l[0].dataEntrega)+"",z,O,x,q='<h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-3">EPIs a serem confirmados:</h4> <div class="space-y-2"><div class="flex items-center justify-between py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-sm border border-gray-200 dark:border-gray-600"><div class="flex flex-col"><span class="text-sm text-gray-900 dark:text-white font-medium">Capacete de Seguran√ßa</span> <span class="text-xs text-gray-500 dark:text-gray-400">CA 31469</span></div> <div class="text-right"><span class="text-sm font-medium text-gray-900 dark:text-white">Qtd: 1</span></div></div></div>',L,T,j,W,_,k,v,S,V="Assinatura Digital",B,ee,te="Assine digitalmente atrav√©s do link ou QR Code",re,le,ae,ue,de,me,ge,ie,X,Z="Escaneie o QR Code para assinar",se,be,H,ne,$e,Ee,ke,qe="Assinatura Manual",U,he,Pe="Imprima o documento para assinatura f√≠sica",ye,fe,Ne,Y,Ie,ce="Ap√≥s assinatura f√≠sica, confirme abaixo",we,Te,Re;_=new Er({props:{class:"text-blue-600 dark:text-blue-400 mt-0.5 mr-3 w-5 h-5"}}),ae=new ze({props:{size:"xs",color:"primary",class:"rounded-sm w-full",$$slots:{default:[Ql]},$$scope:{ctx:l}}}),ge=new kr({props:{class:"text-gray-400 w-8 h-8"}}),ne=new wr({props:{class:"text-green-600 dark:text-green-400 mt-0.5 mr-3 w-5 h-5"}}),Ne=new ze({props:{size:"xs",color:"alternative",class:"rounded-sm w-full",$$slots:{default:[Gl]},$$scope:{ctx:l}}});let Ae=l[3]&&ka();return{c(){e=$("div"),t=$("div"),a=$("div"),r=$("p"),r.textContent=n,s=F(),o=$("p"),i=M("#"),f=M(c),u=F(),h=$("div"),g=$("p"),g.textContent=p,C=F(),D=$("p"),z=M(P),O=F(),x=$("div"),x.innerHTML=q,L=F(),T=$("div"),j=$("div"),W=$("div"),K(_.$$.fragment),k=F(),v=$("div"),S=$("h4"),S.textContent=V,B=F(),ee=$("p"),ee.textContent=te,re=F(),le=$("div"),K(ae.$$.fragment),ue=F(),de=$("div"),me=$("div"),K(ge.$$.fragment),ie=F(),X=$("p"),X.textContent=Z,se=F(),be=$("div"),H=$("div"),K(ne.$$.fragment),$e=F(),Ee=$("div"),ke=$("h4"),ke.textContent=qe,U=F(),he=$("p"),he.textContent=Pe,ye=F(),fe=$("div"),K(Ne.$$.fragment),Y=F(),Ie=$("p"),Ie.textContent=ce,we=F(),Ae&&Ae.c(),Te=Ce(),this.h()},l(pe){e=b(pe,"DIV",{class:!0});var Fe=I(e);t=b(Fe,"DIV",{class:!0});var Be=I(t);a=b(Be,"DIV",{});var Ue=I(a);r=b(Ue,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-15muixn"&&(r.textContent=n),s=A(Ue),o=b(Ue,"P",{class:!0});var tt=I(o);i=R(tt,"#"),f=R(tt,c),tt.forEach(m),Ue.forEach(m),u=A(Be),h=b(Be,"DIV",{});var et=I(h);g=b(et,"P",{class:!0,"data-svelte-h":!0}),De(g)!=="svelte-1nce9zk"&&(g.textContent=p),C=A(et),D=b(et,"P",{class:!0});var Xe=I(D);z=R(Xe,P),Xe.forEach(m),et.forEach(m),Be.forEach(m),Fe.forEach(m),O=A(pe),x=b(pe,"DIV",{class:!0,"data-svelte-h":!0}),De(x)!=="svelte-udbm6m"&&(x.innerHTML=q),L=A(pe),T=b(pe,"DIV",{class:!0});var Ke=I(T);j=b(Ke,"DIV",{class:!0});var Nt=I(j);W=b(Nt,"DIV",{class:!0});var dt=I(W);J(_.$$.fragment,dt),k=A(dt),v=b(dt,"DIV",{});var at=I(v);S=b(at,"H4",{class:!0,"data-svelte-h":!0}),De(S)!=="svelte-1yxfyqp"&&(S.textContent=V),B=A(at),ee=b(at,"P",{class:!0,"data-svelte-h":!0}),De(ee)!=="svelte-mz9p7b"&&(ee.textContent=te),re=A(at),le=b(at,"DIV",{class:!0});var rt=I(le);J(ae.$$.fragment,rt),ue=A(rt),de=b(rt,"DIV",{class:!0});var St=I(de);me=b(St,"DIV",{class:!0});var zt=I(me);J(ge.$$.fragment,zt),zt.forEach(m),St.forEach(m),ie=A(rt),X=b(rt,"P",{class:!0,"data-svelte-h":!0}),De(X)!=="svelte-1u6pcnc"&&(X.textContent=Z),rt.forEach(m),at.forEach(m),dt.forEach(m),Nt.forEach(m),se=A(Ke),be=b(Ke,"DIV",{class:!0});var Ot=I(be);H=b(Ot,"DIV",{class:!0});var mt=I(H);J(ne.$$.fragment,mt),$e=A(mt),Ee=b(mt,"DIV",{});var lt=I(Ee);ke=b(lt,"H4",{class:!0,"data-svelte-h":!0}),De(ke)!=="svelte-uzpa23"&&(ke.textContent=qe),U=A(lt),he=b(lt,"P",{class:!0,"data-svelte-h":!0}),De(he)!=="svelte-1vt0diy"&&(he.textContent=Pe),ye=A(lt),fe=b(lt,"DIV",{class:!0});var gt=I(fe);J(Ne.$$.fragment,gt),Y=A(gt),Ie=b(gt,"P",{class:!0,"data-svelte-h":!0}),De(Ie)!=="svelte-kjygt1"&&(Ie.textContent=ce),gt.forEach(m),lt.forEach(m),mt.forEach(m),Ot.forEach(m),Ke.forEach(m),we=A(pe),Ae&&Ae.l(pe),Te=Ce(),this.h()},h(){E(r,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(o,"class","text-sm text-gray-900 dark:text-white font-semibold"),E(g,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(D,"class","text-sm text-gray-900 dark:text-white font-semibold"),E(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),E(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),E(x,"class","mb-6"),E(S,"class","text-sm font-medium text-blue-900 dark:text-blue-100"),E(ee,"class","text-sm text-blue-800 dark:text-blue-200 mt-1"),E(me,"class","w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center"),E(de,"class","flex items-center justify-center p-3 bg-white dark:bg-gray-700 rounded border"),E(X,"class","text-xs text-blue-700 dark:text-blue-300 text-center"),E(le,"class","mt-3 space-y-2"),E(W,"class","flex items-start"),E(j,"class","p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"),E(ke,"class","text-sm font-medium text-green-900 dark:text-green-100"),E(he,"class","text-sm text-green-800 dark:text-green-200 mt-1"),E(Ie,"class","text-xs text-green-700 dark:text-green-300 text-center"),E(fe,"class","mt-3 space-y-2"),E(H,"class","flex items-start"),E(be,"class","p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"),E(T,"class","mb-6 grid grid-cols-1 md:grid-cols-2 gap-4")},m(pe,Fe){N(pe,e,Fe),d(e,t),d(t,a),d(a,r),d(a,s),d(a,o),d(o,i),d(o,f),d(t,u),d(t,h),d(h,g),d(h,C),d(h,D),d(D,z),N(pe,O,Fe),N(pe,x,Fe),N(pe,L,Fe),N(pe,T,Fe),d(T,j),d(j,W),G(_,W,null),d(W,k),d(W,v),d(v,S),d(v,B),d(v,ee),d(v,re),d(v,le),G(ae,le,null),d(le,ue),d(le,de),d(de,me),G(ge,me,null),d(le,ie),d(le,X),d(T,se),d(T,be),d(be,H),G(ne,H,null),d(H,$e),d(H,Ee),d(Ee,ke),d(Ee,U),d(Ee,he),d(Ee,ye),d(Ee,fe),G(Ne,fe,null),d(fe,Y),d(fe,Ie),N(pe,we,Fe),Ae&&Ae.m(pe,Fe),N(pe,Te,Fe),Re=!0},p(pe,Fe){(!Re||Fe&1)&&c!==(c=pe[0].id+"")&&oe(f,c),(!Re||Fe&1)&&P!==(P=wt(pe[0].dataEntrega)+"")&&oe(z,P);const Be={};Fe&2048&&(Be.$$scope={dirty:Fe,ctx:pe}),ae.$set(Be);const Ue={};Fe&2048&&(Ue.$$scope={dirty:Fe,ctx:pe}),Ne.$set(Ue),pe[3]?Ae?Fe&8&&w(Ae,1):(Ae=ka(),Ae.c(),w(Ae,1),Ae.m(Te.parentNode,Te)):Ae&&(_e(),y(Ae,1,1,()=>{Ae=null}),ve())},i(pe){Re||(w(_.$$.fragment,pe),w(ae.$$.fragment,pe),w(ge.$$.fragment,pe),w(ne.$$.fragment,pe),w(Ne.$$.fragment,pe),w(Ae),Re=!0)},o(pe){y(_.$$.fragment,pe),y(ae.$$.fragment,pe),y(ge.$$.fragment,pe),y(ne.$$.fragment,pe),y(Ne.$$.fragment,pe),y(Ae),Re=!1},d(pe){pe&&(m(e),m(O),m(x),m(L),m(T),m(we),m(Te)),Q(_),Q(ae),Q(ge),Q(ne),Q(Ne),Ae&&Ae.d(pe)}}}function Ql(l){let e,t,a;return e=new Dr({props:{class:"mr-2 w-3 h-3"}}),{c(){K(e.$$.fragment),t=M(`
                  Abrir Link de Assinatura`)},l(r){J(e.$$.fragment,r),t=R(r,`
                  Abrir Link de Assinatura`)},m(r,n){G(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),Q(e,r)}}}function Gl(l){let e,t,a;return e=new Cr({props:{class:"mr-2 w-3 h-3"}}),{c(){K(e.$$.fragment),t=M(`
                  Imprimir Documento`)},l(r){J(e.$$.fragment,r),t=R(r,`
                  Imprimir Documento`)},m(r,n){G(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),Q(e,r)}}}function ka(l){let e,t,a,r,n,s='<h4 class="text-sm font-medium text-green-900 dark:text-green-100">Assinatura Confirmada</h4> <p class="text-sm text-green-800 dark:text-green-200">Processando assinatura digital...</p>',o;return a=new er({props:{class:"text-green-600 dark:text-green-400 mr-3 w-5 h-5"}}),{c(){e=$("div"),t=$("div"),K(a.$$.fragment),r=F(),n=$("div"),n.innerHTML=s,this.h()},l(i){e=b(i,"DIV",{class:!0});var c=I(e);t=b(c,"DIV",{class:!0});var f=I(t);J(a.$$.fragment,f),r=A(f),n=b(f,"DIV",{"data-svelte-h":!0}),De(n)!=="svelte-9s52he"&&(n.innerHTML=s),f.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","flex items-center"),E(e,"class","mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800")},m(i,c){N(i,e,c),d(e,t),G(a,t,null),d(t,r),d(t,n),o=!0},i(i){o||(w(a.$$.fragment,i),o=!0)},o(i){y(a.$$.fragment,i),o=!1},d(i){i&&m(e),Q(a)}}}function Jl(l){let e,t,a=l[2]&&$a(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),N(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&w(a,1)):(a=$a(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(w(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Kl(l,e,t){let a,{entrega:r=null}=e,{loading:n=!1}=e,{show:s=!1}=e;const o=Ye();let i=!1;function c(){t(3,i=!1)}function f(){const p=`assinatura_digital_${Date.now()}`;o("confirmar",{assinatura:p})}function u(){o("cancelar")}function h(){t(3,i=!0),setTimeout(()=>{f()},500)}function g(p){ct.call(this,l,p)}return l.$$set=p=>{"entrega"in p&&t(0,r=p.entrega),"loading"in p&&t(1,n=p.loading),"show"in p&&t(2,s=p.show)},l.$$.update=()=>{l.$$.dirty&4&&s&&c(),l.$$.dirty&10&&t(4,a=!n&&!i)},[r,n,s,i,a,u,h,g]}class Wl extends Qe{constructor(e){super(),Ge(this,e,Kl,Jl,Je,{entrega:0,loading:1,show:2})}}function wa(l,e,t){const a=l.slice();return a[74]=e[t],a}function Da(l,e,t){const a=l.slice();return a[65]=e[t],a}function Ca(l,e,t){const a=l.slice();return a[71]=e[t],a}function Ia(l,e,t){const a=l.slice();return a[68]=e[t],a}function ya(l,e,t){const a=l.slice();return a[62]=e[t],a}function Pa(l,e,t){const a=l.slice();return a[59]=e[t],a}function Aa(l,e,t){const a=l.slice();return a[77]=e[t],a}function Xl(l){let e,t="<p>Nenhum dado dispon√≠vel</p>";return{c(){e=$("div"),e.innerHTML=t,this.h()},l(a){e=b(a,"DIV",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-tlgdc6"&&(e.innerHTML=t),this.h()},h(){E(e,"class","text-center py-8 text-gray-500 dark:text-gray-400")},m(a,r){N(a,e,r)},p:Ve,i:Ve,o:Ve,d(a){a&&m(e)}}}function Zl(l){let e,t,a,r,n,s,o,i=Se([{id:"equipamentos",label:"Equipamentos",count:l[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:l[19].length},{id:"entregas",label:"Entregas",count:l[18].length},{id:"historico",label:"Hist√≥rico",count:l[17].length}]),c=[];for(let g=0;g<4;g+=1)c[g]=Fa(Aa(l,i,g));const f=[ln,rn,an,tn],u=[];function h(g,p){return g[21]==="equipamentos"?0:g[21]==="devolucoes"?1:g[21]==="entregas"?2:g[21]==="historico"?3:-1}return~(n=h(l))&&(s=u[n]=f[n](l)),{c(){e=$("div"),t=$("nav");for(let g=0;g<4;g+=1)c[g].c();a=F(),r=$("div"),s&&s.c(),this.h()},l(g){e=b(g,"DIV",{class:!0});var p=I(e);t=b(p,"NAV",{class:!0,"aria-label":!0});var C=I(t);for(let P=0;P<4;P+=1)c[P].l(C);C.forEach(m),p.forEach(m),a=A(g),r=b(g,"DIV",{class:!0});var D=I(r);s&&s.l(D),D.forEach(m),this.h()},h(){E(t,"class","flex space-x-8 px-6"),E(t,"aria-label","Tabs"),E(e,"class","border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"),E(r,"class","p-6")},m(g,p){N(g,e,p),d(e,t);for(let C=0;C<4;C+=1)c[C]&&c[C].m(t,null);N(g,a,p),N(g,r,p),~n&&u[n].m(r,null),o=!0},p(g,p){if(p[0]&4063232){i=Se([{id:"equipamentos",label:"Equipamentos",count:g[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:g[19].length},{id:"entregas",label:"Entregas",count:g[18].length},{id:"historico",label:"Hist√≥rico",count:g[17].length}]);let D;for(D=0;D<4;D+=1){const P=Aa(g,i,D);c[D]?c[D].p(P,p):(c[D]=Fa(P),c[D].c(),c[D].m(t,null))}for(;D<4;D+=1)c[D].d(1)}let C=n;n=h(g),n===C?~n&&u[n].p(g,p):(s&&(_e(),y(u[C],1,1,()=>{u[C]=null}),ve()),~n?(s=u[n],s?s.p(g,p):(s=u[n]=f[n](g),s.c()),w(s,1),s.m(r,null)):s=null)},i(g){o||(w(s),o=!0)},o(g){y(s),o=!1},d(g){g&&(m(e),m(a),m(r)),It(c,g),~n&&u[n].d()}}}function Yl(l){let e,t;return e=new Vt({props:{message:l[7]}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p(a,r){const n={};r[0]&128&&(n.message=a[7]),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function en(l){let e,t,a;return t=new yt({}),{c(){e=$("div"),K(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var n=I(e);J(t.$$.fragment,n),n.forEach(m),this.h()},h(){E(e,"class","flex justify-center items-center py-12")},m(r,n){N(r,e,n),G(t,e,null),a=!0},p:Ve,i(r){a||(w(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),Q(t)}}}function Fa(l){let e,t=l[77].label+"",a,r,n,s=l[77].count+"",o,i,c,f,u;function h(){return l[37](l[77])}return{c(){e=$("button"),a=M(t),r=F(),n=$("span"),o=M(s),i=F(),this.h()},l(g){e=b(g,"BUTTON",{class:!0});var p=I(e);a=R(p,t),r=A(p),n=b(p,"SPAN",{class:!0});var C=I(n);o=R(C,s),C.forEach(m),i=A(p),p.forEach(m),this.h()},h(){E(n,"class","ml-2 py-0.5 px-2 rounded-full text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),E(e,"class",c="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))},m(g,p){N(g,e,p),d(e,a),d(e,r),d(e,n),d(n,o),d(e,i),f||(u=He(e,"click",h),f=!0)},p(g,p){l=g,p[0]&1966080&&t!==(t=l[77].label+"")&&oe(a,t),p[0]&1966080&&s!==(s=l[77].count+"")&&oe(o,s),p[0]&4063232&&c!==(c="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))&&E(e,"class",c)},d(g){g&&m(e),f=!1,u()}}}function tn(l){let e,t,a="Hist√≥rico Completo",r,n,s,o;const i=[on,nn],c=[];function f(u,h){return u[17].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=$("div"),t=$("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=I(e);t=b(h,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-n7dg6t"&&(t.textContent=a),r=A(h),s.l(h),h.forEach(m),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(u,h){N(u,e,h),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,h){let g=n;n=f(u),n===g?c[n].p(u,h):(_e(),y(c[g],1,1,()=>{c[g]=null}),ve(),s=c[n],s?s.p(u,h):(s=c[n]=i[n](u),s.c()),w(s,1),s.m(e,null))},i(u){o||(w(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),c[n].d()}}}function an(l){let e,t,a="Entregas Registradas",r,n,s,o;const i=[cn,sn],c=[];function f(u,h){return u[18].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=$("div"),t=$("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=I(e);t=b(h,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-s07e4q"&&(t.textContent=a),r=A(h),s.l(h),h.forEach(m),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(u,h){N(u,e,h),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,h){let g=n;n=f(u),n===g?c[n].p(u,h):(_e(),y(c[g],1,1,()=>{c[g]=null}),ve(),s=c[n],s?s.p(u,h):(s=c[n]=i[n](u),s.c()),w(s,1),s.m(e,null))},i(u){o||(w(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),c[n].d()}}}function rn(l){let e,t,a="Devolu√ß√µes Efetuadas",r,n,s,o;const i=[$n,bn],c=[];function f(u,h){return u[19].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=$("div"),t=$("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=I(e);t=b(h,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1yyam8h"&&(t.textContent=a),r=A(h),s.l(h),h.forEach(m),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(u,h){N(u,e,h),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,h){let g=n;n=f(u),n===g?c[n].p(u,h):(_e(),y(c[g],1,1,()=>{c[g]=null}),ve(),s=c[n],s?s.p(u,h):(s=c[n]=i[n](u),s.c()),w(s,1),s.m(e,null))},i(u){o||(w(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),c[n].d()}}}function ln(l){let e,t,a='<h3 class="text-xl font-semibold text-gray-900 dark:text-white">Equipamentos com o Colaborador</h3>',r,n,s,o;const i=[Dn,wn],c=[];function f(u,h){return u[20].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=$("div"),t=$("div"),t.innerHTML=a,r=F(),s.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=I(e);t=b(h,"DIV",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1ffw2a3"&&(t.innerHTML=a),r=A(h),s.l(h),h.forEach(m),this.h()},h(){E(t,"class","flex justify-between items-center"),E(e,"class","space-y-4")},m(u,h){N(u,e,h),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,h){let g=n;n=f(u),n===g?c[n].p(u,h):(_e(),y(c[g],1,1,()=>{c[g]=null}),ve(),s=c[n],s?s.p(u,h):(s=c[n]=i[n](u),s.c()),w(s,1),s.m(e,null))},i(u){o||(w(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),c[n].d()}}}function nn(l){let e,t=[],a=new Map,r,n=Se(l[17]);const s=o=>o[74].id;for(let o=0;o<n.length;o+=1){let i=wa(l,n,o),c=s(i);a.set(c,t[o]=Na(c,i))}return{c(){e=$("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var i=I(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(m),this.h()},h(){E(e,"class","space-y-4")},m(o,i){N(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&131072|i[1]&3&&(n=Se(o[17]),_e(),t=ot(t,i,s,1,o,n,a,e,ft,Na,null,wa),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function on(l){let e,t;return e=new At({props:{icon:"ClockOutline",message:"Nenhum evento registrado",description:"N√£o h√° hist√≥rico de atividades para esta ficha"}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Va(l){let e,t=l[74].mudancaStatus+"",a;return{c(){e=$("p"),a=M(t),this.h()},l(r){e=b(r,"P",{class:!0});var n=I(e);a=R(n,t),n.forEach(m),this.h()},h(){E(e,"class","text-sm text-blue-600 dark:text-blue-400 mt-1")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n[0]&131072&&t!==(t=r[74].mudancaStatus+"")&&oe(a,t)},d(r){r&&m(e)}}}function qa(l){let e,t=l[74].detalhes.resumo+"",a;return{c(){e=$("p"),a=M(t),this.h()},l(r){e=b(r,"P",{class:!0});var n=I(e);a=R(n,t),n.forEach(m),this.h()},h(){E(e,"class","text-sm text-gray-600 dark:text-gray-300 mt-1")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n[0]&131072&&t!==(t=r[74].detalhes.resumo+"")&&oe(a,t)},d(r){r&&m(e)}}}function Na(l,e){var ee;let t,a,r,n,s,o,i,c,f,u=e[74].tipoDisplay.label+"",h,g,p,C=e[74].acao+"",D,P,z,O=e[74].dataFormatada+"",x,q,L,T,j,W,_=e[74].responsavel+"",k,v,S;r=new Za({props:{name:e[31](e[74].tipoDisplay.tipo),class:"w-5 h-5"}});let V=e[74].mudancaStatus&&Va(e),B=((ee=e[74].detalhes)==null?void 0:ee.resumo)&&qa(e);return{key:l,first:null,c(){t=$("div"),a=$("div"),K(r.$$.fragment),s=F(),o=$("div"),i=$("div"),c=$("div"),f=$("h4"),h=M(u),g=F(),p=$("p"),D=M(C),P=F(),z=$("span"),x=M(O),q=F(),V&&V.c(),L=F(),B&&B.c(),T=F(),j=$("p"),W=M("Respons√°vel: "),k=M(_),v=F(),this.h()},l(te){t=b(te,"DIV",{class:!0});var re=I(t);a=b(re,"DIV",{class:!0});var le=I(a);J(r.$$.fragment,le),le.forEach(m),s=A(re),o=b(re,"DIV",{class:!0});var ae=I(o);i=b(ae,"DIV",{class:!0});var ue=I(i);c=b(ue,"DIV",{});var de=I(c);f=b(de,"H4",{class:!0});var me=I(f);h=R(me,u),me.forEach(m),g=A(de),p=b(de,"P",{class:!0});var ge=I(p);D=R(ge,C),ge.forEach(m),de.forEach(m),P=A(ue),z=b(ue,"SPAN",{class:!0});var ie=I(z);x=R(ie,O),ie.forEach(m),ue.forEach(m),q=A(ae),V&&V.l(ae),L=A(ae),B&&B.l(ae),T=A(ae),j=b(ae,"P",{class:!0});var X=I(j);W=R(X,"Respons√°vel: "),k=R(X,_),X.forEach(m),ae.forEach(m),v=A(re),re.forEach(m),this.h()},h(){E(a,"class",n=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`),E(f,"class","font-medium text-gray-900 dark:text-white"),E(p,"class","text-sm text-gray-600 dark:text-gray-300"),E(z,"class","text-sm text-gray-500 dark:text-gray-400"),E(i,"class","flex items-center justify-between"),E(j,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),E(o,"class","flex-1 min-w-0"),E(t,"class","flex items-start space-x-4"),this.first=t},m(te,re){N(te,t,re),d(t,a),G(r,a,null),d(t,s),d(t,o),d(o,i),d(i,c),d(c,f),d(f,h),d(c,g),d(c,p),d(p,D),d(i,P),d(i,z),d(z,x),d(o,q),V&&V.m(o,null),d(o,L),B&&B.m(o,null),d(o,T),d(o,j),d(j,W),d(j,k),d(t,v),S=!0},p(te,re){var ae;e=te;const le={};re[0]&131072&&(le.name=e[31](e[74].tipoDisplay.tipo)),r.$set(le),(!S||re[0]&131072&&n!==(n=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`))&&E(a,"class",n),(!S||re[0]&131072)&&u!==(u=e[74].tipoDisplay.label+"")&&oe(h,u),(!S||re[0]&131072)&&C!==(C=e[74].acao+"")&&oe(D,C),(!S||re[0]&131072)&&O!==(O=e[74].dataFormatada+"")&&oe(x,O),e[74].mudancaStatus?V?V.p(e,re):(V=Va(e),V.c(),V.m(o,L)):V&&(V.d(1),V=null),(ae=e[74].detalhes)!=null&&ae.resumo?B?B.p(e,re):(B=qa(e),B.c(),B.m(o,T)):B&&(B.d(1),B=null),(!S||re[0]&131072)&&_!==(_=e[74].responsavel+"")&&oe(k,_)},i(te){S||(w(r.$$.fragment,te),S=!0)},o(te){y(r.$$.fragment,te),S=!1},d(te){te&&m(t),Q(r),V&&V.d(),B&&B.d()}}}function sn(l){let e,t=[],a=new Map,r,n=Se(l[18]);const s=o=>o[65].id;for(let o=0;o<n.length;o+=1){let i=Da(l,n,o),c=s(i);a.set(c,t[o]=Oa(c,i))}return{c(){e=$("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var i=I(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(m),this.h()},h(){E(e,"class","space-y-3")},m(o,i){N(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&1476657152&&(n=Se(o[18]),_e(),t=ot(t,i,s,1,o,n,a,e,ft,Oa,null,Da),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function cn(l){let e,t;return e=new At({props:{icon:"TruckOutline",message:"Nenhuma entrega registrada",description:"N√£o h√° hist√≥rico de entregas para este colaborador"}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function fn(l){let e=l[65].statusDisplay.label+"",t;return{c(){t=M(e)},l(a){t=R(a,e)},m(a,r){N(a,t,r)},p(a,r){r[0]&262144&&e!==(e=a[65].statusDisplay.label+"")&&oe(t,e)},d(a){a&&m(t)}}}function Sa(l,e){let t,a,r=e[71].quantidade+"",n,s,o,i=e[71].nomeEquipamento+"",c,f,u=(e[71].numeroCA||e[71].registroCA)+"",h,g,p;return{key:l,first:null,c(){t=$("div"),a=$("span"),n=M(r),s=F(),o=$("div"),c=M(i),f=M(" (CA: "),h=M(u),g=M(")"),p=F(),this.h()},l(C){t=b(C,"DIV",{class:!0});var D=I(t);a=b(D,"SPAN",{class:!0});var P=I(a);n=R(P,r),P.forEach(m),s=A(D),o=b(D,"DIV",{class:!0});var z=I(o);c=R(z,i),f=R(z," (CA: "),h=R(z,u),g=R(z,")"),z.forEach(m),p=A(D),D.forEach(m),this.h()},h(){E(a,"class","inline-flex items-center justify-center w-5 h-5 text-xs font-medium text-white bg-gray-700 rounded"),E(o,"class","px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono text-gray-800 dark:text-gray-200"),E(t,"class","flex items-center space-x-2"),this.first=t},m(C,D){N(C,t,D),d(t,a),d(a,n),d(t,s),d(t,o),d(o,c),d(o,f),d(o,h),d(o,g),d(t,p)},p(C,D){e=C,D[0]&262144&&r!==(r=e[71].quantidade+"")&&oe(n,r),D[0]&262144&&i!==(i=e[71].nomeEquipamento+"")&&oe(c,i),D[0]&262144&&u!==(u=(e[71].numeroCA||e[71].registroCA)+"")&&oe(h,u)},d(C){C&&m(t)}}}function un(l){let e,t,a,r=l[65].numero+"",n,s,o,i,c=l[65].dataEntrega+"",f,u,h,g,p,C,D,P="Itens:",z,O,x=[],q=new Map,L,T;g=new st({props:{color:Ze.getBadgeColor(l[65].statusDisplay.cor),class:"rounded-sm",$$slots:{default:[fn]},$$scope:{ctx:l}}});let j=Se(l[65].itens);const W=_=>_[71].id;for(let _=0;_<j.length;_+=1){let k=Ca(l,j,_),v=W(k);q.set(v,x[_]=Sa(v,k))}return{c(){e=$("div"),t=$("h4"),a=M("Entrega "),n=M(r),s=F(),o=$("p"),i=M("Data: "),f=M(c),u=F(),h=$("div"),K(g.$$.fragment),p=F(),C=$("div"),D=$("p"),D.textContent=P,z=F(),O=$("div");for(let _=0;_<x.length;_+=1)x[_].c();L=F(),this.h()},l(_){e=b(_,"DIV",{slot:!0});var k=I(e);t=b(k,"H4",{class:!0});var v=I(t);a=R(v,"Entrega "),n=R(v,r),v.forEach(m),s=A(k),o=b(k,"P",{class:!0});var S=I(o);i=R(S,"Data: "),f=R(S,c),S.forEach(m),u=A(k),h=b(k,"DIV",{class:!0});var V=I(h);J(g.$$.fragment,V),V.forEach(m),p=A(k),C=b(k,"DIV",{class:!0});var B=I(C);D=b(B,"P",{class:!0,"data-svelte-h":!0}),De(D)!=="svelte-tel3c5"&&(D.textContent=P),z=A(B),O=b(B,"DIV",{class:!0});var ee=I(O);for(let te=0;te<x.length;te+=1)x[te].l(ee);ee.forEach(m),B.forEach(m),L=A(k),k.forEach(m),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(o,"class","text-sm text-gray-600 dark:text-gray-300"),E(h,"class","mt-2"),E(D,"class","text-sm font-medium text-gray-900 dark:text-white"),E(O,"class","mt-1 space-y-1"),E(C,"class","mt-2"),E(e,"slot","content")},m(_,k){N(_,e,k),d(e,t),d(t,a),d(t,n),d(e,s),d(e,o),d(o,i),d(o,f),d(e,u),d(e,h),G(g,h,null),d(e,p),d(e,C),d(C,D),d(C,z),d(C,O);for(let v=0;v<x.length;v+=1)x[v]&&x[v].m(O,null);d(e,L),T=!0},p(_,k){(!T||k[0]&262144)&&r!==(r=_[65].numero+"")&&oe(n,r),(!T||k[0]&262144)&&c!==(c=_[65].dataEntrega+"")&&oe(f,c);const v={};k[0]&262144&&(v.color=Ze.getBadgeColor(_[65].statusDisplay.cor)),k[0]&262144|k[2]&262144&&(v.$$scope={dirty:k,ctx:_}),g.$set(v),k[0]&262144&&(j=Se(_[65].itens),x=ot(x,k,W,1,_,j,q,O,lr,Sa,null,Ca))},i(_){T||(w(g.$$.fragment,_),T=!0)},o(_){y(g.$$.fragment,_),T=!1},d(_){_&&m(e),Q(g);for(let k=0;k<x.length;k+=1)x[k].d()}}}function dn(l){let e,t;function a(){return l[41](l[65])}return e=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[hn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){K(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,n){G(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function mn(l){let e,t;function a(){return l[40](l[65])}return e=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[pn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){K(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,n){G(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function gn(l){let e,t;function a(){return l[39](l[65])}return e=new ze({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[_n]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){K(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,n){G(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function hn(l){let e;return{c(){e=M("Editar")},l(t){e=R(t,"Editar")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function pn(l){let e;return{c(){e=M("Imprimir")},l(t){e=R(t,"Imprimir")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function _n(l){let e;return{c(){e=M("Assinar")},l(t){e=R(t,"Assinar")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function za(l){let e,t,a,r;const n=[gn,mn,dn],s=[];function o(i,c){return i[68]==="assinar"?0:i[68]==="imprimir"?1:i[68]==="editar"?2:-1}return~(e=o(l))&&(t=s[e]=n[e](l)),{c(){t&&t.c(),a=Ce()},l(i){t&&t.l(i),a=Ce()},m(i,c){~e&&s[e].m(i,c),N(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e===f?~e&&s[e].p(i,c):(t&&(_e(),y(s[f],1,1,()=>{s[f]=null}),ve()),~e?(t=s[e],t?t.p(i,c):(t=s[e]=n[e](i),t.c()),w(t,1),t.m(a.parentNode,a)):t=null)},i(i){r||(w(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),~e&&s[e].d(i)}}}function vn(l){let e,t,a,r=Se(l[65].acoes),n=[];for(let o=0;o<r.length;o+=1)n[o]=za(Ia(l,r,o));const s=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){e=$("div");for(let o=0;o<n.length;o+=1)n[o].c();t=F(),this.h()},l(o){e=b(o,"DIV",{slot:!0,class:!0});var i=I(e);for(let c=0;c<n.length;c+=1)n[c].l(i);t=A(i),i.forEach(m),this.h()},h(){E(e,"slot","actions"),E(e,"class","flex space-x-2")},m(o,i){N(o,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);d(e,t),a=!0},p(o,i){if(i[0]&1476657152){r=Se(o[65].acoes);let c;for(c=0;c<r.length;c+=1){const f=Ia(o,r,c);n[c]?(n[c].p(f,i),w(n[c],1)):(n[c]=za(f),n[c].c(),w(n[c],1),n[c].m(e,t))}for(_e(),c=r.length;c<n.length;c+=1)s(c);ve()}},i(o){if(!a){for(let i=0;i<r.length;i+=1)w(n[i]);a=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)y(n[i]);a=!1},d(o){o&&m(e),It(n,o)}}}function Oa(l,e){let t,a,r;return a=new tr({props:{$$slots:{actions:[vn],content:[un]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ce(),K(a.$$.fragment),this.h()},l(n){t=Ce(),J(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){N(n,t,s),G(a,n,s),r=!0},p(n,s){e=n;const o={};s[0]&262144|s[2]&262144&&(o.$$scope={dirty:s,ctx:e}),a.$set(o)},i(n){r||(w(a.$$.fragment,n),r=!0)},o(n){y(a.$$.fragment,n),r=!1},d(n){n&&m(t),Q(a,n)}}}function bn(l){let e,t=[],a=new Map,r,n=Se(l[19]);const s=o=>o[62].id;for(let o=0;o<n.length;o+=1){let i=ya(l,n,o),c=s(i);a.set(c,t[o]=Ra(c,i))}return{c(){e=$("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var i=I(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(m),this.h()},h(){E(e,"class","space-y-3")},m(o,i){N(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&524288&&(n=Se(o[19]),_e(),t=ot(t,i,s,1,o,n,a,e,ft,Ra,null,ya),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function $n(l){let e,t;return e=new At({props:{icon:"TrashBinOutline",message:"Nenhuma devolu√ß√£o registrada",description:"N√£o h√° hist√≥rico de devolu√ß√µes para este colaborador"}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function En(l){let e=l[62].status==="processada"?"Processada":"Cancelada",t;return{c(){t=M(e)},l(a){t=R(a,e)},m(a,r){N(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].status==="processada"?"Processada":"Cancelada")&&oe(t,e)},d(a){a&&m(t)}}}function xa(l){let e,t,a;return t=new st({props:{color:l[62].condicaoItem==="DANIFICADO"?"yellow":"red",class:"rounded-sm text-xs",$$slots:{default:[kn]},$$scope:{ctx:l}}}),{c(){e=$("div"),K(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var n=I(e);J(t.$$.fragment,n),n.forEach(m),this.h()},h(){E(e,"class","flex items-center space-x-2")},m(r,n){N(r,e,n),G(t,e,null),a=!0},p(r,n){const s={};n[0]&524288&&(s.color=r[62].condicaoItem==="DANIFICADO"?"yellow":"red"),n[0]&524288|n[2]&262144&&(s.$$scope={dirty:n,ctx:r}),t.$set(s)},i(r){a||(w(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),Q(t)}}}function kn(l){let e=l[62].condicaoItem+"",t;return{c(){t=M(e)},l(a){t=R(a,e)},m(a,r){N(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].condicaoItem+"")&&oe(t,e)},d(a){a&&m(t)}}}function Ta(l){let e,t,a,r=l[62].observacoes+"",n,s;return{c(){e=$("div"),t=$("p"),a=M('"'),n=M(r),s=M('"'),this.h()},l(o){e=b(o,"DIV",{class:!0});var i=I(e);t=b(i,"P",{class:!0});var c=I(t);a=R(c,'"'),n=R(c,r),s=R(c,'"'),c.forEach(m),i.forEach(m),this.h()},h(){E(t,"class","text-sm text-gray-700 dark:text-gray-300 italic"),E(e,"class","mt-3 p-2 bg-gray-50 dark:bg-gray-700 rounded border-l-4 border-blue-400")},m(o,i){N(o,e,i),d(e,t),d(t,a),d(t,n),d(t,s)},p(o,i){i[0]&524288&&r!==(r=o[62].observacoes+"")&&oe(n,r)},d(o){o&&m(e)}}}function Ra(l,e){let t,a,r,n,s,o=e[62].nomeEquipamento+"",i,c,f,u,h,g,p,C="CA / Categoria",D,P,z=e[62].numeroCA+"",O,x,q=e[62].categoria+"",L,T,j,W,_="Data Devolu√ß√£o",k,v,S=e[62].dataDevolucao+"",V,B,ee,te,re="Motivo",le,ae,ue=e[62].motivoDisplay+"",de,me,ge,ie,X;f=new st({props:{color:e[62].status==="processada"?"green":"red",class:"rounded-sm",$$slots:{default:[En]},$$scope:{ctx:e}}});let Z=e[62].condicaoItem&&e[62].condicaoItem!=="BOM"&&xa(e),se=e[62].observacoes&&Ta(e);return{key:l,first:null,c(){t=$("div"),a=$("div"),r=$("div"),n=$("div"),s=$("h4"),i=M(o),c=F(),K(f.$$.fragment),u=F(),h=$("div"),g=$("div"),p=$("span"),p.textContent=C,D=F(),P=$("p"),O=M(z),x=M(" ‚Ä¢ "),L=M(q),T=F(),j=$("div"),W=$("span"),W.textContent=_,k=F(),v=$("p"),V=M(S),B=F(),ee=$("div"),te=$("span"),te.textContent=re,le=F(),ae=$("p"),de=M(ue),me=F(),Z&&Z.c(),ge=F(),se&&se.c(),ie=F(),this.h()},l(be){t=b(be,"DIV",{class:!0});var H=I(t);a=b(H,"DIV",{class:!0});var ne=I(a);r=b(ne,"DIV",{class:!0});var $e=I(r);n=b($e,"DIV",{class:!0});var Ee=I(n);s=b(Ee,"H4",{class:!0});var ke=I(s);i=R(ke,o),ke.forEach(m),c=A(Ee),J(f.$$.fragment,Ee),Ee.forEach(m),u=A($e),h=b($e,"DIV",{class:!0});var qe=I(h);g=b(qe,"DIV",{});var U=I(g);p=b(U,"SPAN",{class:!0,"data-svelte-h":!0}),De(p)!=="svelte-1uekrmz"&&(p.textContent=C),D=A(U),P=b(U,"P",{class:!0});var he=I(P);O=R(he,z),x=R(he," ‚Ä¢ "),L=R(he,q),he.forEach(m),U.forEach(m),T=A(qe),j=b(qe,"DIV",{});var Pe=I(j);W=b(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),De(W)!=="svelte-1nqkj5n"&&(W.textContent=_),k=A(Pe),v=b(Pe,"P",{class:!0});var ye=I(v);V=R(ye,S),ye.forEach(m),Pe.forEach(m),qe.forEach(m),B=A($e),ee=b($e,"DIV",{class:!0});var fe=I(ee);te=b(fe,"SPAN",{class:!0,"data-svelte-h":!0}),De(te)!=="svelte-ti63bd"&&(te.textContent=re),le=A(fe),ae=b(fe,"P",{class:!0});var Ne=I(ae);de=R(Ne,ue),Ne.forEach(m),fe.forEach(m),me=A($e),Z&&Z.l($e),ge=A($e),se&&se.l($e),$e.forEach(m),ne.forEach(m),ie=A(H),H.forEach(m),this.h()},h(){E(s,"class","font-semibold text-gray-900 dark:text-white"),E(n,"class","flex items-center justify-between mb-3"),E(p,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(P,"class","text-sm text-gray-900 dark:text-white"),E(W,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(v,"class","text-sm text-gray-900 dark:text-white"),E(h,"class","grid grid-cols-2 gap-4 mb-3"),E(te,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(ae,"class","text-sm text-gray-900 dark:text-white"),E(ee,"class","mb-3"),E(r,"class","flex-1"),E(a,"class","flex justify-between items-start"),E(t,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"),this.first=t},m(be,H){N(be,t,H),d(t,a),d(a,r),d(r,n),d(n,s),d(s,i),d(n,c),G(f,n,null),d(r,u),d(r,h),d(h,g),d(g,p),d(g,D),d(g,P),d(P,O),d(P,x),d(P,L),d(h,T),d(h,j),d(j,W),d(j,k),d(j,v),d(v,V),d(r,B),d(r,ee),d(ee,te),d(ee,le),d(ee,ae),d(ae,de),d(r,me),Z&&Z.m(r,null),d(r,ge),se&&se.m(r,null),d(t,ie),X=!0},p(be,H){e=be,(!X||H[0]&524288)&&o!==(o=e[62].nomeEquipamento+"")&&oe(i,o);const ne={};H[0]&524288&&(ne.color=e[62].status==="processada"?"green":"red"),H[0]&524288|H[2]&262144&&(ne.$$scope={dirty:H,ctx:e}),f.$set(ne),(!X||H[0]&524288)&&z!==(z=e[62].numeroCA+"")&&oe(O,z),(!X||H[0]&524288)&&q!==(q=e[62].categoria+"")&&oe(L,q),(!X||H[0]&524288)&&S!==(S=e[62].dataDevolucao+"")&&oe(V,S),(!X||H[0]&524288)&&ue!==(ue=e[62].motivoDisplay+"")&&oe(de,ue),e[62].condicaoItem&&e[62].condicaoItem!=="BOM"?Z?(Z.p(e,H),H[0]&524288&&w(Z,1)):(Z=xa(e),Z.c(),w(Z,1),Z.m(r,ge)):Z&&(_e(),y(Z,1,1,()=>{Z=null}),ve()),e[62].observacoes?se?se.p(e,H):(se=Ta(e),se.c(),se.m(r,null)):se&&(se.d(1),se=null)},i(be){X||(w(f.$$.fragment,be),w(Z),X=!0)},o(be){y(f.$$.fragment,be),y(Z),X=!1},d(be){be&&m(t),Q(f),Z&&Z.d(),se&&se.d()}}}function wn(l){let e,t=[],a=new Map,r,n=Se(l[20]);const s=o=>o[59].id;for(let o=0;o<n.length;o+=1){let i=Pa(l,n,o),c=s(i);a.set(c,t[o]=ja(c,i))}return{c(){e=$("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var i=I(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(m),this.h()},h(){E(e,"class","space-y-3")},m(o,i){N(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&537919488&&(n=Se(o[20]),_e(),t=ot(t,i,s,1,o,n,a,e,ft,ja,null,Pa),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Dn(l){let e,t;return e=new At({props:{icon:"ClipboardDocumentListOutline",message:"Nenhum equipamento em posse",description:"Este colaborador n√£o possui equipamentos atualmente"}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Cn(l){let e=l[59].statusVencimentoDisplay.texto+"",t;return{c(){t=M(e)},l(a){t=R(a,e)},m(a,r){N(a,t,r)},p(a,r){r[0]&1048576&&e!==(e=a[59].statusVencimentoDisplay.texto+"")&&oe(t,e)},d(a){a&&m(t)}}}function In(l){let e,t,a=l[59].nomeEquipamento+"",r,n,s,o,i=(l[59].numeroCA||l[59].registroCA)+"",c,f,u=l[59].categoria+"",h,g,p,C,D=l[59].dataEntrega+"",P,z,O,x,q,L,T=Ze.formatDaysRemaining(l[59].statusVencimentoDisplay.diasRestantes,l[59].statusVencimentoDisplay.statusDetalhado)+"",j,W,_;return x=new st({props:{color:Ze.getBadgeColor(l[59].statusVencimentoDisplay.cor),class:"rounded-sm",$$slots:{default:[Cn]},$$scope:{ctx:l}}}),{c(){e=$("div"),t=$("h4"),r=M(a),n=F(),s=$("p"),o=M("CA: "),c=M(i),f=M(" ‚Ä¢ "),h=M(u),g=F(),p=$("p"),C=M("Entregue em: "),P=M(D),z=F(),O=$("div"),K(x.$$.fragment),q=F(),L=$("span"),j=M(T),W=F(),this.h()},l(k){e=b(k,"DIV",{slot:!0});var v=I(e);t=b(v,"H4",{class:!0});var S=I(t);r=R(S,a),S.forEach(m),n=A(v),s=b(v,"P",{class:!0});var V=I(s);o=R(V,"CA: "),c=R(V,i),f=R(V," ‚Ä¢ "),h=R(V,u),V.forEach(m),g=A(v),p=b(v,"P",{class:!0});var B=I(p);C=R(B,"Entregue em: "),P=R(B,D),B.forEach(m),z=A(v),O=b(v,"DIV",{class:!0});var ee=I(O);J(x.$$.fragment,ee),q=A(ee),L=b(ee,"SPAN",{class:!0});var te=I(L);j=R(te,T),te.forEach(m),ee.forEach(m),W=A(v),v.forEach(m),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(s,"class","text-sm text-gray-600 dark:text-gray-300"),E(p,"class","text-sm text-gray-600 dark:text-gray-300"),E(L,"class","ml-2 text-sm text-gray-600 dark:text-gray-300"),E(O,"class","mt-2"),E(e,"slot","content")},m(k,v){N(k,e,v),d(e,t),d(t,r),d(e,n),d(e,s),d(s,o),d(s,c),d(s,f),d(s,h),d(e,g),d(e,p),d(p,C),d(p,P),d(e,z),d(e,O),G(x,O,null),d(O,q),d(O,L),d(L,j),d(e,W),_=!0},p(k,v){(!_||v[0]&1048576)&&a!==(a=k[59].nomeEquipamento+"")&&oe(r,a),(!_||v[0]&1048576)&&i!==(i=(k[59].numeroCA||k[59].registroCA)+"")&&oe(c,i),(!_||v[0]&1048576)&&u!==(u=k[59].categoria+"")&&oe(h,u),(!_||v[0]&1048576)&&D!==(D=k[59].dataEntrega+"")&&oe(P,D);const S={};v[0]&1048576&&(S.color=Ze.getBadgeColor(k[59].statusVencimentoDisplay.cor)),v[0]&1048576|v[2]&262144&&(S.$$scope={dirty:v,ctx:k}),x.$set(S),(!_||v[0]&1048576)&&T!==(T=Ze.formatDaysRemaining(k[59].statusVencimentoDisplay.diasRestantes,k[59].statusVencimentoDisplay.statusDetalhado)+"")&&oe(j,T)},i(k){_||(w(x.$$.fragment,k),_=!0)},o(k){y(x.$$.fragment,k),_=!1},d(k){k&&m(e),Q(x)}}}function Ma(l){let e,t;function a(){return l[38](l[59])}return e=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[yn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){K(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,n){G(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function yn(l){let e;return{c(){e=M("Devolver")},l(t){e=R(t,"Devolver")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Pn(l){let e,t,a,r=l[59].podeDevolver&&Ma(l);return{c(){e=$("div"),r&&r.c(),t=F(),this.h()},l(n){e=b(n,"DIV",{slot:!0});var s=I(e);r&&r.l(s),t=A(s),s.forEach(m),this.h()},h(){E(e,"slot","actions")},m(n,s){N(n,e,s),r&&r.m(e,null),d(e,t),a=!0},p(n,s){n[59].podeDevolver?r?(r.p(n,s),s[0]&1048576&&w(r,1)):(r=Ma(n),r.c(),w(r,1),r.m(e,t)):r&&(_e(),y(r,1,1,()=>{r=null}),ve())},i(n){a||(w(r),a=!0)},o(n){y(r),a=!1},d(n){n&&m(e),r&&r.d()}}}function ja(l,e){let t,a,r;return a=new tr({props:{$$slots:{actions:[Pn],content:[In]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ce(),K(a.$$.fragment),this.h()},l(n){t=Ce(),J(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){N(n,t,s),G(a,n,s),r=!0},p(n,s){e=n;const o={};s[0]&1048576|s[2]&262144&&(o.$$scope={dirty:s,ctx:e}),a.$set(o)},i(n){r||(w(a.$$.fragment,n),r=!0)},o(n){y(a.$$.fragment,n),r=!1},d(n){n&&m(t),Q(a,n)}}}function An(l){var f,u,h;let e,t,a,r,n,s;e=new ut({props:{title:((f=l[15])==null?void 0:f.nome)||"Nome n√£o dispon√≠vel",objectType:"FICHA EPI",iconName:"UserOutline",status:(h=(u=l[16])==null?void 0:u.ficha)==null?void 0:h.status,statusType:"ficha",additionalInfo:l[23],primaryAction:{text:"Nova Entrega",icon:"PlusOutline"}}}),e.$on("close",l[25]),e.$on("primaryAction",l[26]);const o=[en,Yl,Zl,Xl],i=[];function c(g,p){return g[6]?0:g[7]?1:g[16]?2:3}return a=c(l),r=i[a]=o[a](l),{c(){K(e.$$.fragment),t=F(),r.c(),n=Ce()},l(g){J(e.$$.fragment,g),t=A(g),r.l(g),n=Ce()},m(g,p){G(e,g,p),N(g,t,p),i[a].m(g,p),N(g,n,p),s=!0},p(g,p){var P,z,O;const C={};p[0]&32768&&(C.title=((P=g[15])==null?void 0:P.nome)||"Nome n√£o dispon√≠vel"),p[0]&65536&&(C.status=(O=(z=g[16])==null?void 0:z.ficha)==null?void 0:O.status),p[0]&8388608&&(C.additionalInfo=g[23]),e.$set(C);let D=a;a=c(g),a===D?i[a].p(g,p):(_e(),y(i[D],1,1,()=>{i[D]=null}),ve(),r=i[a],r?r.p(g,p):(r=i[a]=o[a](g),r.c()),w(r,1),r.m(n.parentNode,n))},i(g){s||(w(e.$$.fragment,g),w(r),s=!0)},o(g){y(e.$$.fragment,g),y(r),s=!1},d(g){g&&(m(t),m(n)),Q(e,g),i[a].d(g)}}}function Fn(l){let e,t,a,r,n,s,o,i,c,f,u,h,g,p,C;function D(_){l[42](_)}let P={placement:"right",width:"w-full max-w-[940px]",backdrop:!l[22],activateClickOutside:!l[22],bgOpacity:"bg-black/50",position:"fixed",id:"ficha-detail-drawer",class:"drawer-ficha",$$slots:{default:[An]},$$scope:{ctx:l}};l[14]!==void 0&&(P.hidden=l[14]),e=new vr({props:P}),Me.push(()=>je(e,"hidden",D));function z(_){l[43](_)}let O={episDisponiveis:l[4],usuarios:l[5],loading:l[8]};l[0]!==void 0&&(O.show=l[0]),r=new Cl({props:O}),Me.push(()=>je(r,"show",z)),r.$on("salvar",l[44]),r.$on("cancelar",l[45]);function x(_){l[46](_)}let q={episDisponiveis:l[4],entrega:l[11],loading:l[8]};l[1]!==void 0&&(q.show=l[1]),o=new Tl({props:q}),Me.push(()=>je(o,"show",x)),o.$on("salvar",l[47]),o.$on("cancelar",l[48]);function L(_){l[49](_)}let T={equipamento:l[12],loading:l[10]};l[2]!==void 0&&(T.show=l[2]),f=new Ul({props:T}),Me.push(()=>je(f,"show",L)),f.$on("confirmar",l[50]),f.$on("cancelar",l[51]);function j(_){l[52](_)}let W={entrega:l[13],loading:l[9]};return l[3]!==void 0&&(W.show=l[3]),g=new Wl({props:W}),Me.push(()=>je(g,"show",j)),g.$on("confirmar",l[53]),g.$on("cancelar",l[54]),{c(){K(e.$$.fragment),a=F(),K(r.$$.fragment),s=F(),K(o.$$.fragment),c=F(),K(f.$$.fragment),h=F(),K(g.$$.fragment)},l(_){J(e.$$.fragment,_),a=A(_),J(r.$$.fragment,_),s=A(_),J(o.$$.fragment,_),c=A(_),J(f.$$.fragment,_),h=A(_),J(g.$$.fragment,_)},m(_,k){G(e,_,k),N(_,a,k),G(r,_,k),N(_,s,k),G(o,_,k),N(_,c,k),G(f,_,k),N(_,h,k),G(g,_,k),C=!0},p(_,k){const v={};k[0]&4194304&&(v.backdrop=!_[22]),k[0]&4194304&&(v.activateClickOutside=!_[22]),k[0]&12550336|k[2]&262144&&(v.$$scope={dirty:k,ctx:_}),!t&&k[0]&16384&&(t=!0,v.hidden=_[14],Le(()=>t=!1)),e.$set(v);const S={};k[0]&16&&(S.episDisponiveis=_[4]),k[0]&32&&(S.usuarios=_[5]),k[0]&256&&(S.loading=_[8]),!n&&k[0]&1&&(n=!0,S.show=_[0],Le(()=>n=!1)),r.$set(S);const V={};k[0]&16&&(V.episDisponiveis=_[4]),k[0]&2048&&(V.entrega=_[11]),k[0]&256&&(V.loading=_[8]),!i&&k[0]&2&&(i=!0,V.show=_[1],Le(()=>i=!1)),o.$set(V);const B={};k[0]&4096&&(B.equipamento=_[12]),k[0]&1024&&(B.loading=_[10]),!u&&k[0]&4&&(u=!0,B.show=_[2],Le(()=>u=!1)),f.$set(B);const ee={};k[0]&8192&&(ee.entrega=_[13]),k[0]&512&&(ee.loading=_[9]),!p&&k[0]&8&&(p=!0,ee.show=_[3],Le(()=>p=!1)),g.$set(ee)},i(_){C||(w(e.$$.fragment,_),w(r.$$.fragment,_),w(o.$$.fragment,_),w(f.$$.fragment,_),w(g.$$.fragment,_),C=!0)},o(_){y(e.$$.fragment,_),y(r.$$.fragment,_),y(o.$$.fragment,_),y(f.$$.fragment,_),y(g.$$.fragment,_),C=!1},d(_){_&&(m(a),m(s),m(c),m(h)),Q(e,_),Q(r,_),Q(o,_),Q(f,_),Q(g,_)}}}function Vn(l,e,t){let a,r,n,s,o,i,c,f,{fichaCompleteData:u=null}=e,{episDisponiveis:h=[]}=e,{usuarios:g=[]}=e,{loading:p=!1}=e,{error:C=null}=e,{entregaLoading:D=!1}=e,{assinaturaLoading:P=!1}=e,{devolucaoLoading:z=!1}=e,{showNovaEntregaDrawer:O=!1}=e,{showEditarEntregaDrawer:x=!1}=e,{showDevolucaoModal:q=!1}=e,{showAssinaturaModal:L=!1}=e,{entregaEdicao:T=null}=e,{equipamentoDevolucao:j=null}=e,{entregaAssinatura:W=null}=e,{open:_=!1}=e,k=!_,v=_,S="equipamentos";const V=Ye();function B(){V("close")}let ee=k;function te(){V("novaEntrega")}function re(Y){V("editarEntrega",{entrega:Y})}function le(Y){V("assinarEntrega",{entrega:Y})}function ae(Y){V("devolverEquipamento",{equipamento:Y})}function ue(Y){V("imprimirEntrega",{entrega:Y})}function de(Y){return Ze.getEventIcon(Y)}function me(Y){return Ze.getColorClasses(Y)}const ge=Y=>t(21,S=Y.id),ie=Y=>ae(Y),X=Y=>le(Y),Z=Y=>ue(Y),se=Y=>re(Y);function be(Y){k=Y,t(14,k),t(34,_),t(35,v)}function H(Y){O=Y,t(0,O)}const ne=Y=>V("salvarNovaEntrega",Y.detail),$e=()=>V("cancelarNovaEntrega");function Ee(Y){x=Y,t(1,x)}const ke=Y=>V("salvarEdicaoEntrega",Y.detail),qe=()=>V("cancelarEdicaoEntrega");function U(Y){q=Y,t(2,q)}const he=Y=>V("confirmarDevolucao",Y.detail),Pe=()=>V("cancelarDevolucao");function ye(Y){L=Y,t(3,L)}const fe=Y=>V("confirmarAssinatura",Y.detail),Ne=()=>V("cancelarAssinatura");return l.$$set=Y=>{"fichaCompleteData"in Y&&t(33,u=Y.fichaCompleteData),"episDisponiveis"in Y&&t(4,h=Y.episDisponiveis),"usuarios"in Y&&t(5,g=Y.usuarios),"loading"in Y&&t(6,p=Y.loading),"error"in Y&&t(7,C=Y.error),"entregaLoading"in Y&&t(8,D=Y.entregaLoading),"assinaturaLoading"in Y&&t(9,P=Y.assinaturaLoading),"devolucaoLoading"in Y&&t(10,z=Y.devolucaoLoading),"showNovaEntregaDrawer"in Y&&t(0,O=Y.showNovaEntregaDrawer),"showEditarEntregaDrawer"in Y&&t(1,x=Y.showEditarEntregaDrawer),"showDevolucaoModal"in Y&&t(2,q=Y.showDevolucaoModal),"showAssinaturaModal"in Y&&t(3,L=Y.showAssinaturaModal),"entregaEdicao"in Y&&t(11,T=Y.entregaEdicao),"equipamentoDevolucao"in Y&&t(12,j=Y.equipamentoDevolucao),"entregaAssinatura"in Y&&t(13,W=Y.entregaAssinatura),"open"in Y&&t(34,_=Y.open)},l.$$.update=()=>{var Y,Ie;l.$$.dirty[0]&16384|l.$$.dirty[1]&24&&_!==v&&(console.log("üîÑ Sincronizando drawer (open changed):",{open:_,hidden:k,lastOpen:v}),t(14,k=!_),t(35,v=_)),l.$$.dirty[0]&16448|l.$$.dirty[1]&12&&_&&console.log("üéØ FichaDetailPresenter: Drawer foi aberto, carregando dados...",{open:_,hidden:k,fichaCompleteData:!!u,loading:p}),l.$$.dirty[1]&4&&t(16,a=u==null?void 0:u.data),l.$$.dirty[0]&65536&&t(15,r=(Y=a==null?void 0:a.ficha)==null?void 0:Y.colaborador),l.$$.dirty[0]&65536&&t(20,n=(a==null?void 0:a.equipamentosEmPosse)||[]),l.$$.dirty[0]&65536&&t(19,s=(a==null?void 0:a.devolucoes)||[]),l.$$.dirty[0]&65536&&t(18,o=(a==null?void 0:a.entregas)||[]),l.$$.dirty[0]&65536&&t(17,i=(a==null?void 0:a.historico)||[]),l.$$.dirty[0]&65536&&(a==null||a.estatisticas),l.$$.dirty[0]&2031616&&a&&(console.log("üéØ FichaDetailPresenter - dados reativos atualizados:"),console.log("  - Equipamentos em posse:",(n==null?void 0:n.length)||0),console.log("  - Devolu√ß√µes:",(s==null?void 0:s.length)||0),console.log("  - Entregas:",(o==null?void 0:o.length)||0),console.log("  - Hist√≥rico:",(i==null?void 0:i.length)||0)),l.$$.dirty[0]&65536&&(Ie=a==null?void 0:a.ficha)!=null&&Ie.statusDisplay&&Ze.getStatusConfig(a.ficha.statusDisplay.label,a.ficha.statusDisplay.cor),l.$$.dirty[0]&32768&&t(23,c=r?[r.cpfDisplay||r.cpf||"CPF n√£o dispon√≠vel",`${r.cargo||"Cargo n√£o informado"} ‚Ä¢ ${r.empresa||"Empresa n√£o informada"}`]:[]),l.$$.dirty[0]&16384|l.$$.dirty[1]&40&&k!==ee&&(console.log("üîÑ Hidden changed:",{hidden:k,lastHidden:ee,open:_}),k&&_&&(console.log("üéØ Drawer fechado externamente, notificando Container"),V("close")),t(36,ee=k)),l.$$.dirty[0]&15&&t(22,f=O||x||q||L)},[O,x,q,L,h,g,p,C,D,P,z,T,j,W,k,r,a,i,o,s,n,S,f,c,V,B,te,re,le,ae,ue,de,me,u,_,v,ee,ge,ie,X,Z,se,be,H,ne,$e,Ee,ke,qe,U,he,Pe,ye,fe,Ne]}class qn extends Qe{constructor(e){super(),Ge(this,e,Vn,Fn,Je,{fichaCompleteData:33,episDisponiveis:4,usuarios:5,loading:6,error:7,entregaLoading:8,assinaturaLoading:9,devolucaoLoading:10,showNovaEntregaDrawer:0,showEditarEntregaDrawer:1,showDevolucaoModal:2,showAssinaturaModal:3,entregaEdicao:11,equipamentoDevolucao:12,entregaAssinatura:13,open:34},null,[-1,-1,-1])}}function Nn(l){let e,t;const a=[l[0]];let r={};for(let n=0;n<a.length;n+=1)r=rr(r,a[n]);return e=new qn({props:r}),e.$on("close",l[1]),e.$on("novaEntrega",l[2]),e.$on("salvarNovaEntrega",l[3]),e.$on("cancelarNovaEntrega",l[4]),e.$on("editarEntrega",l[5]),e.$on("salvarEdicaoEntrega",l[6]),e.$on("cancelarEdicaoEntrega",l[7]),e.$on("assinarEntrega",l[8]),e.$on("confirmarAssinatura",l[9]),e.$on("cancelarAssinatura",l[10]),e.$on("devolverEquipamento",l[11]),e.$on("confirmarDevolucao",l[12]),e.$on("cancelarDevolucao",l[13]),e.$on("cancelarEntrega",l[14]),e.$on("imprimirEntrega",l[15]),{c(){K(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,s){G(e,n,s),t=!0},p(n,s){const o=s[0]&1?nr(a,[or(n[0])]):{};e.$set(o)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Sn(l,e,t){let a,r;Ga(l,ol,X=>t(34,r=X));let{open:n=!1}=e,{fichaId:s=null}=e;const o=Ye();let i=null,c=[],f=[],u=!0,h=null,g=!1,p=!1,C=!1,D=!1,P=!1,z=!1,O=!1,x=null,q=null,L=null,T=null;Ja(()=>{console.log("üöÄ FichaDetailContainer: Inicializando..."),Promise.all([W(),_()])});async function j(){var X,Z,se,be,H,ne,$e,Ee;if(s){t(21,u=!0),t(22,h=null),t(33,T=s);try{console.log("üìã FichaDetailContainer: Carregando ficha completa:",s),t(18,i=await vt.getFichaComplete(s)),console.log("‚úÖ Dados da ficha carregados"),console.log("üîç Equipamentos em posse:",((Z=(X=i==null?void 0:i.data)==null?void 0:X.equipamentosEmPosse)==null?void 0:Z.length)||0),console.log("üîÑ Devolu√ß√µes:",((be=(se=i==null?void 0:i.data)==null?void 0:se.devolucoes)==null?void 0:be.length)||0),console.log("üöö Entregas:",((ne=(H=i==null?void 0:i.data)==null?void 0:H.entregas)==null?void 0:ne.length)||0),console.log("üìù Hist√≥rico:",((Ee=($e=i==null?void 0:i.data)==null?void 0:$e.historico)==null?void 0:Ee.length)||0)}catch(ke){console.error("‚ùå Erro ao carregar ficha:",ke),t(22,h=ke instanceof Error?ke.message:"Erro desconhecido"),Oe.error("Erro ao carregar ficha","N√£o foi poss√≠vel carregar os dados da ficha")}finally{t(21,u=!1)}}}async function W(){try{console.log("üöÄ FichaDetailContainer: Carregando EPIs dispon√≠veis..."),t(19,c=await vt.getEPIsDisponiveis()),console.log("üì¶ EPIs dispon√≠veis carregados:",c.length),console.log("üì¶ Estrutura dos EPIs:",c.slice(0,2));const X=c.filter(Z=>Z.disponivel&&Z.quantidadeDisponivel>0);console.log("üéØ EPIs com estoque dispon√≠vel:",X.length),X.length===0&&(console.warn("‚ö†Ô∏è ATEN√á√ÉO: Nenhum EPI com estoque dispon√≠vel encontrado!"),console.log("üîç EPIs sem estoque:",c.map(Z=>({nome:Z.nomeEquipamento,quantidade:Z.quantidadeDisponivel,disponivel:Z.disponivel}))))}catch(X){throw console.error("‚ùå Erro ao carregar EPIs dispon√≠veis:",X),X}}async function _(){try{console.log("üë§ FichaDetailContainer: Carregando usu√°rios..."),t(20,f=await vt.getUsuarios()),console.log("üë• Usu√°rios carregados:",f==null?void 0:f.length),console.log("üë• Estrutura dos usu√°rios:",f==null?void 0:f.slice(0,2))}catch(X){throw console.error("‚ùå Erro ao carregar usu√°rios:",X),X}}function k(){t(16,n=!1),t(33,T=null),t(18,i=null),t(22,h=null),t(23,g=!1),t(24,p=!1),t(25,C=!1),t(26,D=!1),o("close"),console.log("‚ùå Drawer fechado")}async function v(){console.log("‚ûï Abrindo formul√°rio de nova entrega"),console.log("üì¶ Estado atual dos EPIs:",c.length,"EPIs carregados"),c.length===0&&(console.log("üîÑ EPIs n√£o carregados, carregando agora..."),await W(),console.log("üì¶ Ap√≥s recarregar:",c.length,"EPIs dispon√≠veis")),console.log("üì¶ EPIs que ser√£o passados para o drawer:",c),t(23,g=!0)}async function S(X){var Z;if(s){t(27,P=!0);try{if(console.log("üíæ FichaDetailContainer: Criando nova entrega..."),console.log("üîç Respons√°vel ID:",X.detail.usuarioResponsavelId),console.log("üîç Quantidade de itens:",((Z=X.detail.itens)==null?void 0:Z.length)||0),!X.detail.usuarioResponsavelId)throw new Error("usuarioResponsavelId √© obrigat√≥rio");if(!X.detail.itens||X.detail.itens.length===0)throw new Error("Pelo menos um item deve ser selecionado");const se={fichaEpiId:s,responsavelId:X.detail.usuarioResponsavelId,itens:X.detail.itens.map(H=>{const ne=c.find($e=>$e.episDisponivelId===H.episDisponivelId);return{estoqueItemId:(ne==null?void 0:ne.estoqueItemId)||H.episDisponivelId,quantidade:H.quantidade}}),observacoes:X.detail.observacoes||""};console.log("üìã Payload da entrega:",se);const be=await _t.createDelivery(se);t(23,g=!1),await j(),Oe.success("Entrega criada",`Entrega ${be.data.entregaId} criada com ${be.data.totalItens} itens`),o("fichaUpdated",{fichaId:s})}catch(se){console.error("‚ùå Erro ao salvar nova entrega:",se);let be="Erro ao criar entrega",H="Erro desconhecido";if(se instanceof Error)switch(se.name){case"EstoqueItemNotFoundError":be="Item de estoque n√£o encontrado",H="Os EPIs selecionados n√£o possuem estoque dispon√≠vel no almoxarifado. Verifique se h√° itens em estoque antes de criar a entrega.";break;case"ValidationError":be="Dados de entrega inv√°lidos",H="Verifique se todos os campos obrigat√≥rios est√£o preenchidos e tente novamente.";break;default:se.message.includes("Cannot GET")||se.message.includes("404")?(be="Servi√ßo indispon√≠vel",H="O servi√ßo de entregas est√° temporariamente indispon√≠vel. Alguns endpoints do backend n√£o est√£o implementados. Tente novamente mais tarde."):se.message.includes("Network error")||se.message.includes("timeout")?(be="Erro de conex√£o",H="Problema de conex√£o com o servidor. Verifique sua internet e tente novamente."):se.message.includes("Validation error")?(be="Dados inv√°lidos",H="Os dados fornecidos s√£o inv√°lidos. Verifique os campos e tente novamente. Detalhes: "+se.message):H=se.message;break}Oe.error(be,H),console.log("‚ÑπÔ∏è Drawer mantido aberto para corre√ß√£o dos dados")}finally{t(27,P=!1)}}}function V(){t(23,g=!1),console.log("‚ùå Nova entrega cancelada")}function B(X){t(30,x=X.detail.entrega),t(24,p=!0),console.log("‚úèÔ∏è Editando entrega:",x.id)}async function ee(X){if(x){t(27,P=!0);try{console.log("üíæ FichaDetailContainer: Editando entrega:",X.detail);const Z={responsavelId:X.detail.responsavelId,itens:X.detail.itens.map(se=>({estoqueItemId:se.estoqueItemId,quantidade:se.quantidade})),observacoes:X.detail.observacoes};await _t.updateDelivery(x.id,Z),t(24,p=!1),t(30,x=null),await j(),Oe.success("Entrega atualizada","Entrega foi atualizada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Z){console.error("‚ùå Erro ao editar entrega:",Z),Oe.error("Erro ao editar","N√£o foi poss√≠vel atualizar a entrega")}finally{t(27,P=!1)}}}function te(){t(24,p=!1),t(30,x=null),console.log("‚ùå Edi√ß√£o de entrega cancelada")}function re(X){t(32,L=X.detail.entrega),t(26,D=!0),console.log("‚úçÔ∏è Iniciando assinatura da entrega:",L.id)}async function le(X){if(L){t(28,z=!0);try{console.log("‚úçÔ∏è FichaDetailContainer: Confirmando assinatura:",X.detail);const Z={assinatura:X.detail.assinatura};await _t.confirmSignature(L.id,Z),t(26,D=!1),t(32,L=null),await j(),Oe.success("Assinatura registrada","Entrega foi assinada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Z){console.error("‚ùå Erro ao processar assinatura:",Z),Oe.error("Erro na assinatura","N√£o foi poss√≠vel registrar a assinatura")}finally{t(28,z=!1)}}}function ae(){t(26,D=!1),t(32,L=null),console.log("‚ùå Assinatura cancelada")}function ue(X){t(31,q=X.detail.equipamento),t(25,C=!0),console.log("üîÑ Iniciando devolu√ß√£o:",q.id)}async function de(X){if(q){t(29,O=!0);try{console.log("üîÑ FichaDetailContainer: Processando devolu√ß√£o:",X.detail);const Z={devolucoes:[{equipamentoId:q.id,motivo:X.detail.motivo,observacoes:X.detail.observacoes||"Devolu√ß√£o via interface da ficha"}]},se=await Ar.processReturns(Z);if(se.data.erros.length>0)throw new Error(`Erro na devolu√ß√£o: ${se.data.erros[0].erro}`);t(25,C=!1),t(31,q=null),await j(),Oe.success("Devolu√ß√£o registrada","Equipamento foi devolvido com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Z){console.error("‚ùå Erro ao processar devolu√ß√£o:",Z),Oe.error("Erro na devolu√ß√£o","N√£o foi poss√≠vel registrar a devolu√ß√£o")}finally{t(29,O=!1)}}}function me(){t(25,C=!1),t(31,q=null),console.log("‚ùå Devolu√ß√£o cancelada")}async function ge(X){try{console.log("‚ùå FichaDetailContainer: Cancelando entrega:",X.detail);const Z={motivo:X.detail.motivo};await _t.cancelDelivery(X.detail.entrega.id,Z),await j(),Oe.success("Entrega cancelada","Entrega foi cancelada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Z){console.error("‚ùå Erro ao cancelar entrega:",Z),Oe.error("Erro ao cancelar","N√£o foi poss√≠vel cancelar a entrega")}}function ie(X){console.log("üñ®Ô∏è Imprimindo entrega:",X.detail.entrega.id),Oe.info("Fun√ß√£o em desenvolvimento","Impress√£o ser√° implementada em breve")}return l.$$set=X=>{"open"in X&&t(16,n=X.open),"fichaId"in X&&t(17,s=X.fichaId)},l.$$.update=()=>{if(l.$$.dirty[0]&196608&&n&&s&&console.log("üéØ FichaDetailContainer: Estado open mudou para true, fichaId:",s),l.$$.dirty[0]&393216|l.$$.dirty[1]&8&&s&&r.has(s)){const X=r.get(s);X&&i!==X&&(t(18,i=X),console.log("üîÑ Dados completos atualizados via store reativo:",s))}l.$$.dirty[0]&196608|l.$$.dirty[1]&4&&n&&s&&s!==T&&j(),l.$$.dirty[0]&2147287040|l.$$.dirty[1]&3&&t(0,a={fichaCompleteData:i,episDisponiveis:c,usuarios:f,loading:u,error:h,entregaLoading:P,assinaturaLoading:z,devolucaoLoading:O,showNovaEntregaDrawer:g,showEditarEntregaDrawer:p,showDevolucaoModal:C,showAssinaturaModal:D,entregaEdicao:x,equipamentoDevolucao:q,entregaAssinatura:L,open:n})},[a,k,v,S,V,B,ee,te,re,le,ae,ue,de,me,ge,ie,n,s,i,c,f,u,h,g,p,C,D,P,z,O,x,q,L,T,r]}class zn extends Qe{constructor(e){super(),Ge(this,e,Sn,Nn,Je,{open:16,fichaId:17},null,[-1,-1])}}function La(l){let e,t;return e=new Vt({props:{error:l[2],onRetry:l[14]}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p(a,r){const n={};r&4&&(n.error=a[2]),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function On(l){let e,t;return e=new nt({props:{options:l[3],value:l[6],placeholder:"Selecione uma contratada...",disabled:l[1]}}),e.$on("change",l[11]),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,r){G(e,a,r),t=!0},p(a,r){const n={};r&8&&(n.options=a[3]),r&64&&(n.value=a[6]),r&2&&(n.disabled=a[1]),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function xn(l){let e,t,a,r,n="Carregando...",s;return t=new yt({props:{size:"sm"}}),{c(){e=$("div"),K(t.$$.fragment),a=F(),r=$("span"),r.textContent=n,this.h()},l(o){e=b(o,"DIV",{class:!0});var i=I(e);J(t.$$.fragment,i),a=A(i),r=b(i,"SPAN",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1v5o0hb"&&(r.textContent=n),i.forEach(m),this.h()},h(){E(r,"class","ml-2 text-sm text-gray-600"),E(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(o,i){N(o,e,i),G(t,e,null),d(e,a),d(e,r),s=!0},p:Ve,i(o){s||(w(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),Q(t)}}}function Tn(l){let e,t,a,r;e=new nt({props:{options:l[9],value:l[7],placeholder:l[6]?"Selecione um colaborador...":"Primeiro selecione uma contratada",disabled:l[1]||!l[6]}}),e.$on("change",l[12]);let n=l[9].length===0&&l[6]&&Ha();return{c(){K(e.$$.fragment),t=F(),n&&n.c(),a=Ce()},l(s){J(e.$$.fragment,s),t=A(s),n&&n.l(s),a=Ce()},m(s,o){G(e,s,o),N(s,t,o),n&&n.m(s,o),N(s,a,o),r=!0},p(s,o){const i={};o&512&&(i.options=s[9]),o&128&&(i.value=s[7]),o&64&&(i.placeholder=s[6]?"Selecione um colaborador...":"Primeiro selecione uma contratada"),o&66&&(i.disabled=s[1]||!s[6]),e.$set(i),s[9].length===0&&s[6]?n||(n=Ha(),n.c(),n.m(a.parentNode,a)):n&&(n.d(1),n=null)},i(s){r||(w(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){s&&(m(t),m(a)),Q(e,s),n&&n.d(s)}}}function Rn(l){let e,t,a,r,n="Carregando...",s;return t=new yt({props:{size:"sm"}}),{c(){e=$("div"),K(t.$$.fragment),a=F(),r=$("span"),r.textContent=n,this.h()},l(o){e=b(o,"DIV",{class:!0});var i=I(e);J(t.$$.fragment,i),a=A(i),r=b(i,"SPAN",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1v5o0hb"&&(r.textContent=n),i.forEach(m),this.h()},h(){E(r,"class","ml-2 text-sm text-gray-600"),E(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(o,i){N(o,e,i),G(t,e,null),d(e,a),d(e,r),s=!0},p:Ve,i(o){s||(w(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),Q(t)}}}function Ha(l){let e,t="Nenhum colaborador encontrado para esta contratada";return{c(){e=$("p"),e.textContent=t,this.h()},l(a){e=b(a,"P",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1fkc00j"&&(e.textContent=t),this.h()},h(){E(e,"class","text-sm text-gray-500 mt-1")},m(a,r){N(a,e,r)},d(a){a&&m(e)}}}function Mn(l){let e,t,a,r,n="Contratada",s,o,i,c,f,u,h="Colaborador",g,p,C,D,P=l[2]&&La(l);const z=[xn,On],O=[];function x(j,W){return j[4]?0:1}o=x(l),i=O[o]=z[o](l);const q=[Rn,Tn],L=[];function T(j,W){return j[5]?0:1}return p=T(l),C=L[p]=q[p](l),{c(){P&&P.c(),e=F(),t=$("div"),a=$("div"),r=$("label"),r.textContent=n,s=F(),i.c(),c=F(),f=$("div"),u=$("label"),u.textContent=h,g=F(),C.c(),this.h()},l(j){P&&P.l(j),e=A(j),t=b(j,"DIV",{class:!0});var W=I(t);a=b(W,"DIV",{});var _=I(a);r=b(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),De(r)!=="svelte-6kjk6u"&&(r.textContent=n),s=A(_),i.l(_),_.forEach(m),c=A(W),f=b(W,"DIV",{});var k=I(f);u=b(k,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),De(u)!=="svelte-funhjy"&&(u.textContent=h),g=A(k),C.l(k),k.forEach(m),W.forEach(m),this.h()},h(){E(r,"for","contratada-select"),E(r,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(u,"for","colaborador-select"),E(u,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(t,"class","space-y-4")},m(j,W){P&&P.m(j,W),N(j,e,W),N(j,t,W),d(t,a),d(a,r),d(a,s),O[o].m(a,null),d(t,c),d(t,f),d(f,u),d(f,g),L[p].m(f,null),D=!0},p(j,W){j[2]?P?(P.p(j,W),W&4&&w(P,1)):(P=La(j),P.c(),w(P,1),P.m(e.parentNode,e)):P&&(_e(),y(P,1,1,()=>{P=null}),ve());let _=o;o=x(j),o===_?O[o].p(j,W):(_e(),y(O[_],1,1,()=>{O[_]=null}),ve(),i=O[o],i?i.p(j,W):(i=O[o]=z[o](j),i.c()),w(i,1),i.m(a,null));let k=p;p=T(j),p===k?L[p].p(j,W):(_e(),y(L[k],1,1,()=>{L[k]=null}),ve(),C=L[p],C?C.p(j,W):(C=L[p]=q[p](j),C.c()),w(C,1),C.m(f,null))},i(j){D||(w(P),w(i),w(C),D=!0)},o(j){y(P),y(i),y(C),D=!1},d(j){j&&(m(e),m(t)),P&&P.d(j),O[o].d(),L[p].d()}}}function jn(l){let e;return{c(){e=M("Cancelar")},l(t){e=R(t,"Cancelar")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Ln(l){let e;return{c(){e=M("Criar Ficha")},l(t){e=R(t,"Criar Ficha")},m(t,a){N(t,e,a)},i:Ve,o:Ve,d(t){t&&m(e)}}}function Hn(l){let e,t,a;return e=new ur({props:{class:"mr-2",size:"4"}}),{c(){K(e.$$.fragment),t=M(`
        Criando...`)},l(r){J(e.$$.fragment,r),t=R(r,`
        Criando...`)},m(r,n){G(e,r,n),N(r,t,n),a=!0},i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),Q(e,r)}}}function Bn(l){let e,t,a,r;const n=[Hn,Ln],s=[];function o(i,c){return i[1]?0:1}return e=o(l),t=s[e]=n[e](l),{c(){t.c(),a=Ce()},l(i){t.l(i),a=Ce()},m(i,c){s[e].m(i,c),N(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e!==f&&(_e(),y(s[f],1,1,()=>{s[f]=null}),ve(),t=s[e],t||(t=s[e]=n[e](i),t.c()),w(t,1),t.m(a.parentNode,a))},i(i){r||(w(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),s[e].d(i)}}}function Un(l){let e,t,a,r;return e=new ze({props:{color:"alternative",size:"sm",class:"rounded-sm",disabled:l[1],$$slots:{default:[jn]},$$scope:{ctx:l}}}),e.$on("click",l[10]),a=new ze({props:{color:"primary",size:"sm",class:"rounded-sm",disabled:!l[8],$$slots:{default:[Bn]},$$scope:{ctx:l}}}),a.$on("click",l[13]),{c(){K(e.$$.fragment),t=F(),K(a.$$.fragment)},l(n){J(e.$$.fragment,n),t=A(n),J(a.$$.fragment,n)},m(n,s){G(e,n,s),N(n,t,s),G(a,n,s),r=!0},p(n,s){const o={};s&2&&(o.disabled=n[1]),s&524288&&(o.$$scope={dirty:s,ctx:n}),e.$set(o);const i={};s&256&&(i.disabled=!n[8]),s&524290&&(i.$$scope={dirty:s,ctx:n}),a.$set(i)},i(n){r||(w(e.$$.fragment,n),w(a.$$.fragment,n),r=!0)},o(n){y(e.$$.fragment,n),y(a.$$.fragment,n),r=!1},d(n){n&&m(t),Q(e,n),Q(a,n)}}}function Qn(l){let e,t,a;function r(s){l[16](s)}let n={size:"md",outsideclose:!l[1],autoclose:!1,$$slots:{footer:[Un],default:[Mn]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.open=l[0]),e=new Ir({props:n}),Me.push(()=>je(e,"open",r)),{c(){K(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,o){G(e,s,o),a=!0},p(s,[o]){const i={};o&2&&(i.outsideclose=!s[1]),o&525310&&(i.$$scope={dirty:o,ctx:s}),!t&&o&1&&(t=!0,i.open=s[0],Le(()=>t=!1)),e.$set(i)},i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){Q(e,s)}}}function Gn(l,e,t){let a,r,{open:n=!1}=e,{submitting:s=!1}=e,{error:o=null}=e,{contratadas:i=[]}=e,{colaboradores:c=[]}=e,{loadingContratadas:f=!1}=e,{loadingColaboradores:u=!1}=e;const h=Ye();let g="",p="";function C(){s||(t(6,g=""),t(7,p=""),h("close"))}function D(q){t(6,g=q.detail),t(7,p=""),h("contratadaChange",g)}function P(q){t(7,p=q.detail),h("colaboradorChange",p)}function z(){a&&h("submit",{contratadaId:g,colaboradorId:p})}function O(){h("retry")}function x(q){n=q,t(0,n)}return l.$$set=q=>{"open"in q&&t(0,n=q.open),"submitting"in q&&t(1,s=q.submitting),"error"in q&&t(2,o=q.error),"contratadas"in q&&t(3,i=q.contratadas),"colaboradores"in q&&t(15,c=q.colaboradores),"loadingContratadas"in q&&t(4,f=q.loadingContratadas),"loadingColaboradores"in q&&t(5,u=q.loadingColaboradores)},l.$$.update=()=>{l.$$.dirty&1&&(n||(t(6,g=""),t(7,p=""))),l.$$.dirty&194&&t(8,a=!!g&&!!p&&!s),l.$$.dirty&32832&&t(9,r=c.filter(q=>!g||q.empresa===g))},[n,s,o,i,f,u,g,p,a,r,C,D,P,z,O,c,x]}class Jn extends Qe{constructor(e){super(),Ge(this,e,Gn,Qn,Je,{open:0,submitting:1,error:2,contratadas:3,colaboradores:15,loadingContratadas:4,loadingColaboradores:5})}}function Ba(l){let e,t,a;function r(s){l[41](s)}let n={fichaId:l[1]};return l[0]!==void 0&&(n.open=l[0]),e=new zn({props:n}),Me.push(()=>je(e,"open",r)),e.$on("close",l[17]),e.$on("fichaUpdated",l[18]),{c(){K(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,o){G(e,s,o),a=!0},p(s,o){const i={};o[0]&2&&(i.fichaId=s[1]),!t&&o[0]&1&&(t=!0,i.open=s[0],Le(()=>t=!1)),e.$set(i)},i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){Q(e,s)}}}function Ua(l){let e,t,a;function r(s){l[42](s)}let n={contratadas:l[3],colaboradores:l[4],loadingContratadas:l[5],loadingColaboradores:l[6],submitting:l[7]};return l[2]!==void 0&&(n.open=l[2]),e=new Jn({props:n}),Me.push(()=>je(e,"open",r)),e.$on("close",l[23]),e.$on("contratadaChange",l[43]),e.$on("colaboradorChange",l[44]),e.$on("submit",l[22]),e.$on("retry",l[24]),{c(){K(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,o){G(e,s,o),a=!0},p(s,o){const i={};o[0]&8&&(i.contratadas=s[3]),o[0]&16&&(i.colaboradores=s[4]),o[0]&32&&(i.loadingContratadas=s[5]),o[0]&64&&(i.loadingColaboradores=s[6]),o[0]&128&&(i.submitting=s[7]),!t&&o[0]&4&&(t=!0,i.open=s[2],Le(()=>t=!1)),e.$set(i)},i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){Q(e,s)}}}function Kn(l){let e,t,a,r,n;e=new nl({props:{items:l[8].items,loading:l[8].loading,error:l[8].error,pagination:l[8].pagination,filters:l[8].filters,filterOptions:l[8].filterOptions}}),e.$on("searchChange",l[34]),e.$on("empresaFilterChange",l[35]),e.$on("cargoFilterChange",l[36]),e.$on("devolucaoPendenteChange",l[37]),e.$on("clearFilters",l[14]),e.$on("pageChange",l[38]),e.$on("pageSizeChange",l[39]),e.$on("viewDetail",l[40]),e.$on("refresh",l[19]),e.$on("novaFicha",l[20]);let s=l[0]&&Ba(l),o=l[2]&&Ua(l);return{c(){K(e.$$.fragment),t=F(),s&&s.c(),a=F(),o&&o.c(),r=Ce()},l(i){J(e.$$.fragment,i),t=A(i),s&&s.l(i),a=A(i),o&&o.l(i),r=Ce()},m(i,c){G(e,i,c),N(i,t,c),s&&s.m(i,c),N(i,a,c),o&&o.m(i,c),N(i,r,c),n=!0},p(i,c){const f={};c[0]&256&&(f.items=i[8].items),c[0]&256&&(f.loading=i[8].loading),c[0]&256&&(f.error=i[8].error),c[0]&256&&(f.pagination=i[8].pagination),c[0]&256&&(f.filters=i[8].filters),c[0]&256&&(f.filterOptions=i[8].filterOptions),e.$set(f),i[0]?s?(s.p(i,c),c[0]&1&&w(s,1)):(s=Ba(i),s.c(),w(s,1),s.m(a.parentNode,a)):s&&(_e(),y(s,1,1,()=>{s=null}),ve()),i[2]?o?(o.p(i,c),c[0]&4&&w(o,1)):(o=Ua(i),o.c(),w(o,1),o.m(r.parentNode,r)):o&&(_e(),y(o,1,1,()=>{o=null}),ve())},i(i){n||(w(e.$$.fragment,i),w(s),w(o),n=!0)},o(i){y(e.$$.fragment,i),y(s),y(o),n=!1},d(i){i&&(m(t),m(a),m(r)),Q(e,i),s&&s.d(i),o&&o.d(i)}}}function Wn(l){console.log("Page size change solicitado para fichas:",l)}function Xn(l){console.log("üë§ Colaborador selecionado:",l)}function Zn(l,e,t){let a,r,n,s,o,{initialPageSize:i=10}=e;const c=!1,f=3e4,u=dr(U=>vt.getFichasWithColaboradores({page:U.page||1,limit:U.limit||i,searchTerm:U.search||void 0,empresaFilter:U.empresa!=="todas"?U.empresa:void 0,cargoFilter:U.cargo!=="todos"?U.cargo:void 0,statusFilter:U.status!=="todos"?U.status:void 0,devolucaoPendente:!!U.devolucaoPendente}).then(he=>({data:he.fichas,total:he.total,page:he.page||U.page||1,pageSize:he.pageSize||U.limit||i,totalPages:Math.ceil(he.total/(U.limit||i))})),{initialPageSize:i});Ga(l,u,U=>t(33,o=U));let h=!1,g=null,p=!1,C=[],D=[],P=!1,z=!1,O=!1;Ja(async()=>{console.log("üöÄ FichasContainer: Inicializando..."),await mr.initialize(),await x(),console.log("‚úÖ FichasContainer: Inicializado com sucesso")});async function x(){try{await u.fetchPage(),console.log("üìã Dados de fichas carregados")}catch(U){console.error("‚ùå Erro ao carregar fichas:",U),Oe.error("Erro ao carregar fichas","N√£o foi poss√≠vel carregar os dados das fichas")}}let q={empresa:"todas",cargo:"todos",devolucaoPendente:!1},L="";function T(U){t(29,L=U),v()}function j(U){t(28,q={...q,empresa:U}),v()}function W(U){t(28,q={...q,cargo:U}),v()}function _(U){t(28,q={...q,devolucaoPendente:U}),v()}function k(){t(29,L=""),t(28,q={empresa:"todas",cargo:"todos",devolucaoPendente:!1}),v()}function v(){const U={};L&&L.trim()!==""&&(U.search=L.trim()),q.empresa&&q.empresa!=="todas"&&(U.empresa=q.empresa),q.cargo&&q.cargo!=="todos"&&(U.cargo=q.cargo),q.devolucaoPendente&&(U.devolucaoPendente=!0),console.log("üîß Aplicando filtros de fichas:",U),u.setFilters(U)}function S(U){u.goToPage(U)}function V(U){t(1,g=U),t(0,h=!0),console.log("üëÄ Abrindo detalhes da ficha:",U)}function B(){t(0,h=!1),t(1,g=null)}function ee(){console.log("üîÑ Ficha atualizada, recarregando lista"),x()}function te(){x()}function re(){t(2,p=!0),le()}async function le(){if(!(C.length>0))try{t(5,P=!0),console.log("üîÑ Carregando contratadas da API...");const U=await xe.get("/contratadas");if(console.log("üì¶ Raw API response for contratadas:",U),console.log("üì¶ result.data structure:",U.data),U.success&&U.data){const he=U.data.contratadas||U.data;if(Array.isArray(he))t(3,C=he.map(Pe=>({value:Pe.id,label:Pe.nome}))),console.log("‚úÖ Contratadas carregadas da API:",C.length);else throw new Error("Dados de contratadas n√£o s√£o um array")}else throw new Error("Resposta inv√°lida da API de contratadas")}catch(U){console.error("‚ùå Erro ao carregar contratadas:",U);const he=U instanceof Error?U.message:"Erro desconhecido";Oe.error("Erro ao carregar contratadas",`N√£o foi poss√≠vel carregar a lista de empresas: ${he}`),t(3,C=[{value:"empresa-alpha",label:"Empresa Alpha LTDA"},{value:"empresa-beta",label:"Empresa Beta Servi√ßos"},{value:"empresa-gamma",label:"Gamma Constru√ß√µes"}])}finally{t(5,P=!1)}}async function ae(U){try{t(6,z=!0),console.log("üîÑ Carregando colaboradores para contratada:",U);const he=await xe.get(`/colaboradores?contratadaId=${U}&limit=100`);if(console.log("üì¶ Raw API response for colaboradores:",he),console.log("üì¶ result.data structure:",he.data),he.success&&he.data){const Pe=he.data;if(console.log("üìã Colaboradores encontrados:",Pe.length),Array.isArray(Pe))t(4,D=Pe.map(ye=>({value:ye.id,label:ye.nome,empresa:U,cpf:ye.cpfFormatado||ye.cpf,cargo:ye.cargo||"-",matricula:ye.matricula||"-",setor:ye.setor||"-"}))),console.log("‚úÖ Colaboradores carregados da API:",D.length);else throw new Error("Dados de colaboradores n√£o s√£o um array")}else throw new Error("Resposta inv√°lida da API de colaboradores")}catch(he){console.error("‚ùå Erro ao carregar colaboradores:",he);const Pe=he instanceof Error?he.message:"Erro desconhecido";Oe.error("Erro ao carregar colaboradores",`N√£o foi poss√≠vel carregar a lista de profissionais: ${Pe}`),t(4,D=[{value:`mock-colab-001-${U}`,label:"Carlos Oliveira (Mock)",empresa:U,cpf:"123.456.789-01",cargo:"Operador"},{value:`mock-colab-002-${U}`,label:"Ana Santos (Mock)",empresa:U,cpf:"987.654.321-02",cargo:"T√©cnica"},{value:`mock-colab-003-${U}`,label:"Jo√£o Silva (Mock)",empresa:U,cpf:"456.789.123-03",cargo:"Supervisor"}]),console.log("‚ö†Ô∏è Usando dados mock para colaboradores:",D.length)}finally{t(6,z=!1)}}function ue(U){console.log("üè¢ Contratada selecionada:",U),U?ae(U):t(4,D=[])}async function de(U){const{contratadaId:he,colaboradorId:Pe}=U.detail;try{t(7,O=!0),console.log("üìù Criando nova ficha:",{contratadaId:he,colaboradorId:Pe});const ye={colaboradorId:Pe,status:"ATIVA"};console.log("üì§ Enviando payload para cria√ß√£o de ficha:",ye);const fe=await xe.post("/fichas-epi",ye);if(console.log("üì• Resposta da API ao criar ficha:",fe),fe.success){t(2,p=!1),await x();const Ne=D.find(Ie=>Ie.value===Pe),Y=(Ne==null?void 0:Ne.label)||"Colaborador";Oe.success("Ficha criada com sucesso",`Ficha de EPI criada para ${Y}`),console.log("‚úÖ Nova ficha criada com sucesso:",fe.data)}else throw new Error(fe.message||"Erro ao criar ficha")}catch(ye){console.error("‚ùå Erro ao criar nova ficha:",ye),Oe.error("Erro ao criar ficha","N√£o foi poss√≠vel criar a ficha de EPI")}finally{t(7,O=!1)}}function me(){t(2,p=!1),t(4,D=[])}function ge(){t(3,C=[]),le()}const ie=U=>T(U.detail),X=U=>j(U.detail),Z=U=>W(U.detail),se=U=>_(U.detail),be=U=>S(U.detail),H=U=>Wn(U.detail),ne=U=>V(U.detail);function $e(U){h=U,t(0,h)}function Ee(U){p=U,t(2,p)}const ke=U=>ue(U.detail),qe=U=>Xn(U.detail);return l.$$set=U=>{"initialPageSize"in U&&t(25,i=U.initialPageSize)},l.$$.update=()=>{l.$$.dirty[0]&805306368&&t(32,n=L!==""||q.empresa!=="todas"||q.cargo!=="todos"||q.devolucaoPendente),l.$$.dirty[0]&1879048192|l.$$.dirty[1]&7&&t(8,s={items:o.items||[],loading:o.loading,error:o.error,pagination:{currentPage:o.page,totalPages:o.totalPages,pageSize:o.pageSize,total:o.total,hasNext:u.hasNext(),hasPrev:u.hasPrev()},filters:{searchTerm:L,empresaFilter:q.empresa,cargoFilter:q.cargo,devolucaoPendente:q.devolucaoPendente,hasActiveFilters:n},filterOptions:{empresas:a,cargos:r}})},t(31,a=[{value:"todas",label:"Todas as Empresas"}]),t(30,r=[{value:"todos",label:"Todos os Cargos"}]),[h,g,p,C,D,P,z,O,s,u,T,j,W,_,k,S,V,B,ee,te,re,ue,de,me,ge,i,c,f,q,L,r,a,n,o,ie,X,Z,se,be,H,ne,$e,Ee,ke,qe]}class Yn extends Qe{constructor(e){super(),Ge(this,e,Zn,Kn,Je,{initialPageSize:25,autoRefresh:26,refreshInterval:27},null,[-1,-1])}get autoRefresh(){return this.$$.ctx[26]}get refreshInterval(){return this.$$.ctx[27]}}function eo(l){let e,t,a;return t=new Yn({props:{initialPageSize:10,autoRefresh:!1}}),{c(){e=F(),K(t.$$.fragment),this.h()},l(r){Qa("svelte-161hi6l",document.head).forEach(m),e=A(r),J(t.$$.fragment,r),this.h()},h(){document.title="Fichas de EPI - DataLife EPI"},m(r,n){N(r,e,n),G(t,r,n),a=!0},p:Ve,i(r){a||(w(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),Q(t,r)}}}class Eo extends Qe{constructor(e){super(),Ge(this,e,null,eo,Je,{})}}export{Eo as component};
