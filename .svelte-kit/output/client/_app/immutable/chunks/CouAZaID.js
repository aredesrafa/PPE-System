import{S as tt,i as at,s as nt,D as ge,E as ve,m as M,p as E,q as g,F as he,u as V,y as P,z as T,J as ot,d,B as Xe,r as Ye,b as q,H as fe,a as be,v,c as u,e as p,f as $,g as w,h as I,j as _,t as D,k,x as st}from"./BC4IzclS.js";import"./IHki7fMi.js";import{B as Qe}from"./B4v2edil.js";import{R as Je}from"./BBtXiDKA.js";import{L as $e,T as it}from"./BxXM_vYQ.js";import{I as lt}from"./D_zb-ss7.js";import{M as rt}from"./BaS0qQIQ.js";function Ue(o){var Le;let e,t,a,n,s=(((Le=o[1].tipoEPI)==null?void 0:Le.nomeEquipamento)||"EPI não encontrado")+"",l,m,r,S,y=o[1].quantidade+"",se,ue,A,C,L,z,de,N,F,f,ce,ke,Q,we,J,O,De,Me,U,Ve,H,G,Pe,K,x,me=o[3].tipo==="entrada"?"+":"-",Ee,qe,Te,R,Se,Ae,Ce,j,W,ze,B,Ne,Fe,X;z=new $e({props:{class:"mb-3 block",$$slots:{default:[ft]},$$scope:{ctx:o}}});function Ze(i){o[9](i)}let He={name:"tipo",value:"entrada",class:"mr-2"};o[3].tipo!==void 0&&(He.group=o[3].tipo),f=new Je({props:He}),ge.push(()=>ve(f,"group",Ze)),Q=new $e({props:{class:"text-sm font-normal",$$slots:{default:[ut]},$$scope:{ctx:o}}});function ye(i){o[10](i)}let Re={name:"tipo",value:"saida",class:"mr-2"};o[3].tipo!==void 0&&(Re.group=o[3].tipo),O=new Je({props:Re}),ge.push(()=>ve(O,"group",ye)),U=new $e({props:{class:"text-sm font-normal",$$slots:{default:[dt]},$$scope:{ctx:o}}}),G=new $e({props:{for:"quantidade",class:"mb-2",$$slots:{default:[ct]},$$scope:{ctx:o}}});function xe(i){o[11](i)}let je={id:"quantidade",type:"number",min:"1",step:"1",size:"sm",class:"rounded-sm pl-8",color:o[4].quantidade?"red":"base"};o[3].quantidade!==void 0&&(je.value=o[3].quantidade),R=new lt({props:je}),ge.push(()=>ve(R,"value",xe)),R.$on("input",o[8]);let h=o[4].quantidade&&Ge(o);W=new $e({props:{for:"motivo",class:"mb-2",$$slots:{default:[mt]},$$scope:{ctx:o}}});function et(i){o[12](i)}let Be={id:"motivo",placeholder:"Descreva o motivo da movimentação...",rows:"2",class:"rounded-sm resize-none",color:o[4].motivo?"red":"base"};o[3].motivo!==void 0&&(Be.value=o[3].motivo),B=new it({props:Be}),ge.push(()=>ve(B,"value",et)),B.$on("input",Et);let b=o[4].motivo&&Ke(o);return{c(){e=_("div"),t=_("div"),a=_("div"),n=_("h4"),l=D(s),m=k(),r=_("span"),S=D("Estoque atual = "),se=D(y),ue=k(),A=_("div"),C=_("div"),L=_("div"),T(z.$$.fragment),de=k(),N=_("div"),F=_("div"),T(f.$$.fragment),ke=k(),T(Q.$$.fragment),we=k(),J=_("div"),T(O.$$.fragment),Me=k(),T(U.$$.fragment),Ve=k(),H=_("div"),T(G.$$.fragment),Pe=k(),K=_("div"),x=_("span"),Ee=D(me),Te=k(),T(R.$$.fragment),Ae=k(),h&&h.c(),Ce=k(),j=_("div"),T(W.$$.fragment),ze=k(),T(B.$$.fragment),Fe=k(),b&&b.c(),this.h()},l(i){e=p(i,"DIV",{class:!0});var c=$(e);t=p(c,"DIV",{class:!0});var pe=$(t);a=p(pe,"DIV",{class:!0});var ee=$(a);n=p(ee,"H4",{class:!0});var _e=$(n);l=w(_e,s),_e.forEach(d),m=I(ee),r=p(ee,"SPAN",{class:!0});var ie=$(r);S=w(ie,"Estoque atual = "),se=w(ie,y),ie.forEach(d),ee.forEach(d),pe.forEach(d),ue=I(c),A=p(c,"DIV",{class:!0});var te=$(A);C=p(te,"DIV",{class:!0});var ae=$(C);L=p(ae,"DIV",{});var Y=$(L);P(z.$$.fragment,Y),de=I(Y),N=p(Y,"DIV",{class:!0});var ne=$(N);F=p(ne,"DIV",{class:!0});var Z=$(F);P(f.$$.fragment,Z),ke=I(Z),P(Q.$$.fragment,Z),Z.forEach(d),we=I(ne),J=p(ne,"DIV",{class:!0});var oe=$(J);P(O.$$.fragment,oe),Me=I(oe),P(U.$$.fragment,oe),oe.forEach(d),ne.forEach(d),Y.forEach(d),Ve=I(ae),H=p(ae,"DIV",{});var le=$(H);P(G.$$.fragment,le),Pe=I(le),K=p(le,"DIV",{class:!0});var Ie=$(K);x=p(Ie,"SPAN",{class:!0});var Oe=$(x);Ee=w(Oe,me),Oe.forEach(d),Te=I(Ie),P(R.$$.fragment,Ie),Ie.forEach(d),Ae=I(le),h&&h.l(le),le.forEach(d),ae.forEach(d),Ce=I(te),j=p(te,"DIV",{});var re=$(j);P(W.$$.fragment,re),ze=I(re),P(B.$$.fragment,re),Fe=I(re),b&&b.l(re),re.forEach(d),te.forEach(d),c.forEach(d),this.h()},h(){v(n,"class","font-medium text-gray-900 dark:text-white"),v(r,"class","text-sm font-light text-gray-600 dark:text-gray-400"),v(a,"class","flex items-center justify-between"),v(t,"class","bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"),v(F,"class","flex items-center"),v(J,"class","flex items-center"),v(N,"class","flex gap-6"),v(x,"class",qe="absolute left-3 top-1/2 transform -translate-y-1/2 "+(o[3].tipo==="entrada"?"text-green-600":"text-red-600")+" font-medium"),v(K,"class","relative"),v(C,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),v(A,"class","space-y-4"),v(e,"class","space-y-4")},m(i,c){q(i,e,c),u(e,t),u(t,a),u(a,n),u(n,l),u(a,m),u(a,r),u(r,S),u(r,se),u(e,ue),u(e,A),u(A,C),u(C,L),V(z,L,null),u(L,de),u(L,N),u(N,F),V(f,F,null),u(F,ke),V(Q,F,null),u(N,we),u(N,J),V(O,J,null),u(J,Me),V(U,J,null),u(C,Ve),u(C,H),V(G,H,null),u(H,Pe),u(H,K),u(K,x),u(x,Ee),u(K,Te),V(R,K,null),u(H,Ae),h&&h.m(H,null),u(A,Ce),u(A,j),V(W,j,null),u(j,ze),V(B,j,null),u(j,Fe),b&&b.m(j,null),X=!0},p(i,c){var oe;(!X||c&2)&&s!==(s=(((oe=i[1].tipoEPI)==null?void 0:oe.nomeEquipamento)||"EPI não encontrado")+"")&&be(l,s),(!X||c&2)&&y!==(y=i[1].quantidade+"")&&be(se,y);const pe={};c&262144&&(pe.$$scope={dirty:c,ctx:i}),z.$set(pe);const ee={};!ce&&c&8&&(ce=!0,ee.group=i[3].tipo,he(()=>ce=!1)),f.$set(ee);const _e={};c&262144&&(_e.$$scope={dirty:c,ctx:i}),Q.$set(_e);const ie={};!De&&c&8&&(De=!0,ie.group=i[3].tipo,he(()=>De=!1)),O.$set(ie);const te={};c&262144&&(te.$$scope={dirty:c,ctx:i}),U.$set(te);const ae={};c&262144&&(ae.$$scope={dirty:c,ctx:i}),G.$set(ae),(!X||c&8)&&me!==(me=i[3].tipo==="entrada"?"+":"-")&&be(Ee,me),(!X||c&8&&qe!==(qe="absolute left-3 top-1/2 transform -translate-y-1/2 "+(i[3].tipo==="entrada"?"text-green-600":"text-red-600")+" font-medium"))&&v(x,"class",qe);const Y={};c&16&&(Y.color=i[4].quantidade?"red":"base"),!Se&&c&8&&(Se=!0,Y.value=i[3].quantidade,he(()=>Se=!1)),R.$set(Y),i[4].quantidade?h?h.p(i,c):(h=Ge(i),h.c(),h.m(H,null)):h&&(h.d(1),h=null);const ne={};c&262144&&(ne.$$scope={dirty:c,ctx:i}),W.$set(ne);const Z={};c&16&&(Z.color=i[4].motivo?"red":"base"),!Ne&&c&8&&(Ne=!0,Z.value=i[3].motivo,he(()=>Ne=!1)),B.$set(Z),i[4].motivo?b?b.p(i,c):(b=Ke(i),b.c(),b.m(j,null)):b&&(b.d(1),b=null)},i(i){X||(g(z.$$.fragment,i),g(f.$$.fragment,i),g(Q.$$.fragment,i),g(O.$$.fragment,i),g(U.$$.fragment,i),g(G.$$.fragment,i),g(R.$$.fragment,i),g(W.$$.fragment,i),g(B.$$.fragment,i),X=!0)},o(i){E(z.$$.fragment,i),E(f.$$.fragment,i),E(Q.$$.fragment,i),E(O.$$.fragment,i),E(U.$$.fragment,i),E(G.$$.fragment,i),E(R.$$.fragment,i),E(W.$$.fragment,i),E(B.$$.fragment,i),X=!1},d(i){i&&d(e),M(z),M(f),M(Q),M(O),M(U),M(G),M(R),h&&h.d(),M(W),M(B),b&&b.d()}}}function ft(o){let e;return{c(){e=D("Tipo de Movimentação *")},l(t){e=w(t,"Tipo de Movimentação *")},m(t,a){q(t,e,a)},d(t){t&&d(e)}}}function ut(o){let e;return{c(){e=D("Aumentar")},l(t){e=w(t,"Aumentar")},m(t,a){q(t,e,a)},d(t){t&&d(e)}}}function dt(o){let e;return{c(){e=D("Retirar")},l(t){e=w(t,"Retirar")},m(t,a){q(t,e,a)},d(t){t&&d(e)}}}function ct(o){let e;return{c(){e=D("Quantidade *")},l(t){e=w(t,"Quantidade *")},m(t,a){q(t,e,a)},d(t){t&&d(e)}}}function Ge(o){let e,t=o[4].quantidade+"",a;return{c(){e=_("p"),a=D(t),this.h()},l(n){e=p(n,"P",{class:!0});var s=$(e);a=w(s,t),s.forEach(d),this.h()},h(){v(e,"class","text-red-600 text-xs mt-1")},m(n,s){q(n,e,s),u(e,a)},p(n,s){s&16&&t!==(t=n[4].quantidade+"")&&be(a,t)},d(n){n&&d(e)}}}function mt(o){let e;return{c(){e=D("Motivo *")},l(t){e=w(t,"Motivo *")},m(t,a){q(t,e,a)},d(t){t&&d(e)}}}function Ke(o){let e,t=o[4].motivo+"",a;return{c(){e=_("p"),a=D(t),this.h()},l(n){e=p(n,"P",{class:!0});var s=$(e);a=w(s,t),s.forEach(d),this.h()},h(){v(e,"class","text-red-600 text-xs mt-1")},m(n,s){q(n,e,s),u(e,a)},p(n,s){s&16&&t!==(t=n[4].motivo+"")&&be(a,t)},d(n){n&&d(e)}}}function pt(o){let e,t,a=o[1]&&Ue(o);return{c(){a&&a.c(),e=fe()},l(n){a&&a.l(n),e=fe()},m(n,s){a&&a.m(n,s),q(n,e,s),t=!0},p(n,s){n[1]?a?(a.p(n,s),s&2&&g(a,1)):(a=Ue(n),a.c(),g(a,1),a.m(e.parentNode,e)):a&&(Xe(),E(a,1,1,()=>{a=null}),Ye())},i(n){t||(g(a),t=!0)},o(n){E(a),t=!1},d(n){n&&d(e),a&&a.d(n)}}}function We(o){let e,t,a,n,s;return t=new Qe({props:{color:"alternative",class:"rounded-sm",disabled:o[2],$$slots:{default:[_t]},$$scope:{ctx:o}}}),t.$on("click",o[7]),n=new Qe({props:{color:"primary",class:"rounded-sm",disabled:o[2],$$slots:{default:[vt]},$$scope:{ctx:o}}}),n.$on("click",o[6]),{c(){e=_("div"),T(t.$$.fragment),a=k(),T(n.$$.fragment),this.h()},l(l){e=p(l,"DIV",{class:!0});var m=$(e);P(t.$$.fragment,m),a=I(m),P(n.$$.fragment,m),m.forEach(d),this.h()},h(){v(e,"class","flex items-center gap-3")},m(l,m){q(l,e,m),V(t,e,null),u(e,a),V(n,e,null),s=!0},p(l,m){const r={};m&4&&(r.disabled=l[2]),m&262144&&(r.$$scope={dirty:m,ctx:l}),t.$set(r);const S={};m&4&&(S.disabled=l[2]),m&262148&&(S.$$scope={dirty:m,ctx:l}),n.$set(S)},i(l){s||(g(t.$$.fragment,l),g(n.$$.fragment,l),s=!0)},o(l){E(t.$$.fragment,l),E(n.$$.fragment,l),s=!1},d(l){l&&d(e),M(t),M(n)}}}function _t(o){let e;return{c(){e=D("Cancelar")},l(t){e=w(t,"Cancelar")},m(t,a){q(t,e,a)},d(t){t&&d(e)}}}function $t(o){let e;return{c(){e=D("Salvar Movimentação")},l(t){e=w(t,"Salvar Movimentação")},m(t,a){q(t,e,a)},d(t){t&&d(e)}}}function gt(o){let e,t=`<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
              Salvando...`;return{c(){e=_("div"),e.innerHTML=t,this.h()},l(a){e=p(a,"DIV",{class:!0,"data-svelte-h":!0}),st(e)!=="svelte-1x71bel"&&(e.innerHTML=t),this.h()},h(){v(e,"class","flex items-center")},m(a,n){q(a,e,n)},d(a){a&&d(e)}}}function vt(o){let e;function t(s,l){return s[2]?gt:$t}let a=t(o),n=a(o);return{c(){n.c(),e=fe()},l(s){n.l(s),e=fe()},m(s,l){n.m(s,l),q(s,e,l)},p(s,l){a!==(a=t(s))&&(n.d(1),n=a(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&d(e),n.d(s)}}}function ht(o){let e,t,a=o[1]&&We(o);return{c(){a&&a.c(),e=fe()},l(n){a&&a.l(n),e=fe()},m(n,s){a&&a.m(n,s),q(n,e,s),t=!0},p(n,s){n[1]?a?(a.p(n,s),s&2&&g(a,1)):(a=We(n),a.c(),g(a,1),a.m(e.parentNode,e)):a&&(Xe(),E(a,1,1,()=>{a=null}),Ye())},i(n){t||(g(a),t=!0)},o(n){E(a),t=!1},d(n){n&&d(e),a&&a.d(n)}}}function bt(o){let e,t,a;function n(l){o[13](l)}let s={title:o[5],size:"md",autoclose:!1,outsideclose:!1,$$slots:{footer:[ht],default:[pt]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.open=o[0]),e=new rt({props:s}),ge.push(()=>ve(e,"open",n)),{c(){T(e.$$.fragment)},l(l){P(e.$$.fragment,l)},m(l,m){V(e,l,m),a=!0},p(l,[m]){const r={};m&32&&(r.title=l[5]),m&262174&&(r.$$scope={dirty:m,ctx:l}),!t&&m&1&&(t=!0,r.open=l[0],he(()=>t=!1)),e.$set(r)},i(l){a||(g(e.$$.fragment,l),a=!0)},o(l){E(e.$$.fragment,l),a=!1},d(l){M(e,l)}}}function Et(o){const e=o.target;e.style.height="auto",e.style.height=Math.max(40,e.scrollHeight)+"px"}function qt(o,e,t){let a,{item:n=null}=e,{loading:s=!1}=e,{show:l=!0}=e;const m=ot();let r={tipo:"entrada",quantidade:0,motivo:""},S={};function y(){t(3,r={tipo:"entrada",quantidade:0,motivo:""}),t(4,S={})}function se(){const f={};return(!r.quantidade||r.quantidade===0)&&(f.quantidade="Quantidade é obrigatória e deve ser diferente de zero"),r.motivo.trim()||(f.motivo="Motivo é obrigatório"),t(4,S=f),Object.keys(f).length===0}function ue(){se()&&(m("save",{tipoEPIId:(n==null?void 0:n.tipoEPIId)||"",almoxarifadoId:(n==null?void 0:n.almoxarifadoId)||"",tipoMovimentacao:r.tipo==="entrada"?"AJUSTE_POSITIVO":"AJUSTE_NEGATIVO",quantidade:r.quantidade,motivo:r.motivo,observacoes:"",itemEstoqueId:n==null?void 0:n.id}),A())}function A(){t(0,l=!1),m("cancel")}function C(f){const ce=f.target;t(3,r.quantidade=parseFloat(ce.value)||0,r)}function L(f){o.$$.not_equal(r.tipo,f)&&(r.tipo=f,t(3,r))}function z(f){o.$$.not_equal(r.tipo,f)&&(r.tipo=f,t(3,r))}function de(f){o.$$.not_equal(r.quantidade,f)&&(r.quantidade=f,t(3,r))}function N(f){o.$$.not_equal(r.motivo,f)&&(r.motivo=f,t(3,r))}function F(f){l=f,t(0,l)}return o.$$set=f=>{"item"in f&&t(1,n=f.item),"loading"in f&&t(2,s=f.loading),"show"in f&&t(0,l=f.show)},o.$$.update=()=>{o.$$.dirty&3&&l&&n&&y(),o.$$.dirty&8&&(r.tipo==="entrada"?`${r.quantidade}`:`${r.quantidade}`),o.$$.dirty&2&&t(5,a=n?"Ajustar Estoque":"Nova Movimentação")},[l,n,s,r,S,a,ue,A,C,L,z,de,N,F]}class Tt extends tt{constructor(e){super(),at(this,e,qt,bt,nt,{item:1,loading:2,show:0})}}export{Tt as M};
