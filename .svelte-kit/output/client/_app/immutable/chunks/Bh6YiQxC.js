const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DHmirYUp.js","./D8PmxC0_.js"])))=>i.map(i=>d[i]);
import{_ as Me}from"./C1FmrZbK.js";import{S as Mt,i as Qt,s as Jt,d as c,u as L,q as T,F as $e,G as Ee,b as D,c as m,m as E,e as v,f as k,g as P,h as A,j as b,t as V,k as C,$ as Gt,p as Kt,J as ne,K as re,L as se,M as de,n as Ne,o as _e,v as ke,a as W,C as Yt,I as Oe,a4 as Fe,a5 as Pe,a6 as Ve,a7 as Re}from"./BW7nMWMn.js";import{e as xe,u as ea,o as ta}from"./Bch6UWim.js";import"./IHki7fMi.js";import{A as Zt}from"./CcJBrDGd.js";import{a as Be,B as Wt}from"./Bdqt3-Qf.js";import{D as aa,T as la}from"./B7ejlhgL.js";import{R as Ue}from"./Dk9Mjb00.js";import{S as Xt,L as Te}from"./DhMnY3y8.js";import{I as He}from"./C6V0dnPk.js";import{F as ia}from"./Bp5ZnzQP.js";import{D as oa}from"./DTNVOwUp.js";import{C as na}from"./CyAyuRaH.js";import{P as ze}from"./BKX2UHRo.js";import{T as ra}from"./D4GuA44R.js";import{t as sa,e as da,a as fa,n as je}from"./DHmirYUp.js";import{L as ua}from"./CMvOMHzg.js";function Le(n){return{ENTRADA:"Entrada",TRANSFERENCIA:"Transfer√™ncia",DESCARTE:"Descarte",ENTRADA_AJUSTE:"Entrada (Ajuste)",SAIDA_AJUSTE:"Sa√≠da (Ajuste)"}[n]||n}function ml(n){return{RASCUNHO:"Rascunho",CONCLUIDA:"Conclu√≠da",CANCELADA:"Cancelada"}[n]||n}function Qe(n){return{ENTRADA:"green",TRANSFERENCIA:"blue",DESCARTE:"red",ENTRADA_AJUSTE:"yellow",SAIDA_AJUSTE:"dark"}[n]||"gray"}function pl(n){return{RASCUNHO:"yellow",CONCLUIDA:"green",CANCELADA:"red"}[n]||"dark"}function Je(n,e,t){const a=n.slice();return a[24]=e[t],a[26]=t,a}function Ge(n,e,t){const a=n.slice();return a[27]=e[t],a}function Ke(n){let e,t;return e=new Be({props:{color:"gray",class:"ml-2 rounded-sm",$$slots:{default:[ca]},$$scope:{ctx:n}}}),{c(){de(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,l){re(e,a,l),t=!0},p(a,l){const i={};l&1073741825&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){L(e.$$.fragment,a),t=!1},d(a){ne(e,a)}}}function ca(n){let e=n[0].length+"",t;return{c(){t=V(e)},l(a){t=P(a,e)},m(a,l){D(a,t,l)},p(a,l){l&1&&e!==(e=a[0].length+"")&&W(t,e)},d(a){a&&c(t)}}}function Ze(n){let e,t;return e=new Wt({props:{size:"sm",color:"primary",class:"rounded-sm",disabled:n[5],$$slots:{default:[_a]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){de(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,l){re(e,a,l),t=!0},p(a,l){const i={};l&32&&(i.disabled=a[5]),l&1073741824&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){L(e.$$.fragment,a),t=!1},d(a){ne(e,a)}}}function _a(n){let e,t,a;return e=new ze({props:{class:"w-4 h-4 mr-2"}}),{c(){de(e.$$.fragment),t=V(`
        Adicionar Item`)},l(l){se(e.$$.fragment,l),t=P(l,`
        Adicionar Item`)},m(l,i){re(e,l,i),D(l,t,i),a=!0},p:Ne,i(l){a||(T(e.$$.fragment,l),a=!0)},o(l){L(e.$$.fragment,l),a=!1},d(l){l&&c(t),ne(e,l)}}}function ma(n){let e,t=[],a=new Map,l,i,s,d=xe(n[0]);const u=o=>o[24].temp_id;for(let o=0;o<d.length;o+=1){let r=Je(n,d,o),f=u(r);a.set(f,t[o]=st(f,r))}let _=n[0].length>0&&dt(n);return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();l=C(),_&&_.c(),i=ke(),this.h()},l(o){e=v(o,"DIV",{class:!0});var r=k(e);for(let f=0;f<t.length;f+=1)t[f].l(r);r.forEach(c),l=A(o),_&&_.l(o),i=ke(),this.h()},h(){E(e,"class","space-y-0")},m(o,r){D(o,e,r);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);D(o,l,r),_&&_.m(o,r),D(o,i,r),s=!0},p(o,r){r&3807&&(d=xe(o[0]),$e(),t=ea(t,r,u,1,o,d,a,e,ta,st,null,Je),Ee()),o[0].length>0?_?_.p(o,r):(_=dt(o),_.c(),_.m(i.parentNode,i)):_&&(_.d(1),_=null)},i(o){if(!s){for(let r=0;r<d.length;r+=1)T(t[r]);s=!0}},o(o){for(let r=0;r<t.length;r+=1)L(t[r]);s=!1},d(o){o&&(c(e),c(l),c(i));for(let r=0;r<t.length;r+=1)t[r].d();_&&_.d(o)}}}function pa(n){let e,t;return e=new na({props:{size:"sm",class:"text-center py-8",$$slots:{default:[ka]},$$scope:{ctx:n}}}),{c(){de(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,l){re(e,a,l),t=!0},p(a,l){const i={};l&1073741954&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){L(e.$$.fragment,a),t=!1},d(a){ne(e,a)}}}function ha(n){let e,t='<div class="animate-spin inline-block w-6 h-6 border-[3px] border-current border-t-transparent text-primary-600 rounded-full" aria-label="loading"><span class="sr-only">Carregando...</span></div> <p class="text-sm text-gray-500 mt-2">Carregando op√ß√µes...</p>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(a){e=v(a,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-dy1n65"&&(e.innerHTML=t),this.h()},h(){E(e,"class","text-center py-8")},m(a,l){D(a,e,l)},p:Ne,i:Ne,o:Ne,d(a){a&&c(e)}}}function We(n){let e,t,a=n[24].equipamento_nome+"",l;return{c(){e=b("span"),t=V("- "),l=V(a),this.h()},l(i){e=v(i,"SPAN",{class:!0});var s=k(e);t=P(s,"- "),l=P(s,a),s.forEach(c),this.h()},h(){E(e,"class","font-normal text-gray-600 dark:text-gray-400")},m(i,s){D(i,e,s),m(e,t),m(e,l)},p(i,s){s&1&&a!==(a=i[24].equipamento_nome+"")&&W(l,a)},d(i){i&&c(e)}}}function Xe(n){let e,t,a,l,i;t=new ra({props:{class:"w-4 h-4"}});function s(){return n[14](n[26])}return{c(){e=b("button"),de(t.$$.fragment),this.h()},l(d){e=v(d,"BUTTON",{class:!0,title:!0});var u=k(e);se(t.$$.fragment,u),u.forEach(c),this.h()},h(){E(e,"class","p-1 rounded-sm text-red-600 hover:bg-red-100 dark:hover:bg-red-800/20 transition-colors"),E(e,"title","Remover item")},m(d,u){D(d,e,u),re(t,e,null),a=!0,l||(i=Yt(e,"click",s),l=!0)},p(d,u){n=d},i(d){a||(T(t.$$.fragment,d),a=!0)},o(d){L(t.$$.fragment,d),a=!1},d(d){d&&c(e),ne(t),l=!1,i()}}}function Ye(n){let e,t=n[27].label+"",a,l;return{c(){e=b("option"),a=V(t),this.h()},l(i){e=v(i,"OPTION",{});var s=k(e);a=P(s,t),s.forEach(c),this.h()},h(){e.__value=l=n[27].value,Fe(e,e.__value)},m(i,s){D(i,e,s),m(e,a)},p(i,s){s&140&&t!==(t=i[27].label+"")&&W(a,t),s&140&&l!==(l=i[27].value)&&(e.__value=l,Fe(e,e.__value))},d(i){i&&c(e)}}}function ga(n){let e,t="Selecione...",a,l,i=xe(n[7]?n[2]:n[3]),s=[];for(let d=0;d<i.length;d+=1)s[d]=Ye(Ge(n,i,d));return{c(){e=b("option"),e.textContent=t,a=C();for(let d=0;d<s.length;d+=1)s[d].c();l=ke(),this.h()},l(d){e=v(d,"OPTION",{"data-svelte-h":!0}),_e(e)!=="svelte-6uo3hd"&&(e.textContent=t),a=A(d);for(let u=0;u<s.length;u+=1)s[u].l(d);l=ke(),this.h()},h(){e.__value="",Fe(e,e.__value)},m(d,u){D(d,e,u),D(d,a,u);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(d,u);D(d,l,u)},p(d,u){if(u&140){i=xe(d[7]?d[2]:d[3]);let _;for(_=0;_<i.length;_+=1){const o=Ge(d,i,_);s[_]?s[_].p(o,u):(s[_]=Ye(o),s[_].c(),s[_].m(l.parentNode,l))}for(;_<s.length;_+=1)s[_].d(1);s.length=i.length}},d(d){d&&(c(e),c(a),c(l)),Oe(s,d)}}}function et(n){let e,t,a=n[24].quantidade_disponivel+"",l,i;return{c(){e=b("span"),t=V("(m√°x: "),l=V(a),i=V(")"),this.h()},l(s){e=v(s,"SPAN",{class:!0});var d=k(e);t=P(d,"(m√°x: "),l=P(d,a),i=P(d,")"),d.forEach(c),this.h()},h(){E(e,"class","text-xs text-gray-500")},m(s,d){D(s,e,d),m(e,t),m(e,l),m(e,i)},p(s,d){d&1&&a!==(a=s[24].quantidade_disponivel+"")&&W(l,a)},d(s){s&&c(e)}}}function tt(n){let e,t,a,l,i,s,d;function u(..._){return n[17](n[26],..._)}return s=new He({props:{id:"custo-"+n[26],type:"number",min:"0",step:"0.01",value:n[24].custo_unitario,disabled:n[1],placeholder:"Custo unit√°rio (R$)",class:"rounded-sm text-sm"}}),s.$on("input",u),{c(){e=b("div"),t=b("label"),a=V("Custo Unit√°rio (R$)"),i=C(),de(s.$$.fragment),this.h()},l(_){e=v(_,"DIV",{class:!0});var o=k(e);t=v(o,"LABEL",{for:!0,class:!0});var r=k(t);a=P(r,"Custo Unit√°rio (R$)"),r.forEach(c),i=A(o),se(s.$$.fragment,o),o.forEach(c),this.h()},h(){E(t,"for",l="custo-"+n[26]),E(t,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(e,"class","md:col-span-3")},m(_,o){D(_,e,o),m(e,t),m(t,a),m(e,i),re(s,e,null),d=!0},p(_,o){n=_,(!d||o&1&&l!==(l="custo-"+n[26]))&&E(t,"for",l);const r={};o&1&&(r.id="custo-"+n[26]),o&1&&(r.value=n[24].custo_unitario),o&2&&(r.disabled=n[1]),s.$set(r)},i(_){d||(T(s.$$.fragment,_),d=!0)},o(_){L(s.$$.fragment,_),d=!1},d(_){_&&c(e),ne(s)}}}function at(n){let e,t,a,l,i=n[24].equipamento_nome+"",s,d,u,_,o,r,f,h=n[24].quantidade+"",p,$,I=n[4]&&n[24].custo_unitario!=null&&typeof n[24].custo_unitario=="number"&&!isNaN(n[24].custo_unitario),F,R=n[24].categoria&&lt(n),O=n[24].numero_ca&&it(n),g=I&&ot(n),y=n[24].quantidade_disponivel!==void 0&&nt(n);return{c(){e=b("div"),t=b("div"),a=b("div"),l=b("h6"),s=V(i),d=C(),R&&R.c(),u=C(),O&&O.c(),_=C(),o=b("div"),r=b("p"),f=V("Qtd: "),p=V(h),$=C(),g&&g.c(),F=C(),y&&y.c(),this.h()},l(j){e=v(j,"DIV",{class:!0});var U=k(e);t=v(U,"DIV",{class:!0});var X=k(t);a=v(X,"DIV",{});var H=k(a);l=v(H,"H6",{class:!0});var N=k(l);s=P(N,i),N.forEach(c),d=A(H),R&&R.l(H),u=A(H),O&&O.l(H),H.forEach(c),_=A(X),o=v(X,"DIV",{class:!0});var B=k(o);r=v(B,"P",{class:!0});var ie=k(r);f=P(ie,"Qtd: "),p=P(ie,h),ie.forEach(c),$=A(B),g&&g.l(B),F=A(B),y&&y.l(B),B.forEach(c),X.forEach(c),U.forEach(c),this.h()},h(){E(l,"class","text-sm font-medium text-gray-900 dark:text-white"),E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(o,"class","text-right"),E(t,"class","flex items-start justify-between"),E(e,"class","mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(j,U){D(j,e,U),m(e,t),m(t,a),m(a,l),m(l,s),m(a,d),R&&R.m(a,null),m(a,u),O&&O.m(a,null),m(t,_),m(t,o),m(o,r),m(r,f),m(r,p),m(o,$),g&&g.m(o,null),m(o,F),y&&y.m(o,null)},p(j,U){U&1&&i!==(i=j[24].equipamento_nome+"")&&W(s,i),j[24].categoria?R?R.p(j,U):(R=lt(j),R.c(),R.m(a,u)):R&&(R.d(1),R=null),j[24].numero_ca?O?O.p(j,U):(O=it(j),O.c(),O.m(a,null)):O&&(O.d(1),O=null),U&1&&h!==(h=j[24].quantidade+"")&&W(p,h),U&17&&(I=j[4]&&j[24].custo_unitario!=null&&typeof j[24].custo_unitario=="number"&&!isNaN(j[24].custo_unitario)),I?g?g.p(j,U):(g=ot(j),g.c(),g.m(o,F)):g&&(g.d(1),g=null),j[24].quantidade_disponivel!==void 0?y?y.p(j,U):(y=nt(j),y.c(),y.m(o,null)):y&&(y.d(1),y=null)},d(j){j&&c(e),R&&R.d(),O&&O.d(),g&&g.d(),y&&y.d()}}}function lt(n){let e,t,a=n[24].categoria+"",l;return{c(){e=b("p"),t=V("Categoria: "),l=V(a),this.h()},l(i){e=v(i,"P",{class:!0});var s=k(e);t=P(s,"Categoria: "),l=P(s,a),s.forEach(c),this.h()},h(){E(e,"class","text-xs text-gray-600 dark:text-gray-400")},m(i,s){D(i,e,s),m(e,t),m(e,l)},p(i,s){s&1&&a!==(a=i[24].categoria+"")&&W(l,a)},d(i){i&&c(e)}}}function it(n){let e,t,a=n[24].numero_ca+"",l;return{c(){e=b("p"),t=V("CA: "),l=V(a),this.h()},l(i){e=v(i,"P",{class:!0});var s=k(e);t=P(s,"CA: "),l=P(s,a),s.forEach(c),this.h()},h(){E(e,"class","text-xs text-gray-600 dark:text-gray-400")},m(i,s){D(i,e,s),m(e,t),m(e,l)},p(i,s){s&1&&a!==(a=i[24].numero_ca+"")&&W(l,a)},d(i){i&&c(e)}}}function ot(n){let e,t,a=n[24].custo_unitario.toFixed(2)+"",l,i,s,d,u=(n[24].quantidade*n[24].custo_unitario).toFixed(2)+"",_;return{c(){e=b("p"),t=V("Unit: R$ "),l=V(a),i=C(),s=b("p"),d=V("Total: R$ "),_=V(u),this.h()},l(o){e=v(o,"P",{class:!0});var r=k(e);t=P(r,"Unit: R$ "),l=P(r,a),r.forEach(c),i=A(o),s=v(o,"P",{class:!0});var f=k(s);d=P(f,"Total: R$ "),_=P(f,u),f.forEach(c),this.h()},h(){E(e,"class","text-xs text-gray-600 dark:text-gray-400"),E(s,"class","text-sm font-medium text-green-600 dark:text-green-400")},m(o,r){D(o,e,r),m(e,t),m(e,l),D(o,i,r),D(o,s,r),m(s,d),m(s,_)},p(o,r){r&1&&a!==(a=o[24].custo_unitario.toFixed(2)+"")&&W(l,a),r&1&&u!==(u=(o[24].quantidade*o[24].custo_unitario).toFixed(2)+"")&&W(_,u)},d(o){o&&(c(e),c(i),c(s))}}}function nt(n){let e,t,a=n[24].quantidade_disponivel+"",l;return{c(){e=b("p"),t=V("Dispon√≠vel: "),l=V(a),this.h()},l(i){e=v(i,"P",{class:!0});var s=k(e);t=P(s,"Dispon√≠vel: "),l=P(s,a),s.forEach(c),this.h()},h(){E(e,"class","text-xs text-gray-600 dark:text-gray-400")},m(i,s){D(i,e,s),m(e,t),m(e,l)},p(i,s){s&1&&a!==(a=i[24].quantidade_disponivel+"")&&W(l,a)},d(i){i&&c(e)}}}function rt(n){let e,t;return e=new Zt({props:{color:"red",class:"mt-3 rounded-sm",$$slots:{default:[va]},$$scope:{ctx:n}}}),{c(){de(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,l){re(e,a,l),t=!0},p(a,l){const i={};l&1073741889&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){L(e.$$.fragment,a),t=!1},d(a){ne(e,a)}}}function va(n){let e,t=n[6][n[24].temp_id]+"",a;return{c(){e=b("span"),a=V(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var i=k(e);a=P(i,t),i.forEach(c),this.h()},h(){E(e,"class","text-sm")},m(l,i){D(l,e,i),m(e,a)},p(l,i){i&65&&t!==(t=l[6][l[24].temp_id]+"")&&W(a,t)},d(l){l&&c(e)}}}function st(n,e){let t,a,l,i,s=e[26]+1+"",d,u,_,o,r,f,h,p=e[7]?"Tipo de EPI":"Item do Estoque",$,I,F,R,O,g,y,j,U,X,H,N,B,ie,Q,Y,te=e[24].equipamento_nome&&We(e),J=!e[1]&&e[0].length>1&&Xe(e);function De(...G){return e[15](e[26],...G)}R=new Xt({props:{id:"item-select-"+e[26],value:e[7]?e[24].tipo_epi_id:e[24].estoque_item_id,disabled:e[1],class:"rounded-sm text-sm",$$slots:{default:[ga]},$$scope:{ctx:e}}}),R.$on("change",De);let ee=e[24].quantidade_disponivel!==void 0&&et(e);function fe(...G){return e[16](e[26],...G)}H=new He({props:{id:"quantidade-"+e[26],type:"number",min:"1",max:e[24].quantidade_disponivel||void 0,value:e[24].quantidade,disabled:e[1],placeholder:"Qtd",class:"rounded-sm text-sm"}}),H.$on("input",fe);let M=e[4]&&tt(e),Z=e[24].equipamento_nome&&at(e),ce=e[6][e[24].temp_id]&&rt(e);return{key:n,first:null,c(){t=b("div"),a=b("div"),l=b("h5"),i=V("Item "),d=V(s),u=C(),te&&te.c(),_=C(),J&&J.c(),o=C(),r=b("div"),f=b("div"),h=b("label"),$=V(p),F=C(),de(R.$$.fragment),O=C(),g=b("div"),y=b("label"),j=V(`Quantidade
                `),ee&&ee.c(),X=C(),de(H.$$.fragment),N=C(),M&&M.c(),B=C(),Z&&Z.c(),ie=C(),ce&&ce.c(),Q=C(),this.h()},l(G){t=v(G,"DIV",{class:!0});var z=k(t);a=v(z,"DIV",{class:!0});var K=k(a);l=v(K,"H5",{class:!0});var w=k(l);i=P(w,"Item "),d=P(w,s),u=A(w),te&&te.l(w),w.forEach(c),_=A(K),J&&J.l(K),K.forEach(c),o=A(z),r=v(z,"DIV",{class:!0});var le=k(r);f=v(le,"DIV",{class:!0});var pe=k(f);h=v(pe,"LABEL",{for:!0,class:!0});var he=k(h);$=P(he,p),he.forEach(c),F=A(pe),se(R.$$.fragment,pe),pe.forEach(c),O=A(le),g=v(le,"DIV",{});var oe=k(g);y=v(oe,"LABEL",{for:!0,class:!0});var Ae=k(y);j=P(Ae,`Quantidade
                `),ee&&ee.l(Ae),Ae.forEach(c),X=A(oe),se(H.$$.fragment,oe),oe.forEach(c),N=A(le),M&&M.l(le),le.forEach(c),B=A(z),Z&&Z.l(z),ie=A(z),ce&&ce.l(z),Q=A(z),z.forEach(c),this.h()},h(){E(l,"class","text-sm font-medium text-gray-900 dark:text-white"),E(a,"class","flex items-start justify-between mb-4"),E(h,"for",I="item-select-"+e[26]),E(h,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(f,"class","md:col-span-2"),E(y,"for",U="quantidade-"+e[26]),E(y,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(r,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(t,"class","w-full border border-gray-200 dark:border-gray-700 rounded-sm p-4 bg-white dark:bg-gray-800"),this.first=t},m(G,z){D(G,t,z),m(t,a),m(a,l),m(l,i),m(l,d),m(l,u),te&&te.m(l,null),m(a,_),J&&J.m(a,null),m(t,o),m(t,r),m(r,f),m(f,h),m(h,$),m(f,F),re(R,f,null),m(r,O),m(r,g),m(g,y),m(y,j),ee&&ee.m(y,null),m(g,X),re(H,g,null),m(r,N),M&&M.m(r,null),m(t,B),Z&&Z.m(t,null),m(t,ie),ce&&ce.m(t,null),m(t,Q),Y=!0},p(G,z){e=G,(!Y||z&1)&&s!==(s=e[26]+1+"")&&W(d,s),e[24].equipamento_nome?te?te.p(e,z):(te=We(e),te.c(),te.m(l,null)):te&&(te.d(1),te=null),!e[1]&&e[0].length>1?J?(J.p(e,z),z&3&&T(J,1)):(J=Xe(e),J.c(),T(J,1),J.m(a,null)):J&&($e(),L(J,1,1,()=>{J=null}),Ee()),(!Y||z&128)&&p!==(p=e[7]?"Tipo de EPI":"Item do Estoque")&&W($,p),(!Y||z&1&&I!==(I="item-select-"+e[26]))&&E(h,"for",I);const K={};z&1&&(K.id="item-select-"+e[26]),z&129&&(K.value=e[7]?e[24].tipo_epi_id:e[24].estoque_item_id),z&2&&(K.disabled=e[1]),z&1073741964&&(K.$$scope={dirty:z,ctx:e}),R.$set(K),e[24].quantidade_disponivel!==void 0?ee?ee.p(e,z):(ee=et(e),ee.c(),ee.m(y,null)):ee&&(ee.d(1),ee=null),(!Y||z&1&&U!==(U="quantidade-"+e[26]))&&E(y,"for",U);const w={};z&1&&(w.id="quantidade-"+e[26]),z&1&&(w.max=e[24].quantidade_disponivel||void 0),z&1&&(w.value=e[24].quantidade),z&2&&(w.disabled=e[1]),H.$set(w),e[4]?M?(M.p(e,z),z&16&&T(M,1)):(M=tt(e),M.c(),T(M,1),M.m(r,null)):M&&($e(),L(M,1,1,()=>{M=null}),Ee()),e[24].equipamento_nome?Z?Z.p(e,z):(Z=at(e),Z.c(),Z.m(t,ie)):Z&&(Z.d(1),Z=null),e[6][e[24].temp_id]?ce?(ce.p(e,z),z&65&&T(ce,1)):(ce=rt(e),ce.c(),T(ce,1),ce.m(t,Q)):ce&&($e(),L(ce,1,1,()=>{ce=null}),Ee())},i(G){Y||(T(J),T(R.$$.fragment,G),T(H.$$.fragment,G),T(M),T(ce),Y=!0)},o(G){L(J),L(R.$$.fragment,G),L(H.$$.fragment,G),L(M),L(ce),Y=!1},d(G){G&&c(t),te&&te.d(),J&&J.d(),ne(R),ee&&ee.d(),ne(H),M&&M.d(),Z&&Z.d(),ce&&ce.d()}}}function dt(n){let e,t,a,l,i,s=n[0].length+"",d,u,_=n[4]&&ft(n);return{c(){e=b("div"),t=b("div"),a=b("div"),l=b("span"),i=V("Total de Itens: "),d=V(s),u=C(),_&&_.c(),this.h()},l(o){e=v(o,"DIV",{class:!0});var r=k(e);t=v(r,"DIV",{class:!0});var f=k(t);a=v(f,"DIV",{class:!0});var h=k(a);l=v(h,"SPAN",{class:!0});var p=k(l);i=P(p,"Total de Itens: "),d=P(p,s),p.forEach(c),u=A(h),_&&_.l(h),h.forEach(c),f.forEach(c),r.forEach(c),this.h()},h(){E(l,"class","text-sm font-medium text-gray-900 dark:text-white"),E(a,"class","flex items-center space-x-4"),E(t,"class","flex justify-between items-center"),E(e,"class","w-full border border-gray-200 dark:border-gray-700 rounded-sm p-4 bg-gray-50 dark:bg-gray-800")},m(o,r){D(o,e,r),m(e,t),m(t,a),m(a,l),m(l,i),m(l,d),m(a,u),_&&_.m(a,null)},p(o,r){r&1&&s!==(s=o[0].length+"")&&W(d,s),o[4]?_?_.p(o,r):(_=ft(o),_.c(),_.m(a,null)):_&&(_.d(1),_=null)},d(o){o&&c(e),_&&_.d()}}}function ft(n){let e,t,a,l,i=n[0].reduce(n[18],0).toFixed(2)+"",s;return{c(){e=b("span"),t=V(`Valor Total: 
                `),a=b("span"),l=V("R$ "),s=V(i),this.h()},l(d){e=v(d,"SPAN",{class:!0});var u=k(e);t=P(u,`Valor Total: 
                `),a=v(u,"SPAN",{class:!0});var _=k(a);l=P(_,"R$ "),s=P(_,i),_.forEach(c),u.forEach(c),this.h()},h(){E(a,"class","text-lg font-bold text-green-600 dark:text-green-400"),E(e,"class","text-sm font-medium text-gray-900 dark:text-white")},m(d,u){D(d,e,u),m(e,t),m(e,a),m(a,l),m(a,s)},p(d,u){u&1&&i!==(i=d[0].reduce(d[18],0).toFixed(2)+"")&&W(s,i)},d(d){d&&c(e)}}}function ba(n){let e=n[7]?"Adicione EPIs do cat√°logo":"Selecione itens do estoque",t;return{c(){t=V(e)},l(a){t=P(a,e)},m(a,l){D(a,t,l)},p(a,l){l&128&&e!==(e=a[7]?"Adicione EPIs do cat√°logo":"Selecione itens do estoque")&&W(t,e)},d(a){a&&c(t)}}}function $a(n){let e;return{c(){e=V("Esta nota n√£o possui itens registrados")},l(t){e=P(t,"Esta nota n√£o possui itens registrados")},m(t,a){D(t,e,a)},p:Ne,d(t){t&&c(e)}}}function ut(n){let e,t;return e=new Wt({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Ea]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){de(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,l){re(e,a,l),t=!0},p(a,l){const i={};l&1073741824&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){L(e.$$.fragment,a),t=!1},d(a){ne(e,a)}}}function Ea(n){let e,t,a;return e=new ze({props:{class:"w-4 h-4 mr-2"}}),{c(){de(e.$$.fragment),t=V(`
          Adicionar Primeiro Item`)},l(l){se(e.$$.fragment,l),t=P(l,`
          Adicionar Primeiro Item`)},m(l,i){re(e,l,i),D(l,t,i),a=!0},p:Ne,i(l){a||(T(e.$$.fragment,l),a=!0)},o(l){L(e.$$.fragment,l),a=!1},d(l){l&&c(t),ne(e,l)}}}function ka(n){let e,t,a,l,i=n[1]?"Nenhum item encontrado":"Nenhum item adicionado",s,d,u,_,o,r;t=new ze({props:{class:"w-8 h-8 text-gray-400"}});function f(I,F){return I[1]?$a:ba}let h=f(n),p=h(n),$=!n[1]&&ut(n);return{c(){e=b("div"),de(t.$$.fragment),a=C(),l=b("h3"),s=V(i),d=C(),u=b("p"),p.c(),_=C(),$&&$.c(),o=ke(),this.h()},l(I){e=v(I,"DIV",{class:!0});var F=k(e);se(t.$$.fragment,F),F.forEach(c),a=A(I),l=v(I,"H3",{class:!0});var R=k(l);s=P(R,i),R.forEach(c),d=A(I),u=v(I,"P",{class:!0});var O=k(u);p.l(O),O.forEach(c),_=A(I),$&&$.l(I),o=ke(),this.h()},h(){E(e,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"),E(l,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),E(u,"class","text-gray-500 dark:text-gray-400 mb-4")},m(I,F){D(I,e,F),re(t,e,null),D(I,a,F),D(I,l,F),m(l,s),D(I,d,F),D(I,u,F),p.m(u,null),D(I,_,F),$&&$.m(I,F),D(I,o,F),r=!0},p(I,F){(!r||F&2)&&i!==(i=I[1]?"Nenhum item encontrado":"Nenhum item adicionado")&&W(s,i),h===(h=f(I))&&p?p.p(I,F):(p.d(1),p=h(I),p&&(p.c(),p.m(u,null))),I[1]?$&&($e(),L($,1,1,()=>{$=null}),Ee()):$?($.p(I,F),F&2&&T($,1)):($=ut(I),$.c(),T($,1),$.m(o.parentNode,o))},i(I){r||(T(t.$$.fragment,I),T($),r=!0)},o(I){L(t.$$.fragment,I),L($),r=!1},d(I){I&&(c(e),c(a),c(l),c(d),c(u),c(_),c(o)),ne(t),p.d(),$&&$.d(I)}}}function Da(n){let e,t,a,l,i,s,d,u,_,o=n[0].length>0&&Ke(n),r=!n[1]&&Ze(n);const f=[ha,pa,ma],h=[];function p($,I){return $[5]?0:$[0].length===0?1:2}return d=p(n),u=h[d]=f[d](n),{c(){e=b("div"),t=b("div"),a=b("h4"),l=V(`Itens da Nota
      `),o&&o.c(),i=C(),r&&r.c(),s=C(),u.c(),this.h()},l($){e=v($,"DIV",{class:!0});var I=k(e);t=v(I,"DIV",{class:!0});var F=k(t);a=v(F,"H4",{class:!0});var R=k(a);l=P(R,`Itens da Nota
      `),o&&o.l(R),R.forEach(c),i=A(F),r&&r.l(F),F.forEach(c),s=A(I),u.l(I),I.forEach(c),this.h()},h(){E(a,"class","text-lg font-semibold text-gray-900 dark:text-white"),E(t,"class","flex items-center justify-between"),E(e,"class","space-y-4")},m($,I){D($,e,I),m(e,t),m(t,a),m(a,l),o&&o.m(a,null),m(t,i),r&&r.m(t,null),m(e,s),h[d].m(e,null),_=!0},p($,[I]){$[0].length>0?o?(o.p($,I),I&1&&T(o,1)):(o=Ke($),o.c(),T(o,1),o.m(a,null)):o&&($e(),L(o,1,1,()=>{o=null}),Ee()),$[1]?r&&($e(),L(r,1,1,()=>{r=null}),Ee()):r?(r.p($,I),I&2&&T(r,1)):(r=Ze($),r.c(),T(r,1),r.m(t,null));let F=d;d=p($),d===F?h[d].p($,I):($e(),L(h[F],1,1,()=>{h[F]=null}),Ee(),u=h[d],u?u.p($,I):(u=h[d]=f[d]($),u.c()),T(u,1),u.m(e,null))},i($){_||(T(o),T(r),T(u),_=!0)},o($){L(o),L(r),L(u),_=!1},d($){$&&c(e),o&&o.d(),r&&r.d(),h[d].d()}}}function xa(){return`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function Ia(n,e,t){let a,l,i,{tipo:s}=e,{almoxarifadoId:d}=e,{itens:u=[]}=e,{readonly:_=!1}=e;const o=Gt();let r=[],f=[],h=!1,p={};Kt(async()=>{console.log("üèóÔ∏è NotaItensManagerSimplified: Inicializando",{tipo:s,almoxarifadoId:d}),await $()});async function $(){if(!(!d&&!l))try{t(5,h=!0),l?(t(2,r=await sa.obterOpcoesSelectComCache({apenasAtivos:!0})),console.log("üì¶ Tipos EPI carregados:",r.length)):(t(3,f=await da.obterItensDisponiveisComCache(d)),console.log("üì¶ Itens de estoque carregados:",f.length))}catch(N){console.error("Erro ao carregar op√ß√µes:",N),o("validationError","Erro ao carregar op√ß√µes dispon√≠veis")}finally{t(5,h=!1)}}function I(){const N={temp_id:xa(),quantidade:1,equipamento_nome:"",custo_unitario:a?0:void 0};l?N.tipo_epi_id="":N.estoque_item_id="",t(0,u=[...u,N]),o("itensChanged",u),console.log("‚ûï Item adicionado:",N.temp_id)}function F(N){const B=u[N];t(0,u=u.filter((ie,Q)=>Q!==N)),B&&p[B.temp_id]&&(delete p[B.temp_id],t(6,p={...p})),o("itensChanged",u),console.log("‚ûñ Item removido:",B==null?void 0:B.temp_id)}function R(N,B,ie){const Q=ie.target;O(N,B,Q.value)}function O(N,B,ie){const Q=u[N];if(Q){if(Q[B]=ie,B==="tipo_epi_id"&&ie){const Y=r.find(te=>te.value===ie);Y&&(Q.equipamento_nome=Y.label,Q.categoria=Y.categoria,Q.numero_ca=Y.numeroCA,Y.custoSugerido&&(!Q.custo_unitario||Q.custo_unitario===0)&&(Q.custo_unitario=Y.custoSugerido))}else if(B==="estoque_item_id"&&ie){const Y=f.find(te=>te.value===ie);Y&&(Q.equipamento_nome=Y.label,Q.categoria=Y.categoria,Q.numero_ca=Y.numeroCA,Q.quantidade_disponivel=Y.quantidadeDisponivel)}g(Q),t(0,u=[...u]),o("itensChanged",u)}}function g(N){if(t(6,p[N.temp_id]="",p),l&&!N.tipo_epi_id){t(6,p[N.temp_id]="Selecione um tipo de EPI",p);return}if(i&&!N.estoque_item_id){t(6,p[N.temp_id]="Selecione um item do estoque",p);return}if(!N.quantidade||N.quantidade<=0){t(6,p[N.temp_id]="Quantidade deve ser maior que zero",p);return}if(i&&N.quantidade_disponivel!==void 0&&N.quantidade>N.quantidade_disponivel){t(6,p[N.temp_id]=`Quantidade indispon√≠vel (m√°x: ${N.quantidade_disponivel})`,p);return}if(a&&(!N.custo_unitario||N.custo_unitario<=0)){t(6,p[N.temp_id]="Custo unit√°rio √© obrigat√≥rio para entradas",p);return}t(6,p[N.temp_id]="",p),o("validationError","")}const y=N=>F(N),j=(N,B)=>R(N,l?"tipo_epi_id":"estoque_item_id",B),U=(N,B)=>O(N,"quantidade",parseInt(B.target.value)||1),X=(N,B)=>O(N,"custo_unitario",parseFloat(B.target.value)||0),H=(N,B)=>{const ie=B.quantidade||0,Q=B.custo_unitario!=null&&typeof B.custo_unitario=="number"&&!isNaN(B.custo_unitario)?B.custo_unitario:0;return N+ie*Q};return n.$$set=N=>{"tipo"in N&&t(12,s=N.tipo),"almoxarifadoId"in N&&t(13,d=N.almoxarifadoId),"itens"in N&&t(0,u=N.itens),"readonly"in N&&t(1,_=N.readonly)},n.$$.update=()=>{n.$$.dirty&4096&&t(4,a=s==="ENTRADA"),n.$$.dirty&16&&t(7,l=a),n.$$.dirty&16&&(i=!a),n.$$.dirty&12288&&(s||d)&&$(),n.$$.dirty&15&&u.length===0&&!_&&(r.length>0||f.length>0)&&I()},[u,_,r,f,a,h,p,l,I,F,R,O,s,d,y,j,U,X,H]}class Aa extends Mt{constructor(e){super(),Qt(this,e,Ia,Da,Jt,{tipo:12,almoxarifadoId:13,itens:0,readonly:1})}}function ct(n,e,t){const a=n.slice();return a[53]=e[t],a}function _t(n,e,t){const a=n.slice();return a[53]=e[t],a}function mt(n,e,t){const a=n.slice();return a[53]=e[t],a}function pt(n,e,t){const a=n.slice();return a[50]=e[t],a[52]=t,a}function ht(n,e,t){const a=n.slice();return a[60]=e[t],a}function gt(n,e,t){const a=n.slice();return a[60]=e[t],a}function Ca(n){let e=n[9]&&(Object.keys(n[8]).length>0||n[7].length>0),t,a,l,i,s,d=e&&vt(n);const u=[qa,ya],_=[];function o(r,f){return r[0]==="view"?0:1}return l=o(n),i=_[l]=u[l](n),{c(){d&&d.c(),t=C(),a=b("div"),i.c(),this.h()},l(r){d&&d.l(r),t=A(r),a=v(r,"DIV",{class:!0});var f=k(a);i.l(f),f.forEach(c),this.h()},h(){E(a,"class","p-6 space-y-6")},m(r,f){d&&d.m(r,f),D(r,t,f),D(r,a,f),_[l].m(a,null),s=!0},p(r,f){f[0]&896&&(e=r[9]&&(Object.keys(r[8]).length>0||r[7].length>0)),e?d?(d.p(r,f),f[0]&896&&T(d,1)):(d=vt(r),d.c(),T(d,1),d.m(t.parentNode,t)):d&&($e(),L(d,1,1,()=>{d=null}),Ee());let h=l;l=o(r),l===h?_[l].p(r,f):($e(),L(_[h],1,1,()=>{_[h]=null}),Ee(),i=_[l],i?i.p(r,f):(i=_[l]=u[l](r),i.c()),T(i,1),i.m(a,null))},i(r){s||(T(d),T(i),s=!0)},o(r){L(d),L(i),s=!1},d(r){r&&(c(t),c(a)),d&&d.d(r),_[l].d()}}}function wa(n){let e,t,a;return t=new ua({}),{c(){e=b("div"),de(t.$$.fragment),this.h()},l(l){e=v(l,"DIV",{class:!0});var i=k(e);se(t.$$.fragment,i),i.forEach(c),this.h()},h(){E(e,"class","flex justify-center items-center py-12")},m(l,i){D(l,e,i),re(t,e,null),a=!0},p:Ne,i(l){a||(T(t.$$.fragment,l),a=!0)},o(l){L(t.$$.fragment,l),a=!1},d(l){l&&c(e),ne(t)}}}function vt(n){let e,t,a;return t=new Zt({props:{color:"red",class:"rounded-sm",$$slots:{default:[Na]},$$scope:{ctx:n}}}),{c(){e=b("div"),de(t.$$.fragment),this.h()},l(l){e=v(l,"DIV",{class:!0});var i=k(e);se(t.$$.fragment,i),i.forEach(c),this.h()},h(){E(e,"class","p-6 pb-0")},m(l,i){D(l,e,i),re(t,e,null),a=!0},p(l,i){const s={};i[0]&384|i[2]&8&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){a||(T(t.$$.fragment,l),a=!0)},o(l){L(t.$$.fragment,l),a=!1},d(l){l&&c(e),ne(t)}}}function bt(n){let e,t=n[60]+"",a;return{c(){e=b("li"),a=V(t)},l(l){e=v(l,"LI",{});var i=k(e);a=P(i,t),i.forEach(c)},m(l,i){D(l,e,i),m(e,a)},p(l,i){i[0]&256&&t!==(t=l[60]+"")&&W(a,t)},d(l){l&&c(e)}}}function $t(n){let e,t=n[60]+"",a;return{c(){e=b("li"),a=V(t)},l(l){e=v(l,"LI",{});var i=k(e);a=P(i,t),i.forEach(c)},m(l,i){D(l,e,i),m(e,a)},p(l,i){i[0]&128&&t!==(t=l[60]+"")&&W(a,t)},d(l){l&&c(e)}}}function Na(n){let e,t="Erros de valida√ß√£o:",a,l,i,s=xe(Object.values(n[8])),d=[];for(let o=0;o<s.length;o+=1)d[o]=bt(gt(n,s,o));let u=xe(n[7]),_=[];for(let o=0;o<u.length;o+=1)_[o]=$t(ht(n,u,o));return{c(){e=b("span"),e.textContent=t,a=C(),l=b("ul");for(let o=0;o<d.length;o+=1)d[o].c();i=C();for(let o=0;o<_.length;o+=1)_[o].c();this.h()},l(o){e=v(o,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-19ugpdw"&&(e.textContent=t),a=A(o),l=v(o,"UL",{class:!0});var r=k(l);for(let f=0;f<d.length;f+=1)d[f].l(r);i=A(r);for(let f=0;f<_.length;f+=1)_[f].l(r);r.forEach(c),this.h()},h(){E(e,"class","font-medium"),E(l,"class","mt-2 list-disc list-inside")},m(o,r){D(o,e,r),D(o,a,r),D(o,l,r);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(l,null);m(l,i);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(l,null)},p(o,r){if(r[0]&256){s=xe(Object.values(o[8]));let f;for(f=0;f<s.length;f+=1){const h=gt(o,s,f);d[f]?d[f].p(h,r):(d[f]=bt(h),d[f].c(),d[f].m(l,i))}for(;f<d.length;f+=1)d[f].d(1);d.length=s.length}if(r[0]&128){u=xe(o[7]);let f;for(f=0;f<u.length;f+=1){const h=ht(o,u,f);_[f]?_[f].p(h,r):(_[f]=$t(h),_[f].c(),_[f].m(l,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=u.length}},d(o){o&&(c(e),c(a),c(l)),Oe(d,o),Oe(_,o)}}}function ya(n){let e,t,a="Dados da Nota",l,i,s,d,u,_,o,r,f,h,p,$,I,F,R,O,g,y,j,U,X,H,N,B,ie,Q,Y,te,J,De,ee,fe,M;d=new Te({props:{for:"tipo_nota",class:"mb-2 text-gray-900 dark:text-white",$$slots:{default:[Ta]},$$scope:{ctx:n}}});function Z(x){n[34](x)}let ce={id:"tipo_nota",disabled:n[0]==="view",class:"rounded-sm "+(n[8].tipo_nota?"border-red-500":""),$$slots:{default:[Pa]},$$scope:{ctx:n}};n[1].tipo_nota!==void 0&&(ce.value=n[1].tipo_nota),_=new Xt({props:ce}),Pe.push(()=>Ve(_,"value",Z));let G=n[8].tipo_nota&&Et(n);p=new Te({props:{for:"data_documento",class:"mb-2 text-gray-900 dark:text-white",$$slots:{default:[Va]},$$scope:{ctx:n}}});function z(x){n[35](x)}let K={id:"data_documento",type:"date",size:"md",disabled:n[0]==="view",class:"rounded-sm h-10 text-sm "+(n[8].data_documento?"border-red-500":"")};n[1].data_documento!==void 0&&(K.value=n[1].data_documento),I=new He({props:K}),Pe.push(()=>Ve(I,"value",z));let w=n[8].data_documento&&kt(n);const le=[Sa,Ra],pe=[];function he(x,S){return x[1].tipo_nota==="ENTRADA"?0:1}g=he(n),y=pe[g]=le[g](n);let oe=n[1].tipo_nota==="TRANSFERENCIA"&&Nt(n);H=new Te({props:{for:"observacoes",class:"mb-2 text-gray-900 dark:text-white",$$slots:{default:[Ha]},$$scope:{ctx:n}}});function Ae(x){n[39](x)}let be={id:"observacoes",disabled:n[0]==="view",placeholder:"Observa√ß√µes sobre a movimenta√ß√£o...",rows:"3",class:"rounded-sm "+(n[8].observacoes?"border-red-500":"")};n[1].observacoes!==void 0&&(be.value=n[1].observacoes),B=new la({props:be}),Pe.push(()=>Ve(B,"value",Ae));let ge=n[8].observacoes&&Pt(n);function ye(x){n[40](x)}let Ce={tipo:n[1].tipo_nota,almoxarifadoId:n[1].tipo_nota==="ENTRADA"?n[1].almoxarifado_destino_id:n[1].almoxarifado_origem_id,readonly:n[0]==="view"};n[2]!==void 0&&(Ce.itens=n[2]),J=new Aa({props:Ce}),Pe.push(()=>Ve(J,"itens",ye)),J.$on("itensChanged",n[20]),J.$on("validationError",n[21]);let q=n[5]>0&&Vt(n);return{c(){e=b("div"),t=b("h3"),t.textContent=a,l=C(),i=b("div"),s=b("div"),de(d.$$.fragment),u=C(),de(_.$$.fragment),r=C(),G&&G.c(),f=C(),h=b("div"),de(p.$$.fragment),$=C(),de(I.$$.fragment),R=C(),w&&w.c(),O=C(),y.c(),j=C(),oe&&oe.c(),U=C(),X=b("div"),de(H.$$.fragment),N=C(),de(B.$$.fragment),Q=C(),ge&&ge.c(),Y=C(),te=b("div"),de(J.$$.fragment),ee=C(),q&&q.c(),fe=ke(),this.h()},l(x){e=v(x,"DIV",{class:!0});var S=k(e);t=v(S,"H3",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-in15tf"&&(t.textContent=a),l=A(S),i=v(S,"DIV",{class:!0});var ue=k(i);s=v(ue,"DIV",{});var ve=k(s);se(d.$$.fragment,ve),u=A(ve),se(_.$$.fragment,ve),r=A(ve),G&&G.l(ve),ve.forEach(c),f=A(ue),h=v(ue,"DIV",{});var ae=k(h);se(p.$$.fragment,ae),$=A(ae),se(I.$$.fragment,ae),R=A(ae),w&&w.l(ae),ae.forEach(c),O=A(ue),y.l(ue),j=A(ue),oe&&oe.l(ue),ue.forEach(c),U=A(S),X=v(S,"DIV",{});var me=k(X);se(H.$$.fragment,me),N=A(me),se(B.$$.fragment,me),Q=A(me),ge&&ge.l(me),me.forEach(c),S.forEach(c),Y=A(x),te=v(x,"DIV",{class:!0});var Ie=k(te);se(J.$$.fragment,Ie),Ie.forEach(c),ee=A(x),q&&q.l(x),fe=ke(),this.h()},h(){E(t,"class","text-lg font-semibold text-gray-900 dark:text-white"),E(i,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),E(e,"class","space-y-4"),E(te,"class","border-t border-gray-200 dark:border-gray-700 pt-6")},m(x,S){D(x,e,S),m(e,t),m(e,l),m(e,i),m(i,s),re(d,s,null),m(s,u),re(_,s,null),m(s,r),G&&G.m(s,null),m(i,f),m(i,h),re(p,h,null),m(h,$),re(I,h,null),m(h,R),w&&w.m(h,null),m(i,O),pe[g].m(i,null),m(i,j),oe&&oe.m(i,null),m(e,U),m(e,X),re(H,X,null),m(X,N),re(B,X,null),m(X,Q),ge&&ge.m(X,null),D(x,Y,S),D(x,te,S),re(J,te,null),D(x,ee,S),q&&q.m(x,S),D(x,fe,S),M=!0},p(x,S){const ue={};S[2]&8&&(ue.$$scope={dirty:S,ctx:x}),d.$set(ue);const ve={};S[0]&1&&(ve.disabled=x[0]==="view"),S[0]&256&&(ve.class="rounded-sm "+(x[8].tipo_nota?"border-red-500":"")),S[2]&8&&(ve.$$scope={dirty:S,ctx:x}),!o&&S[0]&2&&(o=!0,ve.value=x[1].tipo_nota,Re(()=>o=!1)),_.$set(ve),x[8].tipo_nota?G?G.p(x,S):(G=Et(x),G.c(),G.m(s,null)):G&&(G.d(1),G=null);const ae={};S[2]&8&&(ae.$$scope={dirty:S,ctx:x}),p.$set(ae);const me={};S[0]&1&&(me.disabled=x[0]==="view"),S[0]&256&&(me.class="rounded-sm h-10 text-sm "+(x[8].data_documento?"border-red-500":"")),!F&&S[0]&2&&(F=!0,me.value=x[1].data_documento,Re(()=>F=!1)),I.$set(me),x[8].data_documento?w?w.p(x,S):(w=kt(x),w.c(),w.m(h,null)):w&&(w.d(1),w=null);let Ie=g;g=he(x),g===Ie?pe[g].p(x,S):($e(),L(pe[Ie],1,1,()=>{pe[Ie]=null}),Ee(),y=pe[g],y?y.p(x,S):(y=pe[g]=le[g](x),y.c()),T(y,1),y.m(i,j)),x[1].tipo_nota==="TRANSFERENCIA"?oe?(oe.p(x,S),S[0]&2&&T(oe,1)):(oe=Nt(x),oe.c(),T(oe,1),oe.m(i,null)):oe&&($e(),L(oe,1,1,()=>{oe=null}),Ee());const qe={};S[2]&8&&(qe.$$scope={dirty:S,ctx:x}),H.$set(qe);const we={};S[0]&1&&(we.disabled=x[0]==="view"),S[0]&256&&(we.class="rounded-sm "+(x[8].observacoes?"border-red-500":"")),!ie&&S[0]&2&&(ie=!0,we.value=x[1].observacoes,Re(()=>ie=!1)),B.$set(we),x[8].observacoes?ge?ge.p(x,S):(ge=Pt(x),ge.c(),ge.m(X,null)):ge&&(ge.d(1),ge=null);const Se={};S[0]&2&&(Se.tipo=x[1].tipo_nota),S[0]&2&&(Se.almoxarifadoId=x[1].tipo_nota==="ENTRADA"?x[1].almoxarifado_destino_id:x[1].almoxarifado_origem_id),S[0]&1&&(Se.readonly=x[0]==="view"),!De&&S[0]&4&&(De=!0,Se.itens=x[2],Re(()=>De=!1)),J.$set(Se),x[5]>0?q?q.p(x,S):(q=Vt(x),q.c(),q.m(fe.parentNode,fe)):q&&(q.d(1),q=null)},i(x){M||(T(d.$$.fragment,x),T(_.$$.fragment,x),T(p.$$.fragment,x),T(I.$$.fragment,x),T(y),T(oe),T(H.$$.fragment,x),T(B.$$.fragment,x),T(J.$$.fragment,x),M=!0)},o(x){L(d.$$.fragment,x),L(_.$$.fragment,x),L(p.$$.fragment,x),L(I.$$.fragment,x),L(y),L(oe),L(H.$$.fragment,x),L(B.$$.fragment,x),L(J.$$.fragment,x),M=!1},d(x){x&&(c(e),c(Y),c(te),c(ee),c(fe)),ne(d),ne(_),G&&G.d(),ne(p),ne(I),w&&w.d(),pe[g].d(),oe&&oe.d(),ne(H),ne(B),ge&&ge.d(),ne(J),q&&q.d(x)}}}function qa(n){let e,t,a="Informa√ß√µes da Nota",l,i,s,d,u,_="Tipo de Nota",o,r,f,h,p,$,I="Data do Documento",F,R,O=new Date(n[1].data_documento).toLocaleDateString("pt-BR")+"",g,y,j,U,X,H,N,B,ie,Q,Y,te,J,De;f=new Be({props:{color:Qe(n[1].tipo_nota),class:"w-fit rounded-sm font-medium",$$slots:{default:[za]},$$scope:{ctx:n}}});let ee=n[1].almoxarifado_origem_id&&Rt(n),fe=n[1].almoxarifado_destino_id&&Ot(n),M=n[1].observacoes&&Lt(n),Z=n[5]>0&&jt(n);const ce=[Ja,Qa],G=[];function z(w,le){return w[2].length===0?0:1}Q=z(n),Y=G[Q]=ce[Q](n);let K=n[5]>0&&Ht(n);return{c(){e=b("div"),t=b("h3"),t.textContent=a,l=C(),i=b("div"),s=b("div"),d=b("div"),u=b("dt"),u.textContent=_,o=C(),r=b("dd"),de(f.$$.fragment),h=C(),p=b("div"),$=b("dt"),$.textContent=I,F=C(),R=b("dd"),g=V(O),y=C(),ee&&ee.c(),j=C(),fe&&fe.c(),U=C(),M&&M.c(),X=C(),H=b("div"),N=b("h3"),B=V(`Itens da Nota
            `),Z&&Z.c(),ie=C(),Y.c(),te=C(),K&&K.c(),J=ke(),this.h()},l(w){e=v(w,"DIV",{class:!0});var le=k(e);t=v(le,"H3",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-8lkdze"&&(t.textContent=a),l=A(le),i=v(le,"DIV",{class:!0});var pe=k(i);s=v(pe,"DIV",{class:!0});var he=k(s);d=v(he,"DIV",{});var oe=k(d);u=v(oe,"DT",{class:!0,"data-svelte-h":!0}),_e(u)!=="svelte-pciq5c"&&(u.textContent=_),o=A(oe),r=v(oe,"DD",{class:!0});var Ae=k(r);se(f.$$.fragment,Ae),Ae.forEach(c),oe.forEach(c),h=A(he),p=v(he,"DIV",{});var be=k(p);$=v(be,"DT",{class:!0,"data-svelte-h":!0}),_e($)!=="svelte-1vn6ac2"&&($.textContent=I),F=A(be),R=v(be,"DD",{class:!0});var ge=k(R);g=P(ge,O),ge.forEach(c),be.forEach(c),y=A(he),ee&&ee.l(he),j=A(he),fe&&fe.l(he),U=A(he),M&&M.l(he),he.forEach(c),pe.forEach(c),le.forEach(c),X=A(w),H=v(w,"DIV",{class:!0});var ye=k(H);N=v(ye,"H3",{class:!0});var Ce=k(N);B=P(Ce,`Itens da Nota
            `),Z&&Z.l(Ce),Ce.forEach(c),ie=A(ye),Y.l(ye),ye.forEach(c),te=A(w),K&&K.l(w),J=ke(),this.h()},h(){E(t,"class","text-lg font-semibold text-gray-900 dark:text-white"),E(u,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(r,"class","mt-1 text-sm text-gray-900 dark:text-white"),E($,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(R,"class","mt-1 text-sm text-gray-900 dark:text-white"),E(s,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),E(i,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"),E(e,"class","space-y-4"),E(N,"class","text-lg font-semibold text-gray-900 dark:text-white"),E(H,"class","space-y-4")},m(w,le){D(w,e,le),m(e,t),m(e,l),m(e,i),m(i,s),m(s,d),m(d,u),m(d,o),m(d,r),re(f,r,null),m(s,h),m(s,p),m(p,$),m(p,F),m(p,R),m(R,g),m(s,y),ee&&ee.m(s,null),m(s,j),fe&&fe.m(s,null),m(s,U),M&&M.m(s,null),D(w,X,le),D(w,H,le),m(H,N),m(N,B),Z&&Z.m(N,null),m(H,ie),G[Q].m(H,null),D(w,te,le),K&&K.m(w,le),D(w,J,le),De=!0},p(w,le){const pe={};le[0]&2&&(pe.color=Qe(w[1].tipo_nota)),le[0]&2|le[2]&8&&(pe.$$scope={dirty:le,ctx:w}),f.$set(pe),(!De||le[0]&2)&&O!==(O=new Date(w[1].data_documento).toLocaleDateString("pt-BR")+"")&&W(g,O),w[1].almoxarifado_origem_id?ee?ee.p(w,le):(ee=Rt(w),ee.c(),ee.m(s,j)):ee&&(ee.d(1),ee=null),w[1].almoxarifado_destino_id?fe?fe.p(w,le):(fe=Ot(w),fe.c(),fe.m(s,U)):fe&&(fe.d(1),fe=null),w[1].observacoes?M?M.p(w,le):(M=Lt(w),M.c(),M.m(s,null)):M&&(M.d(1),M=null),w[5]>0?Z?(Z.p(w,le),le[0]&32&&T(Z,1)):(Z=jt(w),Z.c(),T(Z,1),Z.m(N,null)):Z&&($e(),L(Z,1,1,()=>{Z=null}),Ee());let he=Q;Q=z(w),Q===he?G[Q].p(w,le):($e(),L(G[he],1,1,()=>{G[he]=null}),Ee(),Y=G[Q],Y?Y.p(w,le):(Y=G[Q]=ce[Q](w),Y.c()),T(Y,1),Y.m(H,null)),w[5]>0?K?K.p(w,le):(K=Ht(w),K.c(),K.m(J.parentNode,J)):K&&(K.d(1),K=null)},i(w){De||(T(f.$$.fragment,w),T(Z),T(Y),De=!0)},o(w){L(f.$$.fragment,w),L(Z),L(Y),De=!1},d(w){w&&(c(e),c(X),c(H),c(te),c(J)),ne(f),ee&&ee.d(),fe&&fe.d(),M&&M.d(),Z&&Z.d(),G[Q].d(),K&&K.d(w)}}}function Ta(n){let e;return{c(){e=V("Tipo de Nota")},l(t){e=P(t,"Tipo de Nota")},m(t,a){D(t,e,a)},d(t){t&&c(e)}}}function Pa(n){let e,t="Entrada",a,l,i="Transfer√™ncia",s,d,u="Descarte";return{c(){e=b("option"),e.textContent=t,a=C(),l=b("option"),l.textContent=i,s=C(),d=b("option"),d.textContent=u,this.h()},l(_){e=v(_,"OPTION",{"data-svelte-h":!0}),_e(e)!=="svelte-qgq2us"&&(e.textContent=t),a=A(_),l=v(_,"OPTION",{"data-svelte-h":!0}),_e(l)!=="svelte-4m889r"&&(l.textContent=i),s=A(_),d=v(_,"OPTION",{"data-svelte-h":!0}),_e(d)!=="svelte-urwv3a"&&(d.textContent=u),this.h()},h(){e.__value="ENTRADA",Fe(e,e.__value),l.__value="TRANSFERENCIA",Fe(l,l.__value),d.__value="DESCARTE",Fe(d,d.__value)},m(_,o){D(_,e,o),D(_,a,o),D(_,l,o),D(_,s,o),D(_,d,o)},p:Ne,d(_){_&&(c(e),c(a),c(l),c(s),c(d))}}}function Et(n){let e,t=n[8].tipo_nota+"",a;return{c(){e=b("p"),a=V(t),this.h()},l(l){e=v(l,"P",{class:!0});var i=k(e);a=P(i,t),i.forEach(c),this.h()},h(){E(e,"class","text-red-500 dark:text-red-400 text-sm mt-1")},m(l,i){D(l,e,i),m(e,a)},p(l,i){i[0]&256&&t!==(t=l[8].tipo_nota+"")&&W(a,t)},d(l){l&&c(e)}}}function Va(n){let e;return{c(){e=V("Data do Documento")},l(t){e=P(t,"Data do Documento")},m(t,a){D(t,e,a)},d(t){t&&c(e)}}}function kt(n){let e,t=n[8].data_documento+"",a;return{c(){e=b("p"),a=V(t),this.h()},l(l){e=v(l,"P",{class:!0});var i=k(e);a=P(i,t),i.forEach(c),this.h()},h(){E(e,"class","text-red-500 dark:text-red-400 text-sm mt-1")},m(l,i){D(l,e,i),m(e,a)},p(l,i){i[0]&256&&t!==(t=l[8].data_documento+"")&&W(a,t)},d(l){l&&c(e)}}}function Ra(n){let e,t,a,l,i,s;t=new Te({props:{class:"mb-3 text-gray-900 dark:text-white",$$slots:{default:[Oa]},$$scope:{ctx:n}}});let d=xe(n[10]),u=[];for(let r=0;r<d.length;r+=1)u[r]=xt(_t(n,d,r));const _=r=>L(u[r],1,1,()=>{u[r]=null});let o=n[8].almoxarifado_origem_id&&It(n);return{c(){e=b("div"),de(t.$$.fragment),a=C(),l=b("div");for(let r=0;r<u.length;r+=1)u[r].c();i=C(),o&&o.c(),this.h()},l(r){e=v(r,"DIV",{});var f=k(e);se(t.$$.fragment,f),a=A(f),l=v(f,"DIV",{class:!0});var h=k(l);for(let p=0;p<u.length;p+=1)u[p].l(h);h.forEach(c),i=A(f),o&&o.l(f),f.forEach(c),this.h()},h(){E(l,"class","space-y-2")},m(r,f){D(r,e,f),re(t,e,null),m(e,a),m(e,l);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(l,null);m(e,i),o&&o.m(e,null),s=!0},p(r,f){const h={};if(f[2]&8&&(h.$$scope={dirty:f,ctx:r}),t.$set(h),f[0]&1027){d=xe(r[10]);let p;for(p=0;p<d.length;p+=1){const $=_t(r,d,p);u[p]?(u[p].p($,f),T(u[p],1)):(u[p]=xt($),u[p].c(),T(u[p],1),u[p].m(l,null))}for($e(),p=d.length;p<u.length;p+=1)_(p);Ee()}r[8].almoxarifado_origem_id?o?o.p(r,f):(o=It(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(r){if(!s){T(t.$$.fragment,r);for(let f=0;f<d.length;f+=1)T(u[f]);s=!0}},o(r){L(t.$$.fragment,r),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)L(u[f]);s=!1},d(r){r&&c(e),ne(t),Oe(u,r),o&&o.d()}}}function Sa(n){let e,t,a,l,i,s;t=new Te({props:{class:"mb-3 text-gray-900 dark:text-white",$$slots:{default:[La]},$$scope:{ctx:n}}});let d=xe(n[10]),u=[];for(let r=0;r<d.length;r+=1)u[r]=Ct(mt(n,d,r));const _=r=>L(u[r],1,1,()=>{u[r]=null});let o=n[8].almoxarifado_destino_id&&wt(n);return{c(){e=b("div"),de(t.$$.fragment),a=C(),l=b("div");for(let r=0;r<u.length;r+=1)u[r].c();i=C(),o&&o.c(),this.h()},l(r){e=v(r,"DIV",{});var f=k(e);se(t.$$.fragment,f),a=A(f),l=v(f,"DIV",{class:!0});var h=k(l);for(let p=0;p<u.length;p+=1)u[p].l(h);h.forEach(c),i=A(f),o&&o.l(f),f.forEach(c),this.h()},h(){E(l,"class","space-y-2")},m(r,f){D(r,e,f),re(t,e,null),m(e,a),m(e,l);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(l,null);m(e,i),o&&o.m(e,null),s=!0},p(r,f){const h={};if(f[2]&8&&(h.$$scope={dirty:f,ctx:r}),t.$set(h),f[0]&1027){d=xe(r[10]);let p;for(p=0;p<d.length;p+=1){const $=mt(r,d,p);u[p]?(u[p].p($,f),T(u[p],1)):(u[p]=Ct($),u[p].c(),T(u[p],1),u[p].m(l,null))}for($e(),p=d.length;p<u.length;p+=1)_(p);Ee()}r[8].almoxarifado_destino_id?o?o.p(r,f):(o=wt(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(r){if(!s){T(t.$$.fragment,r);for(let f=0;f<d.length;f+=1)T(u[f]);s=!0}},o(r){L(t.$$.fragment,r),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)L(u[f]);s=!1},d(r){r&&c(e),ne(t),Oe(u,r),o&&o.d()}}}function Oa(n){let e;return{c(){e=V("Almoxarifado de Origem")},l(t){e=P(t,"Almoxarifado de Origem")},m(t,a){D(t,e,a)},d(t){t&&c(e)}}}function Dt(n){let e,t="(Principal)";return{c(){e=b("span"),e.textContent=t,this.h()},l(a){e=v(a,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-quypfn"&&(e.textContent=t),this.h()},h(){E(e,"class","text-xs text-primary-600 dark:text-primary-400 font-medium ml-1")},m(a,l){D(a,e,l)},d(a){a&&c(e)}}}function Fa(n){let e=n[53].label+"",t,a,l,i=n[53].isPrincipal&&Dt();return{c(){t=V(e),a=C(),i&&i.c(),l=ke()},l(s){t=P(s,e),a=A(s),i&&i.l(s),l=ke()},m(s,d){D(s,t,d),D(s,a,d),i&&i.m(s,d),D(s,l,d)},p(s,d){d[0]&1024&&e!==(e=s[53].label+"")&&W(t,e),s[53].isPrincipal?i||(i=Dt(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(s){s&&(c(t),c(a),c(l)),i&&i.d(s)}}}function xt(n){let e,t,a,l,i,s,d;function u(o){n[37](o)}let _={name:"almoxarifado_origem_id",value:n[53].value,disabled:n[0]==="view",class:"text-primary-600 focus:ring-primary-500"};return n[1].almoxarifado_origem_id!==void 0&&(_.group=n[1].almoxarifado_origem_id),t=new Ue({props:_}),Pe.push(()=>Ve(t,"group",u)),i=new Te({props:{class:"ml-2 text-sm text-gray-900 dark:text-white",$$slots:{default:[Fa]},$$scope:{ctx:n}}}),{c(){e=b("div"),de(t.$$.fragment),l=C(),de(i.$$.fragment),s=C(),this.h()},l(o){e=v(o,"DIV",{class:!0});var r=k(e);se(t.$$.fragment,r),l=A(r),se(i.$$.fragment,r),s=A(r),r.forEach(c),this.h()},h(){E(e,"class","flex items-center")},m(o,r){D(o,e,r),re(t,e,null),m(e,l),re(i,e,null),m(e,s),d=!0},p(o,r){const f={};r[0]&1024&&(f.value=o[53].value),r[0]&1&&(f.disabled=o[0]==="view"),!a&&r[0]&2&&(a=!0,f.group=o[1].almoxarifado_origem_id,Re(()=>a=!1)),t.$set(f);const h={};r[0]&1024|r[2]&8&&(h.$$scope={dirty:r,ctx:o}),i.$set(h)},i(o){d||(T(t.$$.fragment,o),T(i.$$.fragment,o),d=!0)},o(o){L(t.$$.fragment,o),L(i.$$.fragment,o),d=!1},d(o){o&&c(e),ne(t),ne(i)}}}function It(n){let e,t=n[8].almoxarifado_origem_id+"",a;return{c(){e=b("p"),a=V(t),this.h()},l(l){e=v(l,"P",{class:!0});var i=k(e);a=P(i,t),i.forEach(c),this.h()},h(){E(e,"class","text-red-500 dark:text-red-400 text-sm mt-2")},m(l,i){D(l,e,i),m(e,a)},p(l,i){i[0]&256&&t!==(t=l[8].almoxarifado_origem_id+"")&&W(a,t)},d(l){l&&c(e)}}}function La(n){let e;return{c(){e=V("Almoxarifado de Destino")},l(t){e=P(t,"Almoxarifado de Destino")},m(t,a){D(t,e,a)},d(t){t&&c(e)}}}function At(n){let e,t="(Principal)";return{c(){e=b("span"),e.textContent=t,this.h()},l(a){e=v(a,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-quypfn"&&(e.textContent=t),this.h()},h(){E(e,"class","text-xs text-primary-600 dark:text-primary-400 font-medium ml-1")},m(a,l){D(a,e,l)},d(a){a&&c(e)}}}function ja(n){let e=n[53].label+"",t,a,l,i=n[53].isPrincipal&&At();return{c(){t=V(e),a=C(),i&&i.c(),l=ke()},l(s){t=P(s,e),a=A(s),i&&i.l(s),l=ke()},m(s,d){D(s,t,d),D(s,a,d),i&&i.m(s,d),D(s,l,d)},p(s,d){d[0]&1024&&e!==(e=s[53].label+"")&&W(t,e),s[53].isPrincipal?i||(i=At(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(s){s&&(c(t),c(a),c(l)),i&&i.d(s)}}}function Ct(n){let e,t,a,l,i,s,d;function u(o){n[36](o)}let _={name:"almoxarifado_destino_id",value:n[53].value,disabled:n[0]==="view",class:"text-primary-600 focus:ring-primary-500"};return n[1].almoxarifado_destino_id!==void 0&&(_.group=n[1].almoxarifado_destino_id),t=new Ue({props:_}),Pe.push(()=>Ve(t,"group",u)),i=new Te({props:{class:"ml-2 text-sm text-gray-900 dark:text-white",$$slots:{default:[ja]},$$scope:{ctx:n}}}),{c(){e=b("div"),de(t.$$.fragment),l=C(),de(i.$$.fragment),s=C(),this.h()},l(o){e=v(o,"DIV",{class:!0});var r=k(e);se(t.$$.fragment,r),l=A(r),se(i.$$.fragment,r),s=A(r),r.forEach(c),this.h()},h(){E(e,"class","flex items-center")},m(o,r){D(o,e,r),re(t,e,null),m(e,l),re(i,e,null),m(e,s),d=!0},p(o,r){const f={};r[0]&1024&&(f.value=o[53].value),r[0]&1&&(f.disabled=o[0]==="view"),!a&&r[0]&2&&(a=!0,f.group=o[1].almoxarifado_destino_id,Re(()=>a=!1)),t.$set(f);const h={};r[0]&1024|r[2]&8&&(h.$$scope={dirty:r,ctx:o}),i.$set(h)},i(o){d||(T(t.$$.fragment,o),T(i.$$.fragment,o),d=!0)},o(o){L(t.$$.fragment,o),L(i.$$.fragment,o),d=!1},d(o){o&&c(e),ne(t),ne(i)}}}function wt(n){let e,t=n[8].almoxarifado_destino_id+"",a;return{c(){e=b("p"),a=V(t),this.h()},l(l){e=v(l,"P",{class:!0});var i=k(e);a=P(i,t),i.forEach(c),this.h()},h(){E(e,"class","text-red-500 dark:text-red-400 text-sm mt-2")},m(l,i){D(l,e,i),m(e,a)},p(l,i){i[0]&256&&t!==(t=l[8].almoxarifado_destino_id+"")&&W(a,t)},d(l){l&&c(e)}}}function Nt(n){let e,t,a,l,i,s;t=new Te({props:{class:"mb-3 text-gray-900 dark:text-white",$$slots:{default:[Ba]},$$scope:{ctx:n}}});let d=xe(n[11]),u=[];for(let r=0;r<d.length;r+=1)u[r]=qt(ct(n,d,r));const _=r=>L(u[r],1,1,()=>{u[r]=null});let o=n[8].almoxarifado_destino_id&&Tt(n);return{c(){e=b("div"),de(t.$$.fragment),a=C(),l=b("div");for(let r=0;r<u.length;r+=1)u[r].c();i=C(),o&&o.c(),this.h()},l(r){e=v(r,"DIV",{});var f=k(e);se(t.$$.fragment,f),a=A(f),l=v(f,"DIV",{class:!0});var h=k(l);for(let p=0;p<u.length;p+=1)u[p].l(h);h.forEach(c),i=A(f),o&&o.l(f),f.forEach(c),this.h()},h(){E(l,"class","space-y-2")},m(r,f){D(r,e,f),re(t,e,null),m(e,a),m(e,l);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(l,null);m(e,i),o&&o.m(e,null),s=!0},p(r,f){const h={};if(f[2]&8&&(h.$$scope={dirty:f,ctx:r}),t.$set(h),f[0]&2051){d=xe(r[11]);let p;for(p=0;p<d.length;p+=1){const $=ct(r,d,p);u[p]?(u[p].p($,f),T(u[p],1)):(u[p]=qt($),u[p].c(),T(u[p],1),u[p].m(l,null))}for($e(),p=d.length;p<u.length;p+=1)_(p);Ee()}r[8].almoxarifado_destino_id?o?o.p(r,f):(o=Tt(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(r){if(!s){T(t.$$.fragment,r);for(let f=0;f<d.length;f+=1)T(u[f]);s=!0}},o(r){L(t.$$.fragment,r),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)L(u[f]);s=!1},d(r){r&&c(e),ne(t),Oe(u,r),o&&o.d()}}}function Ba(n){let e;return{c(){e=V("Almoxarifado de Destino")},l(t){e=P(t,"Almoxarifado de Destino")},m(t,a){D(t,e,a)},d(t){t&&c(e)}}}function yt(n){let e,t="(Principal)";return{c(){e=b("span"),e.textContent=t,this.h()},l(a){e=v(a,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-quypfn"&&(e.textContent=t),this.h()},h(){E(e,"class","text-xs text-primary-600 dark:text-primary-400 font-medium ml-1")},m(a,l){D(a,e,l)},d(a){a&&c(e)}}}function Ua(n){let e=n[53].label+"",t,a,l,i=n[53].isPrincipal&&yt();return{c(){t=V(e),a=C(),i&&i.c(),l=ke()},l(s){t=P(s,e),a=A(s),i&&i.l(s),l=ke()},m(s,d){D(s,t,d),D(s,a,d),i&&i.m(s,d),D(s,l,d)},p(s,d){d[0]&2048&&e!==(e=s[53].label+"")&&W(t,e),s[53].isPrincipal?i||(i=yt(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(s){s&&(c(t),c(a),c(l)),i&&i.d(s)}}}function qt(n){let e,t,a,l,i,s,d;function u(o){n[38](o)}let _={name:"almoxarifado_destino_id",value:n[53].value,disabled:n[0]==="view",class:"text-primary-600 focus:ring-primary-500"};return n[1].almoxarifado_destino_id!==void 0&&(_.group=n[1].almoxarifado_destino_id),t=new Ue({props:_}),Pe.push(()=>Ve(t,"group",u)),i=new Te({props:{class:"ml-2 text-sm text-gray-900 dark:text-white",$$slots:{default:[Ua]},$$scope:{ctx:n}}}),{c(){e=b("div"),de(t.$$.fragment),l=C(),de(i.$$.fragment),s=C(),this.h()},l(o){e=v(o,"DIV",{class:!0});var r=k(e);se(t.$$.fragment,r),l=A(r),se(i.$$.fragment,r),s=A(r),r.forEach(c),this.h()},h(){E(e,"class","flex items-center")},m(o,r){D(o,e,r),re(t,e,null),m(e,l),re(i,e,null),m(e,s),d=!0},p(o,r){const f={};r[0]&2048&&(f.value=o[53].value),r[0]&1&&(f.disabled=o[0]==="view"),!a&&r[0]&2&&(a=!0,f.group=o[1].almoxarifado_destino_id,Re(()=>a=!1)),t.$set(f);const h={};r[0]&2048|r[2]&8&&(h.$$scope={dirty:r,ctx:o}),i.$set(h)},i(o){d||(T(t.$$.fragment,o),T(i.$$.fragment,o),d=!0)},o(o){L(t.$$.fragment,o),L(i.$$.fragment,o),d=!1},d(o){o&&c(e),ne(t),ne(i)}}}function Tt(n){let e,t=n[8].almoxarifado_destino_id+"",a;return{c(){e=b("p"),a=V(t),this.h()},l(l){e=v(l,"P",{class:!0});var i=k(e);a=P(i,t),i.forEach(c),this.h()},h(){E(e,"class","text-red-500 dark:text-red-400 text-sm mt-2")},m(l,i){D(l,e,i),m(e,a)},p(l,i){i[0]&256&&t!==(t=l[8].almoxarifado_destino_id+"")&&W(a,t)},d(l){l&&c(e)}}}function Ha(n){let e,t,a="(opcional)";return{c(){e=V(`Observa√ß√µes 
              `),t=b("span"),t.textContent=a,this.h()},l(l){e=P(l,`Observa√ß√µes 
              `),t=v(l,"SPAN",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-1313n1d"&&(t.textContent=a),this.h()},h(){E(t,"class","text-xs text-gray-500 dark:text-gray-400")},m(l,i){D(l,e,i),D(l,t,i)},p:Ne,d(l){l&&(c(e),c(t))}}}function Pt(n){let e,t=n[8].observacoes+"",a;return{c(){e=b("p"),a=V(t),this.h()},l(l){e=v(l,"P",{class:!0});var i=k(e);a=P(i,t),i.forEach(c),this.h()},h(){E(e,"class","text-red-500 dark:text-red-400 text-sm mt-1")},m(l,i){D(l,e,i),m(e,a)},p(l,i){i[0]&256&&t!==(t=l[8].observacoes+"")&&W(a,t)},d(l){l&&c(e)}}}function Vt(n){let e,t,a="Resumo",l,i,s,d,u="Total de itens:",_,o,r,f,h,p,$="Valor total:",I,F,R,O=n[4].toFixed(2)+"",g;return{c(){e=b("div"),t=b("h4"),t.textContent=a,l=C(),i=b("div"),s=b("div"),d=b("span"),d.textContent=u,_=C(),o=b("span"),r=V(n[5]),f=C(),h=b("div"),p=b("span"),p.textContent=$,I=C(),F=b("span"),R=V("R$ "),g=V(O),this.h()},l(y){e=v(y,"DIV",{class:!0});var j=k(e);t=v(j,"H4",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-3i5efz"&&(t.textContent=a),l=A(j),i=v(j,"DIV",{class:!0});var U=k(i);s=v(U,"DIV",{});var X=k(s);d=v(X,"SPAN",{class:!0,"data-svelte-h":!0}),_e(d)!=="svelte-18up8m1"&&(d.textContent=u),_=A(X),o=v(X,"SPAN",{class:!0});var H=k(o);r=P(H,n[5]),H.forEach(c),X.forEach(c),f=A(U),h=v(U,"DIV",{});var N=k(h);p=v(N,"SPAN",{class:!0,"data-svelte-h":!0}),_e(p)!=="svelte-j9jcfb"&&(p.textContent=$),I=A(N),F=v(N,"SPAN",{class:!0});var B=k(F);R=P(B,"R$ "),g=P(B,O),B.forEach(c),N.forEach(c),U.forEach(c),j.forEach(c),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white mb-2"),E(d,"class","text-gray-600 dark:text-gray-400"),E(o,"class","font-medium ml-2"),E(p,"class","text-gray-600 dark:text-gray-400"),E(F,"class","font-medium ml-2 text-green-600 dark:text-green-400"),E(i,"class","grid grid-cols-2 gap-4 text-sm"),E(e,"class","bg-gray-50 dark:bg-gray-800 rounded-lg p-4")},m(y,j){D(y,e,j),m(e,t),m(e,l),m(e,i),m(i,s),m(s,d),m(s,_),m(s,o),m(o,r),m(i,f),m(i,h),m(h,p),m(h,I),m(h,F),m(F,R),m(F,g)},p(y,j){j[0]&32&&W(r,y[5]),j[0]&16&&O!==(O=y[4].toFixed(2)+"")&&W(g,O)},d(y){y&&c(e)}}}function za(n){let e=Le(n[1].tipo_nota)+"",t;return{c(){t=V(e)},l(a){t=P(a,e)},m(a,l){D(a,t,l)},p(a,l){l[0]&2&&e!==(e=Le(a[1].tipo_nota)+"")&&W(t,e)},d(a){a&&c(t)}}}function Rt(n){var r,f;let e,t,a="Almoxarifado de Origem",l,i,s=(((r=n[10].find(n[32]))==null?void 0:r.label)||"N√£o identificado")+"",d,u,_=(f=n[10].find(n[31]))==null?void 0:f.isPrincipal,o=_&&St();return{c(){e=b("div"),t=b("dt"),t.textContent=a,l=C(),i=b("dd"),d=V(s),u=C(),o&&o.c(),this.h()},l(h){e=v(h,"DIV",{});var p=k(e);t=v(p,"DT",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-h81xpe"&&(t.textContent=a),l=A(p),i=v(p,"DD",{class:!0});var $=k(i);d=P($,s),u=A($),o&&o.l($),$.forEach(c),p.forEach(c),this.h()},h(){E(t,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(i,"class","mt-1 text-sm text-gray-900 dark:text-white")},m(h,p){D(h,e,p),m(e,t),m(e,l),m(e,i),m(i,d),m(i,u),o&&o.m(i,null)},p(h,p){var $,I;p[0]&1026&&s!==(s=((($=h[10].find(h[32]))==null?void 0:$.label)||"N√£o identificado")+"")&&W(d,s),p[0]&1026&&(_=(I=h[10].find(h[31]))==null?void 0:I.isPrincipal),_?o||(o=St(),o.c(),o.m(i,null)):o&&(o.d(1),o=null)},d(h){h&&c(e),o&&o.d()}}}function St(n){let e,t="(Principal)";return{c(){e=b("span"),e.textContent=t,this.h()},l(a){e=v(a,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-quypfn"&&(e.textContent=t),this.h()},h(){E(e,"class","text-xs text-primary-600 dark:text-primary-400 font-medium ml-1")},m(a,l){D(a,e,l)},d(a){a&&c(e)}}}function Ot(n){var r,f;let e,t,a="Almoxarifado de Destino",l,i,s=(((r=n[10].find(n[33]))==null?void 0:r.label)||"N√£o identificado")+"",d,u,_=(f=n[10].find(n[30]))==null?void 0:f.isPrincipal,o=_&&Ft();return{c(){e=b("div"),t=b("dt"),t.textContent=a,l=C(),i=b("dd"),d=V(s),u=C(),o&&o.c(),this.h()},l(h){e=v(h,"DIV",{});var p=k(e);t=v(p,"DT",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-11el58n"&&(t.textContent=a),l=A(p),i=v(p,"DD",{class:!0});var $=k(i);d=P($,s),u=A($),o&&o.l($),$.forEach(c),p.forEach(c),this.h()},h(){E(t,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(i,"class","mt-1 text-sm text-gray-900 dark:text-white")},m(h,p){D(h,e,p),m(e,t),m(e,l),m(e,i),m(i,d),m(i,u),o&&o.m(i,null)},p(h,p){var $,I;p[0]&1026&&s!==(s=((($=h[10].find(h[33]))==null?void 0:$.label)||"N√£o identificado")+"")&&W(d,s),p[0]&1026&&(_=(I=h[10].find(h[30]))==null?void 0:I.isPrincipal),_?o||(o=Ft(),o.c(),o.m(i,null)):o&&(o.d(1),o=null)},d(h){h&&c(e),o&&o.d()}}}function Ft(n){let e,t="(Principal)";return{c(){e=b("span"),e.textContent=t,this.h()},l(a){e=v(a,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-quypfn"&&(e.textContent=t),this.h()},h(){E(e,"class","text-xs text-primary-600 dark:text-primary-400 font-medium ml-1")},m(a,l){D(a,e,l)},d(a){a&&c(e)}}}function Lt(n){let e,t,a="Observa√ß√µes",l,i,s=n[1].observacoes+"",d;return{c(){e=b("div"),t=b("dt"),t.textContent=a,l=C(),i=b("dd"),d=V(s),this.h()},l(u){e=v(u,"DIV",{class:!0});var _=k(e);t=v(_,"DT",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-1sl8lih"&&(t.textContent=a),l=A(_),i=v(_,"DD",{class:!0});var o=k(i);d=P(o,s),o.forEach(c),_.forEach(c),this.h()},h(){E(t,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(i,"class","mt-1 text-sm text-gray-900 dark:text-white"),E(e,"class","md:col-span-2")},m(u,_){D(u,e,_),m(e,t),m(e,l),m(e,i),m(i,d)},p(u,_){_[0]&2&&s!==(s=u[1].observacoes+"")&&W(d,s)},d(u){u&&c(e)}}}function jt(n){let e,t;return e=new Be({props:{color:"gray",class:"ml-2 rounded-sm",$$slots:{default:[Ma]},$$scope:{ctx:n}}}),{c(){de(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,l){re(e,a,l),t=!0},p(a,l){const i={};l[0]&32|l[2]&8&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){L(e.$$.fragment,a),t=!1},d(a){ne(e,a)}}}function Ma(n){let e;return{c(){e=V(n[5])},l(t){e=P(t,n[5])},m(t,a){D(t,e,a)},p(t,a){a[0]&32&&W(e,t[5])},d(t){t&&c(e)}}}function Qa(n){let e,t=xe(n[2]),a=[];for(let l=0;l<t.length;l+=1)a[l]=Ut(pt(n,t,l));return{c(){e=b("div");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=v(l,"DIV",{class:!0});var i=k(e);for(let s=0;s<a.length;s+=1)a[s].l(i);i.forEach(c),this.h()},h(){E(e,"class","space-y-3")},m(l,i){D(l,e,i);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(e,null)},p(l,i){if(i[0]&6){t=xe(l[2]);let s;for(s=0;s<t.length;s+=1){const d=pt(l,t,s);a[s]?a[s].p(d,i):(a[s]=Ut(d),a[s].c(),a[s].m(e,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=t.length}},i:Ne,o:Ne,d(l){l&&c(e),Oe(a,l)}}}function Ja(n){let e,t,a,l,i,s="Nenhum item encontrado",d,u,_="Esta nota n√£o possui itens registrados",o;return a=new ia({props:{class:"w-6 h-6 text-gray-400"}}),{c(){e=b("div"),t=b("div"),de(a.$$.fragment),l=C(),i=b("h4"),i.textContent=s,d=C(),u=b("p"),u.textContent=_,this.h()},l(r){e=v(r,"DIV",{class:!0});var f=k(e);t=v(f,"DIV",{class:!0});var h=k(t);se(a.$$.fragment,h),h.forEach(c),l=A(f),i=v(f,"H4",{class:!0,"data-svelte-h":!0}),_e(i)!=="svelte-6duyuw"&&(i.textContent=s),d=A(f),u=v(f,"P",{class:!0,"data-svelte-h":!0}),_e(u)!=="svelte-1ej1x9"&&(u.textContent=_),f.forEach(c),this.h()},h(){E(t,"class","w-12 h-12 mx-auto mb-4 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center"),E(i,"class","text-sm font-medium text-gray-900 dark:text-white mb-1"),E(u,"class","text-xs text-gray-500 dark:text-gray-400"),E(e,"class","bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 text-center")},m(r,f){D(r,e,f),m(e,t),re(a,t,null),m(e,l),m(e,i),m(e,d),m(e,u),o=!0},p:Ne,i(r){o||(T(a.$$.fragment,r),o=!0)},o(r){L(a.$$.fragment,r),o=!1},d(r){r&&c(e),ne(a)}}}function Bt(n){let e,t,a="Custo Unit√°rio",l,i,s,d=n[50].custo_unitario.toFixed(2)+"",u,_,o,r,f="Valor Total",h,p,$,I=(n[50].quantidade*n[50].custo_unitario).toFixed(2)+"",F;return{c(){e=b("div"),t=b("dt"),t.textContent=a,l=C(),i=b("dd"),s=V("R$ "),u=V(d),_=C(),o=b("div"),r=b("dt"),r.textContent=f,h=C(),p=b("dd"),$=V("R$ "),F=V(I),this.h()},l(R){e=v(R,"DIV",{});var O=k(e);t=v(O,"DT",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-yy8rn"&&(t.textContent=a),l=A(O),i=v(O,"DD",{class:!0});var g=k(i);s=P(g,"R$ "),u=P(g,d),g.forEach(c),O.forEach(c),_=A(R),o=v(R,"DIV",{});var y=k(o);r=v(y,"DT",{class:!0,"data-svelte-h":!0}),_e(r)!=="svelte-11k0zp4"&&(r.textContent=f),h=A(y),p=v(y,"DD",{class:!0});var j=k(p);$=P(j,"R$ "),F=P(j,I),j.forEach(c),y.forEach(c),this.h()},h(){E(t,"class","text-gray-500 dark:text-gray-400"),E(i,"class","text-gray-900 dark:text-white"),E(r,"class","text-gray-500 dark:text-gray-400"),E(p,"class","text-green-600 dark:text-green-400 font-medium")},m(R,O){D(R,e,O),m(e,t),m(e,l),m(e,i),m(i,s),m(i,u),D(R,_,O),D(R,o,O),m(o,r),m(o,h),m(o,p),m(p,$),m(p,F)},p(R,O){O[0]&4&&d!==(d=R[50].custo_unitario.toFixed(2)+"")&&W(u,d),O[0]&4&&I!==(I=(R[50].quantidade*R[50].custo_unitario).toFixed(2)+"")&&W(F,I)},d(R){R&&(c(e),c(_),c(o))}}}function Ut(n){let e,t,a,l,i,s,d=n[52]+1+"",u,_,o,r=(n[50].equipamento_nome||"Equipamento n√£o identificado")+"",f,h,p,$,I,F="Categoria",R,O,g=(n[50].categoria||"N√£o informado")+"",y,j,U,X,H="N√∫mero CA",N,B,ie=(n[50].numero_ca||"N√£o informado")+"",Q,Y,te,J,De="Quantidade",ee,fe,M=n[50].quantidade+"",Z,ce,G,z=n[1].tipo_nota==="ENTRADA"&&n[50].custo_unitario&&Bt(n);return{c(){e=b("div"),t=b("div"),a=b("div"),l=b("div"),i=b("span"),s=V("Item "),u=V(d),_=C(),o=b("h4"),f=V(r),h=C(),p=b("div"),$=b("div"),I=b("dt"),I.textContent=F,R=C(),O=b("dd"),y=V(g),j=C(),U=b("div"),X=b("dt"),X.textContent=H,N=C(),B=b("dd"),Q=V(ie),Y=C(),te=b("div"),J=b("dt"),J.textContent=De,ee=C(),fe=b("dd"),Z=V(M),ce=C(),z&&z.c(),G=C(),this.h()},l(K){e=v(K,"DIV",{class:!0});var w=k(e);t=v(w,"DIV",{class:!0});var le=k(t);a=v(le,"DIV",{class:!0});var pe=k(a);l=v(pe,"DIV",{class:!0});var he=k(l);i=v(he,"SPAN",{class:!0});var oe=k(i);s=P(oe,"Item "),u=P(oe,d),oe.forEach(c),_=A(he),o=v(he,"H4",{class:!0});var Ae=k(o);f=P(Ae,r),Ae.forEach(c),he.forEach(c),h=A(pe),p=v(pe,"DIV",{class:!0});var be=k(p);$=v(be,"DIV",{});var ge=k($);I=v(ge,"DT",{class:!0,"data-svelte-h":!0}),_e(I)!=="svelte-14lljjz"&&(I.textContent=F),R=A(ge),O=v(ge,"DD",{class:!0});var ye=k(O);y=P(ye,g),ye.forEach(c),ge.forEach(c),j=A(be),U=v(be,"DIV",{});var Ce=k(U);X=v(Ce,"DT",{class:!0,"data-svelte-h":!0}),_e(X)!=="svelte-1pq153"&&(X.textContent=H),N=A(Ce),B=v(Ce,"DD",{class:!0});var q=k(B);Q=P(q,ie),q.forEach(c),Ce.forEach(c),Y=A(be),te=v(be,"DIV",{});var x=k(te);J=v(x,"DT",{class:!0,"data-svelte-h":!0}),_e(J)!=="svelte-6gds52"&&(J.textContent=De),ee=A(x),fe=v(x,"DD",{class:!0});var S=k(fe);Z=P(S,M),S.forEach(c),x.forEach(c),ce=A(be),z&&z.l(be),be.forEach(c),pe.forEach(c),le.forEach(c),G=A(w),w.forEach(c),this.h()},h(){E(i,"class","text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded"),E(o,"class","font-medium text-gray-900 dark:text-white"),E(l,"class","flex items-center gap-3 mb-2"),E(I,"class","text-gray-500 dark:text-gray-400"),E(O,"class","text-gray-900 dark:text-white"),E(X,"class","text-gray-500 dark:text-gray-400"),E(B,"class","text-gray-900 dark:text-white"),E(J,"class","text-gray-500 dark:text-gray-400"),E(fe,"class","text-gray-900 dark:text-white font-medium"),E(p,"class","grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"),E(a,"class","flex-1"),E(t,"class","flex items-start justify-between"),E(e,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4")},m(K,w){D(K,e,w),m(e,t),m(t,a),m(a,l),m(l,i),m(i,s),m(i,u),m(l,_),m(l,o),m(o,f),m(a,h),m(a,p),m(p,$),m($,I),m($,R),m($,O),m(O,y),m(p,j),m(p,U),m(U,X),m(U,N),m(U,B),m(B,Q),m(p,Y),m(p,te),m(te,J),m(te,ee),m(te,fe),m(fe,Z),m(p,ce),z&&z.m(p,null),m(e,G)},p(K,w){w[0]&4&&r!==(r=(K[50].equipamento_nome||"Equipamento n√£o identificado")+"")&&W(f,r),w[0]&4&&g!==(g=(K[50].categoria||"N√£o informado")+"")&&W(y,g),w[0]&4&&ie!==(ie=(K[50].numero_ca||"N√£o informado")+"")&&W(Q,ie),w[0]&4&&M!==(M=K[50].quantidade+"")&&W(Z,M),K[1].tipo_nota==="ENTRADA"&&K[50].custo_unitario?z?z.p(K,w):(z=Bt(K),z.c(),z.m(p,null)):z&&(z.d(1),z=null)},d(K){K&&c(e),z&&z.d()}}}function Ht(n){let e,t,a,l,i,s,d,u,_=n[5]===1?"Item":"Itens",o,r,f=n[4]>0&&zt(n);return{c(){e=b("div"),t=b("div"),a=b("div"),l=b("div"),i=b("div"),s=V(n[5]),d=C(),u=b("div"),o=V(_),r=C(),f&&f.c(),this.h()},l(h){e=v(h,"DIV",{class:!0});var p=k(e);t=v(p,"DIV",{class:!0});var $=k(t);a=v($,"DIV",{class:!0});var I=k(a);l=v(I,"DIV",{class:!0});var F=k(l);i=v(F,"DIV",{class:!0});var R=k(i);s=P(R,n[5]),R.forEach(c),d=A(F),u=v(F,"DIV",{class:!0});var O=k(u);o=P(O,_),O.forEach(c),F.forEach(c),r=A(I),f&&f.l(I),I.forEach(c),$.forEach(c),p.forEach(c),this.h()},h(){E(i,"class","text-2xl font-bold text-primary-600 dark:text-primary-400"),E(u,"class","text-xs text-primary-600 dark:text-primary-400 font-medium"),E(l,"class","text-center"),E(a,"class","flex items-center gap-6"),E(t,"class","flex items-center justify-between"),E(e,"class","bg-primary-50 dark:bg-primary-900/20 rounded-lg border border-primary-200 dark:border-primary-800 p-4")},m(h,p){D(h,e,p),m(e,t),m(t,a),m(a,l),m(l,i),m(i,s),m(l,d),m(l,u),m(u,o),m(a,r),f&&f.m(a,null)},p(h,p){p[0]&32&&W(s,h[5]),p[0]&32&&_!==(_=h[5]===1?"Item":"Itens")&&W(o,_),h[4]>0?f?f.p(h,p):(f=zt(h),f.c(),f.m(a,null)):f&&(f.d(1),f=null)},d(h){h&&c(e),f&&f.d()}}}function zt(n){let e,t,a,l=n[4].toFixed(2)+"",i,s,d,u="Valor Total";return{c(){e=b("div"),t=b("div"),a=V("R$ "),i=V(l),s=C(),d=b("div"),d.textContent=u,this.h()},l(_){e=v(_,"DIV",{class:!0});var o=k(e);t=v(o,"DIV",{class:!0});var r=k(t);a=P(r,"R$ "),i=P(r,l),r.forEach(c),s=A(o),d=v(o,"DIV",{class:!0,"data-svelte-h":!0}),_e(d)!=="svelte-1vt3ayj"&&(d.textContent=u),o.forEach(c),this.h()},h(){E(t,"class","text-2xl font-bold text-green-600 dark:text-green-400"),E(d,"class","text-xs text-green-600 dark:text-green-400 font-medium"),E(e,"class","text-center")},m(_,o){D(_,e,o),m(e,t),m(t,a),m(t,i),m(e,s),m(e,d)},p(_,o){o[0]&16&&l!==(l=_[4].toFixed(2)+"")&&W(i,l)},d(_){_&&c(e)}}}function Ga(n){let e,t,a,l,i,s;e=new oa({props:{title:n[16],objectType:"NOTA DE MOVIMENTA√á√ÉO",iconName:"FileDocOutline",status:n[13],statusType:"movimento",additionalInfo:n[12],primaryAction:n[15],secondaryAction:n[14]}}),e.$on("close",n[19]),e.$on("primaryAction",n[18]),e.$on("secondaryAction",n[17]);const d=[wa,Ca],u=[];function _(o,r){return o[3]?0:1}return a=_(n),l=u[a]=d[a](n),{c(){de(e.$$.fragment),t=C(),l.c(),i=ke()},l(o){se(e.$$.fragment,o),t=A(o),l.l(o),i=ke()},m(o,r){re(e,o,r),D(o,t,r),u[a].m(o,r),D(o,i,r),s=!0},p(o,r){const f={};r[0]&65536&&(f.title=o[16]),r[0]&8192&&(f.status=o[13]),r[0]&4096&&(f.additionalInfo=o[12]),r[0]&32768&&(f.primaryAction=o[15]),r[0]&16384&&(f.secondaryAction=o[14]),e.$set(f);let h=a;a=_(o),a===h?u[a].p(o,r):($e(),L(u[h],1,1,()=>{u[h]=null}),Ee(),l=u[a],l?l.p(o,r):(l=u[a]=d[a](o),l.c()),T(l,1),l.m(i.parentNode,i))},i(o){s||(T(e.$$.fragment,o),T(l),s=!0)},o(o){L(e.$$.fragment,o),L(l),s=!1},d(o){o&&(c(t),c(i)),ne(e,o),u[a].d(o)}}}function Ka(n){let e,t,a;function l(s){n[41](s)}let i={placement:"right",width:"w-full max-w-[940px]",backdrop:!0,activateClickOutside:!0,bgOpacity:"bg-black/50",position:"fixed",id:"notas-detail-drawer",class:"drawer-notas",$$slots:{default:[Ga]},$$scope:{ctx:n}};return n[6]!==void 0&&(i.hidden=n[6]),e=new aa({props:i}),Pe.push(()=>Ve(e,"hidden",l)),{c(){de(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,d){re(e,s,d),a=!0},p(s,d){const u={};d[0]&131007|d[2]&8&&(u.$$scope={dirty:d,ctx:s}),!t&&d[0]&64&&(t=!0,u.hidden=s[6],Re(()=>t=!1)),e.$set(u)},i(s){a||(T(e.$$.fragment,s),a=!0)},o(s){L(e.$$.fragment,s),a=!1},d(s){ne(e,s)}}}function Za(n,e,t){let a,l,i,s,d,u,_,o,r,{open:f=!1}=e,{mode:h="create"}=e,{tipo:p="ENTRADA"}=e,{nota:$=null}=e;const I=!1,F=Gt();let R=!f,O=f,g={tipo_nota:"ENTRADA",almoxarifado_origem_id:"",almoxarifado_destino_id:"",observacoes:"",data_documento:new Date().toISOString().split("T")[0],itens:[]},y=[],j=[],U={},X=!1,H=[],N=[],B=!1,ie=!1;Kt(async()=>{await Q()});async function Q(){var q;t(3,ie=!0);try{const x=await fa.listarAlmoxarifados();if(t(10,H=x.map(S=>{var ue;return{value:S.id,label:S.nome,isPrincipal:S.isPrincipal,unidadeNegocio:(ue=S.unidadeNegocio)==null?void 0:ue.nome}})),H.sort((S,ue)=>S.isPrincipal&&!ue.isPrincipal?-1:!S.isPrincipal&&ue.isPrincipal?1:S.label.localeCompare(ue.label)),t(27,N=H),console.log("üìã NotesDetailDrawer: Almoxarifados carregados:",{original:x.length,options:H.length,principal:((q=H.find(S=>S.isPrincipal))==null?void 0:q.label)||"Nenhum",samples:H.slice(0,2).map(S=>({value:S.value,label:S.label,isPrincipal:S.isPrincipal}))}),(h==="edit"||h==="view")&&$)await Y();else if(t(1,g.tipo_nota=p,g),H.length>0){const S=H.find(ue=>ue.isPrincipal)||H[0];g.tipo_nota==="ENTRADA"?g.almoxarifado_destino_id||t(1,g.almoxarifado_destino_id=S.value,g):(g.tipo_nota==="TRANSFERENCIA"||g.tipo_nota==="DESCARTE")&&(g.almoxarifado_origem_id||t(1,g.almoxarifado_origem_id=S.value,g))}}catch(x){if(console.error("Erro ao carregar dados do formul√°rio:",x),t(10,H=[{value:"567a1885-0763-4a13-b9f6-157daa39ddc3",label:"Almoxarifado Central SP",isPrincipal:!0},{value:"1a743859-33e6-4ce3-9158-025dee47922b",label:"Almoxarifado RJ",isPrincipal:!1}]),t(27,N=H),h!=="edit"){t(1,g.tipo_nota=p,g);const S=H[0];p==="ENTRADA"&&!g.almoxarifado_destino_id?t(1,g.almoxarifado_destino_id=S.value,g):(p==="TRANSFERENCIA"&&!g.almoxarifado_origem_id||p==="DESCARTE"&&!g.almoxarifado_origem_id)&&t(1,g.almoxarifado_origem_id=S.value,g)}}finally{t(3,ie=!1)}}async function Y(){var q;if($)try{t(1,g={tipo_nota:$.tipo||$.tipo_nota,almoxarifado_origem_id:$.almoxarifado_id||$.almoxarifadoOrigemId||"",almoxarifado_destino_id:$.almoxarifado_destino_id||$.almoxarifadoDestinoId||"",observacoes:$.observacoes||"",data_documento:((q=$.data_documento)==null?void 0:q.split("T")[0])||new Date().toISOString().split("T")[0],itens:[]});const x=$.itens||$._itens||[];if(console.log("üîç Items do backend para processar:",x),x&&x.length>0){const{tiposEpiAdapter:S}=await Me(async()=>{const{tiposEpiAdapter:ae}=await import("./DHmirYUp.js").then(me=>me.b);return{tiposEpiAdapter:ae}},__vite__mapDeps([0,1]),import.meta.url),{estoqueItensAdapter:ue}=await Me(async()=>{const{estoqueItensAdapter:ae}=await import("./DHmirYUp.js").then(me=>me.c);return{estoqueItensAdapter:ae}},__vite__mapDeps([0,1]),import.meta.url),ve=await Promise.all(x.map(async ae=>{console.log("üîç Processando item:",ae);const me={temp_id:`existing_${ae.id}`,tipo_epi_id:ae.tipoEpiId||ae.tipo_epi_id,estoque_item_id:ae.estoque_item_id,quantidade:ae.quantidade,custo_unitario:ae.custo_unitario||0,equipamento_nome:"Equipamento n√£o identificado",categoria:"",numero_ca:"N√£o informado"};try{if(ae.tipoEpiId||ae.tipo_epi_id){const Ie=ae.tipoEpiId||ae.tipo_epi_id;console.log("üîç Buscando dados do tipo EPI:",Ie);const we=(await S.obterOpcoesSelectComCache({apenasAtivos:!1})).find(Se=>Se.value===Ie);we?(me.equipamento_nome=we.label,me.categoria=we.categoria||"",me.numero_ca=we.numeroCA||"N√£o informado",console.log("‚úÖ Dados do tipo EPI encontrados:",we.label)):console.warn("‚ö†Ô∏è Tipo EPI n√£o encontrado para ID:",Ie)}if(ae.estoque_item_id&&g.almoxarifado_origem_id){const qe=(await ue.obterItensDisponiveisComCache(g.almoxarifado_origem_id)).find(we=>we.value===ae.estoque_item_id);qe&&(me.equipamento_nome=qe.label,me.categoria=qe.categoria||"",me.numero_ca=qe.numeroCA||"N√£o informado",console.log("‚úÖ Dados do estoque encontrados:",qe.label))}}catch(Ie){console.error("‚ùå Erro ao enriquecer item:",Ie)}return me}));t(2,y=ve),console.log("‚úÖ Itens enriquecidos processados:",y.length)}}catch(x){console.error("Erro ao carregar dados da nota:",x)}}function te(){const q={tipo_nota:p,almoxarifado_origem_id:"",almoxarifado_destino_id:"",observacoes:"",data_documento:new Date().toISOString().split("T")[0],itens:[]};t(1,g=q),t(2,y=[]),t(8,U={}),t(9,X=!1),t(7,j=[])}function J(){return t(8,U={}),t(7,j=[]),g.tipo_nota==="TRANSFERENCIA"&&g.almoxarifado_origem_id&&g.almoxarifado_destino_id&&g.almoxarifado_origem_id===g.almoxarifado_destino_id&&t(8,U.almoxarifado_destino_id="Almoxarifado de destino deve ser diferente do origem",U),y.length===0&&t(7,j=["‚ö†Ô∏è Rascunho salvo sem itens - adicione itens antes de concluir"]),Object.keys(U).length===0}function De(){if(t(8,U={}),t(7,j=[]),g.tipo_nota==="ENTRADA"?g.almoxarifado_destino_id||t(8,U.almoxarifado_destino_id="Almoxarifado de destino √© obrigat√≥rio para entrada",U):g.tipo_nota==="TRANSFERENCIA"?(g.almoxarifado_origem_id||t(8,U.almoxarifado_origem_id="Almoxarifado de origem √© obrigat√≥rio para transfer√™ncia",U),g.almoxarifado_destino_id||t(8,U.almoxarifado_destino_id="Almoxarifado de destino √© obrigat√≥rio para transfer√™ncia",U),g.almoxarifado_origem_id===g.almoxarifado_destino_id&&t(8,U.almoxarifado_destino_id="Almoxarifado de destino deve ser diferente do origem",U)):g.tipo_nota==="DESCARTE"&&(g.almoxarifado_origem_id||t(8,U.almoxarifado_origem_id="Almoxarifado de origem √© obrigat√≥rio para descarte",U)),g.data_documento||t(8,U.data_documento="Data do documento √© obrigat√≥ria",U),y.length===0)return t(7,j=["Pelo menos um item deve ser adicionado para concluir a nota"]),!1;if(g.tipo_nota==="ENTRADA"){const q=y.filter(x=>!x.custo_unitario||x.custo_unitario<=0);if(q.length>0)return t(7,j=[`${q.length} ${q.length===1?"item n√£o possui":"itens n√£o possuem"} custo unit√°rio v√°lido`]),!1}return Object.keys(U).length===0}async function ee(){if(!J()){t(9,X=!0);return}t(9,X=j.length>0),await M("rascunho")}async function fe(){if(!De()){t(9,X=!0);return}await M("concluida")}async function M(q){var x,S;t(28,B=!0);try{const ue={tipo_nota:g.tipo_nota,data_documento:g.data_documento};g.observacoes&&g.observacoes.trim()!==""&&(ue.observacoes=g.observacoes.trim()),g.tipo_nota==="ENTRADA"?g.almoxarifado_destino_id&&(ue.almoxarifado_destino_id=g.almoxarifado_destino_id):g.tipo_nota==="TRANSFERENCIA"?(g.almoxarifado_origem_id&&(ue.almoxarifado_origem_id=g.almoxarifado_origem_id),g.almoxarifado_destino_id&&(ue.almoxarifado_destino_id=g.almoxarifado_destino_id)):g.tipo_nota==="DESCARTE"&&g.almoxarifado_origem_id&&(ue.almoxarifado_origem_id=g.almoxarifado_origem_id);let ve;if(h==="create"){const ae=await je.criarNota(ue);if(console.log("üìù Resposta da cria√ß√£o da nota:",ae),ve=((x=ae==null?void 0:ae.data)==null?void 0:x.id)||(ae==null?void 0:ae.id)||((S=ae==null?void 0:ae.data)==null?void 0:S.uuid)||(ae==null?void 0:ae.uuid),!ve)throw console.error("‚ùå N√£o foi poss√≠vel extrair o ID da nota criada:",ae),new Error("Erro: ID da nota n√£o encontrado na resposta do servidor");if(console.log("‚úÖ Nota criada com ID:",ve),y.length>0)for(const me of y){const Ie={tipo_epi_id:me.tipo_epi_id,estoque_item_id:me.estoque_item_id,quantidade:me.quantidade,custo_unitario:me.custo_unitario};await je.adicionarItem(ve,Ie)}q==="concluida"&&await je.concluirNota(ve)}else{if(!($!=null&&$.id))throw new Error("ID da nota n√£o encontrado");await je.atualizarNota($.id,{data_documento:ue.data_documento,observacoes:ue.observacoes}),ve=$.id}F("salvar",{notaId:ve,modo:q})}catch(ue){throw console.error("Erro ao salvar nota:",ue),ue}finally{t(28,B=!1)}}function Z(){F("close")}function ce(q){t(2,y=q.detail),t(1,g.itens=y,g),y.length>0&&t(7,j=[])}function G(q){q.detail?t(7,j=[q.detail]):t(7,j=[])}const z=q=>q.value===g.almoxarifado_destino_id,K=q=>q.value===g.almoxarifado_origem_id,w=q=>q.value===g.almoxarifado_origem_id,le=q=>q.value===g.almoxarifado_destino_id;function pe(q){n.$$.not_equal(g.tipo_nota,q)&&(g.tipo_nota=q,t(1,g))}function he(q){n.$$.not_equal(g.data_documento,q)&&(g.data_documento=q,t(1,g))}function oe(q){n.$$.not_equal(g.almoxarifado_destino_id,q)&&(g.almoxarifado_destino_id=q,t(1,g))}function Ae(q){n.$$.not_equal(g.almoxarifado_origem_id,q)&&(g.almoxarifado_origem_id=q,t(1,g))}function be(q){n.$$.not_equal(g.almoxarifado_destino_id,q)&&(g.almoxarifado_destino_id=q,t(1,g))}function ge(q){n.$$.not_equal(g.observacoes,q)&&(g.observacoes=q,t(1,g))}function ye(q){y=q,t(2,y)}function Ce(q){R=q,t(6,R),t(22,f),t(26,O)}return n.$$set=q=>{"open"in q&&t(22,f=q.open),"mode"in q&&t(0,h=q.mode),"tipo"in q&&t(23,p=q.tipo),"nota"in q&&t(24,$=q.nota)},n.$$.update=()=>{n.$$.dirty[0]&71303168&&f!==O&&(t(6,R=!f),t(26,O=f)),n.$$.dirty[0]&4194305&&f&&(h==="create"&&te(),Q()),n.$$.dirty[0]&3&&t(16,a=h==="create"?`Nova Nota - ${Le(g.tipo_nota)}`:h==="edit"?`Editar Nota - ${Le(g.tipo_nota)}`:`Visualizar Nota - ${Le(g.tipo_nota)}`),n.$$.dirty[0]&4&&t(5,l=y.length),n.$$.dirty[0]&4&&t(4,i=y.reduce((q,x)=>{const S=typeof x.custo_unitario=="number"?x.custo_unitario:0;return q+x.quantidade*S},0)),n.$$.dirty[0]&268435465&&t(29,s=!B&&!ie&&h!=="view"),n.$$.dirty[0]&536870913&&t(15,d=h==="view"?null:{text:"Concluir",icon:"CheckOutline",disabled:!s}),n.$$.dirty[0]&536870913&&t(14,u=h==="view"?null:{text:"Salvar Rascunho",icon:"FloppyDiskOutline",disabled:!s}),n.$$.dirty[0]&16777217&&t(13,_=h==="create"?"NOVA":h==="edit"?"EDITANDO":($==null?void 0:$.status)||"VISUALIZANDO"),n.$$.dirty[0]&48&&t(12,o=[`${l} ${l===1?"item":"itens"}`,i>0?`R$ ${i.toFixed(2)}`:"Sem valor"]),n.$$.dirty[0]&134217730&&t(11,r=N.filter(q=>q.value!==g.almoxarifado_origem_id))},[h,g,y,ie,i,l,R,j,U,X,H,r,o,_,u,d,a,ee,fe,Z,ce,G,f,p,$,I,O,N,B,s,z,K,w,le,pe,he,oe,Ae,be,ge,ye,Ce]}class hl extends Mt{constructor(e){super(),Qt(this,e,Za,Ka,Jt,{open:22,mode:0,tipo:23,nota:24,loading:25},null,[-1,-1,-1])}get loading(){return this.$$.ctx[25]}}export{hl as N,pl as a,ml as b,Le as g};
