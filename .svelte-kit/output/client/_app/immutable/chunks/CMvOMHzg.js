import{w as fe}from"./D3FebGYg.js";import"./D8PmxC0_.js";import{S as H,i as q,s as G,d,u as P,q as S,F as J,G as U,b as E,v as M,J as D,a as R,c as p,K as x,m as y,e as v,f as w,L as I,h as N,g as L,j as b,M as V,k as j,t as K,n as ue}from"./BW7nMWMn.js";import"./IHki7fMi.js";import{f as O}from"./DhMnY3y8.js";import{A as ge}from"./CcJBrDGd.js";import{B as de}from"./Bdqt3-Qf.js";import{E as me,A as he}from"./Bvg_8qIU.js";function Re(u,e={}){const{initialPageSize:t=20,enableCache:n=!0,cacheTimeout:r=5*60*1e3,debounceDelay:i=300}=e,s={items:[],total:0,page:1,pageSize:t,totalPages:0,loading:!1,error:null,lastFetch:null},{subscribe:c,set:a,update:f}=fe(s),o=new Map;let l={page:1,limit:t},m=null,k=null;function A(g){return JSON.stringify(g)}function W(g){return Date.now()-g.timestamp<r}async function X(g){if(n){const T=A(g),h=o.get(T);if(h&&W(h))return console.log("ðŸ“„ Using cached data for:",T),h.data}const _=await u(g);if(n){const T=A(g);o.set(T,{data:_,timestamp:Date.now()})}return _}async function z(g={}){var _,T;l={...l,...g},f(h=>({...h,loading:!0,error:null}));try{const h=await X(l);console.log("ðŸª PaginatedStore received response:",{dataLength:((_=h.data)==null?void 0:_.length)||0,total:h.total,page:h.page,pageSize:h.pageSize,totalPages:h.totalPages});const C={items:h.data,total:h.total,page:h.page,pageSize:h.pageSize,totalPages:h.totalPages||Math.ceil(h.total/h.pageSize),loading:!1,error:null,lastFetch:Date.now()};console.log("ðŸª Setting new store state:",{itemsLength:((T=C.items)==null?void 0:T.length)||0,total:C.total,loading:C.loading}),a(C)}catch(h){const C=h instanceof Error?h.message:"Erro desconhecido";f(ce=>({...ce,loading:!1,error:C})),console.error("âŒ Erro ao buscar pÃ¡gina:",h)}}async function Q(g){k&&clearTimeout(k),k=setTimeout(async()=>{l={...l,...g,page:1},await z(l)},i)}async function Y(g){m&&clearTimeout(m),m=setTimeout(async()=>{l={...l,search:g,page:1},await z(l)},i)}async function Z(g,_){l={...l,sort:g,order:_,page:1},await z(l)}async function $(){let g=!1;c(_=>{g=_.page<_.totalPages})(),g&&await z({page:l.page+1})}async function ee(){l.page>1&&await z({page:l.page-1})}async function te(g){g>=1&&await z({page:g})}async function ne(){if(n){const g=A(l);o.delete(g)}await z(l)}function ae(){l={page:1,limit:t},o.clear(),a(s)}function re(){let g=!1;return c(_=>{g=_.page<_.totalPages})(),g}function le(){return l.page>1}function ie(){let g=!1;return c(_=>{g=_.items.length===0&&!_.loading})(),g}function se(){let g=!1;return c(_=>{g=_.loading})(),g}function oe(){return{...l}}return{subscribe:c,fetchPage:z,setFilters:Q,setSearch:Y,setSorting:Z,nextPage:$,prevPage:ee,goToPage:te,reload:ne,reset:ae,hasNext:re,hasPrev:le,isEmpty:ie,isLoading:se,getCurrentParams:oe}}const B={default:"Carregando...",processing:"Processando...",saving:"Salvando...",deleting:"Excluindo...",creating:"Criando...",updating:"Atualizando...",searching:"Buscando...",loading:"Carregando...",signing:"Assinando...",uploading:"Enviando...",downloading:"Baixando..."};function _e(u){let e,t,n,r,i,s,c,a;return r=new O({props:{size:u[0],color:u[1],class:"mb-3"}}),{c(){e=b("div"),t=b("div"),n=b("div"),V(r.$$.fragment),i=j(),s=b("p"),c=K(u[4]),this.h()},l(f){e=v(f,"DIV",{class:!0});var o=w(e);t=v(o,"DIV",{class:!0});var l=w(t);n=v(l,"DIV",{class:!0});var m=w(n);I(r.$$.fragment,m),i=N(m),s=v(m,"P",{class:!0});var k=w(s);c=L(k,u[4]),k.forEach(d),m.forEach(d),l.forEach(d),o.forEach(d),this.h()},h(){y(s,"class","text-sm text-gray-600 dark:text-gray-400"),y(n,"class","flex flex-col items-center text-center"),y(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 max-w-sm"),y(e,"class","flex flex-col items-center justify-center py-12 px-4")},m(f,o){E(f,e,o),p(e,t),p(t,n),x(r,n,null),p(n,i),p(n,s),p(s,c),a=!0},p(f,o){const l={};o&1&&(l.size=f[0]),o&2&&(l.color=f[1]),r.$set(l),(!a||o&16)&&R(c,f[4])},i(f){a||(S(r.$$.fragment,f),a=!0)},o(f){P(r.$$.fragment,f),a=!1},d(f){f&&d(e),D(r)}}}function pe(u){let e,t,n,r,i,s;return t=new O({props:{size:u[0],color:u[1]}}),{c(){e=b("div"),V(t.$$.fragment),n=j(),r=b("span"),i=K(u[4]),this.h()},l(c){e=v(c,"DIV",{class:!0});var a=w(e);I(t.$$.fragment,a),n=N(a),r=v(a,"SPAN",{class:!0});var f=w(r);i=L(f,u[4]),f.forEach(d),a.forEach(d),this.h()},h(){y(r,"class","text-sm text-gray-600 dark:text-gray-400"),y(e,"class","flex items-center space-x-2")},m(c,a){E(c,e,a),x(t,e,null),p(e,n),p(e,r),p(r,i),s=!0},p(c,a){const f={};a&1&&(f.size=c[0]),a&2&&(f.color=c[1]),t.$set(f),(!s||a&16)&&R(i,c[4])},i(c){s||(S(t.$$.fragment,c),s=!0)},o(c){P(t.$$.fragment,c),s=!1},d(c){c&&d(e),D(t)}}}function ye(u){let e,t,n,r,i,s,c;return n=new O({props:{size:u[0],color:u[1],class:"mb-4"}}),{c(){e=b("div"),t=b("div"),V(n.$$.fragment),r=j(),i=b("p"),s=K(u[4]),this.h()},l(a){e=v(a,"DIV",{class:!0});var f=w(e);t=v(f,"DIV",{class:!0});var o=w(t);I(n.$$.fragment,o),r=N(o),i=v(o,"P",{class:!0});var l=w(i);s=L(l,u[4]),l.forEach(d),o.forEach(d),f.forEach(d),this.h()},h(){y(i,"class","text-gray-600 dark:text-gray-400"),y(t,"class","text-center"),y(e,"class","fixed inset-0 bg-gray-50 dark:bg-gray-900 flex items-center justify-center z-50")},m(a,f){E(a,e,f),p(e,t),x(n,t,null),p(t,r),p(t,i),p(i,s),c=!0},p(a,f){const o={};f&1&&(o.size=a[0]),f&2&&(o.color=a[1]),n.$set(o),(!c||f&16)&&R(s,a[4])},i(a){c||(S(n.$$.fragment,a),c=!0)},o(a){P(n.$$.fragment,a),c=!1},d(a){a&&d(e),D(n)}}}function ve(u){let e,t,n,r;const i=[ye,pe,_e],s=[];function c(a,f){return a[2]?0:a[3]?1:2}return e=c(u),t=s[e]=i[e](u),{c(){t.c(),n=M()},l(a){t.l(a),n=M()},m(a,f){s[e].m(a,f),E(a,n,f),r=!0},p(a,[f]){let o=e;e=c(a),e===o?s[e].p(a,f):(J(),P(s[o],1,1,()=>{s[o]=null}),U(),t=s[e],t?t.p(a,f):(t=s[e]=i[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){r||(S(t),r=!0)},o(a){P(t),r=!1},d(a){a&&d(n),s[e].d(a)}}}function we(u,e,t){let n,{size:r="md"}=e,{color:i="primary"}=e,{text:s=B.default}=e,{loadingType:c=void 0}=e,{fullScreen:a=!1}=e,{inline:f=!1}=e;return u.$$set=o=>{"size"in o&&t(0,r=o.size),"color"in o&&t(1,i=o.color),"text"in o&&t(5,s=o.text),"loadingType"in o&&t(6,c=o.loadingType),"fullScreen"in o&&t(2,a=o.fullScreen),"inline"in o&&t(3,f=o.inline)},u.$$.update=()=>{u.$$.dirty&96&&t(4,n=c?B[c]:s)},[r,i,a,f,n,s,c]}class Ne extends H{constructor(e){super(),q(this,e,we,ve,G,{size:0,color:1,text:5,loadingType:6,fullScreen:2,inline:3})}}function F(u){let e,t,n;return t=new de({props:{size:"sm",color:"red",class:"rounded-sm",$$slots:{default:[be]},$$scope:{ctx:u}}}),t.$on("click",u[6]),{c(){e=b("div"),V(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var i=w(e);I(t.$$.fragment,i),i.forEach(d),this.h()},h(){y(e,"class","flex")},m(r,i){E(r,e,i),x(t,e,null),n=!0},p(r,i){const s={};i&260&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(S(t.$$.fragment,r),n=!0)},o(r){P(t.$$.fragment,r),n=!1},d(r){r&&d(e),D(t)}}}function be(u){let e,t,n,r;return e=new he({props:{class:"w-4 h-4 mr-2"}}),{c(){V(e.$$.fragment),t=j(),n=K(u[2])},l(i){I(e.$$.fragment,i),t=N(i),n=L(i,u[2])},m(i,s){x(e,i,s),E(i,t,s),E(i,n,s),r=!0},p(i,s){(!r||s&4)&&R(n,i[2])},i(i){r||(S(e.$$.fragment,i),r=!0)},o(i){P(e.$$.fragment,i),r=!1},d(i){i&&(d(t),d(n)),D(e,i)}}}function Ee(u){let e,t,n,r,i,s,c,a,f,o=u[1]&&u[3]&&F(u);return{c(){e=b("span"),t=K(u[0]),n=j(),r=b("div"),i=b("p"),s=K(u[5]),c=j(),o&&o.c(),a=M(),this.h()},l(l){e=v(l,"SPAN",{class:!0});var m=w(e);t=L(m,u[0]),m.forEach(d),n=N(l),r=v(l,"DIV",{class:!0});var k=w(r);i=v(k,"P",{});var A=w(i);s=L(A,u[5]),A.forEach(d),k.forEach(d),c=N(l),o&&o.l(l),a=M(),this.h()},h(){y(e,"class","font-medium"),y(r,"class","mt-2 mb-4 text-sm")},m(l,m){E(l,e,m),p(e,t),E(l,n,m),E(l,r,m),p(r,i),p(i,s),E(l,c,m),o&&o.m(l,m),E(l,a,m),f=!0},p(l,m){(!f||m&1)&&R(t,l[0]),(!f||m&32)&&R(s,l[5]),l[1]&&l[3]?o?(o.p(l,m),m&10&&S(o,1)):(o=F(l),o.c(),S(o,1),o.m(a.parentNode,a)):o&&(J(),P(o,1,1,()=>{o=null}),U())},i(l){f||(S(o),f=!0)},o(l){P(o),f=!1},d(l){l&&(d(e),d(n),d(r),d(c),d(a)),o&&o.d(l)}}}function Se(u){let e,t;return e=new me({props:{slot:"icon",class:"w-4 h-4"}}),{c(){V(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p:ue,i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Pe(u){let e,t,n,r,i;return n=new ge({props:{color:"red",class:"border-l-4 border-red-500",$$slots:{icon:[Se],default:[Ee]},$$scope:{ctx:u}}}),{c(){e=b("div"),t=b("div"),V(n.$$.fragment),this.h()},l(s){e=v(s,"DIV",{class:!0});var c=w(e);t=v(c,"DIV",{class:!0});var a=w(t);I(n.$$.fragment,a),a.forEach(d),c.forEach(d),this.h()},h(){y(t,"class","w-full max-w-md"),y(e,"class",r="flex items-center justify-center "+(u[4]?"min-h-96":"p-8"))},m(s,c){E(s,e,c),p(e,t),x(n,t,null),i=!0},p(s,[c]){const a={};c&303&&(a.$$scope={dirty:c,ctx:s}),n.$set(a),(!i||c&16&&r!==(r="flex items-center justify-center "+(s[4]?"min-h-96":"p-8")))&&y(e,"class",r)},i(s){i||(S(n.$$.fragment,s),i=!0)},o(s){P(n.$$.fragment,s),i=!1},d(s){s&&d(e),D(n)}}}function ke(u,e,t){let n,{error:r=null}=e,{title:i="Ops! Algo deu errado"}=e,{showRetry:s=!0}=e,{retryText:c="Tentar Novamente"}=e,{onRetry:a=null}=e,{fullHeight:f=!1}=e;function o(){a&&a()}return u.$$set=l=>{"error"in l&&t(7,r=l.error),"title"in l&&t(0,i=l.title),"showRetry"in l&&t(1,s=l.showRetry),"retryText"in l&&t(2,c=l.retryText),"onRetry"in l&&t(3,a=l.onRetry),"fullHeight"in l&&t(4,f=l.fullHeight)},u.$$.update=()=>{u.$$.dirty&128&&t(5,n=r instanceof Error?r.message:r||"Erro desconhecido")},[i,s,c,a,f,n,o,r]}class Le extends H{constructor(e){super(),q(this,e,ke,Pe,G,{error:7,title:0,showRetry:1,retryText:2,onRetry:3,fullHeight:4})}}export{Le as E,Ne as L,Re as c};
