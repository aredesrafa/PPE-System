function g(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}const m=[{id:"1",nome:"João Silva Santos",cpf:"123.456.789-00",email:"joao.silva@datalife.com.br",cargo:"Engenheiro de Segurança",empresa:"DataLife Tecnologia Ltda",dataAdmissao:"2023-01-15",empresaId:"1",status:"ativo",temFichaAtiva:!0},{id:"2",nome:"Maria Santos Oliveira",cpf:"987.654.321-00",email:"maria.santos@construcaoabc.com.br",cargo:"Operária",empresa:"Construção Civil ABC",dataAdmissao:"2022-03-10",empresaId:"2",status:"ativo",temFichaAtiva:!0},{id:"3",nome:"Pedro Costa Lima",cpf:"456.789.123-00",email:"pedro.costa@industriaxyz.com.br",cargo:"Soldador",empresa:"Indústria XYZ",dataAdmissao:"2021-08-22",empresaId:"3",status:"ativo",temFichaAtiva:!1},{id:"4",nome:"Ana Rodrigues Silva",cpf:"789.123.456-00",email:"ana.rodrigues@datalife.com.br",cargo:"Analista de Sistemas",empresa:"DataLife Tecnologia Ltda",dataAdmissao:"2023-05-01",empresaId:"1",status:"ativo",temFichaAtiva:!1},{id:"5",nome:"Carlos Ferreira Nunes",cpf:"321.654.987-00",email:"carlos.ferreira@construcaoabc.com.br",cargo:"Pedreiro",empresa:"Construção Civil ABC",dataAdmissao:"2020-11-15",empresaId:"2",status:"afastado",temFichaAtiva:!0}],f=[{id:"1",numeroCA:"12345",nomeEquipamento:"Capacete de Segurança",descricao:"Capacete de segurança classe A, resistente a impactos",fabricante:"Protec Segurança",categoria:"Proteção da Cabeça",vidaUtilDias:1095,foto:"/images/capacete.jpg"},{id:"2",numeroCA:"67890",nomeEquipamento:"Luvas de Proteção",descricao:"Luvas de proteção contra agentes químicos",fabricante:"SafeHands",categoria:"Proteção das Mãos",vidaUtilDias:180,foto:"/images/luvas.jpg"},{id:"3",numeroCA:"54321",nomeEquipamento:"Óculos de Proteção",descricao:"Óculos de proteção antiembaçante",fabricante:"VisionSafe",categoria:"Proteção dos Olhos",vidaUtilDias:730,foto:"/images/oculos.jpg"},{id:"4",numeroCA:"98765",nomeEquipamento:"Máscara PFF2",descricao:"Máscara de proteção respiratória PFF2",fabricante:"BreatheSafe",categoria:"Proteção Respiratória",vidaUtilDias:30,foto:"/images/mascara.jpg"},{id:"5",numeroCA:"13579",nomeEquipamento:"Botinas de Segurança",descricao:"Botinas de segurança com biqueira de aço",fabricante:"StepSafe",categoria:"Proteção dos Pés",vidaUtilDias:365,foto:"/images/botinas.jpg"}],u=[{id:"1",tipoEPIId:"1",empresaId:"1",quantidade:25,quantidadeMinima:10,localizacao:"Almoxarifado A - Prateleira 1",lote:"LOT001",dataValidade:"2026-12-31",status:"disponivel",custoUnitario:45.9,fornecedor:"Protec Segurança",ativo:!0,numeroLote:"CAP2024001",dataFabricacao:"2024-01-15",notaFiscal:"NF123456",observacoes:"Recebido em perfeito estado",createdAt:"2024-01-20T10:00:00Z",updatedAt:"2024-01-20T10:00:00Z"},{id:"2",tipoEPIId:"2",empresaId:"1",quantidade:8,quantidadeMinima:15,localizacao:"Almoxarifado A - Prateleira 2",lote:"LOT002",dataValidade:"2024-08-15",status:"baixo_estoque",custoUnitario:12.5,fornecedor:"SafeHands",ativo:!0,numeroLote:"LUV2024001",dataFabricacao:"2024-02-01",notaFiscal:"NF123457",observacoes:"Estoque baixo - solicitar reposição",createdAt:"2024-02-05T14:30:00Z",updatedAt:"2024-06-15T09:20:00Z"},{id:"3",tipoEPIId:"3",empresaId:"2",quantidade:40,quantidadeMinima:20,localizacao:"Almoxarifado B - Gaveta 5",lote:"LOT003",dataValidade:"2025-10-30",status:"disponivel",custoUnitario:28.75,fornecedor:"VisionSafe",ativo:!0,numeroLote:"OCU2024001",dataFabricacao:"2024-03-10",notaFiscal:"NF123458",observacoes:"",createdAt:"2024-03-15T11:45:00Z",updatedAt:"2024-03-15T11:45:00Z"},{id:"4",tipoEPIId:"4",empresaId:"1",quantidade:0,quantidadeMinima:50,localizacao:"Almoxarifado A - Prateleira 3",lote:"LOT004",dataValidade:"2024-07-20",status:"esgotado",custoUnitario:8.9,fornecedor:"BreatheSafe",ativo:!0,numeroLote:"MAS2024001",dataFabricacao:"2024-06-20",notaFiscal:"NF123459",observacoes:"Estoque esgotado - urgente reposição",createdAt:"2024-06-25T16:20:00Z",updatedAt:"2024-07-02T08:10:00Z"},{id:"5",tipoEPIId:"5",empresaId:"3",quantidade:15,quantidadeMinima:12,localizacao:"Almoxarifado C - Estante 1",lote:"LOT005",dataValidade:"2025-05-15",status:"disponivel",custoUnitario:89.9,fornecedor:"StepSafe",ativo:!0,numeroLote:"BOT2024001",dataFabricacao:"2024-05-01",notaFiscal:"NF123460",observacoes:"Tamanhos diversos: 38-44",createdAt:"2024-05-10T13:30:00Z",updatedAt:"2024-05-10T13:30:00Z"}],I=[{id:"1",fichaEpiId:"1",tipoEpiId:"1",itemEstoqueOrigemId:"1",quantidade:1,numeroLote:"CAP2024001",dataEntrega:"2024-02-01T09:00:00Z",dataValidadeItem:"2026-12-31",status:"entregue",responsavelEntrega:"Ana Silva - Técnica de Segurança",observacoes:"Treinamento realizado sobre uso correto",entregaId:"1",createdAt:"2024-02-01T09:00:00Z",updatedAt:"2024-02-01T09:00:00Z"},{id:"2",fichaEpiId:"1",tipoEpiId:"2",itemEstoqueOrigemId:"2",quantidade:2,numeroLote:"LUV2024001",dataEntrega:"2024-02-01T09:05:00Z",dataValidadeItem:"2024-08-15",status:"entregue",responsavelEntrega:"Ana Silva - Técnica de Segurança",observacoes:"Par de reserva entregue",entregaId:"1",createdAt:"2024-02-01T09:05:00Z",updatedAt:"2024-02-01T09:05:00Z"}];function p(){const a=["Operário","Soldador","Pedreiro","Eletricista","Encanador","Pintor","Servente","Mecânico","Técnico","Supervisor"],e=["DataLife Tecnologia Ltda","Construção Civil ABC","Indústria XYZ"],t=["1","2","3"];return["Roberto Silva","Fernanda Costa","Marcelo Santos","Juliana Oliveira","Paulo Ferreira","Amanda Lima","Ricardo Alves","Carla Rodrigues","Diego Martins","Tatiane Pereira","Gabriel Sousa","Larissa Castro","Thiago Barbosa","Priscila Nascimento","Felipe Cardoso","Vanessa Araujo","Leonardo Dias","Cristina Moreira","André Campos","Simone Ribeiro","Bruno Correia","Patrícia Gomes","Vinicius Freitas","Renata Monteiro","Gustavo Pinto"].map((i,r)=>{const s=r%3,c=r%a.length;return{id:(6+r).toString(),nome:i,cpf:`${(1e8+r*111111).toString().substring(0,11)}`,email:`${i.toLowerCase().replace(" ",".")}@email.com`,cargo:a[c],empresa:e[s],dataAdmissao:`2023-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")}`,empresaId:t[s],status:Math.random()>.1?"ativo":"afastado",temFichaAtiva:Math.random()>.3}})}function A(){const a=p(),e=["ativo","vencido","suspenso"];return a.filter(t=>t.temFichaAtiva).map((t,o)=>{const i=(4+o).toString(),r=new Date(t.dataAdmissao),s=new Date(r);return s.setFullYear(s.getFullYear()+1),Math.random()>.7&&(s.setFullYear(2024),s.setMonth(Math.floor(Math.random()*12))),{id:i,colaboradorId:t.id,empresaId:t.empresaId,dataEmissao:r.toISOString().split("T")[0],dataValidade:s.toISOString().split("T")[0],status:s<new Date?"vencido":e[Math.floor(Math.random()*e.length)],itens:Math.random()>.5?[{id:`item-${i}-1`,tipoEPIId:"1",quantidade:Math.floor(Math.random()*3)+1,dataEntrega:r.toISOString(),status:"entregue"}]:[]}})}m.push(...p());const l=[{id:"1",colaboradorId:"1",empresaId:"1",dataEmissao:"2024-02-01",dataValidade:"2025-02-01",status:"ativo",itens:I.filter(a=>a.fichaEpiId==="1")},{id:"2",colaboradorId:"2",empresaId:"2",dataEmissao:"2023-12-15",dataValidade:"2024-12-15",status:"vencido",itens:[{id:"item-2-1",tipoEPIId:"2",quantidade:1,dataEntrega:"2023-12-15",status:"entregue"}]},{id:"3",colaboradorId:"5",empresaId:"2",dataEmissao:"2024-01-10",dataValidade:"2025-01-10",status:"suspenso",itens:[]},...A()],v=[{id:"1",fichaEPIId:"1",dataEntrega:"2024-02-01T09:00:00Z",itens:[{id:"1",tipoEPIId:"1",quantidade:1,dataValidade:"2026-12-31",status:"entregue",dataEntrega:"2024-02-01T09:00:00Z"},{id:"2",tipoEPIId:"2",quantidade:2,dataValidade:"2024-08-15",status:"entregue",dataEntrega:"2024-02-01T09:05:00Z"}],responsavel:"Ana Silva - Técnica de Segurança",status:"assinado",assinatura:{dataAssinatura:"2024-02-01T09:15:00Z",ip:"192.168.1.100",device:"Tablet Android"},qrCode:"QR123456789",linkAssinatura:"https://sistema.datalife.com.br/assinatura/1"},{id:"2",fichaEPIId:"2",dataEntrega:"2024-06-15T14:30:00Z",itens:[{id:"3",tipoEPIId:"3",quantidade:1,dataValidade:"2025-10-30",status:"entregue",dataEntrega:"2024-06-15T14:30:00Z"}],responsavel:"Carlos Pereira - Supervisor",status:"nao_assinado",qrCode:"QR987654321",linkAssinatura:"https://sistema.datalife.com.br/assinatura/2"}];function h(a=300,e=1e3){const t=Math.random()*(e-a)+a;return new Promise(o=>setTimeout(o,t))}function E(){return Math.random()<.1}class n extends Error{constructor(e,t=500){super(e),this.status=t,this.name="ApiError"}}async function d(a,e={}){const{method:t="GET",data:o,delay:i=!0}=e;if(i&&await h(),E())throw new n("Erro de conexão com o servidor",500);return console.log(`[API Mock] ${t} ${a}`,o?{data:o}:""),{}}function S(a,e,t){return{async getAll(){return await d(`${t}`),[...e]},async getById(o){await d(`${t}/${o}`);const i=e.find(r=>r.id===o);if(!i)throw new n(`${a} não encontrado`,404);return{...i}},async create(o){const i={...o,id:g(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await d(`${t}`,{method:"POST",data:o}),e.push(i),{...i}},async update(o,i){await d(`${t}/${o}`,{method:"PUT",data:i});const r=e.findIndex(c=>c.id===o);if(r===-1)throw new n(`${a} não encontrado`,404);const s={...e[r],...i,updatedAt:new Date().toISOString()};return e[r]=s,{...s}},async delete(o){await d(`${t}/${o}`,{method:"DELETE"});const i=e.findIndex(r=>r.id===o);if(i===-1)throw new n(`${a} não encontrado`,404);e.splice(i,1)}}}const b=S("Tipo EPI",f,"/tipos-epi"),T={async getEstatisticas(){return await d("/relatorios/estatisticas"),{totalColaboradores:m.filter(a=>a.status==="ativo").length,fichasAtivas:l.filter(a=>a.status==="ativo").length,fichasVencidas:l.filter(a=>a.status==="vencido").length,estoqueTotal:u.reduce((a,e)=>a+e.quantidade,0),estoqueBaixo:u.filter(a=>a.quantidadeMinima&&a.quantidade<=a.quantidadeMinima).length,entregasMes:v.filter(a=>{const e=new Date(a.dataEntrega),t=new Date;return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}).length}}};export{T as r,b as t};
