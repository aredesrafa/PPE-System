import{a as s}from"./D8PmxC0_.js";class d{async createDelivery(e){var o,r;if(console.log("ðŸšš DeliveryProcessAdapter: Criando entrega via ficha especÃ­fica..."),console.log("ðŸ” FichaEpiId:",e.fichaEpiId),console.log("ðŸ” ResponsavelId:",e.responsavelId),console.log("ðŸ” Itens count:",((o=e.itens)==null?void 0:o.length)||0),!e.fichaEpiId)throw new Error("fichaEpiId Ã© obrigatÃ³rio");if(!e.responsavelId)throw new Error("responsavelId Ã© obrigatÃ³rio");if(!e.itens||e.itens.length===0)throw new Error("Pelo menos um item Ã© obrigatÃ³rio");try{const a=[];e.itens.forEach(c=>{for(let t=0;t<c.quantidade;t++)a.push({estoqueItemOrigemId:c.estoqueItemId,numeroSerie:`SER-${c.estoqueItemId}-${t+1}`})});const n={fichaEpiId:e.fichaEpiId,quantidade:a.length,itens:a,assinaturaColaborador:"placeholder_signature",observacoes:e.observacoes||"",usuarioId:e.responsavelId};console.log("ðŸ“‹ Payload formatado para backend:",n);const l=await s.post(`/fichas-epi/${e.fichaEpiId}/entregas`,n);return console.log("âœ… Entrega criada via endpoint da ficha:"),console.log(`  - Ficha ID: ${e.fichaEpiId}`),console.log("  - Response:",l),l}catch(a){throw console.error("âŒ Erro ao criar entrega via ficha:",a),(r=a.response)!=null&&r.data&&console.error("âŒ Detalhes do erro do backend:",a.response.data),a}}async validateDelivery(e){console.log("ðŸ” DeliveryProcessAdapter: Validando entrega antes de criar:",e);try{const o=await s.post("/fichas-epi/entregas/validar",e);return console.log("âœ… ValidaÃ§Ã£o da entrega concluÃ­da:",o),o}catch(o){throw console.error("âŒ Erro na validaÃ§Ã£o da entrega:",o),o}}async confirmSignature(e,o){console.log("âœï¸ DeliveryProcessAdapter: Confirmando assinatura:",e);try{const r={assinaturaColaborador:o.assinatura,observacoes:"Entrega assinada pelo colaborador"};await s.put(`/fichas-epi/entregas/${e}/assinar`,r),console.log("âœ… Assinatura confirmada")}catch(r){throw console.error("âŒ Erro ao confirmar assinatura:",r),r}}async cancelDelivery(e,o){console.log("âŒ DeliveryProcessAdapter: Cancelando entrega:",e);try{await s.post(`/entregas/${e}/cancel`,o),console.log("âœ… Entrega cancelada")}catch(r){throw console.error("âŒ Erro ao cancelar entrega:",r),r}}async printDelivery(e){console.log("ðŸ–¨ï¸ DeliveryProcessAdapter: Gerando PDF da entrega:",e);try{const o=await s.get(`/entregas/${e}/print`,{responseType:"blob"});return console.log("âœ… PDF gerado"),o}catch(o){throw console.error("âŒ Erro ao gerar PDF:",o),o}}async updateDelivery(e,o){console.log("âœï¸ DeliveryProcessAdapter: Editando entrega:",e);try{const r=await s.put(`/entregas/${e}`,o);return console.log("âœ… Entrega editada"),r}catch(r){throw console.error("âŒ Erro ao editar entrega:",r),r}}async createDevolucao(e,o){console.log("ðŸ”„ DeliveryProcessAdapter: Criando devoluÃ§Ã£o:",e,o);try{const r=await s.post(`/fichas-epi/entregas/${e}/devolucao`,o);return console.log("âœ… DevoluÃ§Ã£o criada com sucesso:",r),r}catch(r){throw console.error("âŒ Erro ao criar devoluÃ§Ã£o:",r),r}}async validateDevolucao(e,o){console.log("ðŸ” DeliveryProcessAdapter: Validando devoluÃ§Ã£o:",e,o);try{const r=await s.post(`/fichas-epi/entregas/${e}/devolucao/validar`,o);return console.log("âœ… ValidaÃ§Ã£o de devoluÃ§Ã£o concluÃ­da:",r),r}catch(r){throw console.error("âŒ Erro na validaÃ§Ã£o de devoluÃ§Ã£o:",r),r}}async processBatchDevolucao(e){console.log("ðŸ”„ DeliveryProcessAdapter: Processando devoluÃ§Ãµes em lote:",e);try{const o=await s.post("/devolucoes/process-batch",e);return console.log("âœ… DevoluÃ§Ãµes em lote processadas:",o),o}catch(o){throw console.error("âŒ Erro ao processar devoluÃ§Ãµes em lote:",o),o}}}const g=new d;class u{async processReturns(e){console.log("ðŸ”„ ReturnProcessAdapter: Processando devoluÃ§Ãµes em lote:",e),console.log(`  - Total de itens: ${e.devolucoes.length}`);try{const o=await s.post("/devolucoes/process-batch",e);return console.log("âœ… DevoluÃ§Ãµes processadas:"),console.log(`  - Processadas: ${o.data.processadas}`),console.log(`  - Erros: ${o.data.erros.length}`),console.log(`  - Fichas atualizadas: ${o.data.fichasAtualizadas.length}`),o}catch(o){throw console.error("âŒ Erro ao processar devoluÃ§Ãµes:",o),o}}async validateReturn(e){console.log("ðŸ” ReturnProcessAdapter: Validando devoluÃ§Ã£o:",e);try{const o=await s.get(`/devolucoes/validate/${e}`);return o.podeDevolver?console.log("âœ… Equipamento pode ser devolvido"):console.log("âš ï¸ Equipamento nÃ£o pode ser devolvido:",o.motivo),o}catch(o){throw console.error("âŒ Erro ao validar devoluÃ§Ã£o:",o),o}}async getReturnHistory(e){console.log("ðŸ“‹ ReturnProcessAdapter: Buscando histÃ³rico de devoluÃ§Ãµes:",e);try{const o=await s.get(`/devolucoes/historico/${e}`);return console.log("âœ… HistÃ³rico de devoluÃ§Ãµes carregado"),o}catch(o){throw console.error("âŒ Erro ao buscar histÃ³rico de devoluÃ§Ãµes:",o),o}}async cancelReturn(e,o){console.log("âŒ ReturnProcessAdapter: Cancelando devoluÃ§Ã£o:",e);try{await s.post(`/devolucoes/${e}/cancel`,{motivo:o}),console.log("âœ… DevoluÃ§Ã£o cancelada")}catch(r){throw console.error("âŒ Erro ao cancelar devoluÃ§Ã£o:",r),r}}}const p=new u;export{g as d,p as r};
