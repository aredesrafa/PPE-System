var Ze=Object.defineProperty;var xe=(a,e,s)=>e in a?Ze(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var B=(a,e,s)=>xe(a,typeof e!="symbol"?e+"":e,s);import{w as _,d as b}from"./B-FKEqiI.js";import{S as be,i as _e,s as Y,d as k,m as C,o as h,p as U,q as F,b as I,r as A,u as z,x as T,y as W,G as N,J as D,K as M,L as q,a0 as re,a1 as $e,e as V,f as X,j as Q,A as Ce,B as ve,C as Ee,D as ke,v as et,Y as tt,w as ne,h as G,k as H,E,O as L,H as at,I as ie,ac as le,M as v,ae as g}from"./BMdB51sm.js";import{g as Ie,b as y,C as ot,a as Z}from"./Dwq3Do7L.js";import"./IHki7fMi.js";function st(){const{subscribe:a,set:e,update:s}=_("light");return{subscribe:a,initialize:()=>{const t=localStorage.getItem("theme");if(t==="dark"||t==="light"){e(t),document.documentElement.classList.toggle("dark",t==="dark");return}const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e(n),document.documentElement.classList.toggle("dark",n==="dark")},toggle:()=>{s(t=>{const o=t==="light"?"dark":"light";return localStorage.setItem("theme",o),document.documentElement.classList.toggle("dark",o==="dark"),o})},set:t=>{localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",t==="dark"),e(t)}}}const Lt=st();function rt(a){let e;const s=a[5].default,t=N(s,a,a[4],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,n){t&&t.p&&(!e||n&16)&&D(t,s,o,o[4],e?q(s,o[4],n,null):M(o[4]),null)},i(o){e||(h(t,o),e=!0)},o(o){C(t,o),e=!1},d(o){t&&t.d(o)}}}function nt(a){let e=a[0],s,t,o=a[0]&&J(a);return{c(){o&&o.c(),s=A()},l(n){o&&o.l(n),s=A()},m(n,r){o&&o.m(n,r),I(n,s,r),t=!0},p(n,r){n[0]?e?Y(e,n[0])?(o.d(1),o=J(n),e=n[0],o.c(),o.m(s.parentNode,s)):o.p(n,r):(o=J(n),e=n[0],o.c(),o.m(s.parentNode,s)):e&&(o.d(1),o=null,e=n[0])},i(n){t||(h(o,n),t=!0)},o(n){C(o,n),t=!1},d(n){n&&k(s),o&&o.d(n)}}}function J(a){let e,s,t,o;const n=a[5].default,r=N(n,a,a[4],null);let f=[a[3]],u={};for(let i=0;i<f.length;i+=1)u=T(u,f[i]);return{c(){e=Q(a[0]),r&&r.c(),this.h()},l(i){e=V(i,(a[0]||"null").toUpperCase(),{});var l=X(e);r&&r.l(l),l.forEach(k),this.h()},h(){re(a[0])(e,u)},m(i,l){I(i,e,l),r&&r.m(e,null),s=!0,t||(o=$e(a[2].call(null,e)),t=!0)},p(i,l){r&&r.p&&(!s||l&16)&&D(r,n,i,i[4],s?q(n,i[4],l,null):M(i[4]),null),re(i[0])(e,u=Ie(f,[l&8&&i[3]]))},i(i){s||(h(r,i),s=!0)},o(i){C(r,i),s=!1},d(i){i&&k(e),r&&r.d(i),t=!1,o()}}}function it(a){let e,s,t,o;const n=[nt,rt],r=[];function f(u,i){return u[1]?0:1}return e=f(a),s=r[e]=n[e](a),{c(){s.c(),t=A()},l(u){s.l(u),t=A()},m(u,i){r[e].m(u,i),I(u,t,i),o=!0},p(u,[i]){let l=e;e=f(u),e===l?r[e].p(u,i):(U(),C(r[l],1,1,()=>{r[l]=null}),F(),s=r[e],s?s.p(u,i):(s=r[e]=n[e](u),s.c()),h(s,1),s.m(t.parentNode,t))},i(u){o||(h(s),o=!0)},o(u){C(s),o=!1},d(u){u&&k(t),r[e].d(u)}}}function lt(a,e,s){const t=["tag","show","use"];let o=z(e,t),{$$slots:n={},$$scope:r}=e,{tag:f="div"}=e,{show:u}=e,{use:i=()=>{}}=e;return a.$$set=l=>{e=T(T({},e),W(l)),s(3,o=z(e,t)),"tag"in l&&s(0,f=l.tag),"show"in l&&s(1,u=l.show),"use"in l&&s(2,i=l.use),"$$scope"in l&&s(4,r=l.$$scope)},[f,u,i,o,r,n]}class ct extends be{constructor(e){super(),_e(this,e,lt,it,Y,{tag:0,show:1,use:2})}}const dt=a=>({}),ce=a=>({}),ut=a=>({props:a[0]&2304}),de=a=>({props:{...a[11],class:a[8]}}),ft=a=>({}),ue=a=>({});function fe(a){let e,s,t;const o=a[15].left,n=N(o,a,a[30],ue);return{c(){e=Q("div"),n&&n.c(),this.h()},l(r){e=V(r,"DIV",{class:!0});var f=X(e);n&&n.l(f),f.forEach(k),this.h()},h(){L(e,"class",s=y(a[4],a[5])+" start-0 ps-2.5 pointer-events-none")},m(r,f){I(r,e,f),n&&n.m(e,null),t=!0},p(r,f){n&&n.p&&(!t||f[0]&1073741824)&&D(n,o,r,r[30],t?q(o,r[30],f,ft):M(r[30]),ue),(!t||f[0]&48&&s!==(s=y(r[4],r[5])+" start-0 ps-2.5 pointer-events-none"))&&L(e,"class",s)},i(r){t||(h(n,r),t=!0)},o(r){C(n,r),t=!1},d(r){r&&k(e),n&&n.d(r)}}}function gt(a){let e,s,t,o=[a[11],{type:a[1]},{class:a[8]}],n={};for(let r=0;r<o.length;r+=1)n=T(n,o[r]);return{c(){e=Q("input"),this.h()},l(r){e=V(r,"INPUT",{class:!0}),this.h()},h(){ie(e,n)},m(r,f){I(r,e,f),e.autofocus&&e.focus(),le(e,a[0]),s||(t=[v(e,"input",a[29]),v(e,"blur",a[16]),v(e,"change",a[17]),v(e,"click",a[18]),v(e,"contextmenu",a[19]),v(e,"focus",a[20]),v(e,"keydown",a[21]),v(e,"keypress",a[22]),v(e,"keyup",a[23]),v(e,"mouseover",a[24]),v(e,"mouseenter",a[25]),v(e,"mouseleave",a[26]),v(e,"paste",a[27]),v(e,"input",a[28])],s=!0)},p(r,f){ie(e,n=Ie(o,[f[0]&2048&&r[11],f[0]&2&&{type:r[1]},f[0]&256&&{class:r[8]}])),f[0]&1&&e.value!==r[0]&&le(e,r[0])},d(r){r&&k(e),s=!1,at(t)}}}function ge(a){let e,s,t;const o=a[15].right,n=N(o,a,a[30],ce);return{c(){e=Q("div"),n&&n.c(),this.h()},l(r){e=V(r,"DIV",{class:!0});var f=X(e);n&&n.l(f),f.forEach(k),this.h()},h(){L(e,"class",s=y(a[4],a[6])+" end-0 pe-2.5")},m(r,f){I(r,e,f),n&&n.m(e,null),t=!0},p(r,f){n&&n.p&&(!t||f[0]&1073741824)&&D(n,o,r,r[30],t?q(o,r[30],f,dt):M(r[30]),ce),(!t||f[0]&80&&s!==(s=y(r[4],r[6])+" end-0 pe-2.5"))&&L(e,"class",s)},i(r){t||(h(n,r),t=!0)},o(r){C(n,r),t=!1},d(r){r&&k(e),n&&n.d(r)}}}function me(a){let e,s;return e=new ot({props:{size:a[2],color:"none",class:y(a[4],a[6])+" focus:ring-0 end-1",tabindex:-1}}),e.$on("click",a[9]),{c(){ke(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,o){ve(e,t,o),s=!0},p(t,o){const n={};o[0]&4&&(n.size=t[2]),o[0]&80&&(n.class=y(t[4],t[6])+" focus:ring-0 end-1"),e.$set(n)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){C(e.$$.fragment,t),s=!1},d(t){Ce(e,t)}}}function mt(a){let e,s,t,o,n,r=a[10].left&&fe(a);const f=a[15].default,u=N(f,a,a[30],de),i=u||gt(a);let l=a[10].right&&ge(a),m=a[3]&&a[0]&&`${a[0]}`.length>0&&me(a);return{c(){r&&r.c(),e=H(),i&&i.c(),s=H(),l&&l.c(),t=H(),m&&m.c(),o=A()},l(d){r&&r.l(d),e=G(d),i&&i.l(d),s=G(d),l&&l.l(d),t=G(d),m&&m.l(d),o=A()},m(d,p){r&&r.m(d,p),I(d,e,p),i&&i.m(d,p),I(d,s,p),l&&l.m(d,p),I(d,t,p),m&&m.m(d,p),I(d,o,p),n=!0},p(d,p){d[10].left?r?(r.p(d,p),p[0]&1024&&h(r,1)):(r=fe(d),r.c(),h(r,1),r.m(e.parentNode,e)):r&&(U(),C(r,1,1,()=>{r=null}),F()),u?u.p&&(!n||p[0]&1073744128)&&D(u,f,d,d[30],n?q(f,d[30],p,ut):M(d[30]),de):i&&i.p&&(!n||p[0]&2307)&&i.p(d,n?p:[-1,-1]),d[10].right?l?(l.p(d,p),p[0]&1024&&h(l,1)):(l=ge(d),l.c(),h(l,1),l.m(t.parentNode,t)):l&&(U(),C(l,1,1,()=>{l=null}),F()),d[3]&&d[0]&&`${d[0]}`.length>0?m?(m.p(d,p),p[0]&9&&h(m,1)):(m=me(d),m.c(),h(m,1),m.m(o.parentNode,o)):m&&(U(),C(m,1,1,()=>{m=null}),F())},i(d){n||(h(r),h(i,d),h(l),h(m),n=!0)},o(d){C(r),C(i,d),C(l),C(m),n=!1},d(d){d&&(k(e),k(s),k(t),k(o)),r&&r.d(d),i&&i.d(d),l&&l.d(d),m&&m.d(d)}}}function pt(a){let e,s;return e=new ct({props:{class:a[7],show:a[10].left||a[10].right||!!a[3],$$slots:{default:[mt]},$$scope:{ctx:a}}}),{c(){ke(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,o){ve(e,t,o),s=!0},p(t,o){const n={};o[0]&128&&(n.class=t[7]),o[0]&1032&&(n.show=t[10].left||t[10].right||!!t[3]),o[0]&1073745279&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){C(e.$$.fragment,t),s=!1},d(t){Ce(e,t)}}}function ht(a){return a&&a==="xs"?"sm":a==="xl"?"lg":a}function bt(a,e,s){let t;const o=["type","value","size","clearable","defaultClass","color","floatClass","classLeft","classRight","wrapperClass"];let n=z(e,o),{$$slots:r={},$$scope:f}=e;const u=et(r);let{type:i="text"}=e,{value:l=void 0}=e,{size:m=void 0}=e,{clearable:d=!1}=e,{defaultClass:p="block w-full disabled:cursor-not-allowed disabled:opacity-50 rtl:text-right"}=e,{color:R="base"}=e,{floatClass:ee="flex absolute inset-y-0 items-center text-gray-500 dark:text-gray-400"}=e,{classLeft:te=""}=e,{classRight:ae=""}=e,{wrapperClass:oe="relative w-auto"}=e;const Oe=tt(),Ae={base:"border border-gray-300 dark:border-gray-600",tinted:"border border-gray-300 dark:border-gray-500",green:"border border-green-500 dark:border-green-400",red:"border border-red-500 dark:border-red-400"},Te={base:"focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500",green:"focus:ring-green-500 focus:border-green-500 dark:focus:border-green-500 dark:focus:ring-green-500",red:"focus:ring-red-500 focus:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500"},Re={base:"bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",tinted:"bg-gray-50 text-gray-900 dark:bg-gray-600 dark:text-white dark:placeholder-gray-400",green:"bg-green-50 text-green-900 placeholder-green-700 dark:text-green-400 dark:placeholder-green-500 dark:bg-gray-700",red:"bg-red-50 text-red-900 placeholder-red-700 dark:text-red-500 dark:placeholder-red-500 dark:bg-gray-700"};let Ne=ne("background"),O=ne("group");const De={sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},Me={sm:"ps-9",md:"ps-10",lg:"ps-11"},qe={sm:"pe-9",md:"pe-10",lg:"pe-11"},Be={sm:"p-2",md:"p-2.5",lg:"p-3"};let se;const we=c=>{c.stopPropagation(),s(0,l=void 0),Oe("change")};function Ue(c){E.call(this,a,c)}function Fe(c){E.call(this,a,c)}function ze(c){E.call(this,a,c)}function Le(c){E.call(this,a,c)}function Ve(c){E.call(this,a,c)}function Qe(c){E.call(this,a,c)}function je(c){E.call(this,a,c)}function Ge(c){E.call(this,a,c)}function He(c){E.call(this,a,c)}function Je(c){E.call(this,a,c)}function Ke(c){E.call(this,a,c)}function We(c){E.call(this,a,c)}function Ye(c){E.call(this,a,c)}function Xe(){l=this.value,s(0,l)}return a.$$set=c=>{s(41,e=T(T({},e),W(c))),s(11,n=z(e,o)),"type"in c&&s(1,i=c.type),"value"in c&&s(0,l=c.value),"size"in c&&s(2,m=c.size),"clearable"in c&&s(3,d=c.clearable),"defaultClass"in c&&s(12,p=c.defaultClass),"color"in c&&s(13,R=c.color),"floatClass"in c&&s(4,ee=c.floatClass),"classLeft"in c&&s(5,te=c.classLeft),"classRight"in c&&s(6,ae=c.classRight),"wrapperClass"in c&&s(7,oe=c.wrapperClass),"$$scope"in c&&s(30,f=c.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&4&&s(14,t=m||ht(O==null?void 0:O.size)||"md");{const c=R==="base"&&Ne?"tinted":R;s(8,se=y([p,Be[t],u.left&&Me[t]||(d||u.right)&&qe[t],Te[R],Re[c],Ae[c],De[t],O||"rounded-lg",O&&"first:rounded-s-lg last:rounded-e-lg",O&&"not-first:-ms-px",e.class]))}},e=W(e),[l,i,m,d,ee,te,ae,oe,se,we,u,n,p,R,t,r,Ue,Fe,ze,Le,Ve,Qe,je,Ge,He,Je,Ke,We,Ye,Xe,f]}class Vt extends be{constructor(e){super(),_e(this,e,bt,pt,Y,{type:1,value:0,size:2,clearable:3,defaultClass:12,color:13,floatClass:4,classLeft:5,classRight:6,wrapperClass:7},null,[-1,-1])}}const K={tiposMovimentacao:[{code:"entrada_nota",label:"Entrada por Nota",description:"Entrada de itens via nota fiscal"},{code:"saida_entrega",label:"Sa√≠da por Entrega",description:"Sa√≠da para entrega a colaborador"},{code:"transferencia",label:"Transfer√™ncia",description:"Transfer√™ncia entre almoxarifados"},{code:"ajuste_positivo",label:"Ajuste Positivo",description:"Ajuste para aumentar estoque"},{code:"ajuste_negativo",label:"Ajuste Negativo",description:"Ajuste para diminuir estoque"},{code:"devolucao",label:"Devolu√ß√£o",description:"Devolu√ß√£o de item por colaborador"},{code:"descarte",label:"Descarte",description:"Descarte de item vencido ou danificado"},{code:"estorno",label:"Estorno",description:"Estorno de movimenta√ß√£o anterior"}],categoriasEPI:[{code:"PROTECAO_CABECA",label:"Prote√ß√£o da Cabe√ßa",description:"Capacetes, bon√©s, etc."},{code:"PROTECAO_OLHOS_ROSTO",label:"Prote√ß√£o dos Olhos",description:"√ìculos, viseiras, etc."},{code:"PROTECAO_OUVIDOS",label:"Prote√ß√£o Auditiva",description:"Protetores auriculares"},{code:"PROTECAO_RESPIRATORIA",label:"Prote√ß√£o Respirat√≥ria",description:"M√°scaras, respiradores"},{code:"PROTECAO_MAOS_BRACCOS",label:"Prote√ß√£o das M√£os",description:"Luvas de diversos tipos"},{code:"PROTECAO_PES",label:"Prote√ß√£o dos P√©s",description:"Cal√ßados de seguran√ßa"},{code:"PROTECAO_CLIMATICA",label:"Prote√ß√£o Clim√°tica",description:"Prote√ß√£o contra intemp√©ries"},{code:"ROUPA_APROXIMACAO",label:"Roupa de Aproxima√ß√£o",description:"Roupas especiais para aproxima√ß√£o"}],statusEntrega:[{code:"pendente_assinatura",label:"Pendente de Assinatura",description:"Aguardando assinatura do colaborador"},{code:"assinada",label:"Assinada",description:"Entrega confirmada e assinada"},{code:"devolvido",label:"Devolvido",description:"Item devolvido pelo colaborador"},{code:"vencido",label:"Vencido",description:"Item vencido e deve ser substitu√≠do"},{code:"cancelada",label:"Cancelada",description:"Entrega cancelada"}],statusFicha:[{code:"ativa",label:"Ativa",description:"Ficha ativa do colaborador"},{code:"inativa",label:"Inativa",description:"Ficha inativada"},{code:"pendente",label:"Pendente",description:"Ficha com pend√™ncias"},{code:"completa",label:"Completa",description:"Ficha com todos os EPIs entregues"}],statusEstoque:[{code:"disponivel",label:"Dispon√≠vel",description:"Item dispon√≠vel em estoque"},{code:"baixo",label:"Estoque Baixo",description:"Quantidade abaixo do m√≠nimo"},{code:"vencendo",label:"Pr√≥ximo ao Vencimento",description:"Vence em at√© 30 dias"},{code:"vencido",label:"Vencido",description:"Item com validade expirada"},{code:"esgotado",label:"Esgotado",description:"Sem itens em estoque"},{code:"bloqueado",label:"Bloqueado",description:"Item bloqueado para uso"},{code:"quarentena",label:"Em Quarentena",description:"Item devolvido aguardando an√°lise"},{code:"aguarda_inspecao",label:"Aguarda Inspe√ß√£o",description:"Item aguardando inspe√ß√£o t√©cnica"}],tiposNota:[{code:"entrada",label:"Entrada",description:"Nota de entrada de mercadorias"},{code:"transferencia",label:"Transfer√™ncia",description:"Nota de transfer√™ncia"},{code:"devolucao",label:"Devolu√ß√£o",description:"Nota de devolu√ß√£o"},{code:"descarte",label:"Descarte",description:"Nota de descarte"}]};class _t{constructor(){B(this,"cache",null);B(this,"cacheExpiry",0);B(this,"CACHE_DURATION",5*60*1e3)}async loadBusinessRules(){if(this.cache&&Date.now()<this.cacheExpiry)return this.cache;try{console.log("üîß Tentando carregar configura√ß√µes do backend...");const e=await Z.get("/configuracoes");if(e!=null&&e.success&&e.data){console.log("‚úÖ Configura√ß√µes carregadas do backend");const s=K;return this.cache=s,this.cacheExpiry=Date.now()+this.CACHE_DURATION,s}else throw new Error("Formato de resposta inesperado")}catch(e){return console.warn("‚ö†Ô∏è Endpoint /api/configuracoes n√£o encontrado ou erro:",e),this.cache?(console.warn("üìã Usando configura√ß√µes do cache devido ao erro"),this.cache):(console.warn("üìã Usando configura√ß√µes padr√£o (mock)"),this.cache=K,this.cacheExpiry=Date.now()+this.CACHE_DURATION,K)}}async getConfigByCategory(e){return(await this.loadBusinessRules())[e]||[]}async getConfigItem(e,s){return(await this.getConfigByCategory(e)).find(o=>o.code===s)||null}clearCache(){this.cache=null,this.cacheExpiry=0}isCacheValid(){return this.cache!==null&&Date.now()<this.cacheExpiry}}const pe=new _t;async function Qt(){try{console.log("‚öôÔ∏è Carregando configura√ß√µes do sistema...");const a=await Z.get("/configuracoes");return console.log("‚úÖ Configura√ß√µes do sistema carregadas:",a.data.length),a.data}catch(a){throw console.error("‚ùå Erro ao carregar configura√ß√µes do sistema:",a),a}}async function Ct(a,e){try{console.log("üíæ Atualizando configura√ß√£o do sistema:",a,"‚Üí",e);const s=await Z.put(`/configuracoes/${a}`,{valor:e});return console.log("‚úÖ Configura√ß√£o do sistema atualizada:",{chave:a,valorAnterior:s.data.valorAnterior,valorNovo:s.data.configuracao.valor}),s.data.configuracao}catch(s){throw console.error("‚ùå Erro ao atualizar configura√ß√£o do sistema:",s),s}}async function jt(a,e){return Ct(a,e.toString())}const Gt={PERMITIR_ESTOQUE_NEGATIVO:"PERMITIR_ESTOQUE_NEGATIVO",PERMITIR_AJUSTES_FORCADOS:"PERMITIR_AJUSTES_FORCADOS",ESTOQUE_MINIMO_EQUIPAMENTO:"ESTOQUE_MINIMO_EQUIPAMENTO"},he={data:null,loading:!1,error:null,lastUpdated:null};function vt(){const{subscribe:a,set:e,update:s}=_(he);return{subscribe:a,async initialize(){s(t=>({...t,loading:!0,error:null}));try{const t=await pe.loadBusinessRules();e({data:t,loading:!1,error:null,lastUpdated:Date.now()}),console.log("‚úÖ Configura√ß√µes de neg√≥cio carregadas com sucesso")}catch(t){const o=t instanceof Error?t.message:"Erro desconhecido";s(n=>({...n,loading:!1,error:`Erro ao carregar configura√ß√µes: ${o}`})),console.error("‚ùå Erro ao carregar configura√ß√µes de neg√≥cio:",t)}},async reload(){pe.clearCache(),await this.initialize()},reset(){e(he)},isReady(){let t=!1;return a(o=>{t=o.data!==null&&!o.loading&&!o.error})(),t}}}const P=vt(),Et=b(P,a=>{var e;return((e=a.data)==null?void 0:e.tiposMovimentacao)||[]}),kt=b(P,a=>{var e;return((e=a.data)==null?void 0:e.categoriasEPI)||[]}),It=b(P,a=>{var e;return((e=a.data)==null?void 0:e.statusEntrega)||[]});b(P,a=>{var e;return((e=a.data)==null?void 0:e.statusFicha)||[]});const St=b(P,a=>{var e;return((e=a.data)==null?void 0:e.statusEstoque)||[]});b(P,a=>{var e;return((e=a.data)==null?void 0:e.tiposNota)||[]});b(P,a=>a.data!==null&&!a.loading&&!a.error);function j(a,e=!0){const s=a.map(t=>({value:t.code,label:t.label}));return e?[{value:"",label:"Selecionar..."},...s]:s}b(Et,a=>j(a));const Ht=b(kt,a=>j(a));b(It,a=>j(a));const Jt=b(St,a=>j(a));function yt(){const{subscribe:a,update:e}=_([]);return{subscribe:a,add:s=>{const t=Math.random().toString(36).substring(7),o={id:t,...s};e(r=>[...r,o]);const n=s.duration||5e3;return n>0&&setTimeout(()=>{e(r=>r.filter(f=>f.id!==t))},n),t},remove:s=>{e(t=>t.filter(o=>o.id!==s))},clear:()=>{e(()=>[])}}}const w=yt(),Kt={success:(a,e,s)=>w.add({type:"success",title:a,message:e,duration:s}),error:(a,e,s)=>w.add({type:"error",title:a,message:e,duration:s}),warning:(a,e,s)=>w.add({type:"warning",title:a,message:e,duration:s}),info:(a,e,s)=>w.add({type:"info",title:a,message:e,duration:s})};function x(a){const e=_(a),s=_(""),t=_(1),o=_(10),n=_(""),r=_("asc"),f=b([e,s,t,o,n,r],([u,i,l,m,d,p])=>({filters:u,search:{term:i,fields:[]},pagination:{currentPage:l,itemsPerPage:m,totalItems:0,totalPages:0},sort:{field:d,direction:p}}));return{filters:e,searchTerm:s,currentPage:t,itemsPerPage:o,sortField:n,sortDirection:r,filtersState:f,updateFilter:(u,i)=>{e.update(l=>({...l,[u]:i})),t.set(1)},setSearchTerm:u=>{s.set(u),t.set(1)},setCurrentPage:u=>{t.set(u)},setItemsPerPage:u=>{o.set(u),t.set(1)},setSorting:(u,i)=>{const l=g(r),m=g(n);u===m&&!i?r.set(l==="asc"?"desc":"asc"):(n.set(u),r.set(i||"asc"))},resetFilters:()=>{e.set(a),s.set(""),t.set(1),n.set(""),r.set("asc")},resetPagination:()=>{t.set(1)},getCurrentFilters:()=>g(e),getCurrentSearchTerm:()=>g(s),getCurrentPage:()=>g(t),getCurrentSort:()=>({field:g(n),direction:g(r)})}}x({status:"todos",categoria:"todas",fabricante:"todos"});x({status:"todos",estoque:"todos",categoria:"todas",vencimento:"todos"});x({cargo:"todos",empresa:"todas",devolucaoPendente:!1});function Pt(){const{subscribe:a,set:e,update:s}=_([]);return{subscribe:a,set:e,add:t=>s(o=>[...o,t]),update:(t,o)=>s(n=>n.map(r=>r.id===t?{...r,...o}:r)),remove:t=>s(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),clear:()=>e([])}}function Ot(){const{subscribe:a,set:e,update:s}=_([]);return{subscribe:a,set:e,add:t=>s(o=>[...o,t]),update:(t,o)=>s(n=>n.map(r=>r.id===t?{...r,...o}:r)),remove:t=>s(o=>o.filter(n=>n.id!==t)),updateQuantidade:(t,o)=>s(n=>n.map(r=>r.id===t?{...r,quantidade:o}:r)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getByTipoEPI:t=>g({subscribe:a}).filter(o=>o.tipoEPIId===t),clear:()=>e([])}}function At(){const{subscribe:a,set:e,update:s}=_([]);return{subscribe:a,set:e,add:t=>s(o=>[...o,t]),update:(t,o)=>s(n=>n.map(r=>r.id===t?{...r,...o}:r)),remove:t=>s(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getByColaborador:t=>g({subscribe:a}).filter(o=>o.colaboradorId===t),getAtivas:()=>g({subscribe:a}).filter(t=>t.status==="ativo"),getVencidas:()=>g({subscribe:a}).filter(t=>t.status==="vencido"),clear:()=>e([])}}function Tt(){const{subscribe:a,set:e,update:s}=_([]);return{subscribe:a,set:e,add:t=>s(o=>[...o,t]),update:(t,o)=>s(n=>n.map(r=>r.id===t?{...r,...o}:r)),remove:t=>s(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getByEmpresa:t=>g({subscribe:a}).filter(o=>o.empresaId===t),getAtivos:()=>g({subscribe:a}).filter(t=>t.status==="ativo"),clear:()=>e([])}}function Rt(){const{subscribe:a,set:e,update:s}=_([]);return{subscribe:a,set:e,add:t=>s(o=>[...o,t]),update:(t,o)=>s(n=>n.map(r=>r.id===t?{...r,...o}:r)),remove:t=>s(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getAtivas:()=>g({subscribe:a}).filter(t=>t.status==="ativa"),clear:()=>e([])}}function Nt(){const{subscribe:a,set:e,update:s}=_([]);return{subscribe:a,set:e,add:t=>s(o=>[...o,t]),update:(t,o)=>s(n=>n.map(r=>r.id===t?{...r,...o}:r)),remove:t=>s(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getByFicha:t=>g({subscribe:a}).filter(o=>o.fichaEPIId===t),getPendentes:()=>g({subscribe:a}).filter(t=>t.status==="nao_assinado"||t.status==="pendente"),clear:()=>e([])}}function Dt(){const{subscribe:a,set:e,update:s}=_([]);return{subscribe:a,set:e,add:t=>s(o=>[t,...o]),update:(t,o)=>s(n=>n.map(r=>r.id===t?{...r,...o}:r)),remove:t=>s(o=>o.filter(n=>n.id!==t)),markAsRead:t=>s(o=>o.map(n=>n.id===t?{...n,lida:!0}:n)),markAllAsRead:()=>s(t=>t.map(o=>({...o,lida:!0}))),getNaoLidas:()=>g({subscribe:a}).filter(t=>!t.lida),getByTipo:t=>g({subscribe:a}).filter(o=>o.tipo===t),clear:()=>e([])}}Pt();const $=Ot(),Se=At(),ye=Tt();Rt();Nt();const Mt=Dt();b($,a=>a.filter(e=>e.quantidade>0&&e.status==="disponivel"));b($,a=>a.filter(e=>e.quantidadeMinima&&e.quantidade<=e.quantidadeMinima));b(Se,a=>a.filter(e=>e.status==="vencido"));b(ye,a=>a.filter(e=>e.status==="ativo"));const Pe=b(Mt,a=>a.filter(e=>!e.lida));b(Pe,a=>a.length);b([$,Se,ye,Pe],([a,e,s,t])=>({totalEstoque:a.reduce((o,n)=>o+n.quantidade,0),fichasAtivas:e.filter(o=>o.status==="ativo").length,fichasVencidas:e.filter(o=>o.status==="vencido").length,colaboradoresAtivos:s.filter(o=>o.status==="ativo").length,notificacoesPendentes:t.length,estoqueComProblemas:a.filter(o=>o.status==="baixo_estoque"||o.status==="vencido"||o.status==="esgotado").length}));function S(){const{subscribe:a,set:e,update:s}=_({isOpen:!1,mode:"create",data:void 0});return{subscribe:a,open:(t="create",o)=>{e({isOpen:!0,mode:t,data:o})},close:()=>{e({isOpen:!1,mode:"create",data:void 0})},setData:t=>{s(o=>({...o,data:t}))},setMode:t=>{s(o=>({...o,mode:t}))},isOpen:()=>g({subscribe:a}).isOpen,isMode:t=>g({subscribe:a}).mode===t,getData:()=>g({subscribe:a}).data}}S();S();S();S();S();S();S();S();function qt(){const{subscribe:a,set:e,update:s}=_({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",confirmColor:"red"});return{subscribe:a,confirm:t=>{e({isOpen:!0,title:t.title,message:t.message,confirmText:t.confirmText||"Confirmar",cancelText:t.cancelText||"Cancelar",confirmColor:t.confirmColor||"red",onConfirm:t.onConfirm,onCancel:t.onCancel})},close:()=>{e({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",confirmColor:"red"})},handleConfirm:async()=>{const t=g({subscribe:a});t.onConfirm&&await t.onConfirm(),e({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",confirmColor:"red"})},handleCancel:()=>{const t=g({subscribe:a});t.onCancel&&t.onCancel(),e({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",confirmColor:"red"})}}}qt();export{Gt as C,Vt as I,ct as W,w as a,P as b,Ht as c,Qt as g,Kt as n,Jt as s,Lt as t,jt as u};
