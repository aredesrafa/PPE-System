import{S as Se,i as Ae,s as Pe,d as p,A as Q,m as F,o as j,q as te,b as H,c as i,B as J,O as $,X as qe,h as P,e as x,f as I,P as K,C as Y,k as q,j as y,D as U,l as de,Q as Te,n as me,z as ve,r as ue,p as ae,a as Z,g as L,t as O,Y as fe}from"../chunks/D8ZBcRFv.js";import{a as $e,e as se,B as je,u as Be,d as pe,o as He}from"../chunks/INiUvie6.js";import"../chunks/IHki7fMi.js";import{d as Ne,w as oe}from"../chunks/H0tinE9G.js";import{C as re,E as ge,A as Fe}from"../chunks/PUFNlXKg.js";import{A as be}from"../chunks/CZcOGFFx.js";import{C as xe}from"../chunks/p6El4uXM.js";import{F as he}from"../chunks/CEMPKOvn.js";import{b as Re}from"../chunks/sSwz5yMW.js";class Me{async getDashboardData(){try{console.log("üìä Carregando dados do dashboard...");const[e,a]=await Promise.all([$e.get("/relatorios/dashboard"),$e.get("/contratadas/estatisticas")]);if(console.log("üìä Dashboard response:",e),console.log("üè¢ Contratada Stats response:",a),e.success&&e.data&&a.success&&a.data){const s=e.data,t={...a.data,topContratadas:a.data.topContratadas.map(n=>({contratada:n.contratada,totalColaboradores:n.totalColaboradores,totalEpisAtivos:n.totalEpisAtivos||0}))},r={fichasAtivas:this.extractFichasAtivas(s),episEntregues:this.extractEpisEntregues(s),episVencendo:this.extractEpisVencendo(s),estoqueBaixo:this.extractEstoqueBaixo(s),fichasAtivasChange:"+12%",episEntreguesChange:"+8%",episVencendoChange:"-5%",estoqueBaixoChange:"+3%"},o=this.mapActivities(s),l=this.mapQuickStats(s);return console.log("‚úÖ Dashboard dados mapeados:",{metrics:r,activitiesCount:o.length,quickStats:l,contratadaStats:t}),{metrics:r,activities:o,quickStats:l,contratadaStats:t,lastUpdated:s.dataAtualizacao||new Date().toISOString()}}throw new Error("Resposta inv√°lida do backend")}catch(e){return console.error("‚ùå Erro ao carregar dashboard, usando fallback:",e),this.getFallbackDashboardData()}}extractFichasAtivas(e){var s;const a=(s=e.indicadoresGerais)==null?void 0:s.find(t=>t.titulo==="Fichas Ativas");return(a==null?void 0:a.valor)||0}extractEpisEntregues(e){var a;return((a=e.entregasRecentes)==null?void 0:a.totalEntregasSemana)||0}extractEpisVencendo(e){var a;return((a=e.vencimentosProximos)==null?void 0:a.totalVencendoEm30Dias)||0}extractEstoqueBaixo(e){const a=e.estoqueAlertas;return((a==null?void 0:a.alertasBaixo)||0)+((a==null?void 0:a.alertasZero)||0)}mapActivities(e){var s,t;const a=[];return(s=e.entregasRecentes)!=null&&s.entregasDetalhadas&&e.entregasRecentes.entregasDetalhadas.slice(0,3).forEach(r=>{a.push({id:r.id,type:"entrega",description:`EPI entregue para ${r.colaboradorNome}`,time:this.formatTimeAgo(r.dataEntrega),equipment:r.contratadaNome||"N/A"})}),(t=e.entregasRecentes)!=null&&t.devolucoes&&e.entregasRecentes.devolucoes.slice(0,2).forEach(r=>{a.push({id:`dev-${r.colaboradorNome}-${r.dataDevolucao}`,type:"devolucao",description:`EPI devolvido por ${r.colaboradorNome}`,time:this.formatTimeAgo(r.dataDevolucao),equipment:r.tipoEpiNome})}),a.sort((r,o)=>String(o.id).localeCompare(String(r.id))).slice(0,5)}mapQuickStats(e){var t,r,o,l,n,g;const a=((r=(t=e.indicadoresGerais)==null?void 0:t.find(m=>m.titulo==="Total de Colaboradores"))==null?void 0:r.valor)||0,s=((l=(o=e.indicadoresGerais)==null?void 0:o.find(m=>m.titulo==="Itens em Estoque"))==null?void 0:l.valor)||0;return{totalColaboradores:a,fichasVencidas:((n=e.vencimentosProximos)==null?void 0:n.totalJaVencidos)||0,estoqueTotal:s,entregasHoje:((g=e.entregasRecentes)==null?void 0:g.entregasHoje)||0}}formatTimeAgo(e){const a=new Date(e),t=Math.floor((new Date().getTime()-a.getTime())/(1e3*60*60));if(t<1)return"h√° poucos minutos";if(t<24)return`h√° ${t} hora${t>1?"s":""}`;{const r=Math.floor(t/24);return`h√° ${r} dia${r>1?"s":""}`}}getFallbackDashboardData(){return{metrics:{fichasAtivas:150,episEntregues:1245,episVencendo:23,estoqueBaixo:12,fichasAtivasChange:"+12%",episEntreguesChange:"+8%",episVencendoChange:"-5%",estoqueBaixoChange:"+3%"},activities:[{id:1,type:"entrega",description:"EPI entregue para Jo√£o Silva",time:"h√° 2 horas",equipment:"Capacete de Seguran√ßa"},{id:2,type:"devolucao",description:"EPI devolvido por Maria Santos",time:"h√° 4 horas",equipment:"Luvas de Prote√ß√£o"},{id:3,type:"entrada",description:"Nova entrada de estoque",time:"h√° 6 horas",equipment:"√ìculos de Prote√ß√£o - 50 unidades"}],quickStats:{totalColaboradores:342,fichasVencidas:8,estoqueTotal:2840,entregasHoje:15},lastUpdated:new Date().toISOString()}}}const ze=new Me;function ye(d,e,a){const s=d.slice();return s[14]=e[a],s}function Ee(d,e,a){const s=d.slice();return s[17]=e[a],s}function ke(d,e,a){const s=d.slice();return s[23]=e[a],s}function Le(d,e,a){const s=d.slice();return s[20]=e[a],s[22]=a,s}function Oe(d){let e,a,s=se(d[0]),t=[];for(let o=0;o<s.length;o+=1)t[o]=we(ke(d,s,o));const r=o=>F(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=ue()},l(o){for(let l=0;l<t.length;l+=1)t[l].l(o);e=ue()},m(o,l){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(o,l);H(o,e,l),a=!0},p(o,l){if(l&1){s=se(o[0]);let n;for(n=0;n<s.length;n+=1){const g=ke(o,s,n);t[n]?(t[n].p(g,l),j(t[n],1)):(t[n]=we(g),t[n].c(),j(t[n],1),t[n].m(e.parentNode,e))}for(ae(),n=s.length;n<t.length;n+=1)r(n);te()}},i(o){if(!a){for(let l=0;l<s.length;l+=1)j(t[l]);a=!0}},o(o){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)F(t[l]);a=!1},d(o){o&&p(e),ve(t,o)}}}function Ge(d){let e,a,s=se(Array(4)),t=[];for(let r=0;r<s.length;r+=1)t[r]=Ue(Le(d,s,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ue()},l(r){for(let o=0;o<t.length;o+=1)t[o].l(r);e=ue()},m(r,o){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(r,o);H(r,e,o),a=!0},p:me,i(r){if(!a){for(let o=0;o<s.length;o+=1)j(t[o]);a=!0}},o(r){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)F(t[o]);a=!1},d(r){r&&p(e),ve(t,r)}}}function Qe(d){let e,a,s,t=d[23].title+"",r,o,l,n=d[23].value+"",g,m,u,b,h=d[23].change+"",c,f,S,E,T="vs. m√™s anterior",A,w,_,N,D,v;var k=d[23].icon;function B(C,V){return{props:{class:"w-6 h-6"}}}return k&&(_=fe(k,B())),{c(){e=y("div"),a=y("div"),s=y("p"),r=O(t),o=q(),l=y("p"),g=O(n),m=q(),u=y("div"),b=y("span"),c=O(h),S=q(),E=y("span"),E.textContent=T,A=q(),w=y("div"),_&&U(_.$$.fragment),D=q(),this.h()},l(C){e=x(C,"DIV",{class:!0});var V=I(e);a=x(V,"DIV",{});var z=I(a);s=x(z,"P",{class:!0});var G=I(s);r=L(G,t),G.forEach(p),o=P(z),l=x(z,"P",{class:!0});var X=I(l);g=L(X,n),X.forEach(p),m=P(z),u=x(z,"DIV",{class:!0});var W=I(u);b=x(W,"SPAN",{class:!0});var R=I(b);c=L(R,h),R.forEach(p),S=P(W),E=x(W,"SPAN",{class:!0,"data-svelte-h":!0}),K(E)!=="svelte-9uf3xt"&&(E.textContent=T),W.forEach(p),z.forEach(p),A=P(V),w=x(V,"DIV",{class:!0});var M=I(w);_&&Y(_.$$.fragment,M),M.forEach(p),V.forEach(p),D=P(C),this.h()},h(){$(s,"class","text-sm font-medium text-gray-600 dark:text-gray-400"),$(l,"class","text-2xl font-bold text-gray-900 dark:text-white"),$(b,"class",f="text-xs "+(d[23].changeType==="positive"?"text-green-600":"text-red-600")),$(E,"class","text-xs text-gray-500 dark:text-gray-400 ml-1"),$(u,"class","flex items-center mt-2"),$(w,"class",N="p-3 rounded-lg "+(d[23].color==="blue"?"bg-blue-100 dark:bg-blue-900":d[23].color==="green"?"bg-green-100 dark:bg-green-900":d[23].color==="yellow"?"bg-yellow-100 dark:bg-yellow-900":"bg-red-100 dark:bg-red-900")),$(e,"class","flex items-center justify-between")},m(C,V){H(C,e,V),i(e,a),i(a,s),i(s,r),i(a,o),i(a,l),i(l,g),i(a,m),i(a,u),i(u,b),i(b,c),i(u,S),i(u,E),i(e,A),i(e,w),_&&J(_,w,null),H(C,D,V),v=!0},p(C,V){if((!v||V&1)&&t!==(t=C[23].title+"")&&Z(r,t),(!v||V&1)&&n!==(n=C[23].value+"")&&Z(g,n),(!v||V&1)&&h!==(h=C[23].change+"")&&Z(c,h),(!v||V&1&&f!==(f="text-xs "+(C[23].changeType==="positive"?"text-green-600":"text-red-600")))&&$(b,"class",f),V&1&&k!==(k=C[23].icon)){if(_){ae();const z=_;F(z.$$.fragment,1,0,()=>{Q(z,1)}),te()}k?(_=fe(k,B()),U(_.$$.fragment),j(_.$$.fragment,1),J(_,w,null)):_=null}(!v||V&1&&N!==(N="p-3 rounded-lg "+(C[23].color==="blue"?"bg-blue-100 dark:bg-blue-900":C[23].color==="green"?"bg-green-100 dark:bg-green-900":C[23].color==="yellow"?"bg-yellow-100 dark:bg-yellow-900":"bg-red-100 dark:bg-red-900")))&&$(w,"class",N)},i(C){v||(_&&j(_.$$.fragment,C),v=!0)},o(C){_&&F(_.$$.fragment,C),v=!1},d(C){C&&(p(e),p(D)),_&&Q(_)}}}function we(d){let e,a;return e=new re({props:{size:"sm",class:"rounded-sm",$$slots:{default:[Qe]},$$scope:{ctx:d}}}),{c(){U(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,t){J(e,s,t),a=!0},p(s,t){const r={};t&67108865&&(r.$$scope={dirty:t,ctx:s}),e.$set(r)},i(s){a||(j(e.$$.fragment,s),a=!0)},o(s){F(e.$$.fragment,s),a=!1},d(s){Q(e,s)}}}function Je(d){let e,a='<div class="space-y-2"><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"></div> <div class="h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"></div> <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-20"></div></div> <div class="p-3 bg-gray-200 dark:bg-gray-700 rounded-lg"><div class="w-6 h-6 bg-gray-300 dark:bg-gray-600 rounded"></div></div>',s;return{c(){e=y("div"),e.innerHTML=a,s=q(),this.h()},l(t){e=x(t,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-bgl0bx"&&(e.innerHTML=a),s=P(t),this.h()},h(){$(e,"class","flex items-center justify-between animate-pulse")},m(t,r){H(t,e,r),H(t,s,r)},p:me,d(t){t&&(p(e),p(s))}}}function Ue(d){let e,a;return e=new re({props:{size:"sm",class:"rounded-sm",$$slots:{default:[Je]},$$scope:{ctx:d}}}),{c(){U(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,t){J(e,s,t),a=!0},p(s,t){const r={};t&67108864&&(r.$$scope={dirty:t,ctx:s}),e.$set(r)},i(s){a||(j(e.$$.fragment,s),a=!0)},o(s){F(e.$$.fragment,s),a=!1},d(s){Q(e,s)}}}function Xe(d){let e;return{c(){e=O("Ver Fichas")},l(a){e=L(a,"Ver Fichas")},m(a,s){H(a,e,s)},d(a){a&&p(e)}}}function Ce(d,e){let a,s,t,r,o,l,n,g,m=e[17].description+"",u,b,h,c=e[17].equipment+"",f,S,E,T=e[17].time+"",A,w,_;var N=e[9](e[17].type);function D(v,k){return{props:{class:"w-5 h-5"}}}return N&&(r=fe(N,D())),{key:d,first:null,c(){a=y("div"),s=y("div"),t=y("div"),r&&U(r.$$.fragment),l=q(),n=y("div"),g=y("p"),u=O(m),b=q(),h=y("p"),f=O(c),S=q(),E=y("p"),A=O(T),w=q(),this.h()},l(v){a=x(v,"DIV",{class:!0});var k=I(a);s=x(k,"DIV",{class:!0});var B=I(s);t=x(B,"DIV",{class:!0});var C=I(t);r&&Y(r.$$.fragment,C),C.forEach(p),B.forEach(p),l=P(k),n=x(k,"DIV",{class:!0});var V=I(n);g=x(V,"P",{class:!0});var z=I(g);u=L(z,m),z.forEach(p),b=P(V),h=x(V,"P",{class:!0});var G=I(h);f=L(G,c),G.forEach(p),S=P(V),E=x(V,"P",{class:!0});var X=I(E);A=L(X,T),X.forEach(p),V.forEach(p),w=P(k),k.forEach(p),this.h()},h(){$(t,"class",o="p-2 rounded-lg "+Ie(e[17].type)),$(s,"class","flex-shrink-0"),$(g,"class","text-sm font-medium text-gray-900 dark:text-white"),$(h,"class","text-sm text-gray-600 dark:text-gray-400"),$(E,"class","text-xs text-gray-500 dark:text-gray-500 mt-1"),$(n,"class","flex-1 min-w-0"),$(a,"class","flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"),this.first=a},m(v,k){H(v,a,k),i(a,s),i(s,t),r&&J(r,t,null),i(a,l),i(a,n),i(n,g),i(g,u),i(n,b),i(n,h),i(h,f),i(n,S),i(n,E),i(E,A),i(a,w),_=!0},p(v,k){if(e=v,k&4&&N!==(N=e[9](e[17].type))){if(r){ae();const B=r;F(B.$$.fragment,1,0,()=>{Q(B,1)}),te()}N?(r=fe(N,D()),U(r.$$.fragment),j(r.$$.fragment,1),J(r,t,null)):r=null}(!_||k&4&&o!==(o="p-2 rounded-lg "+Ie(e[17].type)))&&$(t,"class",o),(!_||k&4)&&m!==(m=e[17].description+"")&&Z(u,m),(!_||k&4)&&c!==(c=e[17].equipment+"")&&Z(f,c),(!_||k&4)&&T!==(T=e[17].time+"")&&Z(A,T)},i(v){_||(r&&j(r.$$.fragment,v),_=!0)},o(v){r&&F(r.$$.fragment,v),_=!1},d(v){v&&p(a),r&&Q(r)}}}function Ye(d){let e,a,s="Atividades Recentes",t,r,o,l,n=[],g=new Map,m;r=new je({props:{size:"xs",color:"alternative",class:"rounded-sm",href:Re+"/fichas",$$slots:{default:[Xe]},$$scope:{ctx:d}}});let u=se(d[2]);const b=h=>h[17].id;for(let h=0;h<u.length;h+=1){let c=Ee(d,u,h),f=b(c);g.set(f,n[h]=Ce(f,c))}return{c(){e=y("div"),a=y("h3"),a.textContent=s,t=q(),U(r.$$.fragment),o=q(),l=y("div");for(let h=0;h<n.length;h+=1)n[h].c();this.h()},l(h){e=x(h,"DIV",{class:!0});var c=I(e);a=x(c,"H3",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-1euutue"&&(a.textContent=s),t=P(c),Y(r.$$.fragment,c),c.forEach(p),o=P(h),l=x(h,"DIV",{class:!0});var f=I(l);for(let S=0;S<n.length;S+=1)n[S].l(f);f.forEach(p),this.h()},h(){$(a,"class","text-lg font-semibold text-gray-900 dark:text-white"),$(e,"class","flex items-center justify-between mb-4"),$(l,"class","space-y-3")},m(h,c){H(h,e,c),i(e,a),i(e,t),J(r,e,null),H(h,o,c),H(h,l,c);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(l,null);m=!0},p(h,c){const f={};c&67108864&&(f.$$scope={dirty:c,ctx:h}),r.$set(f),c&516&&(u=se(h[2]),ae(),n=Be(n,c,b,1,h,u,g,l,He,Ce,null,Ee),te())},i(h){if(!m){j(r.$$.fragment,h);for(let c=0;c<u.length;c+=1)j(n[c]);m=!0}},o(h){F(r.$$.fragment,h);for(let c=0;c<n.length;c+=1)F(n[c]);m=!1},d(h){h&&(p(e),p(o),p(l)),Q(r);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Ze(d){let e=d[3].fichasVencidas+"",a;return{c(){a=O(e)},l(s){a=L(s,e)},m(s,t){H(s,a,t)},p(s,t){t&8&&e!==(e=s[3].fichasVencidas+"")&&Z(a,e)},d(s){s&&p(a)}}}function Ke(d){let e=d[3].entregasHoje+"",a;return{c(){a=O(e)},l(s){a=L(s,e)},m(s,t){H(s,a,t)},p(s,t){t&8&&e!==(e=s[3].entregasHoje+"")&&Z(a,e)},d(s){s&&p(a)}}}function We(d){let e,a="Estat√≠sticas R√°pidas",s,t,r,o,l="Total de Colaboradores",n,g,m=d[3].totalColaboradores+"",u,b,h,c,f="Fichas Vencidas",S,E,T,A,w,_="Estoque Total",N,D,v=d[3].estoqueTotal.toLocaleString("pt-BR")+"",k,B,C,V,z="Entregas Hoje",G,X,W;return E=new pe({props:{color:"red",class:"w-fit rounded-sm",$$slots:{default:[Ze]},$$scope:{ctx:d}}}),X=new pe({props:{color:"green",class:"w-fit rounded-sm",$$slots:{default:[Ke]},$$scope:{ctx:d}}}),{c(){e=y("h3"),e.textContent=a,s=q(),t=y("div"),r=y("div"),o=y("span"),o.textContent=l,n=q(),g=y("span"),u=O(m),b=q(),h=y("div"),c=y("span"),c.textContent=f,S=q(),U(E.$$.fragment),T=q(),A=y("div"),w=y("span"),w.textContent=_,N=q(),D=y("span"),k=O(v),B=q(),C=y("div"),V=y("span"),V.textContent=z,G=q(),U(X.$$.fragment),this.h()},l(R){e=x(R,"H3",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-ppurac"&&(e.textContent=a),s=P(R),t=x(R,"DIV",{class:!0});var M=I(t);r=x(M,"DIV",{class:!0});var ee=I(r);o=x(ee,"SPAN",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-8sutok"&&(o.textContent=l),n=P(ee),g=x(ee,"SPAN",{class:!0});var le=I(g);u=L(le,m),le.forEach(p),ee.forEach(p),b=P(M),h=x(M,"DIV",{class:!0});var ne=I(h);c=x(ne,"SPAN",{class:!0,"data-svelte-h":!0}),K(c)!=="svelte-1jiovvy"&&(c.textContent=f),S=P(ne),Y(E.$$.fragment,ne),ne.forEach(p),T=P(M),A=x(M,"DIV",{class:!0});var ie=I(A);w=x(ie,"SPAN",{class:!0,"data-svelte-h":!0}),K(w)!=="svelte-7onrs3"&&(w.textContent=_),N=P(ie),D=x(ie,"SPAN",{class:!0});var _e=I(D);k=L(_e,v),_e.forEach(p),ie.forEach(p),B=P(M),C=x(M,"DIV",{class:!0});var ce=I(C);V=x(ce,"SPAN",{class:!0,"data-svelte-h":!0}),K(V)!=="svelte-1l7hlno"&&(V.textContent=z),G=P(ce),Y(X.$$.fragment,ce),ce.forEach(p),M.forEach(p),this.h()},h(){$(e,"class","text-lg font-semibold text-gray-900 dark:text-white mb-4"),$(o,"class","text-sm text-gray-600 dark:text-gray-400"),$(g,"class","text-sm font-semibold text-gray-900 dark:text-white"),$(r,"class","flex items-center justify-between"),$(c,"class","text-sm text-gray-600 dark:text-gray-400"),$(h,"class","flex items-center justify-between"),$(w,"class","text-sm text-gray-600 dark:text-gray-400"),$(D,"class","text-sm font-semibold text-gray-900 dark:text-white"),$(A,"class","flex items-center justify-between"),$(V,"class","text-sm text-gray-600 dark:text-gray-400"),$(C,"class","flex items-center justify-between"),$(t,"class","space-y-3")},m(R,M){H(R,e,M),H(R,s,M),H(R,t,M),i(t,r),i(r,o),i(r,n),i(r,g),i(g,u),i(t,b),i(t,h),i(h,c),i(h,S),J(E,h,null),i(t,T),i(t,A),i(A,w),i(A,N),i(A,D),i(D,k),i(t,B),i(t,C),i(C,V),i(C,G),J(X,C,null),W=!0},p(R,M){(!W||M&8)&&m!==(m=R[3].totalColaboradores+"")&&Z(u,m);const ee={};M&67108872&&(ee.$$scope={dirty:M,ctx:R}),E.$set(ee),(!W||M&8)&&v!==(v=R[3].estoqueTotal.toLocaleString("pt-BR")+"")&&Z(k,v);const le={};M&67108872&&(le.$$scope={dirty:M,ctx:R}),X.$set(le)},i(R){W||(j(E.$$.fragment,R),j(X.$$.fragment,R),W=!0)},o(R){F(E.$$.fragment,R),F(X.$$.fragment,R),W=!1},d(R){R&&(p(e),p(s),p(t)),Q(E),Q(X)}}}function De(d){let e,a;return e=new re({props:{size:"sm",class:"rounded-sm",$$slots:{default:[tt]},$$scope:{ctx:d}}}),{c(){U(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,t){J(e,s,t),a=!0},p(s,t){const r={};t&67108880&&(r.$$scope={dirty:t,ctx:s}),e.$set(r)},i(s){a||(j(e.$$.fragment,s),a=!0)},o(s){F(e.$$.fragment,s),a=!1},d(s){Q(e,s)}}}function et(d){let e=d[14].totalEpisAtivos+"",a,s;return{c(){a=O(e),s=O(" EPIs")},l(t){a=L(t,e),s=L(t," EPIs")},m(t,r){H(t,a,r),H(t,s,r)},p(t,r){r&16&&e!==(e=t[14].totalEpisAtivos+"")&&Z(a,e)},d(t){t&&(p(a),p(s))}}}function Ve(d){let e,a,s,t=d[14].contratada.nome+"",r,o,l,n=d[14].contratada.cnpjFormatado+"",g,m,u,b,h,c,f=d[14].totalColaboradores+"",S,E,T,A;return b=new pe({props:{color:"green",class:"w-fit rounded-sm mb-1",$$slots:{default:[et]},$$scope:{ctx:d}}}),{c(){e=y("div"),a=y("div"),s=y("p"),r=O(t),o=q(),l=y("p"),g=O(n),m=q(),u=y("div"),U(b.$$.fragment),h=q(),c=y("p"),S=O(f),E=O(" Colab."),T=q(),this.h()},l(w){e=x(w,"DIV",{class:!0});var _=I(e);a=x(_,"DIV",{class:!0});var N=I(a);s=x(N,"P",{class:!0});var D=I(s);r=L(D,t),D.forEach(p),o=P(N),l=x(N,"P",{class:!0});var v=I(l);g=L(v,n),v.forEach(p),N.forEach(p),m=P(_),u=x(_,"DIV",{class:!0});var k=I(u);Y(b.$$.fragment,k),h=P(k),c=x(k,"P",{class:!0});var B=I(c);S=L(B,f),E=L(B," Colab."),B.forEach(p),k.forEach(p),T=P(_),_.forEach(p),this.h()},h(){$(s,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),$(l,"class","text-xs text-gray-500 dark:text-gray-400"),$(a,"class","flex-1 min-w-0"),$(c,"class","text-xs text-gray-600 dark:text-gray-400"),$(u,"class","text-right ml-4"),$(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg")},m(w,_){H(w,e,_),i(e,a),i(a,s),i(s,r),i(a,o),i(a,l),i(l,g),i(e,m),i(e,u),J(b,u,null),i(u,h),i(u,c),i(c,S),i(c,E),i(e,T),A=!0},p(w,_){(!A||_&16)&&t!==(t=w[14].contratada.nome+"")&&Z(r,t),(!A||_&16)&&n!==(n=w[14].contratada.cnpjFormatado+"")&&Z(g,n);const N={};_&67108880&&(N.$$scope={dirty:_,ctx:w}),b.$set(N),(!A||_&16)&&f!==(f=w[14].totalColaboradores+"")&&Z(S,f)},i(w){A||(j(b.$$.fragment,w),A=!0)},o(w){F(b.$$.fragment,w),A=!1},d(w){w&&p(e),Q(b)}}}function tt(d){let e,a="Top Contratadas (EPIs Ativos)",s,t,r,o=se(d[4].contratadaStats.topContratadas),l=[];for(let g=0;g<o.length;g+=1)l[g]=Ve(ye(d,o,g));const n=g=>F(l[g],1,1,()=>{l[g]=null});return{c(){e=y("h3"),e.textContent=a,s=q(),t=y("div");for(let g=0;g<l.length;g+=1)l[g].c();this.h()},l(g){e=x(g,"H3",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1cc6x26"&&(e.textContent=a),s=P(g),t=x(g,"DIV",{class:!0});var m=I(t);for(let u=0;u<l.length;u+=1)l[u].l(m);m.forEach(p),this.h()},h(){$(e,"class","text-lg font-semibold text-gray-900 dark:text-white mb-4"),$(t,"class","space-y-3")},m(g,m){H(g,e,m),H(g,s,m),H(g,t,m);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(t,null);r=!0},p(g,m){if(m&16){o=se(g[4].contratadaStats.topContratadas);let u;for(u=0;u<o.length;u+=1){const b=ye(g,o,u);l[u]?(l[u].p(b,m),j(l[u],1)):(l[u]=Ve(b),l[u].c(),j(l[u],1),l[u].m(t,null))}for(ae(),u=o.length;u<l.length;u+=1)n(u);te()}},i(g){if(!r){for(let m=0;m<o.length;m+=1)j(l[m]);r=!0}},o(g){l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)F(l[m]);r=!1},d(g){g&&(p(e),p(s),p(t)),ve(l,g)}}}function at(d){let e,a="Alertas",s,t,r,o,l,n,g="23 EPIs vencendo em 30 dias",m,u,b,h,c,f="12 itens com estoque baixo",S;return o=new ge({props:{class:"w-4 h-4 text-yellow-600"}}),b=new ge({props:{class:"w-4 h-4 text-red-600"}}),{c(){e=y("h3"),e.textContent=a,s=q(),t=y("div"),r=y("div"),U(o.$$.fragment),l=q(),n=y("span"),n.textContent=g,m=q(),u=y("div"),U(b.$$.fragment),h=q(),c=y("span"),c.textContent=f,this.h()},l(E){e=x(E,"H3",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-103vt7x"&&(e.textContent=a),s=P(E),t=x(E,"DIV",{class:!0});var T=I(t);r=x(T,"DIV",{class:!0});var A=I(r);Y(o.$$.fragment,A),l=P(A),n=x(A,"SPAN",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-79ea4n"&&(n.textContent=g),A.forEach(p),m=P(T),u=x(T,"DIV",{class:!0});var w=I(u);Y(b.$$.fragment,w),h=P(w),c=x(w,"SPAN",{class:!0,"data-svelte-h":!0}),K(c)!=="svelte-1ahloid"&&(c.textContent=f),w.forEach(p),T.forEach(p),this.h()},h(){$(e,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),$(n,"class","text-sm text-gray-600 dark:text-gray-400"),$(r,"class","flex items-center space-x-2"),$(c,"class","text-sm text-gray-600 dark:text-gray-400"),$(u,"class","flex items-center space-x-2"),$(t,"class","space-y-2")},m(E,T){H(E,e,T),H(E,s,T),H(E,t,T),i(t,r),J(o,r,null),i(r,l),i(r,n),i(t,m),i(t,u),J(b,u,null),i(u,h),i(u,c),S=!0},p:me,i(E){S||(j(o.$$.fragment,E),j(b.$$.fragment,E),S=!0)},o(E){F(o.$$.fragment,E),F(b.$$.fragment,E),S=!1},d(E){E&&(p(e),p(s),p(t)),Q(o),Q(b)}}}function st(d){let e,a,s,t='<div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Dashboard</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Vis√£o geral do sistema de gerenciamento de EPIs</p></div>',r,o,l,n,g,m,u,b,h,c,f,S,E,T,A;const w=[Ge,Oe],_=[];function N(v,k){return v[1]?0:1}l=N(d),n=_[l]=w[l](d),b=new re({props:{size:"sm",class:"rounded-sm w-full max-w-none",$$slots:{default:[Ye]},$$scope:{ctx:d}}}),f=new re({props:{size:"sm",class:"rounded-sm",$$slots:{default:[We]},$$scope:{ctx:d}}});let D=d[4]&&d[4].contratadaStats&&d[4].contratadaStats.topContratadas.length>0&&De(d);return T=new re({props:{size:"sm",class:"rounded-sm border-l-4 border-l-yellow-500",$$slots:{default:[at]},$$scope:{ctx:d}}}),{c(){e=q(),a=y("div"),s=y("div"),s.innerHTML=t,r=q(),o=y("div"),n.c(),g=q(),m=y("div"),u=y("div"),U(b.$$.fragment),h=q(),c=y("div"),U(f.$$.fragment),S=q(),D&&D.c(),E=q(),U(T.$$.fragment),this.h()},l(v){qe("svelte-s5dteg",document.head).forEach(p),e=P(v),a=x(v,"DIV",{class:!0});var B=I(a);s=x(B,"DIV",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-13se1wv"&&(s.innerHTML=t),r=P(B),o=x(B,"DIV",{class:!0});var C=I(o);n.l(C),C.forEach(p),g=P(B),m=x(B,"DIV",{class:!0});var V=I(m);u=x(V,"DIV",{class:!0});var z=I(u);Y(b.$$.fragment,z),z.forEach(p),h=P(V),c=x(V,"DIV",{class:!0});var G=I(c);Y(f.$$.fragment,G),S=P(G),D&&D.l(G),E=P(G),Y(T.$$.fragment,G),G.forEach(p),V.forEach(p),B.forEach(p),this.h()},h(){document.title="Dashboard - DataLife EPI",$(s,"class","flex items-center justify-between"),$(o,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"),$(u,"class","lg:col-span-2"),$(c,"class","space-y-6"),$(m,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),$(a,"class","space-y-6")},m(v,k){H(v,e,k),H(v,a,k),i(a,s),i(a,r),i(a,o),_[l].m(o,null),i(a,g),i(a,m),i(m,u),J(b,u,null),i(m,h),i(m,c),J(f,c,null),i(c,S),D&&D.m(c,null),i(c,E),J(T,c,null),A=!0},p(v,[k]){let B=l;l=N(v),l===B?_[l].p(v,k):(ae(),F(_[B],1,1,()=>{_[B]=null}),te(),n=_[l],n?n.p(v,k):(n=_[l]=w[l](v),n.c()),j(n,1),n.m(o,null));const C={};k&67108868&&(C.$$scope={dirty:k,ctx:v}),b.$set(C);const V={};k&67108872&&(V.$$scope={dirty:k,ctx:v}),f.$set(V),v[4]&&v[4].contratadaStats&&v[4].contratadaStats.topContratadas.length>0?D?(D.p(v,k),k&16&&j(D,1)):(D=De(v),D.c(),j(D,1),D.m(c,E)):D&&(ae(),F(D,1,1,()=>{D=null}),te());const z={};k&67108864&&(z.$$scope={dirty:k,ctx:v}),T.$set(z)},i(v){A||(j(n),j(b.$$.fragment,v),j(f.$$.fragment,v),j(D),j(T.$$.fragment,v),A=!0)},o(v){F(n),F(b.$$.fragment,v),F(f.$$.fragment,v),F(D),F(T.$$.fragment,v),A=!1},d(v){v&&(p(e),p(a)),_[l].d(),Q(b),Q(f),D&&D.d(),Q(T)}}}function rt(d){switch(d){case"entrega":return"green";case"devolucao":return"blue";case"entrada":return"purple";case"vencimento":return"yellow";case"ficha":return"indigo";default:return"gray"}}function Ie(d){switch(rt(d)){case"green":return"bg-green-100 dark:bg-green-900";case"blue":return"bg-blue-100 dark:bg-blue-900";case"purple":return"bg-purple-100 dark:bg-purple-900";case"yellow":return"bg-yellow-100 dark:bg-yellow-900";case"indigo":return"bg-indigo-100 dark:bg-indigo-900";default:return"bg-gray-100 dark:bg-gray-900"}}function lt(d,e,a){let s,t,r,o;const l=oe(null);de(d,l,f=>a(4,o=f));const n=oe(!0);de(d,n,f=>a(1,s=f));const g=oe(null);let m=[];async function u(){try{n.set(!0),g.set(null);const f=await ze.getDashboardData();l.set(f),a(0,m=[{title:"Fichas Ativas",value:f.metrics.fichasAtivas.toString(),icon:he,color:"blue",change:f.metrics.fichasAtivasChange||"0%",changeType:"positive"},{title:"EPIs Entregues",value:f.metrics.episEntregues.toString(),icon:xe,color:"green",change:f.metrics.episEntreguesChange||"0%",changeType:"positive"},{title:"EPIs Vencendo",value:f.metrics.episVencendo.toString(),icon:ge,color:"yellow",change:f.metrics.episVencendoChange||"0%",changeType:"negative"},{title:"Estoque Baixo",value:f.metrics.estoqueBaixo.toString(),icon:be,color:"red",change:f.metrics.estoqueBaixoChange||"0%",changeType:"positive"}]),b.set(f.activities),h.set(f.quickStats),console.log("üìä Dashboard carregado com sucesso:",f)}catch(f){console.error("‚ùå Erro ao carregar dashboard:",f),g.set(f instanceof Error?f.message:"Erro desconhecido")}finally{n.set(!1)}}const b=oe([]);de(d,b,f=>a(2,t=f));const h=oe({totalColaboradores:0,fichasVencidas:0,estoqueTotal:0,entregasHoje:0});de(d,h,f=>a(3,r=f)),Ne([h],([f])=>{var S;return f.fichasVencidas+((S=m.find(E=>E.title==="Estoque Baixo"))==null?void 0:S.value)||0});function c(f){switch(f){case"entrega":return xe;case"devolucao":return Fe;case"entrada":return be;case"vencimento":return ge;case"ficha":return he;default:return he}}return Te(()=>{u();const f=setInterval(()=>{h.update(S=>({...S,entregasHoje:S.entregasHoje+Math.floor(Math.random()*2)}))},3e4);return()=>clearInterval(f)}),[m,s,t,r,o,l,n,b,h,c]}class pt extends Se{constructor(e){super(),Ae(this,e,lt,st,Pe,{})}}export{pt as component};
