var ct=Object.defineProperty;var ut=(r,e,t)=>e in r?ct(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ce=(r,e,t)=>ut(r,typeof e!="symbol"?e+"":e,t);import{S as $e,i as he,s as _e,d as g,m as k,p as w,q as b,B as ne,r as re,b as E,c as I,u as S,v as R,e as q,f as U,x as le,h as V,y as T,j as N,k as F,z as M,J as ze,n as Y,g as z,t as B,a as X,H as ee,P as ft,I as we,D as Be,E as He,F as je,o as dt,G as mt,l as pe,A as Ue,M as gt,w as pt}from"../chunks/BC4IzclS.js";import"../chunks/IHki7fMi.js";import{B as ue,g as $t,a as ht}from"../chunks/B4v2edil.js";import{t as _t}from"../chunks/CXTKVeGU.js";import{b as Ge,a as vt,s as bt,n as ve}from"../chunks/DjUOQdfO.js";import{w as Et}from"../chunks/T8TN0H9u.js";import{e as fe,u as Je,o as Qe}from"../chunks/DX1TGYer.js";import{B as Ee}from"../chunks/Bts1RGTM.js";import{C as It}from"../chunks/BeQNdKlZ.js";import{I as wt}from"../chunks/D_zb-ss7.js";import{T as We,a as Ke,b as Xe,c as ae,d as Ye,e as oe}from"../chunks/D0DvoTn9.js";import{A as yt,a as At,C as Ct}from"../chunks/B2ES7kX2.js";import{P as Ze,S as Pt,R as kt}from"../chunks/BxXM_vYQ.js";import{S as ye}from"../chunks/YnyuZVej.js";import{L as St,S as Tt,a as Mt}from"../chunks/CE7RIkV7.js";import{E as Dt,A as Ot}from"../chunks/CPG7A_O1.js";import{M as xt}from"../chunks/CouAZaID.js";import{M as qt}from"../chunks/BaS0qQIQ.js";const Nt="https://api.datalife-epi.com";class me extends Error{constructor(e,t,a,o){super(e),this.status=t,this.response=a,this.endpoint=o,this.name="ApiError"}get isAuthError(){return this.status===401||this.status===403}get isNetworkError(){return this.status===0||this.status>=500}get isClientError(){return this.status>=400&&this.status<500}}const Rt={timeout:1e4,retries:2,retryDelay:1e3};async function ge(r,e={}){const t={...Rt,...e},{skipAuth:a=!1,timeout:o,retries:n,retryDelay:s,...l}=t,u=new Headers(l.headers);u.set("Content-Type","application/json"),u.set("Accept","application/json");async function d(f=1){const c=new AbortController,i=setTimeout(()=>c.abort(),o);try{const m=r.startsWith("http")?r:`${Nt}${r}`,p=await fetch(m,{...l,headers:u,signal:c.signal});if(clearTimeout(i),!p.ok){let _={};const v=p.headers.get("content-type");if(v&&v.includes("application/json"))try{_=await p.json()}catch{}const x=_.message||_.error||`HTTP ${p.status}: ${p.statusText}`;throw new me(x,p.status,_,r)}if(p.headers.get("content-length")==="0"||p.status===204)return{};const h=p.headers.get("content-type");return h&&h.includes("application/json")?await p.json():await p.text()}catch(m){if(clearTimeout(i),m instanceof Error&&m.name==="AbortError")throw new me("Request timeout",408,null,r);if(m instanceof TypeError&&m.message.includes("fetch"))throw new me("Network error",0,null,r);if(m instanceof me){if((m.isNetworkError||m.status>=500)&&f<(n||0))return console.warn(`Tentativa ${f} falhou, tentando novamente em ${s}ms...`),await new Promise(p=>setTimeout(p,s)),d(f+1);throw m}throw new me(m instanceof Error?m.message:"Unknown error",0,null,r)}}return d()}const W={get:(r,e)=>ge(r,{...e,method:"GET"}),post:(r,e,t)=>ge(r,{...t,method:"POST",body:e?JSON.stringify(e):void 0}),put:(r,e,t)=>ge(r,{...t,method:"PUT",body:e?JSON.stringify(e):void 0}),patch:(r,e,t)=>ge(r,{...t,method:"PATCH",body:e?JSON.stringify(e):void 0}),delete:(r,e)=>ge(r,{...e,method:"DELETE"})};function te(r,e){const t=new URL(r,"http://dummy.com");return Object.entries(e).forEach(([a,o])=>{o!=null&&o!==""&&(Array.isArray(o)?o.forEach(n=>t.searchParams.append(a,String(n))):t.searchParams.set(a,String(o)))}),t.pathname+t.search}class Vt{constructor(){ce(this,"cache",new Map);ce(this,"CACHE_DURATION",5*60*1e3)}async getContratadas(e={}){const t=te("/contratadas",{ativo:e.ativo,page:e.page,limit:e.limit,sort:e.sort,order:e.order});return W.get(t)}async getContratadaById(e){return W.get(`/contratadas/${e}`)}async createContratada(e){return W.post("/contratadas",e)}async updateContratada(e,t){return W.put(`/contratadas/${e}`,t)}async deleteContratada(e){return W.delete(`/contratadas/${e}`)}async getColaboradores(e={}){const t=te("/colaboradores",{contratadaId:e.contratadaId,ativo:e.ativo,includeRelations:e.includeRelations,page:e.page,limit:e.limit,sort:e.sort,order:e.order,search:e.search,...e.filters||{}});return W.get(t)}async getColaboradoresByContratada(e,t={}){const a=te("/colaboradores",{contratadaId:e,ativo:t.ativo,includeRelations:t.includeRelations,page:t.page,limit:t.limit,sort:t.sort,order:t.order});return!t.page&&!t.limit?W.get(a):(await W.get(a)).data}async getColaboradorById(e,t=!1){const a=te(`/colaboradores/${e}`,{includeRelations:t});return W.get(a)}async createColaborador(e){return W.post("/colaboradores",e)}async updateColaborador(e,t){return W.put(`/colaboradores/${e}`,t)}async deleteColaborador(e){return W.delete(`/colaboradores/${e}`)}async getTiposEPI(e={}){try{const t=await _t.getAll();let a=t;if(e.ativo!==void 0&&(a=t.filter(f=>f.ativo===e.ativo)),e.search){const f=e.search.toLowerCase();a=a.filter(c=>{var i,m;return((i=c.nomeEquipamento)==null?void 0:i.toLowerCase().includes(f))||((m=c.numero_ca)==null?void 0:m.includes(e.search))})}const o=e.page||1,n=e.limit||50,s=(o-1)*n,l=s+n;return{data:a.slice(s,l).map(f=>({id:f.id,nomeEquipamento:f.nomeEquipamento,numero_ca:f.numero_ca,categoria:f.categoria||"PROTECAO_CABECA",descricao:f.descricao,ativo:f.ativo,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})),total:a.length,page:o,pageSize:n,totalPages:Math.ceil(a.length/n)}}catch(t){throw console.error("‚ùå Erro ao buscar tipos EPI:",t),t}}async getTiposEPIByCategoria(e,t={}){const a=te("/tipos-epi",{categoria:e,ativo:t.ativo,page:t.page,limit:t.limit,sort:t.sort,order:t.order});return!t.page&&!t.limit?W.get(a):(await W.get(a)).data}async getTipoEPIById(e){return W.get(`/tipos-epi/${e}`)}async getTipoEPIByCA(e){try{const t=te("/tipos-epi/search",{numeroCA:e});return await W.get(t)}catch{return null}}async createTipoEPI(e){return W.post("/tipos-epi",e)}async updateTipoEPI(e,t){return W.put(`/tipos-epi/${e}`,t)}async deleteTipoEPI(e){return W.delete(`/tipos-epi/${e}`)}async getAlmoxarifados(e={}){try{const t=[{id:"1",nome:"Almoxarifado Central",localizacao:"Setor A - Galp√£o 1",ativo:!0,unidadeNegocioId:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"2",nome:"Almoxarifado Secund√°rio",localizacao:"Setor B - Galp√£o 2",ativo:!0,unidadeNegocioId:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"3",nome:"Almoxarifado Obras",localizacao:"Canteiro - Container 1",ativo:!0,unidadeNegocioId:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];let a=t;return e.ativo!==void 0&&(a=t.filter(o=>o.ativo===e.ativo)),a}catch(t){throw console.error("‚ùå Erro ao buscar almoxarifados:",t),t}}async getAlmoxarifadoById(e){return W.get(`/almoxarifados/${e}`)}async createAlmoxarifado(e){return W.post("/almoxarifados",e)}async updateAlmoxarifado(e,t){return W.put(`/almoxarifados/${e}`,t)}async deleteAlmoxarifado(e){return W.delete(`/almoxarifados/${e}`)}async getContratadaWithColaboradores(e){const[t,a]=await Promise.all([this.getContratadaById(e),this.getColaboradoresByContratada(e,{ativo:!0})]);return{...t,colaboradores:a}}async getContratadasWithStats(){const e=await this.getContratadas({ativo:!0});return await Promise.all(e.map(async a=>{const o=await this.getColaboradoresByContratada(a.id),n=o.filter(s=>s.ativo);return{...a,totalColaboradores:o.length,colaboradoresAtivos:n.length}}))}async getTiposEPIMaisUtilizados(e=10){const t=te("/tipos-epi/mais-utilizados",{limit:e});return W.get(t)}async getContratadasCached(){const e="contratadas_ativas",t=this.cache.get(e);if(t&&Date.now()-t.timestamp<this.CACHE_DURATION)return t.data;const a=await this.getContratadas({ativo:!0});return this.cache.set(e,{data:a,timestamp:Date.now()}),a}clearCache(){this.cache.clear()}}const Ae=new Vt;class Ft{constructor(){ce(this,"cache",new Map);ce(this,"CACHE_DURATION",2*60*1e3);ce(this,"mockMovements",[])}async getInventoryItems(e={}){try{console.log("üìã getInventoryItems chamado com params:",e);const t=this.getMockInventoryData();console.log("üì¶ Dados mockados carregados:",t.length,"itens");let a=t;if(e.search){const f=e.search.toLowerCase();console.log("üîç Aplicando busca:",f),a=a.filter(c=>{var i,m,p,$;return((m=(i=c.tipoEPI)==null?void 0:i.nomeEquipamento)==null?void 0:m.toLowerCase().includes(f))||(($=(p=c.tipoEPI)==null?void 0:p.numeroCA)==null?void 0:$.includes(e.search))}),console.log("üîç Itens ap√≥s busca:",a.length)}e.status&&e.status!=="todos"&&(console.log("üè∑Ô∏è Aplicando filtro de status:",e.status),e.status==="disponivel"?a=a.filter(f=>f.status==="disponivel"||f.status==="baixo_estoque"):e.status==="indisponivel"&&(a=a.filter(f=>f.status==="esgotado"||f.status==="vencido")),console.log("üè∑Ô∏è Itens ap√≥s filtro status:",a.length)),e.categoria&&e.categoria!=="todas"&&(console.log("üìÇ Aplicando filtro de categoria:",e.categoria),a=a.filter(f=>{var c;return((c=f.tipoEPI)==null?void 0:c.categoria)===e.categoria}),console.log("üìÇ Itens ap√≥s filtro categoria:",a.length));const o=e.page||1,n=e.limit||20,s=(o-1)*n,l=s+n;return{data:a.slice(s,l).map(f=>({id:f.id,tipoEPIId:f.tipoEPIId,almoxarifadoId:f.almoxarifadoId,quantidade:f.quantidade,localizacao:f.localizacao,status:f.status,lote:f.lote,dataValidade:f.dataValidade,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tipoEPI:f.tipoEPI?{id:f.tipoEPI.id,nomeEquipamento:f.tipoEPI.nomeEquipamento,numeroCA:f.tipoEPI.numeroCA,categoria:f.tipoEPI.categoria||"PROTECAO_CABECA",descricao:f.tipoEPI.descricao,fabricante:f.tipoEPI.fabricante,ativo:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:void 0,almoxarifado:{id:f.almoxarifadoId,nome:"Almoxarifado Central",localizacao:"Setor A",ativo:!0,unidadeNegocioId:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}})),total:a.length,page:o,pageSize:n,totalPages:Math.ceil(a.length/n)}}catch(t){throw console.error("‚ùå Erro ao buscar itens de estoque:",t),t}}async getItemById(e,t=!0){const a=te(`/estoque/itens/${e}`,{includeExpanded:t});return W.get(a)}async getMovementHistory(e={}){const t=te("/estoque/movimentacoes",{itemEstoqueId:e.itemEstoqueId,tipoMovimentacao:e.tipoMovimentacao,dataInicio:e.dataInicio,dataFim:e.dataFim,usuarioId:e.usuarioId,includeExpanded:e.includeExpanded,page:e.page,limit:e.limit,sort:e.sort,order:e.order});return W.get(t)}async getItemMovementHistory(e,t={}){this.mockMovements||(this.mockMovements=[]);let a=this.mockMovements.filter(n=>n.itemEstoqueId===e);if(t.dataInicio){const n=new Date(t.dataInicio);a=a.filter(s=>new Date(s.dataMovimentacao)>=n)}const o=t.limit||50;return a.slice(0,o)}async getConsolidatedStock(e){const t=te("/estoque/consolidado",{tipoEPIId:e});return W.get(t)}async registerMovement(e){console.log("üìù Registrando movimenta√ß√£o:",e);try{await new Promise(s=>setTimeout(s,1e3));const a=this.getMockInventoryData().find(s=>s.id===e.itemEstoqueId);if(!a)throw new Error("Item de estoque n√£o encontrado");let o=a.quantidade;if(e.tipoMovimentacao==="AJUSTE_POSITIVO")o+=e.quantidade;else if(e.tipoMovimentacao==="AJUSTE_NEGATIVO"&&(o-=e.quantidade,o<0))throw new Error("Quantidade insuficiente em estoque");await this.updateMockItem(a.id,{quantidade:o,status:this.calculateStatus(o,a.dataValidade),updatedAt:new Date().toISOString()});const n={id:`mov-${Date.now()}`,tipoEPIId:e.tipoEPIId,almoxarifadoId:e.almoxarifadoId,tipoMovimentacao:e.tipoMovimentacao,quantidade:e.quantidade,motivo:e.motivo,observacoes:e.observacoes||"",documentoReferencia:e.documentoReferencia,usuarioId:"user-admin",dataMovimentacao:new Date().toISOString(),createdAt:new Date().toISOString()};return await this.addMockMovement(n),console.log(`‚úÖ Movimenta√ß√£o registrada: ${a.quantidade} ‚Üí ${o}`),n}catch(t){throw console.error("‚ùå Erro ao registrar movimenta√ß√£o:",t),t}}async registerEntry(e){return this.registerMovement({...e,tipoMovimentacao:"entrada_nota"})}async registerExit(e){return this.registerMovement({...e,tipoMovimentacao:"saida_entrega"})}async registrarAjusteContagem(e){const t=e.novaQuantidade-e.quantidadeAnterior,a=t>0?"ajuste_positivo":"ajuste_negativo";return this.registerMovement({tipoEPIId:"",almoxarifadoId:"",tipoMovimentacao:a,quantidade:Math.abs(t),motivo:e.motivo,observacoes:`Ajuste de ${e.quantidadeAnterior} para ${e.novaQuantidade} unidades`,documentoReferencia:`AJUSTE_${e.itemEstoqueId}`})}async registerTransfer(e){const t=await this.getItemById(e.itemId),a=await this.registerMovement({tipoEPIId:t.tipoEPIId,almoxarifadoId:t.almoxarifadoId,tipoMovimentacao:"saida_transferencia",quantidade:e.quantidade,motivo:e.motivo,observacoes:`Transfer√™ncia para almoxarifado ${e.almoxarifadoDestinoId}`}),o=await this.registerMovement({tipoEPIId:t.tipoEPIId,almoxarifadoId:e.almoxarifadoDestinoId,tipoMovimentacao:"entrada_transferencia",quantidade:e.quantidade,motivo:e.motivo,documentoReferencia:`TRANSFERENCIA_${a.id}`,observacoes:`Transfer√™ncia do almoxarifado ${t.almoxarifadoId}`});return[a,o]}async registerDiscard(e){return this.registerMovement({...e,tipoMovimentacao:"descarte"})}async registerReturn(e){return this.registerMovement({...e,tipoMovimentacao:"devolucao",documentoReferencia:e.entregaId?`ENTREGA_${e.entregaId}`:void 0})}async criarEstorno(e){return W.post("/movimentacoes-estoque/estornos",e)}async canReverseMovement(e){return W.get(`/movimentacoes-estoque/${e}/can-reverse`)}async createMovementNote(e){return W.post("/notas-movimentacao",e)}async processMovementNote(e){return W.post(`/notas-movimentacao/${e}/processar`)}async getMovementNotes(e={}){const t=te("/notas-movimentacao",e);return W.get(t)}async checkStockAvailability(e,t,a){const o=te("/estoque/verificar-disponibilidade",{tipoEPIId:e,almoxarifadoId:t,quantidade:a});return W.get(o)}async simulateMovement(e){return W.post("/estoque/simular-movimentacao",e)}async getLowStockItems(){return(await this.getInventoryItems({status:"baixo",includeExpanded:!0,limit:100})).data}async getExpiringItems(e=30){return(await this.getInventoryItems({vencimento:"vencendo",includeExpanded:!0,limit:100})).data}async getRecentMovements(e=20){return(await this.getMovementHistory({includeExpanded:!0,limit:e,sort:"dataMovimentacao",order:"desc"})).data}clearCache(){this.cache.clear()}invalidateCache(){this.clearCache()}async registerMovementWithCacheInvalidation(e){const t=await this.registerMovement(e);return this.invalidateCache(),t}async updateMockItem(e,t){console.log(`üíæ Item ${e} seria atualizado:`,t)}async addMockMovement(e){this.mockMovements||(this.mockMovements=[]),this.mockMovements.unshift(e),this.mockMovements.length>100&&(this.mockMovements=this.mockMovements.slice(0,100)),console.log(`üìä Movimenta√ß√£o adicionada ao hist√≥rico. Total: ${this.mockMovements.length}`)}calculateStatus(e,t){if(e===0)return"esgotado";if(e<=5)return"baixo_estoque";if(t){const a=new Date,o=new Date(t),n=Math.ceil((o.getTime()-a.getTime())/(1e3*60*60*24));if(n<=0)return"vencido";if(n<=30)return"vencendo"}return"disponivel"}getMockInventoryData(){return[{id:"item-001",tipoEPIId:"tipo-001",almoxarifadoId:"alm-001",quantidade:15,localizacao:"A1-001",status:"disponivel",lote:"LOTE2024001",dataValidade:"2025-12-31",tipoEPI:{id:"tipo-001",nomeEquipamento:"Capacete de Seguran√ßa",numeroCA:"31469",categoria:"PROTECAO_CABECA",descricao:"Capacete de seguran√ßa classe A",fabricante:"SafetyTech",ativo:!0}},{id:"item-002",tipoEPIId:"tipo-002",almoxarifadoId:"alm-001",quantidade:25,localizacao:"A1-002",status:"disponivel",lote:"LOTE2024002",dataValidade:"2025-06-30",tipoEPI:{id:"tipo-002",nomeEquipamento:"Luvas de Prote√ß√£o",numeroCA:"15276",categoria:"PROTECAO_MAOS",descricao:"Luvas de prote√ß√£o mec√¢nica",fabricante:"ProtectGear",ativo:!0}},{id:"item-003",tipoEPIId:"tipo-003",almoxarifadoId:"alm-001",quantidade:8,localizacao:"A1-003",status:"baixo_estoque",lote:"LOTE2024003",dataValidade:"2025-09-15",tipoEPI:{id:"tipo-003",nomeEquipamento:"√ìculos de Prote√ß√£o",numeroCA:"19420",categoria:"PROTECAO_OLHOS",descricao:"√ìculos de prote√ß√£o anti-impacto",fabricante:"VisionSafe",ativo:!0}},{id:"item-004",tipoEPIId:"tipo-004",almoxarifadoId:"alm-001",quantidade:30,localizacao:"A1-004",status:"disponivel",lote:"LOTE2024004",dataValidade:"2025-11-20",tipoEPI:{id:"tipo-004",nomeEquipamento:"Protetor Auricular",numeroCA:"5674",categoria:"PROTECAO_AUDITIVA",descricao:"Protetor auricular tipo plug",fabricante:"SoundGuard",ativo:!0}},{id:"item-005",tipoEPIId:"tipo-005",almoxarifadoId:"alm-001",quantidade:0,localizacao:"A1-005",status:"esgotado",lote:"LOTE2024005",dataValidade:"2025-08-10",tipoEPI:{id:"tipo-005",nomeEquipamento:"Cinto de Seguran√ßa",numeroCA:"18392",categoria:"PROTECAO_QUEDAS",descricao:"Cinto de seguran√ßa tipo paraquedista",fabricante:"HeightSafe",ativo:!0}},{id:"item-006",tipoEPIId:"tipo-006",almoxarifadoId:"alm-001",quantidade:20,localizacao:"A1-006",status:"disponivel",lote:"LOTE2024006",dataValidade:"2025-07-25",tipoEPI:{id:"tipo-006",nomeEquipamento:"Botina de Seguran√ßa",numeroCA:"12845",categoria:"PROTECAO_PES",descricao:"Botina de seguran√ßa com bico de a√ßo",fabricante:"FootProtect",ativo:!0}},{id:"item-007",tipoEPIId:"tipo-007",almoxarifadoId:"alm-001",quantidade:50,localizacao:"A1-007",status:"disponivel",lote:"LOTE2024007",dataValidade:"2025-03-30",tipoEPI:{id:"tipo-007",nomeEquipamento:"M√°scara PFF2",numeroCA:"42987",categoria:"PROTECAO_RESPIRATORIA",descricao:"M√°scara respirat√≥ria PFF2",fabricante:"AirSafe",ativo:!0}}]}}const be=new Ft;function Lt(r,e={}){const{initialPageSize:t=20,enableCache:a=!0,cacheTimeout:o=5*60*1e3,debounceDelay:n=300}=e,s={items:[],total:0,page:1,pageSize:t,totalPages:0,loading:!1,error:null,lastFetch:null},{subscribe:l,set:u,update:d}=Et(s),f=new Map;let c={page:1,limit:t},i=null,m=null;function p(D){return JSON.stringify(D)}function $(D){return Date.now()-D.timestamp<o}async function h(D){if(a){const se=p(D),ie=f.get(se);if(ie&&$(ie))return console.log("üìÑ Using cached data for:",se),ie.data}const J=await r(D);if(a){const se=p(D);f.set(se,{data:J,timestamp:Date.now()})}return J}async function _(D={}){c={...c,...D},d(J=>({...J,loading:!0,error:null}));try{const J=await h(c);u({items:J.data,total:J.total,page:J.page,pageSize:J.pageSize,totalPages:J.totalPages||Math.ceil(J.total/J.pageSize),loading:!1,error:null,lastFetch:Date.now()})}catch(J){const se=J instanceof Error?J.message:"Erro desconhecido";d(ie=>({...ie,loading:!1,error:se})),console.error("‚ùå Erro ao buscar p√°gina:",J)}}async function v(D){m&&clearTimeout(m),m=setTimeout(async()=>{c={...c,...D,page:1},await _(c)},n)}async function x(D){i&&clearTimeout(i),i=setTimeout(async()=>{c={...c,search:D,page:1},await _(c)},n)}async function j(D,J){c={...c,sort:D,order:J,page:1},await _(c)}async function L(){let D=!1;l(J=>{D=J.page<J.totalPages})(),D&&await _({page:c.page+1})}async function Z(){c.page>1&&await _({page:c.page-1})}async function Q(D){D>=1&&await _({page:D})}async function O(){if(a){const D=p(c);f.delete(D)}await _(c)}function A(){c={page:1,limit:t},f.clear(),u(s)}function G(){let D=!1;return l(J=>{D=J.page<J.totalPages})(),D}function y(){return c.page>1}function H(){let D=!1;return l(J=>{D=J.items.length===0&&!J.loading})(),D}function K(){let D=!1;return l(J=>{D=J.loading})(),D}function C(){return{...c}}return{subscribe:l,fetchPage:_,setFilters:v,setSearch:x,setSorting:j,nextPage:L,prevPage:Z,goToPage:Q,reload:O,reset:A,hasNext:G,hasPrev:y,isEmpty:H,isLoading:K,getCurrentParams:C}}function Ce(r,e,t){const a=r.slice();a[27]=e[t];const o=$a(a[27].status);return a[28]=o,a}function zt(r){let e,t,a;return e=new Ze({props:{class:"w-4 h-4 mr-2"}}),{c(){M(e.$$.fragment),t=B(`
        Nova Movimenta√ß√£o`)},l(o){T(e.$$.fragment,o),t=z(o,`
        Nova Movimenta√ß√£o`)},m(o,n){S(e,o,n),E(o,t,n),a=!0},p:Y,i(o){a||(b(e.$$.fragment,o),a=!0)},o(o){w(e.$$.fragment,o),a=!1},d(o){o&&g(t),k(e,o)}}}function Bt(r){let e,t;return e=new It({props:{size:"sm",class:"rounded-sm",$$slots:{default:[Jt]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p(a,o){const n={};o[0]&768|o[1]&1&&(n.$$scope={dirty:o,ctx:a}),e.$set(n)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function Ht(r){let e,t,a,o,n,s,l,u,d,f,c,i,m,p,$,h,_,v,x;n=new Pt({props:{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}}),l=new wt({props:{type:"text",placeholder:"Buscar por nome do EPI ou CA...",class:"pl-10 rounded-sm h-10 text-sm",value:r[8]}}),l.$on("input",r[10]),d=new ye({props:{options:[{value:"todos",label:"Todos os Status"},{value:"disponivel",label:"Dispon√≠vel"},{value:"indisponivel",label:"Indispon√≠vel"}],value:r[6].status||"todos",placeholder:"Status"}}),d.$on("change",r[19]),c=new ye({props:{options:r[7],value:r[6].categoria||"todas",placeholder:"Categoria"}}),c.$on("change",r[20]);const j=[Wt,Qt],L=[];function Z(O,A){return O[9]?0:1}m=Z(r),p=L[m]=j[m](r),_=new We({props:{hoverable:!0,$$slots:{default:[da]},$$scope:{ctx:r}}});let Q=r[5]>1&&ke(r);return{c(){e=N("div"),t=N("div"),a=N("div"),o=N("div"),M(n.$$.fragment),s=F(),M(l.$$.fragment),u=F(),M(d.$$.fragment),f=F(),M(c.$$.fragment),i=F(),p.c(),$=F(),h=N("div"),M(_.$$.fragment),v=F(),Q&&Q.c(),this.h()},l(O){e=q(O,"DIV",{class:!0});var A=U(e);t=q(A,"DIV",{class:!0});var G=U(t);a=q(G,"DIV",{class:!0});var y=U(a);o=q(y,"DIV",{class:!0});var H=U(o);T(n.$$.fragment,H),s=V(H),T(l.$$.fragment,H),H.forEach(g),u=V(y),T(d.$$.fragment,y),f=V(y),T(c.$$.fragment,y),i=V(y),p.l(y),y.forEach(g),G.forEach(g),$=V(A),h=q(A,"DIV",{class:!0});var K=U(h);T(_.$$.fragment,K),K.forEach(g),v=V(A),Q&&Q.l(A),A.forEach(g),this.h()},h(){R(o,"class","relative"),R(a,"class","grid grid-cols-1 md:grid-cols-4 gap-4"),R(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),R(h,"class","min-w-[980px] overflow-x-auto"),R(e,"class","bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden")},m(O,A){E(O,e,A),I(e,t),I(t,a),I(a,o),S(n,o,null),I(o,s),S(l,o,null),I(a,u),S(d,a,null),I(a,f),S(c,a,null),I(a,i),L[m].m(a,null),I(e,$),I(e,h),S(_,h,null),I(e,v),Q&&Q.m(e,null),x=!0},p(O,A){const G={};A[0]&256&&(G.value=O[8]),l.$set(G);const y={};A[0]&64&&(y.value=O[6].status||"todos"),d.$set(y);const H={};A[0]&128&&(H.options=O[7]),A[0]&64&&(H.value=O[6].categoria||"todas"),c.$set(H);let K=m;m=Z(O),m===K?L[m].p(O,A):(ne(),w(L[K],1,1,()=>{L[K]=null}),re(),p=L[m],p?p.p(O,A):(p=L[m]=j[m](O),p.c()),b(p,1),p.m(a,null));const C={};A[0]&1|A[1]&1&&(C.$$scope={dirty:A,ctx:O}),_.$set(C),O[5]>1?Q?(Q.p(O,A),A[0]&32&&b(Q,1)):(Q=ke(O),Q.c(),b(Q,1),Q.m(e,null)):Q&&(ne(),w(Q,1,1,()=>{Q=null}),re())},i(O){x||(b(n.$$.fragment,O),b(l.$$.fragment,O),b(d.$$.fragment,O),b(c.$$.fragment,O),b(p),b(_.$$.fragment,O),b(Q),x=!0)},o(O){w(n.$$.fragment,O),w(l.$$.fragment,O),w(d.$$.fragment,O),w(c.$$.fragment,O),w(p),w(_.$$.fragment,O),w(Q),x=!1},d(O){O&&g(e),k(n),k(l),k(d),k(c),L[m].d(),k(_),Q&&Q.d()}}}function jt(r){let e,t;return e=new Dt({props:{error:r[2],onRetry:r[18]}}),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p(a,o){const n={};o[0]&4&&(n.error=a[2]),o[0]&16&&(n.onRetry=a[18]),e.$set(n)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function Ut(r){let e,t;return e=new St({}),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p:Y,i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function Gt(r){let e,t,a;return e=new Ze({props:{class:"w-4 h-4 mr-2"}}),{c(){M(e.$$.fragment),t=B(`
          Primeira Movimenta√ß√£o`)},l(o){T(e.$$.fragment,o),t=z(o,`
          Primeira Movimenta√ß√£o`)},m(o,n){S(e,o,n),E(o,t,n),a=!0},p:Y,i(o){a||(b(e.$$.fragment,o),a=!0)},o(o){w(e.$$.fragment,o),a=!1},d(o){o&&g(t),k(e,o)}}}function Jt(r){let e,t,a,o,n,s="Nenhum item no estoque",l,u,d=r[8]||r[9]?"Tente ajustar os filtros ou termo de busca":"Comece adicionando itens ao estoque",f,c,i,m;return a=new yt({props:{class:"w-8 h-8 text-gray-400"}}),i=new ue({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Gt]},$$scope:{ctx:r}}}),i.$on("click",r[16]),{c(){e=N("div"),t=N("div"),M(a.$$.fragment),o=F(),n=N("h3"),n.textContent=s,l=F(),u=N("p"),f=B(d),c=F(),M(i.$$.fragment),this.h()},l(p){e=q(p,"DIV",{class:!0});var $=U(e);t=q($,"DIV",{class:!0});var h=U(t);T(a.$$.fragment,h),h.forEach(g),o=V($),n=q($,"H3",{class:!0,"data-svelte-h":!0}),le(n)!=="svelte-1ps965a"&&(n.textContent=s),l=V($),u=q($,"P",{class:!0});var _=U(u);f=z(_,d),_.forEach(g),c=V($),T(i.$$.fragment,$),$.forEach(g),this.h()},h(){R(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"),R(n,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),R(u,"class","text-gray-500 dark:text-gray-400 mb-6"),R(e,"class","text-center py-12")},m(p,$){E(p,e,$),I(e,t),S(a,t,null),I(e,o),I(e,n),I(e,l),I(e,u),I(u,f),I(e,c),S(i,e,null),m=!0},p(p,$){(!m||$[0]&768)&&d!==(d=p[8]||p[9]?"Tente ajustar os filtros ou termo de busca":"Comece adicionando itens ao estoque")&&X(f,d);const h={};$[1]&1&&(h.$$scope={dirty:$,ctx:p}),i.$set(h)},i(p){m||(b(a.$$.fragment,p),b(i.$$.fragment,p),m=!0)},o(p){w(a.$$.fragment,p),w(i.$$.fragment,p),m=!1},d(p){p&&g(e),k(a),k(i)}}}function Qt(r){let e;return{c(){e=N("div")},l(t){e=q(t,"DIV",{}),U(e).forEach(g)},m(t,a){E(t,e,a)},p:Y,i:Y,o:Y,d(t){t&&g(e)}}}function Wt(r){let e,t;return e=new ue({props:{color:"alternative",class:"rounded-sm h-10 w-10 p-0 flex items-center justify-center",title:"Limpar Filtros",$$slots:{default:[Kt]},$$scope:{ctx:r}}}),e.$on("click",r[12]),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p(a,o){const n={};o[1]&1&&(n.$$scope={dirty:o,ctx:a}),e.$set(n)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function Kt(r){let e,t;return e=new kt({props:{class:"w-4 h-4"}}),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p:Y,i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function Xt(r){let e;return{c(){e=B("Equipamento")},l(t){e=z(t,"Equipamento")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function Yt(r){let e;return{c(){e=B("Categoria")},l(t){e=z(t,"Categoria")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function Zt(r){let e;return{c(){e=B("Quantidade")},l(t){e=z(t,"Quantidade")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function ea(r){let e;return{c(){e=B("Status")},l(t){e=z(t,"Status")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function ta(r){let e;return{c(){e=B("A√ß√µes")},l(t){e=z(t,"A√ß√µes")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function aa(r){let e,t,a,o,n,s,l,u,d,f;return e=new ae({props:{class:"min-w-[200px]",$$slots:{default:[Xt]},$$scope:{ctx:r}}}),a=new ae({props:{class:"min-w-[120px] hidden lg:table-cell",$$slots:{default:[Yt]},$$scope:{ctx:r}}}),n=new ae({props:{class:"min-w-[100px]",$$slots:{default:[Zt]},$$scope:{ctx:r}}}),l=new ae({props:{class:"min-w-[120px] hidden xl:table-cell",$$slots:{default:[ea]},$$scope:{ctx:r}}}),d=new ae({props:{class:"min-w-[120px]",$$slots:{default:[ta]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=F(),M(a.$$.fragment),o=F(),M(n.$$.fragment),s=F(),M(l.$$.fragment),u=F(),M(d.$$.fragment)},l(c){T(e.$$.fragment,c),t=V(c),T(a.$$.fragment,c),o=V(c),T(n.$$.fragment,c),s=V(c),T(l.$$.fragment,c),u=V(c),T(d.$$.fragment,c)},m(c,i){S(e,c,i),E(c,t,i),S(a,c,i),E(c,o,i),S(n,c,i),E(c,s,i),S(l,c,i),E(c,u,i),S(d,c,i),f=!0},p(c,i){const m={};i[1]&1&&(m.$$scope={dirty:i,ctx:c}),e.$set(m);const p={};i[1]&1&&(p.$$scope={dirty:i,ctx:c}),a.$set(p);const $={};i[1]&1&&($.$$scope={dirty:i,ctx:c}),n.$set($);const h={};i[1]&1&&(h.$$scope={dirty:i,ctx:c}),l.$set(h);const _={};i[1]&1&&(_.$$scope={dirty:i,ctx:c}),d.$set(_)},i(c){f||(b(e.$$.fragment,c),b(a.$$.fragment,c),b(n.$$.fragment,c),b(l.$$.fragment,c),b(d.$$.fragment,c),f=!0)},o(c){w(e.$$.fragment,c),w(a.$$.fragment,c),w(n.$$.fragment,c),w(l.$$.fragment,c),w(d.$$.fragment,c),f=!1},d(c){c&&(g(t),g(o),g(s),g(u)),k(e,c),k(a,c),k(n,c),k(l,c),k(d,c)}}}function oa(r){let e=r[28].label+"",t;return{c(){t=B(e)},l(a){t=z(a,e)},m(a,o){E(a,t,o)},p(a,o){o[0]&1&&e!==(e=a[28].label+"")&&X(t,e)},d(a){a&&g(t)}}}function na(r){var L,Z,Q,O;let e,t,a=(((L=r[27].tipoEPI)==null?void 0:L.nomeEquipamento)||"EPI n√£o encontrado")+"",o,n,s,l,u=(((Z=r[27].tipoEPI)==null?void 0:Z.numeroCA)||"-")+"",d,f,c=(((Q=r[27].tipoEPI)==null?void 0:Q.fabricante)||"-")+"",i,m,p,$=(((O=r[27].tipoEPI)==null?void 0:O.categoria)||"Sem categoria")+"",h,_,v,x,j;return x=new Ee({props:{color:r[28].color,class:"w-fit rounded-sm text-xs",$$slots:{default:[oa]},$$scope:{ctx:r}}}),{c(){e=N("div"),t=N("p"),o=B(a),n=F(),s=N("p"),l=B("CA "),d=B(u),f=B(" ‚Ä¢ "),i=B(c),m=F(),p=N("p"),h=B($),_=F(),v=N("div"),M(x.$$.fragment),this.h()},l(A){e=q(A,"DIV",{});var G=U(e);t=q(G,"P",{class:!0});var y=U(t);o=z(y,a),y.forEach(g),n=V(G),s=q(G,"P",{class:!0});var H=U(s);l=z(H,"CA "),d=z(H,u),f=z(H," ‚Ä¢ "),i=z(H,c),H.forEach(g),m=V(G),p=q(G,"P",{class:!0});var K=U(p);h=z(K,$),K.forEach(g),_=V(G),v=q(G,"DIV",{class:!0});var C=U(v);T(x.$$.fragment,C),C.forEach(g),G.forEach(g),this.h()},h(){R(t,"class","font-medium text-gray-900 dark:text-white truncate"),R(s,"class","text-sm text-gray-500 dark:text-gray-400 truncate"),R(p,"class","text-xs text-gray-500 dark:text-gray-400 lg:hidden mt-1 truncate"),R(v,"class","xl:hidden mt-1")},m(A,G){E(A,e,G),I(e,t),I(t,o),I(e,n),I(e,s),I(s,l),I(s,d),I(s,f),I(s,i),I(e,m),I(e,p),I(p,h),I(e,_),I(e,v),S(x,v,null),j=!0},p(A,G){var H,K,C,D;(!j||G[0]&1)&&a!==(a=(((H=A[27].tipoEPI)==null?void 0:H.nomeEquipamento)||"EPI n√£o encontrado")+"")&&X(o,a),(!j||G[0]&1)&&u!==(u=(((K=A[27].tipoEPI)==null?void 0:K.numeroCA)||"-")+"")&&X(d,u),(!j||G[0]&1)&&c!==(c=(((C=A[27].tipoEPI)==null?void 0:C.fabricante)||"-")+"")&&X(i,c),(!j||G[0]&1)&&$!==($=(((D=A[27].tipoEPI)==null?void 0:D.categoria)||"Sem categoria")+"")&&X(h,$);const y={};G[0]&1&&(y.color=A[28].color),G[0]&1|G[1]&1&&(y.$$scope={dirty:G,ctx:A}),x.$set(y)},i(A){j||(b(x.$$.fragment,A),j=!0)},o(A){w(x.$$.fragment,A),j=!1},d(A){A&&g(e),k(x)}}}function ra(r){var o;let e,t=(((o=r[27].tipoEPI)==null?void 0:o.categoria)||"-")+"",a;return{c(){e=N("span"),a=B(t),this.h()},l(n){e=q(n,"SPAN",{class:!0});var s=U(e);a=z(s,t),s.forEach(g),this.h()},h(){R(e,"class","text-sm text-gray-900 dark:text-white truncate")},m(n,s){E(n,e,s),I(e,a)},p(n,s){var l;s[0]&1&&t!==(t=(((l=n[27].tipoEPI)==null?void 0:l.categoria)||"-")+"")&&X(a,t)},d(n){n&&g(e)}}}function sa(r){let e,t=r[27].quantidade+"",a;return{c(){e=N("span"),a=B(t),this.h()},l(o){e=q(o,"SPAN",{class:!0});var n=U(e);a=z(n,t),n.forEach(g),this.h()},h(){R(e,"class","font-medium text-gray-900 dark:text-white")},m(o,n){E(o,e,n),I(e,a)},p(o,n){n[0]&1&&t!==(t=o[27].quantidade+"")&&X(a,t)},d(o){o&&g(e)}}}function la(r){let e=r[28].label+"",t;return{c(){t=B(e)},l(a){t=z(a,e)},m(a,o){E(a,t,o)},p(a,o){o[0]&1&&e!==(e=a[28].label+"")&&X(t,e)},d(a){a&&g(t)}}}function ia(r){let e,t;return e=new Ee({props:{color:r[28].color,class:"w-fit rounded-sm",$$slots:{default:[la]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p(a,o){const n={};o[0]&1&&(n.color=a[28].color),o[0]&1|o[1]&1&&(n.$$scope={dirty:o,ctx:a}),e.$set(n)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function ca(r){let e,t,a,o,n,s,l,u,d;a=new At({props:{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}});function f(...i){return r[21](r[27],...i)}s=new Ct({props:{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}});function c(...i){return r[22](r[27],...i)}return{c(){e=N("div"),t=N("button"),M(a.$$.fragment),o=F(),n=N("button"),M(s.$$.fragment),this.h()},l(i){e=q(i,"DIV",{class:!0});var m=U(e);t=q(m,"BUTTON",{class:!0,title:!0});var p=U(t);T(a.$$.fragment,p),p.forEach(g),o=V(m),n=q(m,"BUTTON",{class:!0,title:!0});var $=U(n);T(s.$$.fragment,$),$.forEach(g),m.forEach(g),this.h()},h(){R(t,"class","p-2 rounded-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),R(t,"title","Ajustar quantidade"),R(n,"class","p-2 rounded-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),R(n,"title","Ver hist√≥rico"),R(e,"class","flex space-x-2")},m(i,m){E(i,e,m),I(e,t),S(a,t,null),I(e,o),I(e,n),S(s,n,null),l=!0,u||(d=[we(t,"click",f),we(n,"click",c)],u=!0)},p(i,m){r=i},i(i){l||(b(a.$$.fragment,i),b(s.$$.fragment,i),l=!0)},o(i){w(a.$$.fragment,i),w(s.$$.fragment,i),l=!1},d(i){i&&g(e),k(a),k(s),u=!1,ft(d)}}}function ua(r){let e,t,a,o,n,s,l,u,d,f,c;return e=new oe({props:{class:"min-w-[200px]",$$slots:{default:[na]},$$scope:{ctx:r}}}),a=new oe({props:{class:"min-w-[120px] hidden lg:table-cell",$$slots:{default:[ra]},$$scope:{ctx:r}}}),n=new oe({props:{class:"min-w-[100px]",$$slots:{default:[sa]},$$scope:{ctx:r}}}),l=new oe({props:{class:"min-w-[120px] hidden xl:table-cell",$$slots:{default:[ia]},$$scope:{ctx:r}}}),d=new oe({props:{class:"min-w-[120px]",$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=F(),M(a.$$.fragment),o=F(),M(n.$$.fragment),s=F(),M(l.$$.fragment),u=F(),M(d.$$.fragment),f=F()},l(i){T(e.$$.fragment,i),t=V(i),T(a.$$.fragment,i),o=V(i),T(n.$$.fragment,i),s=V(i),T(l.$$.fragment,i),u=V(i),T(d.$$.fragment,i),f=V(i)},m(i,m){S(e,i,m),E(i,t,m),S(a,i,m),E(i,o,m),S(n,i,m),E(i,s,m),S(l,i,m),E(i,u,m),S(d,i,m),E(i,f,m),c=!0},p(i,m){const p={};m[0]&1|m[1]&1&&(p.$$scope={dirty:m,ctx:i}),e.$set(p);const $={};m[0]&1|m[1]&1&&($.$$scope={dirty:m,ctx:i}),a.$set($);const h={};m[0]&1|m[1]&1&&(h.$$scope={dirty:m,ctx:i}),n.$set(h);const _={};m[0]&1|m[1]&1&&(_.$$scope={dirty:m,ctx:i}),l.$set(_);const v={};m[0]&1|m[1]&1&&(v.$$scope={dirty:m,ctx:i}),d.$set(v)},i(i){c||(b(e.$$.fragment,i),b(a.$$.fragment,i),b(n.$$.fragment,i),b(l.$$.fragment,i),b(d.$$.fragment,i),c=!0)},o(i){w(e.$$.fragment,i),w(a.$$.fragment,i),w(n.$$.fragment,i),w(l.$$.fragment,i),w(d.$$.fragment,i),c=!1},d(i){i&&(g(t),g(o),g(s),g(u),g(f)),k(e,i),k(a,i),k(n,i),k(l,i),k(d,i)}}}function Pe(r,e){let t,a,o;function n(){return e[23](e[27])}return a=new Ye({props:{class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",$$slots:{default:[ua]},$$scope:{ctx:e}}}),a.$on("click",n),{key:r,first:null,c(){t=ee(),M(a.$$.fragment),this.h()},l(s){t=ee(),T(a.$$.fragment,s),this.h()},h(){this.first=t},m(s,l){E(s,t,l),S(a,s,l),o=!0},p(s,l){e=s;const u={};l[0]&1|l[1]&1&&(u.$$scope={dirty:l,ctx:e}),a.$set(u)},i(s){o||(b(a.$$.fragment,s),o=!0)},o(s){w(a.$$.fragment,s),o=!1},d(s){s&&g(t),k(a,s)}}}function fa(r){let e=[],t=new Map,a,o,n=fe(r[0]);const s=l=>l[27].id;for(let l=0;l<n.length;l+=1){let u=Ce(r,n,l),d=s(u);t.set(d,e[l]=Pe(d,u))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();a=ee()},l(l){for(let u=0;u<e.length;u+=1)e[u].l(l);a=ee()},m(l,u){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(l,u);E(l,a,u),o=!0},p(l,u){u[0]&24577&&(n=fe(l[0]),ne(),e=Je(e,u,s,1,l,n,t,a.parentNode,Qe,Pe,a,Ce),re())},i(l){if(!o){for(let u=0;u<n.length;u+=1)b(e[u]);o=!0}},o(l){for(let u=0;u<e.length;u+=1)w(e[u]);o=!1},d(l){l&&g(a);for(let u=0;u<e.length;u+=1)e[u].d(l)}}}function da(r){let e,t,a,o;return e=new Ke({props:{$$slots:{default:[aa]},$$scope:{ctx:r}}}),a=new Xe({props:{$$slots:{default:[fa]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=F(),M(a.$$.fragment)},l(n){T(e.$$.fragment,n),t=V(n),T(a.$$.fragment,n)},m(n,s){S(e,n,s),E(n,t,s),S(a,n,s),o=!0},p(n,s){const l={};s[1]&1&&(l.$$scope={dirty:s,ctx:n}),e.$set(l);const u={};s[0]&1|s[1]&1&&(u.$$scope={dirty:s,ctx:n}),a.$set(u)},i(n){o||(b(e.$$.fragment,n),b(a.$$.fragment,n),o=!0)},o(n){w(e.$$.fragment,n),w(a.$$.fragment,n),o=!1},d(n){n&&g(t),k(e,n),k(a,n)}}}function ke(r){let e,t,a,o=(r[4]-1)*20+1+"",n,s,l=Math.min(r[4]*20,r[3])+"",u,d,f,c,i,m,p,$,h,_;return p=new ue({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:r[4]===1,$$slots:{default:[ma]},$$scope:{ctx:r}}}),p.$on("click",r[24]),h=new ue({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:r[4]===r[5],$$slots:{default:[ga]},$$scope:{ctx:r}}}),h.$on("click",r[25]),{c(){e=N("div"),t=N("div"),a=B("Mostrando "),n=B(o),s=B(" a "),u=B(l),d=B(" de "),f=B(r[3]),c=B(" resultados"),i=F(),m=N("div"),M(p.$$.fragment),$=F(),M(h.$$.fragment),this.h()},l(v){e=q(v,"DIV",{class:!0});var x=U(e);t=q(x,"DIV",{class:!0});var j=U(t);a=z(j,"Mostrando "),n=z(j,o),s=z(j," a "),u=z(j,l),d=z(j," de "),f=z(j,r[3]),c=z(j," resultados"),j.forEach(g),i=V(x),m=q(x,"DIV",{class:!0});var L=U(m);T(p.$$.fragment,L),$=V(L),T(h.$$.fragment,L),L.forEach(g),x.forEach(g),this.h()},h(){R(t,"class","text-sm text-gray-500 dark:text-gray-400"),R(m,"class","flex space-x-2"),R(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700")},m(v,x){E(v,e,x),I(e,t),I(t,a),I(t,n),I(t,s),I(t,u),I(t,d),I(t,f),I(t,c),I(e,i),I(e,m),S(p,m,null),I(m,$),S(h,m,null),_=!0},p(v,x){(!_||x[0]&16)&&o!==(o=(v[4]-1)*20+1+"")&&X(n,o),(!_||x[0]&24)&&l!==(l=Math.min(v[4]*20,v[3])+"")&&X(u,l),(!_||x[0]&8)&&X(f,v[3]);const j={};x[0]&16&&(j.disabled=v[4]===1),x[1]&1&&(j.$$scope={dirty:x,ctx:v}),p.$set(j);const L={};x[0]&48&&(L.disabled=v[4]===v[5]),x[1]&1&&(L.$$scope={dirty:x,ctx:v}),h.$set(L)},i(v){_||(b(p.$$.fragment,v),b(h.$$.fragment,v),_=!0)},o(v){w(p.$$.fragment,v),w(h.$$.fragment,v),_=!1},d(v){v&&g(e),k(p),k(h)}}}function ma(r){let e;return{c(){e=B("Anterior")},l(t){e=z(t,"Anterior")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function ga(r){let e;return{c(){e=B("Pr√≥ximo")},l(t){e=z(t,"Pr√≥ximo")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function pa(r){let e,t,a,o='<h1 class="text-xl font-medium text-gray-900 dark:text-white">Estoque de EPIs</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Controle de estoque e movimenta√ß√µes</p>',n,s,l,u,d,f,c;l=new ue({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[zt]},$$scope:{ctx:r}}}),l.$on("click",r[16]);const i=[Ut,jt,Ht,Bt],m=[];function p($,h){return $[1]?0:$[2]?1:$[0].length>0?2:3}return d=p(r),f=m[d]=i[d](r),{c(){e=N("div"),t=N("div"),a=N("div"),a.innerHTML=o,n=F(),s=N("div"),M(l.$$.fragment),u=F(),f.c(),this.h()},l($){e=q($,"DIV",{class:!0});var h=U(e);t=q(h,"DIV",{class:!0});var _=U(t);a=q(_,"DIV",{"data-svelte-h":!0}),le(a)!=="svelte-1lsp2ed"&&(a.innerHTML=o),n=V(_),s=q(_,"DIV",{class:!0});var v=U(s);T(l.$$.fragment,v),v.forEach(g),_.forEach(g),u=V(h),f.l(h),h.forEach(g),this.h()},h(){R(s,"class","flex space-x-2"),R(t,"class","flex items-center justify-between"),R(e,"class","space-y-6")},m($,h){E($,e,h),I(e,t),I(t,a),I(t,n),I(t,s),S(l,s,null),I(e,u),m[d].m(e,null),c=!0},p($,h){const _={};h[1]&1&&(_.$$scope={dirty:h,ctx:$}),l.$set(_);let v=d;d=p($),d===v?m[d].p($,h):(ne(),w(m[v],1,1,()=>{m[v]=null}),re(),f=m[d],f?f.p($,h):(f=m[d]=i[d]($),f.c()),b(f,1),f.m(e,null))},i($){c||(b(l.$$.fragment,$),b(f),c=!0)},o($){w(l.$$.fragment,$),w(f),c=!1},d($){$&&g(e),k(l),m[d].d()}}}function $a(r){switch(r){case"disponivel":return{color:"green",label:"Dispon√≠vel"};case"baixo":return{color:"yellow",label:"Estoque baixo"};case"vencendo":return{color:"orange",label:"Pr√≥ximo ao vencimento"};case"vencido":return{color:"red",label:"Vencido"};case"esgotado":return{color:"gray",label:"Esgotado"};default:return{color:"gray",label:"Indefinido"}}}function ha(r,e,t){let a,{items:o=[]}=e,{loading:n=!1}=e,{error:s=null}=e,{total:l=0}=e,{page:u=1}=e,{totalPages:d=1}=e,{searchTerm:f=""}=e,{filters:c}=e,{categoriaOptions:i=[]}=e;const m=ze();let p="";function $(C){const D=C.target.value;t(8,p=D),m("searchChange",{value:D})}function h(C,D){m("filterChange",{key:C,value:D})}function _(){t(8,p=""),m("clearFilters")}function v(C){m("itemEdit",{item:C})}function x(C){m("itemHistory",{item:C})}function j(C){m("pageChange",{page:C})}function L(){m("newMovement")}const Z=()=>j(u),Q=C=>h("status",C.detail),O=C=>h("categoria",C.detail),A=(C,D)=>{D.preventDefault(),D.stopPropagation(),v(C)},G=(C,D)=>{D.preventDefault(),D.stopPropagation(),x(C)},y=C=>v(C),H=()=>j(u-1),K=()=>j(u+1);return r.$$set=C=>{"items"in C&&t(0,o=C.items),"loading"in C&&t(1,n=C.loading),"error"in C&&t(2,s=C.error),"total"in C&&t(3,l=C.total),"page"in C&&t(4,u=C.page),"totalPages"in C&&t(5,d=C.totalPages),"searchTerm"in C&&t(17,f=C.searchTerm),"filters"in C&&t(6,c=C.filters),"categoriaOptions"in C&&t(7,i=C.categoriaOptions)},r.$$.update=()=>{r.$$.dirty[0]&131328&&f!==void 0&&f!==p&&t(8,p=f),r.$$.dirty[0]&320&&t(9,a=p||c.status&&c.status!=="todos"||c.categoria&&c.categoria!=="todas")},[o,n,s,l,u,d,c,i,p,a,$,h,_,v,x,j,L,f,Z,Q,O,A,G,y,H,K]}class _a extends $e{constructor(e){super(),he(this,e,ha,pa,_e,{items:0,loading:1,error:2,total:3,page:4,totalPages:5,searchTerm:17,filters:6,categoriaOptions:7},null,[-1,-1])}}function Se(r,e,t){const a=r.slice();return a[13]=e[t],a}function Te(r,e,t){const a=r.slice();return a[16]=e[t],a}function Me(r){var l,u;let e,t=(((l=r[1].tipoEPI)==null?void 0:l.nomeEquipamento)||"Item")+"",a,o,n=(((u=r[1].tipoEPI)==null?void 0:u.numero_ca)||"N/A")+"",s;return{c(){e=N("p"),a=B(t),o=B(" - CA: "),s=B(n),this.h()},l(d){e=q(d,"P",{class:!0});var f=U(e);a=z(f,t),o=z(f," - CA: "),s=z(f,n),f.forEach(g),this.h()},h(){R(e,"class","text-sm text-gray-600 dark:text-gray-400 mt-1")},m(d,f){E(d,e,f),I(e,a),I(e,o),I(e,s)},p(d,f){var c,i;f&2&&t!==(t=(((c=d[1].tipoEPI)==null?void 0:c.nomeEquipamento)||"Item")+"")&&X(a,t),f&2&&n!==(n=(((i=d[1].tipoEPI)==null?void 0:i.numero_ca)||"N/A")+"")&&X(s,n)},d(d){d&&g(e)}}}function De(r){let e,t=r[16].label+"",a;return{c(){e=N("option"),a=B(t),this.h()},l(o){e=q(o,"OPTION",{});var n=U(e);a=z(n,t),n.forEach(g),this.h()},h(){e.__value=r[16].value,mt(e,e.__value)},m(o,n){E(o,e,n),I(e,a)},p:Y,d(o){o&&g(e)}}}function va(r){let e,t=fe(r[6]),a=[];for(let o=0;o<t.length;o+=1)a[o]=De(Te(r,t,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=ee()},l(o){for(let n=0;n<a.length;n+=1)a[n].l(o);e=ee()},m(o,n){for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(o,n);E(o,e,n)},p(o,n){if(n&64){t=fe(o[6]);let s;for(s=0;s<t.length;s+=1){const l=Te(o,t,s);a[s]?a[s].p(l,n):(a[s]=De(l),a[s].c(),a[s].m(e.parentNode,e))}for(;s<a.length;s+=1)a[s].d(1);a.length=t.length}},d(o){o&&g(e),dt(a,o)}}}function ba(r){var p;let e,t,a,o,n,s,l=r[2].length+"",u,d,f,c=((p=r[6].find(r[10]))==null?void 0:p.label.toLowerCase())+"",i,m;return t=new We({props:{$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){e=N("div"),M(t.$$.fragment),a=F(),o=N("div"),n=N("div"),s=N("strong"),u=B(l),d=B(" movimenta√ß√µes encontradas no per√≠odo de "),f=N("strong"),i=B(c),this.h()},l($){e=q($,"DIV",{class:!0});var h=U(e);T(t.$$.fragment,h),h.forEach(g),a=V($),o=q($,"DIV",{class:!0});var _=U(o);n=q(_,"DIV",{class:!0});var v=U(n);s=q(v,"STRONG",{});var x=U(s);u=z(x,l),x.forEach(g),d=z(v," movimenta√ß√µes encontradas no per√≠odo de "),f=q(v,"STRONG",{});var j=U(f);i=z(j,c),j.forEach(g),v.forEach(g),_.forEach(g),this.h()},h(){R(e,"class","overflow-x-auto max-h-96"),R(n,"class","text-sm text-gray-600 dark:text-gray-400"),R(o,"class","bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mt-4")},m($,h){E($,e,h),S(t,e,null),E($,a,h),E($,o,h),I(o,n),I(n,s),I(s,u),I(n,d),I(n,f),I(f,i),m=!0},p($,h){var v;const _={};h&524292&&(_.$$scope={dirty:h,ctx:$}),t.$set(_),(!m||h&4)&&l!==(l=$[2].length+"")&&X(u,l),(!m||h&32)&&c!==(c=((v=$[6].find($[10]))==null?void 0:v.label.toLowerCase())+"")&&X(i,c)},i($){m||(b(t.$$.fragment,$),m=!0)},o($){w(t.$$.fragment,$),m=!1},d($){$&&(g(e),g(a),g(o)),k(t)}}}function Ea(r){let e,t='<div class="text-gray-400 mb-2"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div> <p class="text-gray-600 dark:text-gray-400">Nenhuma movimenta√ß√£o encontrada no per√≠odo selecionado</p>';return{c(){e=N("div"),e.innerHTML=t,this.h()},l(a){e=q(a,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-xosige"&&(e.innerHTML=t),this.h()},h(){R(e,"class","text-center py-12")},m(a,o){E(a,e,o)},p:Y,i:Y,o:Y,d(a){a&&g(e)}}}function Ia(r){let e,t,a,o,n="Carregando hist√≥rico...",s;return t=new Mt({props:{size:"6",color:"blue"}}),{c(){e=N("div"),M(t.$$.fragment),a=F(),o=N("span"),o.textContent=n,this.h()},l(l){e=q(l,"DIV",{class:!0});var u=U(e);T(t.$$.fragment,u),a=V(u),o=q(u,"SPAN",{class:!0,"data-svelte-h":!0}),le(o)!=="svelte-1ad32rw"&&(o.textContent=n),u.forEach(g),this.h()},h(){R(o,"class","ml-3 text-gray-600 dark:text-gray-400"),R(e,"class","flex items-center justify-center py-12")},m(l,u){E(l,e,u),S(t,e,null),I(e,a),I(e,o),s=!0},p:Y,i(l){s||(b(t.$$.fragment,l),s=!0)},o(l){w(t.$$.fragment,l),s=!1},d(l){l&&g(e),k(t)}}}function wa(r){let e,t;return e=new Ot({props:{color:"red",class:"rounded-sm",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p(a,o){const n={};o&524304&&(n.$$scope={dirty:o,ctx:a}),e.$set(n)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function ya(r){let e;return{c(){e=B("Data")},l(t){e=z(t,"Data")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function Aa(r){let e;return{c(){e=B("Tipo")},l(t){e=z(t,"Tipo")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function Ca(r){let e;return{c(){e=B("Quantidade")},l(t){e=z(t,"Quantidade")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function Pa(r){let e;return{c(){e=B("Motivo")},l(t){e=z(t,"Motivo")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function ka(r){let e;return{c(){e=B("Usu√°rio")},l(t){e=z(t,"Usu√°rio")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function Sa(r){let e,t,a,o,n,s,l,u,d,f;return e=new ae({props:{class:"text-left",$$slots:{default:[ya]},$$scope:{ctx:r}}}),a=new ae({props:{class:"text-left",$$slots:{default:[Aa]},$$scope:{ctx:r}}}),n=new ae({props:{class:"text-center",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),l=new ae({props:{class:"text-left",$$slots:{default:[Pa]},$$scope:{ctx:r}}}),d=new ae({props:{class:"text-left",$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=F(),M(a.$$.fragment),o=F(),M(n.$$.fragment),s=F(),M(l.$$.fragment),u=F(),M(d.$$.fragment)},l(c){T(e.$$.fragment,c),t=V(c),T(a.$$.fragment,c),o=V(c),T(n.$$.fragment,c),s=V(c),T(l.$$.fragment,c),u=V(c),T(d.$$.fragment,c)},m(c,i){S(e,c,i),E(c,t,i),S(a,c,i),E(c,o,i),S(n,c,i),E(c,s,i),S(l,c,i),E(c,u,i),S(d,c,i),f=!0},p(c,i){const m={};i&524288&&(m.$$scope={dirty:i,ctx:c}),e.$set(m);const p={};i&524288&&(p.$$scope={dirty:i,ctx:c}),a.$set(p);const $={};i&524288&&($.$$scope={dirty:i,ctx:c}),n.$set($);const h={};i&524288&&(h.$$scope={dirty:i,ctx:c}),l.$set(h);const _={};i&524288&&(_.$$scope={dirty:i,ctx:c}),d.$set(_)},i(c){f||(b(e.$$.fragment,c),b(a.$$.fragment,c),b(n.$$.fragment,c),b(l.$$.fragment,c),b(d.$$.fragment,c),f=!0)},o(c){w(e.$$.fragment,c),w(a.$$.fragment,c),w(n.$$.fragment,c),w(l.$$.fragment,c),w(d.$$.fragment,c),f=!1},d(c){c&&(g(t),g(o),g(s),g(u)),k(e,c),k(a,c),k(n,c),k(l,c),k(d,c)}}}function Ta(r){let e,t=xe(r[13].dataMovimentacao)+"",a;return{c(){e=N("div"),a=B(t),this.h()},l(o){e=q(o,"DIV",{class:!0});var n=U(e);a=z(n,t),n.forEach(g),this.h()},h(){R(e,"class","text-sm")},m(o,n){E(o,e,n),I(e,a)},p(o,n){n&4&&t!==(t=xe(o[13].dataMovimentacao)+"")&&X(a,t)},d(o){o&&g(e)}}}function Ma(r){let e=Ne(r[13].tipoMovimentacao)+"",t;return{c(){t=B(e)},l(a){t=z(a,e)},m(a,o){E(a,t,o)},p(a,o){o&4&&e!==(e=Ne(a[13].tipoMovimentacao)+"")&&X(t,e)},d(a){a&&g(t)}}}function Da(r){let e,t;return e=new Ee({props:{color:qe(r[13].tipoMovimentacao),class:"w-fit rounded-sm text-xs",$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p(a,o){const n={};o&4&&(n.color=qe(a[13].tipoMovimentacao)),o&524292&&(n.$$scope={dirty:o,ctx:a}),e.$set(n)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function Oa(r){let e,t=Re(r[13].quantidade,r[13].tipoMovimentacao)+"",a,o;return{c(){e=N("span"),a=B(t),this.h()},l(n){e=q(n,"SPAN",{class:!0});var s=U(e);a=z(s,t),s.forEach(g),this.h()},h(){R(e,"class",o="font-semibold "+Ve(r[13].quantidade,r[13].tipoMovimentacao))},m(n,s){E(n,e,s),I(e,a)},p(n,s){s&4&&t!==(t=Re(n[13].quantidade,n[13].tipoMovimentacao)+"")&&X(a,t),s&4&&o!==(o="font-semibold "+Ve(n[13].quantidade,n[13].tipoMovimentacao))&&R(e,"class",o)},d(n){n&&g(e)}}}function xa(r){let e,t=(r[13].motivo||"-")+"",a,o;return{c(){e=N("div"),a=B(t),this.h()},l(n){e=q(n,"DIV",{class:!0,title:!0});var s=U(e);a=z(s,t),s.forEach(g),this.h()},h(){R(e,"class","text-sm text-gray-700 dark:text-gray-300 max-w-xs truncate"),R(e,"title",o=r[13].motivo)},m(n,s){E(n,e,s),I(e,a)},p(n,s){s&4&&t!==(t=(n[13].motivo||"-")+"")&&X(a,t),s&4&&o!==(o=n[13].motivo)&&R(e,"title",o)},d(n){n&&g(e)}}}function qa(r){var o;let e,t=(((o=r[13].usuario)==null?void 0:o.nome)||"Sistema")+"",a;return{c(){e=N("div"),a=B(t),this.h()},l(n){e=q(n,"DIV",{class:!0});var s=U(e);a=z(s,t),s.forEach(g),this.h()},h(){R(e,"class","text-sm text-gray-700 dark:text-gray-300")},m(n,s){E(n,e,s),I(e,a)},p(n,s){var l;s&4&&t!==(t=(((l=n[13].usuario)==null?void 0:l.nome)||"Sistema")+"")&&X(a,t)},d(n){n&&g(e)}}}function Na(r){let e,t,a,o,n,s,l,u,d,f,c;return e=new oe({props:{class:"font-medium",$$slots:{default:[Ta]},$$scope:{ctx:r}}}),a=new oe({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),n=new oe({props:{class:"text-center",$$slots:{default:[Oa]},$$scope:{ctx:r}}}),l=new oe({props:{$$slots:{default:[xa]},$$scope:{ctx:r}}}),d=new oe({props:{$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=F(),M(a.$$.fragment),o=F(),M(n.$$.fragment),s=F(),M(l.$$.fragment),u=F(),M(d.$$.fragment),f=F()},l(i){T(e.$$.fragment,i),t=V(i),T(a.$$.fragment,i),o=V(i),T(n.$$.fragment,i),s=V(i),T(l.$$.fragment,i),u=V(i),T(d.$$.fragment,i),f=V(i)},m(i,m){S(e,i,m),E(i,t,m),S(a,i,m),E(i,o,m),S(n,i,m),E(i,s,m),S(l,i,m),E(i,u,m),S(d,i,m),E(i,f,m),c=!0},p(i,m){const p={};m&524292&&(p.$$scope={dirty:m,ctx:i}),e.$set(p);const $={};m&524292&&($.$$scope={dirty:m,ctx:i}),a.$set($);const h={};m&524292&&(h.$$scope={dirty:m,ctx:i}),n.$set(h);const _={};m&524292&&(_.$$scope={dirty:m,ctx:i}),l.$set(_);const v={};m&524292&&(v.$$scope={dirty:m,ctx:i}),d.$set(v)},i(i){c||(b(e.$$.fragment,i),b(a.$$.fragment,i),b(n.$$.fragment,i),b(l.$$.fragment,i),b(d.$$.fragment,i),c=!0)},o(i){w(e.$$.fragment,i),w(a.$$.fragment,i),w(n.$$.fragment,i),w(l.$$.fragment,i),w(d.$$.fragment,i),c=!1},d(i){i&&(g(t),g(o),g(s),g(u),g(f)),k(e,i),k(a,i),k(n,i),k(l,i),k(d,i)}}}function Oe(r,e){let t,a,o;return a=new Ye({props:{$$slots:{default:[Na]},$$scope:{ctx:e}}}),{key:r,first:null,c(){t=ee(),M(a.$$.fragment),this.h()},l(n){t=ee(),T(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){E(n,t,s),S(a,n,s),o=!0},p(n,s){e=n;const l={};s&524292&&(l.$$scope={dirty:s,ctx:e}),a.$set(l)},i(n){o||(b(a.$$.fragment,n),o=!0)},o(n){w(a.$$.fragment,n),o=!1},d(n){n&&g(t),k(a,n)}}}function Ra(r){let e=[],t=new Map,a,o,n=fe(r[2]);const s=l=>l[13].id;for(let l=0;l<n.length;l+=1){let u=Se(r,n,l),d=s(u);t.set(d,e[l]=Oe(d,u))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();a=ee()},l(l){for(let u=0;u<e.length;u+=1)e[u].l(l);a=ee()},m(l,u){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(l,u);E(l,a,u),o=!0},p(l,u){u&4&&(n=fe(l[2]),ne(),e=Je(e,u,s,1,l,n,t,a.parentNode,Qe,Oe,a,Se),re())},i(l){if(!o){for(let u=0;u<n.length;u+=1)b(e[u]);o=!0}},o(l){for(let u=0;u<e.length;u+=1)w(e[u]);o=!1},d(l){l&&g(a);for(let u=0;u<e.length;u+=1)e[u].d(l)}}}function Va(r){let e,t,a,o;return e=new Ke({props:{$$slots:{default:[Sa]},$$scope:{ctx:r}}}),a=new Xe({props:{$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=F(),M(a.$$.fragment)},l(n){T(e.$$.fragment,n),t=V(n),T(a.$$.fragment,n)},m(n,s){S(e,n,s),E(n,t,s),S(a,n,s),o=!0},p(n,s){const l={};s&524288&&(l.$$scope={dirty:s,ctx:n}),e.$set(l);const u={};s&524292&&(u.$$scope={dirty:s,ctx:n}),a.$set(u)},i(n){o||(b(e.$$.fragment,n),b(a.$$.fragment,n),o=!0)},o(n){w(e.$$.fragment,n),w(a.$$.fragment,n),o=!1},d(n){n&&g(t),k(e,n),k(a,n)}}}function Fa(r){let e,t="Erro:",a,o;return{c(){e=N("span"),e.textContent=t,a=F(),o=B(r[4]),this.h()},l(n){e=q(n,"SPAN",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-12d8ej4"&&(e.textContent=t),a=V(n),o=z(n,r[4]),this.h()},h(){R(e,"class","font-medium")},m(n,s){E(n,e,s),E(n,a,s),E(n,o,s)},p(n,s){s&16&&X(o,n[4])},d(n){n&&(g(e),g(a),g(o))}}}function La(r){let e;return{c(){e=B("Fechar")},l(t){e=z(t,"Fechar")},m(t,a){E(t,e,a)},d(t){t&&g(e)}}}function za(r){let e,t,a,o="Hist√≥rico de Movimenta√ß√µes",n,s,l,u,d="Per√≠odo:",f,c,i,m,p,$,h,_,v,x,j,L=r[1]&&Me(r);function Z(y){r[9](y)}let Q={id:"period",size:"sm",class:"rounded-sm w-40",$$slots:{default:[va]},$$scope:{ctx:r}};r[5]!==void 0&&(Q.value=r[5]),c=new Tt({props:Q}),Be.push(()=>He(c,"value",Z)),c.$on("change",r[8]);const O=[wa,Ia,Ea,ba],A=[];function G(y,H){return y[4]?0:y[3]?1:y[2].length===0?2:3}return $=G(r),h=A[$]=O[$](r),x=new ue({props:{size:"sm",color:"light",class:"rounded-sm",$$slots:{default:[La]},$$scope:{ctx:r}}}),x.$on("click",r[7]),{c(){e=N("div"),t=N("div"),a=N("h3"),a.textContent=o,n=F(),L&&L.c(),s=F(),l=N("div"),u=N("label"),u.textContent=d,f=F(),M(c.$$.fragment),m=F(),p=N("div"),h.c(),_=F(),v=N("div"),M(x.$$.fragment),this.h()},l(y){e=q(y,"DIV",{class:!0});var H=U(e);t=q(H,"DIV",{});var K=U(t);a=q(K,"H3",{class:!0,"data-svelte-h":!0}),le(a)!=="svelte-1mf7509"&&(a.textContent=o),n=V(K),L&&L.l(K),K.forEach(g),s=V(H),l=q(H,"DIV",{class:!0});var C=U(l);u=q(C,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),le(u)!=="svelte-pgps0p"&&(u.textContent=d),f=V(C),T(c.$$.fragment,C),C.forEach(g),H.forEach(g),m=V(y),p=q(y,"DIV",{class:!0});var D=U(p);h.l(D),D.forEach(g),_=V(y),v=q(y,"DIV",{class:!0});var J=U(v);T(x.$$.fragment,J),J.forEach(g),this.h()},h(){R(a,"class","text-xl font-semibold text-gray-900 dark:text-white"),R(u,"for","period"),R(u,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),R(l,"class","flex items-center gap-2"),R(e,"class","flex items-center justify-between mb-4"),R(p,"class","space-y-4"),R(v,"class","flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600 mt-6")},m(y,H){E(y,e,H),I(e,t),I(t,a),I(t,n),L&&L.m(t,null),I(e,s),I(e,l),I(l,u),I(l,f),S(c,l,null),E(y,m,H),E(y,p,H),A[$].m(p,null),E(y,_,H),E(y,v,H),S(x,v,null),j=!0},p(y,H){y[1]?L?L.p(y,H):(L=Me(y),L.c(),L.m(t,null)):L&&(L.d(1),L=null);const K={};H&524288&&(K.$$scope={dirty:H,ctx:y}),!i&&H&32&&(i=!0,K.value=y[5],je(()=>i=!1)),c.$set(K);let C=$;$=G(y),$===C?A[$].p(y,H):(ne(),w(A[C],1,1,()=>{A[C]=null}),re(),h=A[$],h?h.p(y,H):(h=A[$]=O[$](y),h.c()),b(h,1),h.m(p,null));const D={};H&524288&&(D.$$scope={dirty:H,ctx:y}),x.$set(D)},i(y){j||(b(c.$$.fragment,y),b(h),b(x.$$.fragment,y),j=!0)},o(y){w(c.$$.fragment,y),w(h),w(x.$$.fragment,y),j=!1},d(y){y&&(g(e),g(m),g(p),g(_),g(v)),L&&L.d(),k(c),A[$].d(),k(x)}}}function Ba(r){let e,t,a;function o(s){r[11](s)}let n={size:"xl",autoclose:!1,class:"w-full max-w-4xl",$$slots:{default:[za]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.open=r[0]),e=new qt({props:n}),Be.push(()=>He(e,"open",o)),e.$on("close",r[7]),{c(){M(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,l){S(e,s,l),a=!0},p(s,[l]){const u={};l&524350&&(u.$$scope={dirty:l,ctx:s}),!t&&l&1&&(t=!0,u.open=s[0],je(()=>t=!1)),e.$set(u)},i(s){a||(b(e.$$.fragment,s),a=!0)},o(s){w(e.$$.fragment,s),a=!1},d(s){k(e,s)}}}function xe(r){return r?new Date(r).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function qe(r){return r.includes("ENTRADA")||r.includes("DEVOLUCAO")?"green":r.includes("SAIDA")||r.includes("ENTREGA")?"blue":r.includes("AJUSTE_POSITIVO")?"green":r.includes("AJUSTE_NEGATIVO")?"yellow":r.includes("DESCARTE")?"red":r.includes("ESTORNO")?"purple":"gray"}function Ne(r){switch(r){case"ENTRADA_NOTA":return"Entrada por Nota";case"SAIDA_ENTREGA":return"Sa√≠da para Entrega";case"ENTRADA_DEVOLUCAO":return"Entrada por Devolu√ß√£o";case"SAIDA_TRANSFERENCIA":return"Sa√≠da por Transfer√™ncia";case"ENTRADA_TRANSFERENCIA":return"Entrada por Transfer√™ncia";case"SAIDA_DESCARTE":return"Descarte";case"AJUSTE_POSITIVO":return"Ajuste Positivo";case"AJUSTE_NEGATIVO":return"Ajuste Negativo";case"ESTORNO_ENTRADA_NOTA":return"Estorno de Entrada";case"ESTORNO_SAIDA_ENTREGA":return"Estorno de Sa√≠da";default:return r||"N/A"}}function Re(r,e){return`${e.includes("ENTRADA")||e.includes("AJUSTE_POSITIVO")||e.includes("DEVOLUCAO")?"+":"-"}${Math.abs(r)}`}function Ve(r,e){return e.includes("ENTRADA")||e.includes("AJUSTE_POSITIVO")||e.includes("DEVOLUCAO")?"text-green-600":"text-red-600"}function Ha(r,e,t){let{item:a=null}=e,{movimentacoes:o=[]}=e,{loading:n=!1}=e,{error:s=null}=e,{show:l=!0}=e;const u=ze();let d="30";const f=[{value:"7",label:"√öltimos 7 dias"},{value:"30",label:"√öltimos 30 dias"},{value:"90",label:"√öltimos 90 dias"}];function c(){u("close")}function i(h){const _=h.target;t(5,d=_.value)}function m(h){d=h,t(5,d)}const p=h=>h.value===d;function $(h){l=h,t(0,l)}return r.$$set=h=>{"item"in h&&t(1,a=h.item),"movimentacoes"in h&&t(2,o=h.movimentacoes),"loading"in h&&t(3,n=h.loading),"error"in h&&t(4,s=h.error),"show"in h&&t(0,l=h.show)},r.$$.update=()=>{r.$$.dirty&32&&d&&u("filterChange",{period:d})},[l,a,o,n,s,d,f,c,i,m,p,$]}class ja extends $e{constructor(e){super(),he(this,e,Ha,Ba,_e,{item:1,movimentacoes:2,loading:3,error:4,show:0})}}function Ua(r){let e,t='<div class="text-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-2"></div> <p class="text-sm text-gray-600 dark:text-gray-400">Carregando configura√ß√µes...</p></div>';return{c(){e=N("div"),e.innerHTML=t,this.h()},l(a){e=q(a,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-rljcoz"&&(e.innerHTML=t),this.h()},h(){R(e,"class","flex items-center justify-center py-12")},m(a,o){E(a,e,o)},p:Y,i:Y,o:Y,d(a){a&&g(e)}}}function Ga(r){let e,t,a,o,n;const s=[r[10]];let l={};for(let f=0;f<s.length;f+=1)l=gt(l,s[f]);e=new _a({props:l}),e.$on("pageChange",r[13]),e.$on("itemEdit",r[14]),e.$on("itemHistory",r[15]),e.$on("searchChange",r[18]),e.$on("filterChange",r[19]),e.$on("clearFilters",r[20]),e.$on("newMovement",r[23]);let u=r[1]&&Fe(r),d=r[2]&&Le(r);return{c(){M(e.$$.fragment),t=F(),u&&u.c(),a=F(),d&&d.c(),o=ee()},l(f){T(e.$$.fragment,f),t=V(f),u&&u.l(f),a=V(f),d&&d.l(f),o=ee()},m(f,c){S(e,f,c),E(f,t,c),u&&u.m(f,c),E(f,a,c),d&&d.m(f,c),E(f,o,c),n=!0},p(f,c){const i=c[0]&1024?$t(s,[ht(f[10])]):{};e.$set(i),f[1]?u?(u.p(f,c),c[0]&2&&b(u,1)):(u=Fe(f),u.c(),b(u,1),u.m(a.parentNode,a)):u&&(ne(),w(u,1,1,()=>{u=null}),re()),f[2]?d?(d.p(f,c),c[0]&4&&b(d,1)):(d=Le(f),d.c(),b(d,1),d.m(o.parentNode,o)):d&&(ne(),w(d,1,1,()=>{d=null}),re())},i(f){n||(b(e.$$.fragment,f),b(u),b(d),n=!0)},o(f){w(e.$$.fragment,f),w(u),w(d),n=!1},d(f){f&&(g(t),g(a),g(o)),k(e,f),u&&u.d(f),d&&d.d(f)}}}function Fe(r){let e,t;return e=new xt({props:{item:r[3],tiposEPI:r[9],almoxarifados:r[0],loading:r[5],show:r[1]}}),e.$on("save",r[16]),e.$on("cancel",r[17]),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p(a,o){const n={};o[0]&8&&(n.item=a[3]),o[0]&512&&(n.tiposEPI=a[9]),o[0]&1&&(n.almoxarifados=a[0]),o[0]&32&&(n.loading=a[5]),o[0]&2&&(n.show=a[1]),e.$set(n)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function Le(r){let e,t;return e=new ja({props:{item:r[4],movimentacoes:r[8],loading:r[6],error:r[7],show:r[2]}}),e.$on("close",r[21]),e.$on("filterChange",r[22]),{c(){M(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,o){S(e,a,o),t=!0},p(a,o){const n={};o[0]&16&&(n.item=a[4]),o[0]&256&&(n.movimentacoes=a[8]),o[0]&64&&(n.loading=a[6]),o[0]&128&&(n.error=a[7]),o[0]&4&&(n.show=a[2]),e.$set(n)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){k(e,a)}}}function Ja(r){let e,t,a,o;const n=[Ga,Ua],s=[];function l(u,d){return u[11]?0:1}return e=l(r),t=s[e]=n[e](r),{c(){t.c(),a=ee()},l(u){t.l(u),a=ee()},m(u,d){s[e].m(u,d),E(u,a,d),o=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(ne(),w(s[f],1,1,()=>{s[f]=null}),re(),t=s[e],t?t.p(u,d):(t=s[e]=n[e](u),t.c()),b(t,1),t.m(a.parentNode,a))},i(u){o||(b(t),o=!0)},o(u){w(t),o=!1},d(u){u&&g(a),s[e].d(u)}}}function Qa(r){const e=new Date,t=parseInt(r);return new Date(e.getTime()-t*24*60*60*1e3).toISOString().split("T")[0]}function Wa(r,e,t){let a,o,n,s,l,u,d,f;pe(r,Ge,P=>t(33,u=P)),pe(r,vt,P=>t(34,d=P)),pe(r,bt,P=>t(35,f=P));let{initialPageSize:c=20}=e,{autoRefresh:i=!1}=e,{refreshInterval:m=3e4}=e;const p=Lt(P=>be.getInventoryItems({...P,includeExpanded:!0}),c);pe(r,p,P=>t(32,l=P));let $=!1,h=!1,_=null,v=null,x=!1,j=!1,L=null,Z=[],Q="30",O={status:"todos",categoria:"todas"},A="",G=[],y=[];Ue(async()=>{console.log("üöÄ InventoryContainer: Inicializando..."),await Promise.all([H(),K()]),setTimeout(()=>{J()},100),i&&C(),console.log("‚úÖ InventoryContainer: Inicializado com sucesso")});async function H(){try{await p.fetchPage(),console.log("üì¶ Dados de invent√°rio carregados")}catch(P){console.error("‚ùå Erro ao carregar invent√°rio:",P),ve.error("Erro ao carregar invent√°rio","N√£o foi poss√≠vel carregar os dados do estoque")}}async function K(){try{const[P,de]=await Promise.all([Ae.getTiposEPI({ativo:!0}),Ae.getAlmoxarifados({ativo:!0})]);t(9,G=P.data||[]),t(0,y=de),console.log(`üìã Carregados ${G.length} tipos EPI e ${y.length} almoxarifados`)}catch(P){console.error("‚ùå Erro ao carregar dados auxiliares:",P)}}function C(){const P=setInterval(async()=>{!l.loading&&!$&&(console.log("üîÑ Auto-refresh do invent√°rio"),await p.reload())},m);return()=>clearInterval(P)}let D;function J(){const P={};A&&A.trim()!==""&&(P.search=A.trim()),O.status&&O.status!=="todos"&&(P.status=O.status),O.categoria&&O.categoria!=="todas"&&(P.categoria=O.categoria),console.log("üîß Aplicando filtros:",P),p.setFilters(P)}function se(P){p.goToPage(P.detail.page)}function ie(P){t(3,_=P.detail.item),t(1,$=!0),console.log("‚úèÔ∏è Editando item:",_.id)}async function et(P){t(4,v=P.detail.item),t(2,h=!0),await Ie(),console.log("üìä Abrindo hist√≥rico do item:",v.id)}async function Ie(){if(v){t(6,j=!0),t(7,L=null);try{const P=await be.getItemMovementHistory(v.id,{limit:100,dataInicio:Qa(Q)});t(8,Z=P),console.log(`üìä Carregado hist√≥rico: ${P.length} movimenta√ß√µes`)}catch(P){console.error("‚ùå Erro ao carregar hist√≥rico:",P),t(7,L=P instanceof Error?P.message:"Erro desconhecido")}finally{t(6,j=!1)}}}async function tt(P){t(5,x=!0);try{console.log("üíæ Salvando movimenta√ß√£o:",P.detail);const de=await be.registerMovement(P.detail);console.log("‚úÖ Movimenta√ß√£o registrada:",de.id),t(1,$=!1),t(3,_=null),await p.reload(),ve.success("Movimenta√ß√£o registrada",`${P.detail.tipoMovimentacao} de ${P.detail.quantidade} unidades`)}catch(de){console.error("‚ùå Erro ao salvar movimenta√ß√£o:",de),ve.error("Erro ao salvar","N√£o foi poss√≠vel registrar a movimenta√ß√£o")}finally{t(5,x=!1)}}function at(){t(1,$=!1),t(3,_=null),console.log("‚ùå Movimenta√ß√£o cancelada")}function ot(P){t(28,A=P.detail.value),console.log("üîç Busca alterada:",A)}function nt(P){t(27,O={...O,[P.detail.key]:P.detail.value}),console.log("üîß Filtro alterado:",P.detail.key,"=",P.detail.value)}function rt(){t(27,O={status:"todos",categoria:"todas"}),t(28,A=""),clearTimeout(D),p.setFilters({}),console.log("üóëÔ∏è Filtros limpos - retornando ao estado inicial")}function st(){t(2,h=!1),t(4,v=null),t(8,Z=[]),t(7,L=null),console.log("‚ùå Modal de hist√≥rico fechado")}async function lt(P){Q=P.detail.period,await Ie(),console.log("üìÖ Per√≠odo do hist√≥rico alterado:",Q)}function it(){t(3,_=null),t(1,$=!0),console.log("‚ûï Nova movimenta√ß√£o")}return r.$$set=P=>{"initialPageSize"in P&&t(24,c=P.initialPageSize),"autoRefresh"in P&&t(25,i=P.autoRefresh),"refreshInterval"in P&&t(26,m=P.refreshInterval)},r.$$.update=()=>{r.$$.dirty[0]&939524096&&(A!==void 0||O.status||O.categoria)&&(clearTimeout(D),t(29,D=setTimeout(()=>{J()},300))),r.$$.dirty[1]&16&&t(31,a=f),r.$$.dirty[1]&8&&t(30,o=d),r.$$.dirty[0]&1&&[...y.map(P=>({value:P.id,label:P.nome}))],r.$$.dirty[1]&4&&t(11,n=(u==null?void 0:u.data)!==null),r.$$.dirty[0]&1476395008|r.$$.dirty[1]&3&&t(10,s={items:l.items,loading:l.loading,error:l.error,total:l.total,page:l.page,totalPages:l.totalPages,searchTerm:A,filters:O,statusOptions:a,categoriaOptions:o})},[y,$,h,_,v,x,j,L,Z,G,s,n,p,se,ie,et,tt,at,ot,nt,rt,st,lt,it,c,i,m,O,A,D,o,a,l,u,d,f]}class Ka extends $e{constructor(e){super(),he(this,e,Wa,Ja,_e,{initialPageSize:24,autoRefresh:25,refreshInterval:26},null,[-1,-1])}}function Xa(r){let e,t,a;return t=new Ka({props:{initialPageSize:20,autoRefresh:!1}}),{c(){e=F(),M(t.$$.fragment),this.h()},l(o){pt("svelte-1bnjr0i",document.head).forEach(g),e=V(o),T(t.$$.fragment,o),this.h()},h(){document.title="Estoque - DataLife EPI"},m(o,n){E(o,e,n),S(t,o,n),a=!0},p:Y,i(o){a||(b(t.$$.fragment,o),a=!0)},o(o){w(t.$$.fragment,o),a=!1},d(o){o&&g(e),k(t,o)}}}function Ya(r){return Ue(async()=>{console.log("üöÄ Inicializando p√°gina de estoque com arquitetura Container/Presenter"),await Ge.initialize(),console.log("‚úÖ P√°gina de estoque pronta com arquitetura modular completa")}),[]}class vo extends $e{constructor(e){super(),he(this,e,Ya,Xa,_e,{})}}export{vo as component};
