import{S as Ue,i as Qe,s as Ge,d as m,J as G,u as y,q as k,F as ve,G as be,b as S,c as d,K as J,m as $,_ as Wa,h as V,e as v,f as C,o as De,L as K,k as q,j as b,M as W,$ as Ye,n as Ve,g as R,t as M,a as oe,v as Ce,C as je,O as bt,Q as $t,R as Et,T as kt,H as nr,A as ft,r as Dt,a2 as Ct,aa as qt,I as It,a5 as Re,a6 as Me,a7 as Le,y as sr,l as Vt,p as Xa}from"../chunks/BW7nMWMn.js";import"../chunks/IHki7fMi.js";import{p as or}from"../chunks/DNBYJR9D.js";import{g as Ft}from"../chunks/B1qaci9U.js";import{f as vt}from"../chunks/BJQkH9VE.js";import{a as it}from"../chunks/D8PmxC0_.js";import{U as Xe}from"../chunks/DiNz8aC3.js";import{L as yt,E as St,c as ir}from"../chunks/CMvOMHzg.js";import{b as fr}from"../chunks/BFL5UUe0.js";import{n as ze}from"../chunks/ifKxNf5L.js";import{e as xe,u as nt,o as ct,d as cr}from"../chunks/Bch6UWim.js";import{B as Oe,a as st}from"../chunks/Bdqt3-Qf.js";import{C as ur}from"../chunks/CyAyuRaH.js";import{C as dr}from"../chunks/CFunG522.js";import{I as Pt}from"../chunks/C6V0dnPk.js";import{T as mr,a as gr,b as hr,c as ht,d as pr,e as pt,L as Ke,S as Ya,f as _r}from"../chunks/DhMnY3y8.js";import{E as vr}from"../chunks/ooNBCW3C.js";import{P as ot}from"../chunks/BKX2UHRo.js";import{R as Za,T as er}from"../chunks/D4GuA44R.js";import{S as tr}from"../chunks/B0tjDi7T.js";import{S as lt,D as ut}from"../chunks/DTNVOwUp.js";import{g as br,a as $r}from"../chunks/CgU5AtxT.js";import{d as _t,r as Er}from"../chunks/D4AxZPfm.js";import{w as kr}from"../chunks/D3FebGYg.js";import{T as wr,D as Dr}from"../chunks/B7ejlhgL.js";import{I as ar}from"../chunks/DQxo25Nt.js";import{E as Nt}from"../chunks/Bvg_8qIU.js";import{C as Cr}from"../chunks/Dh27uZ44.js";import{C as rr}from"../chunks/BYTNhMEK.js";import{f as wt}from"../chunks/5lP0jMhK.js";import{T as Ir,Q as yr,F as Pr,G as Ar,P as Fr}from"../chunks/OTv1GxYZ.js";import{M as Vr}from"../chunks/DzaG4njQ.js";function Rt(l,e,t){const a=l.slice();return a[21]=e[t],a}function qr(l){let e,t,a;return e=new ot({props:{class:"w-4 h-4 mr-2"}}),{c(){W(e.$$.fragment),t=M(`
        Nova Ficha`)},l(r){K(e.$$.fragment,r),t=R(r,`
        Nova Ficha`)},m(r,n){J(e,r,n),S(r,t,n),a=!0},p:Ve,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),G(e,r)}}}function Sr(l){let e,t;return e=new ur({props:{size:"sm",class:"rounded-sm",$$slots:{default:[Tr]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p(a,r){const n={};r&16777232&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function Nr(l){let e,t,a,r,n,s,o,i,f,c,u,h,g,p,D,w,F,N,x,z,O,U,T,L;n=new tr({props:{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}}),o=new Pt({props:{type:"text",placeholder:"Buscar por nome, CPF ou matr√≠cula...",class:"pl-10 rounded-sm h-10 text-sm",value:l[4].searchTerm}}),o.$on("input",l[7]),c=new lt({props:{options:l[5].empresas,value:l[4].empresaFilter,placeholder:"Empresa",color:"alternative"}}),c.$on("change",l[8]),g=new lt({props:{options:l[5].cargos,value:l[4].cargoFilter,placeholder:"Cargo",color:"alternative"}}),g.$on("change",l[9]),w=new dr({props:{checked:l[4].devolucaoPendente,$$slots:{default:[Rr]},$$scope:{ctx:l}}}),w.$on("change",l[10]);const X=[Lr,Mr],_=[];function A(E,P){return E[4].hasActiveFilters?0:1}N=A(l),x=_[N]=X[N](l),U=new mr({props:{hoverable:!0,$$slots:{default:[al]},$$scope:{ctx:l}}});let I=l[3].totalPages>1&&Qt(l);return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("div"),W(n.$$.fragment),s=q(),W(o.$$.fragment),i=q(),f=b("div"),W(c.$$.fragment),u=q(),h=b("div"),W(g.$$.fragment),p=q(),D=b("div"),W(w.$$.fragment),F=q(),x.c(),z=q(),O=b("div"),W(U.$$.fragment),T=q(),I&&I.c(),this.h()},l(E){e=v(E,"DIV",{class:!0});var P=C(e);t=v(P,"DIV",{class:!0});var H=C(t);a=v(H,"DIV",{class:!0});var ee=C(a);r=v(ee,"DIV",{class:!0});var te=C(r);K(n.$$.fragment,te),s=V(te),K(o.$$.fragment,te),te.forEach(m),i=V(ee),f=v(ee,"DIV",{class:!0});var le=C(f);K(c.$$.fragment,le),le.forEach(m),u=V(ee),h=v(ee,"DIV",{class:!0});var ae=C(h);K(g.$$.fragment,ae),ae.forEach(m),p=V(ee),D=v(ee,"DIV",{class:!0});var re=C(D);K(w.$$.fragment,re),re.forEach(m),F=V(ee),x.l(ee),ee.forEach(m),H.forEach(m),z=V(P),O=v(P,"DIV",{class:!0});var ue=C(O);K(U.$$.fragment,ue),ue.forEach(m),T=V(P),I&&I.l(P),P.forEach(m),this.h()},h(){$(r,"class","relative"),$(f,"class","relative z-10"),$(h,"class","relative z-10"),$(D,"class","flex items-center"),$(a,"class","grid grid-cols-1 md:grid-cols-5 gap-4 relative"),$(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),$(O,"class","min-w-[680px] overflow-x-auto"),$(e,"class","bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden")},m(E,P){S(E,e,P),d(e,t),d(t,a),d(a,r),J(n,r,null),d(r,s),J(o,r,null),d(a,i),d(a,f),J(c,f,null),d(a,u),d(a,h),J(g,h,null),d(a,p),d(a,D),J(w,D,null),d(a,F),_[N].m(a,null),d(e,z),d(e,O),J(U,O,null),d(e,T),I&&I.m(e,null),L=!0},p(E,P){const H={};P&16&&(H.value=E[4].searchTerm),o.$set(H);const ee={};P&32&&(ee.options=E[5].empresas),P&16&&(ee.value=E[4].empresaFilter),c.$set(ee);const te={};P&32&&(te.options=E[5].cargos),P&16&&(te.value=E[4].cargoFilter),g.$set(te);const le={};P&16&&(le.checked=E[4].devolucaoPendente),P&16777216&&(le.$$scope={dirty:P,ctx:E}),w.$set(le);let ae=N;N=A(E),N===ae?_[N].p(E,P):(ve(),y(_[ae],1,1,()=>{_[ae]=null}),be(),x=_[N],x?x.p(E,P):(x=_[N]=X[N](E),x.c()),k(x,1),x.m(a,null));const re={};P&16777217&&(re.$$scope={dirty:P,ctx:E}),U.$set(re),E[3].totalPages>1?I?(I.p(E,P),P&8&&k(I,1)):(I=Qt(E),I.c(),k(I,1),I.m(e,null)):I&&(ve(),y(I,1,1,()=>{I=null}),be())},i(E){L||(k(n.$$.fragment,E),k(o.$$.fragment,E),k(c.$$.fragment,E),k(g.$$.fragment,E),k(w.$$.fragment,E),k(x),k(U.$$.fragment,E),k(I),L=!0)},o(E){y(n.$$.fragment,E),y(o.$$.fragment,E),y(c.$$.fragment,E),y(g.$$.fragment,E),y(w.$$.fragment,E),y(x),y(U.$$.fragment,E),y(I),L=!1},d(E){E&&m(e),G(n),G(o),G(c),G(g),G(w),_[N].d(),G(U),I&&I.d()}}}function xr(l){let e,t;return e=new St({props:{error:l[2],onRetry:l[15]}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p(a,r){const n={};r&4&&(n.error=a[2]),r&8&&(n.onRetry=a[15]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function Or(l){let e,t;return e=new yt({}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p:Ve,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function zr(l){let e,t,a=l[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha",r,n;return e=new ot({props:{class:"w-4 h-4 mr-2"}}),{c(){W(e.$$.fragment),t=q(),r=M(a)},l(s){K(e.$$.fragment,s),t=V(s),r=R(s,a)},m(s,o){J(e,s,o),S(s,t,o),S(s,r,o),n=!0},p(s,o){(!n||o&16)&&a!==(a=s[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha")&&oe(r,a)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){s&&(m(t),m(r)),G(e,s)}}}function Tr(l){let e,t,a,r,n,s="Nenhuma ficha encontrada",o,i,f=l[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI",c,u,h,g;return a=new tr({props:{class:"w-8 h-8 text-gray-400"}}),h=new Oe({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[zr]},$$scope:{ctx:l}}}),h.$on("click",l[14]),{c(){e=b("div"),t=b("div"),W(a.$$.fragment),r=q(),n=b("h3"),n.textContent=s,o=q(),i=b("p"),c=M(f),u=q(),W(h.$$.fragment),this.h()},l(p){e=v(p,"DIV",{class:!0});var D=C(e);t=v(D,"DIV",{class:!0});var w=C(t);K(a.$$.fragment,w),w.forEach(m),r=V(D),n=v(D,"H3",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-qm1del"&&(n.textContent=s),o=V(D),i=v(D,"P",{class:!0});var F=C(i);c=R(F,f),F.forEach(m),u=V(D),K(h.$$.fragment,D),D.forEach(m),this.h()},h(){$(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"),$(n,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),$(i,"class","text-gray-500 dark:text-gray-400 mb-6"),$(e,"class","text-center py-12")},m(p,D){S(p,e,D),d(e,t),J(a,t,null),d(e,r),d(e,n),d(e,o),d(e,i),d(i,c),d(e,u),J(h,e,null),g=!0},p(p,D){(!g||D&16)&&f!==(f=p[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI")&&oe(c,f);const w={};D&16777232&&(w.$$scope={dirty:D,ctx:p}),h.$set(w)},i(p){g||(k(a.$$.fragment,p),k(h.$$.fragment,p),g=!0)},o(p){y(a.$$.fragment,p),y(h.$$.fragment,p),g=!1},d(p){p&&m(e),G(a),G(h)}}}function Rr(l){let e;return{c(){e=M("Pendentes devolu√ß√£o")},l(t){e=R(t,"Pendentes devolu√ß√£o")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Mr(l){let e;return{c(){e=b("div")},l(t){e=v(t,"DIV",{}),C(e).forEach(m)},m(t,a){S(t,e,a)},p:Ve,i:Ve,o:Ve,d(t){t&&m(e)}}}function Lr(l){let e,t;return e=new Oe({props:{color:"alternative",class:"rounded-sm h-10 w-10 p-0 flex items-center justify-center",title:"Limpar Filtros",$$slots:{default:[jr]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p(a,r){const n={};r&16777216&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function jr(l){let e,t;return e=new Za({props:{class:"w-4 h-4"}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p:Ve,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function Hr(l){let e;return{c(){e=M("Colaborador")},l(t){e=R(t,"Colaborador")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Br(l){let e;return{c(){e=M("Empresa")},l(t){e=R(t,"Empresa")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Ur(l){let e;return{c(){e=M("EPIs Ativos")},l(t){e=R(t,"EPIs Ativos")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Qr(l){let e;return{c(){e=M("A√ß√µes")},l(t){e=R(t,"A√ß√µes")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Gr(l){let e,t,a,r,n,s,o,i;return e=new ht({props:{$$slots:{default:[Hr]},$$scope:{ctx:l}}}),a=new ht({props:{$$slots:{default:[Br]},$$scope:{ctx:l}}}),n=new ht({props:{$$slots:{default:[Ur]},$$scope:{ctx:l}}}),o=new ht({props:{$$slots:{default:[Qr]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment),t=q(),W(a.$$.fragment),r=q(),W(n.$$.fragment),s=q(),W(o.$$.fragment)},l(f){K(e.$$.fragment,f),t=V(f),K(a.$$.fragment,f),r=V(f),K(n.$$.fragment,f),s=V(f),K(o.$$.fragment,f)},m(f,c){J(e,f,c),S(f,t,c),J(a,f,c),S(f,r,c),J(n,f,c),S(f,s,c),J(o,f,c),i=!0},p(f,c){const u={};c&16777216&&(u.$$scope={dirty:c,ctx:f}),e.$set(u);const h={};c&16777216&&(h.$$scope={dirty:c,ctx:f}),a.$set(h);const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),n.$set(g);const p={};c&16777216&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){i||(k(e.$$.fragment,f),k(a.$$.fragment,f),k(n.$$.fragment,f),k(o.$$.fragment,f),i=!0)},o(f){y(e.$$.fragment,f),y(a.$$.fragment,f),y(n.$$.fragment,f),y(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(r),m(s)),G(e,f),G(a,f),G(n,f),G(o,f)}}}function Mt(l){let e,t,a=l[21].colaborador.matricula+"",r;return{c(){e=b("span"),t=M("Matr√≠cula: "),r=M(a),this.h()},l(n){e=v(n,"SPAN",{class:!0});var s=C(e);t=R(s,"Matr√≠cula: "),r=R(s,a),s.forEach(m),this.h()},h(){$(e,"class","text-xs text-gray-400 dark:text-gray-500")},m(n,s){S(n,e,s),d(e,t),d(e,r)},p(n,s){s&1&&a!==(a=n[21].colaborador.matricula+"")&&oe(r,a)},d(n){n&&m(e)}}}function Jr(l){let e,t,a=l[21].colaborador.nome+"",r,n,s,o=Gt(l[21].colaborador.cpf)+"",i,f,c=l[21].colaborador.matricula&&Mt(l);return{c(){e=b("div"),t=b("span"),r=M(a),n=q(),s=b("span"),i=M(o),f=q(),c&&c.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var h=C(e);t=v(h,"SPAN",{class:!0});var g=C(t);r=R(g,a),g.forEach(m),n=V(h),s=v(h,"SPAN",{class:!0});var p=C(s);i=R(p,o),p.forEach(m),f=V(h),c&&c.l(h),h.forEach(m),this.h()},h(){$(t,"class","font-medium text-gray-900 dark:text-white"),$(s,"class","text-sm text-gray-500 dark:text-gray-400"),$(e,"class","flex flex-col")},m(u,h){S(u,e,h),d(e,t),d(t,r),d(e,n),d(e,s),d(s,i),d(e,f),c&&c.m(e,null)},p(u,h){h&1&&a!==(a=u[21].colaborador.nome+"")&&oe(r,a),h&1&&o!==(o=Gt(u[21].colaborador.cpf)+"")&&oe(i,o),u[21].colaborador.matricula?c?c.p(u,h):(c=Mt(u),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(u){u&&m(e),c&&c.d()}}}function Lt(l){let e,t=l[21].colaborador.cargo+"",a;return{c(){e=b("div"),a=M(t),this.h()},l(r){e=v(r,"DIV",{class:!0});var n=C(e);a=R(n,t),n.forEach(m),this.h()},h(){$(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(r,n){S(r,e,n),d(e,a)},p(r,n){n&1&&t!==(t=r[21].colaborador.cargo+"")&&oe(a,t)},d(r){r&&m(e)}}}function Kr(l){let e,t,a=(l[21].colaborador.empresa||"Empresa n√£o informada")+"",r,n,s=l[21].colaborador.cargo&&Lt(l);return{c(){e=b("div"),t=b("span"),r=M(a),n=q(),s&&s.c(),this.h()},l(o){e=v(o,"DIV",{});var i=C(e);t=v(i,"SPAN",{class:!0});var f=C(t);r=R(f,a),f.forEach(m),n=V(i),s&&s.l(i),i.forEach(m),this.h()},h(){$(t,"class","font-medium text-gray-900 dark:text-white")},m(o,i){S(o,e,i),d(e,t),d(t,r),d(e,n),s&&s.m(e,null)},p(o,i){i&1&&a!==(a=(o[21].colaborador.empresa||"Empresa n√£o informada")+"")&&oe(r,a),o[21].colaborador.cargo?s?s.p(o,i):(s=Lt(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(o){o&&m(e),s&&s.d()}}}function Wr(l){var r;let e=(((r=l[21].episInfo)==null?void 0:r.totalEpisComColaborador)||l[21].totalEpisAtivos||0)+"",t,a;return{c(){t=M(e),a=M(" EPIs")},l(n){t=R(n,e),a=R(n," EPIs")},m(n,s){S(n,t,s),S(n,a,s)},p(n,s){var o;s&1&&e!==(e=(((o=n[21].episInfo)==null?void 0:o.totalEpisComColaborador)||n[21].totalEpisAtivos||0)+"")&&oe(t,e)},d(n){n&&(m(t),m(a))}}}function jt(l){let e,t;return e=new st({props:{color:"red",class:"w-fit rounded-sm",$$slots:{default:[Xr]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p(a,r){const n={};r&16777217&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function Xr(l){var r;let e=(((r=l[21].episInfo)==null?void 0:r.episExpirados)||l[21].totalEpisVencidos)+"",t,a;return{c(){t=M(e),a=M(" vencido(s)")},l(n){t=R(n,e),a=R(n," vencido(s)")},m(n,s){S(n,t,s),S(n,a,s)},p(n,s){var o;s&1&&e!==(e=(((o=n[21].episInfo)==null?void 0:o.episExpirados)||n[21].totalEpisVencidos)+"")&&oe(t,e)},d(n){n&&(m(t),m(a))}}}function Ht(l){let e,t=l[21].episInfo.tiposEpisAtivos.slice(0,2).map(Jt).join(", ")+"",a,r,n=l[21].episInfo.tiposEpisAtivos.length>2&&Bt(l);return{c(){e=b("div"),a=M(t),r=q(),n&&n.c(),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=C(e);a=R(o,t),r=V(o),n&&n.l(o),o.forEach(m),this.h()},h(){$(e,"class","text-xs text-gray-500 dark:text-gray-400 mt-1")},m(s,o){S(s,e,o),d(e,a),d(e,r),n&&n.m(e,null)},p(s,o){o&1&&t!==(t=s[21].episInfo.tiposEpisAtivos.slice(0,2).map(Jt).join(", ")+"")&&oe(a,t),s[21].episInfo.tiposEpisAtivos.length>2?n?n.p(s,o):(n=Bt(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(s){s&&m(e),n&&n.d()}}}function Bt(l){let e,t,a=l[21].episInfo.tiposEpisAtivos.length-2+"",r;return{c(){e=b("span"),t=M("... +"),r=M(a)},l(n){e=v(n,"SPAN",{});var s=C(e);t=R(s,"... +"),r=R(s,a),s.forEach(m)},m(n,s){S(n,e,s),d(e,t),d(e,r)},p(n,s){s&1&&a!==(a=n[21].episInfo.tiposEpisAtivos.length-2+"")&&oe(r,a)},d(n){n&&m(e)}}}function Yr(l){var f,c,u;let e,t,a,r,n,s;t=new st({props:{color:"blue",class:"w-fit rounded-sm",$$slots:{default:[Wr]},$$scope:{ctx:l}}});let o=(((f=l[21].episInfo)==null?void 0:f.episExpirados)||l[21].totalEpisVencidos)&&(((c=l[21].episInfo)==null?void 0:c.episExpirados)>0||l[21].totalEpisVencidos>0)&&jt(l),i=((u=l[21].episInfo)==null?void 0:u.tiposEpisAtivos)&&l[21].episInfo.tiposEpisAtivos.length>0&&Ht(l);return{c(){e=b("div"),W(t.$$.fragment),a=q(),o&&o.c(),r=q(),i&&i.c(),n=Ce(),this.h()},l(h){e=v(h,"DIV",{class:!0});var g=C(e);K(t.$$.fragment,g),a=V(g),o&&o.l(g),g.forEach(m),r=V(h),i&&i.l(h),n=Ce(),this.h()},h(){$(e,"class","flex flex-wrap gap-1")},m(h,g){S(h,e,g),J(t,e,null),d(e,a),o&&o.m(e,null),S(h,r,g),i&&i.m(h,g),S(h,n,g),s=!0},p(h,g){var D,w,F;const p={};g&16777217&&(p.$$scope={dirty:g,ctx:h}),t.$set(p),((D=h[21].episInfo)!=null&&D.episExpirados||h[21].totalEpisVencidos)&&(((w=h[21].episInfo)==null?void 0:w.episExpirados)>0||h[21].totalEpisVencidos>0)?o?(o.p(h,g),g&1&&k(o,1)):(o=jt(h),o.c(),k(o,1),o.m(e,null)):o&&(ve(),y(o,1,1,()=>{o=null}),be()),(F=h[21].episInfo)!=null&&F.tiposEpisAtivos&&h[21].episInfo.tiposEpisAtivos.length>0?i?i.p(h,g):(i=Ht(h),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i(h){s||(k(t.$$.fragment,h),k(o),s=!0)},o(h){y(t.$$.fragment,h),y(o),s=!1},d(h){h&&(m(e),m(r),m(n)),G(t),o&&o.d(),i&&i.d(h)}}}function Zr(l){let e,t,a,r,n,s;a=new vr({props:{class:"w-4 h-4"}});function o(...i){return l[16](l[21],...i)}return{c(){e=b("div"),t=b("button"),W(a.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0});var f=C(e);t=v(f,"BUTTON",{class:!0,title:!0});var c=C(t);K(a.$$.fragment,c),c.forEach(m),f.forEach(m),this.h()},h(){$(t,"class","p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700"),$(t,"title","Ver Detalhes"),$(e,"class","flex space-x-1")},m(i,f){S(i,e,f),d(e,t),J(a,t,null),r=!0,n||(s=je(t,"click",o),n=!0)},p(i,f){l=i},i(i){r||(k(a.$$.fragment,i),r=!0)},o(i){y(a.$$.fragment,i),r=!1},d(i){i&&m(e),G(a),n=!1,s()}}}function el(l){let e,t,a,r,n,s,o,i,f;return e=new pt({props:{$$slots:{default:[Jr]},$$scope:{ctx:l}}}),a=new pt({props:{$$slots:{default:[Kr]},$$scope:{ctx:l}}}),n=new pt({props:{$$slots:{default:[Yr]},$$scope:{ctx:l}}}),o=new pt({props:{$$slots:{default:[Zr]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment),t=q(),W(a.$$.fragment),r=q(),W(n.$$.fragment),s=q(),W(o.$$.fragment),i=q()},l(c){K(e.$$.fragment,c),t=V(c),K(a.$$.fragment,c),r=V(c),K(n.$$.fragment,c),s=V(c),K(o.$$.fragment,c),i=V(c)},m(c,u){J(e,c,u),S(c,t,u),J(a,c,u),S(c,r,u),J(n,c,u),S(c,s,u),J(o,c,u),S(c,i,u),f=!0},p(c,u){const h={};u&16777217&&(h.$$scope={dirty:u,ctx:c}),e.$set(h);const g={};u&16777217&&(g.$$scope={dirty:u,ctx:c}),a.$set(g);const p={};u&16777217&&(p.$$scope={dirty:u,ctx:c}),n.$set(p);const D={};u&16777217&&(D.$$scope={dirty:u,ctx:c}),o.$set(D)},i(c){f||(k(e.$$.fragment,c),k(a.$$.fragment,c),k(n.$$.fragment,c),k(o.$$.fragment,c),f=!0)},o(c){y(e.$$.fragment,c),y(a.$$.fragment,c),y(n.$$.fragment,c),y(o.$$.fragment,c),f=!1},d(c){c&&(m(t),m(r),m(s),m(i)),G(e,c),G(a,c),G(n,c),G(o,c)}}}function Ut(l,e){let t,a,r;function n(){return e[17](e[21])}return a=new pr({props:{class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",$$slots:{default:[el]},$$scope:{ctx:e}}}),a.$on("click",n),{key:l,first:null,c(){t=Ce(),W(a.$$.fragment),this.h()},l(s){t=Ce(),K(a.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){S(s,t,o),J(a,s,o),r=!0},p(s,o){e=s;const i={};o&16777217&&(i.$$scope={dirty:o,ctx:e}),a.$set(i)},i(s){r||(k(a.$$.fragment,s),r=!0)},o(s){y(a.$$.fragment,s),r=!1},d(s){s&&m(t),G(a,s)}}}function tl(l){let e=[],t=new Map,a,r,n=xe(l[0]);const s=o=>o[21].id;for(let o=0;o<n.length;o+=1){let i=Rt(l,n,o),f=s(i);t.set(f,e[o]=Ut(f,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();a=Ce()},l(o){for(let i=0;i<e.length;i+=1)e[i].l(o);a=Ce()},m(o,i){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(o,i);S(o,a,i),r=!0},p(o,i){i&8193&&(n=xe(o[0]),ve(),e=nt(e,i,s,1,o,n,t,a.parentNode,ct,Ut,a,Rt),be())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(e[i]);r=!0}},o(o){for(let i=0;i<e.length;i+=1)y(e[i]);r=!1},d(o){o&&m(a);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function al(l){let e,t,a,r;return e=new gr({props:{$$slots:{default:[Gr]},$$scope:{ctx:l}}}),a=new hr({props:{$$slots:{default:[tl]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment),t=q(),W(a.$$.fragment)},l(n){K(e.$$.fragment,n),t=V(n),K(a.$$.fragment,n)},m(n,s){J(e,n,s),S(n,t,s),J(a,n,s),r=!0},p(n,s){const o={};s&16777216&&(o.$$scope={dirty:s,ctx:n}),e.$set(o);const i={};s&16777217&&(i.$$scope={dirty:s,ctx:n}),a.$set(i)},i(n){r||(k(e.$$.fragment,n),k(a.$$.fragment,n),r=!0)},o(n){y(e.$$.fragment,n),y(a.$$.fragment,n),r=!1},d(n){n&&m(t),G(e,n),G(a,n)}}}function Qt(l){let e,t,a,r=Math.min((l[3].currentPage-1)*l[3].pageSize+1,l[3].total)+"",n,s,o=Math.min(l[3].currentPage*l[3].pageSize,l[3].total)+"",i,f,c=l[3].total+"",u,h,g,p,D,w,F,N,x=l[3].currentPage+"",z,O,U=l[3].totalPages+"",T,L,X,_;return D=new Oe({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasPrev,$$slots:{default:[rl]},$$scope:{ctx:l}}}),D.$on("click",l[18]),X=new Oe({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasNext,$$slots:{default:[ll]},$$scope:{ctx:l}}}),X.$on("click",l[19]),{c(){e=b("div"),t=b("div"),a=M("Mostrando "),n=M(r),s=M(" a "),i=M(o),f=M(" de "),u=M(c),h=M(" resultados"),g=q(),p=b("div"),W(D.$$.fragment),w=q(),F=b("span"),N=M("P√°gina "),z=M(x),O=M(" de "),T=M(U),L=q(),W(X.$$.fragment),this.h()},l(A){e=v(A,"DIV",{class:!0});var I=C(e);t=v(I,"DIV",{class:!0});var E=C(t);a=R(E,"Mostrando "),n=R(E,r),s=R(E," a "),i=R(E,o),f=R(E," de "),u=R(E,c),h=R(E," resultados"),E.forEach(m),g=V(I),p=v(I,"DIV",{class:!0});var P=C(p);K(D.$$.fragment,P),w=V(P),F=v(P,"SPAN",{class:!0});var H=C(F);N=R(H,"P√°gina "),z=R(H,x),O=R(H," de "),T=R(H,U),H.forEach(m),L=V(P),K(X.$$.fragment,P),P.forEach(m),I.forEach(m),this.h()},h(){$(t,"class","text-sm text-gray-500 dark:text-gray-400"),$(F,"class","flex items-center px-3 text-sm text-gray-500 dark:text-gray-400"),$(p,"class","flex space-x-2"),$(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700")},m(A,I){S(A,e,I),d(e,t),d(t,a),d(t,n),d(t,s),d(t,i),d(t,f),d(t,u),d(t,h),d(e,g),d(e,p),J(D,p,null),d(p,w),d(p,F),d(F,N),d(F,z),d(F,O),d(F,T),d(p,L),J(X,p,null),_=!0},p(A,I){(!_||I&8)&&r!==(r=Math.min((A[3].currentPage-1)*A[3].pageSize+1,A[3].total)+"")&&oe(n,r),(!_||I&8)&&o!==(o=Math.min(A[3].currentPage*A[3].pageSize,A[3].total)+"")&&oe(i,o),(!_||I&8)&&c!==(c=A[3].total+"")&&oe(u,c);const E={};I&8&&(E.disabled=!A[3].hasPrev),I&16777216&&(E.$$scope={dirty:I,ctx:A}),D.$set(E),(!_||I&8)&&x!==(x=A[3].currentPage+"")&&oe(z,x),(!_||I&8)&&U!==(U=A[3].totalPages+"")&&oe(T,U);const P={};I&8&&(P.disabled=!A[3].hasNext),I&16777216&&(P.$$scope={dirty:I,ctx:A}),X.$set(P)},i(A){_||(k(D.$$.fragment,A),k(X.$$.fragment,A),_=!0)},o(A){y(D.$$.fragment,A),y(X.$$.fragment,A),_=!1},d(A){A&&m(e),G(D),G(X)}}}function rl(l){let e;return{c(){e=M("Anterior")},l(t){e=R(t,"Anterior")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function ll(l){let e;return{c(){e=M("Pr√≥ximo")},l(t){e=R(t,"Pr√≥ximo")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function nl(l){let e,t,a,r,n='<h1 class="text-xl font-medium text-gray-900 dark:text-white">Fichas de EPI</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Gerencie as fichas individuais de equipamentos de prote√ß√£o</p>',s,o,i,f,c,u,h;i=new Oe({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[qr]},$$scope:{ctx:l}}}),i.$on("click",l[14]);const g=[Or,xr,Nr,Sr],p=[];function D(w,F){return w[1]?0:w[2]?1:w[0].length>0?2:3}return c=D(l),u=p[c]=g[c](l),{c(){e=q(),t=b("div"),a=b("div"),r=b("div"),r.innerHTML=n,s=q(),o=b("div"),W(i.$$.fragment),f=q(),u.c(),this.h()},l(w){Wa("svelte-161hi6l",document.head).forEach(m),e=V(w),t=v(w,"DIV",{class:!0});var N=C(t);a=v(N,"DIV",{class:!0});var x=C(a);r=v(x,"DIV",{"data-svelte-h":!0}),De(r)!=="svelte-pifbsf"&&(r.innerHTML=n),s=V(x),o=v(x,"DIV",{class:!0});var z=C(o);K(i.$$.fragment,z),z.forEach(m),x.forEach(m),f=V(N),u.l(N),N.forEach(m),this.h()},h(){document.title="Fichas de EPI - DataLife EPI",$(o,"class","flex space-x-2"),$(a,"class","flex items-center justify-between"),$(t,"class","space-y-6")},m(w,F){S(w,e,F),S(w,t,F),d(t,a),d(a,r),d(a,s),d(a,o),J(i,o,null),d(t,f),p[c].m(t,null),h=!0},p(w,[F]){const N={};F&16777216&&(N.$$scope={dirty:F,ctx:w}),i.$set(N);let x=c;c=D(w),c===x?p[c].p(w,F):(ve(),y(p[x],1,1,()=>{p[x]=null}),be(),u=p[c],u?u.p(w,F):(u=p[c]=g[c](w),u.c()),k(u,1),u.m(t,null))},i(w){h||(k(i.$$.fragment,w),k(u),h=!0)},o(w){y(i.$$.fragment,w),y(u),h=!1},d(w){w&&(m(e),m(t)),G(i),p[c].d()}}}function Gt(l){if(!l||l==="CPF n√£o dispon√≠vel"||l==="")return"CPF n√£o dispon√≠vel";const e=l.replace(/\D/g,"");return e.length!==11?l.includes("n√£o")?l:"CPF inv√°lido":e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}const Jt=l=>`${l.quantidade}x ${l.tipoEpiNome}`;function sl(l,e,t){let{items:a=[]}=e,{loading:r=!1}=e,{error:n=null}=e,{pagination:s}=e,{filters:o}=e,{filterOptions:i}=e;const f=Ye();function c(T){const L=T.target;f("searchChange",L.value)}function u(T){f("empresaFilterChange",T.detail)}function h(T){f("cargoFilterChange",T.detail)}function g(T){const L=T.target;f("devolucaoPendenteChange",L.checked)}function p(){f("clearFilters")}function D(T){f("pageChange",T)}function w(T){f("viewDetail",T)}function F(){f("novaFicha")}const N=()=>f("pageChange",s.currentPage),x=(T,L)=>{L.stopPropagation(),w(T.id)},z=T=>w(T.id),O=()=>D(s.currentPage-1),U=()=>D(s.currentPage+1);return l.$$set=T=>{"items"in T&&t(0,a=T.items),"loading"in T&&t(1,r=T.loading),"error"in T&&t(2,n=T.error),"pagination"in T&&t(3,s=T.pagination),"filters"in T&&t(4,o=T.filters),"filterOptions"in T&&t(5,i=T.filterOptions)},[a,r,n,s,o,i,f,c,u,h,g,p,D,w,F,N,x,z,O,U]}class ol extends Ue{constructor(e){super(),Qe(this,e,sl,nl,Ge,{items:0,loading:1,error:2,pagination:3,filters:4,filterOptions:5})}}const il=kr(new Map),fl=l=>({}),Kt=l=>({});function Wt(l){let e,t;return{c(){e=b("p"),t=M(l[2]),this.h()},l(a){e=v(a,"P",{class:!0});var r=C(e);t=R(r,l[2]),r.forEach(m),this.h()},h(){$(e,"class","text-xs mt-1 text-gray-400 dark:text-gray-500")},m(a,r){S(a,e,r),d(e,t)},p(a,r){r&4&&oe(t,a[2])},d(a){a&&m(e)}}}function cl(l){let e,t,a,r,n,s,o,i,f;t=new ar({props:{name:l[0],class:l[5][l[3]]+" mx-auto mb-2 text-gray-400 dark:text-gray-500"}});let c=l[2]&&Wt(l);const u=l[7].actions,h=bt(u,l,l[6],Kt);return{c(){e=b("div"),W(t.$$.fragment),a=q(),r=b("p"),n=M(l[1]),s=q(),c&&c.c(),o=q(),h&&h.c(),this.h()},l(g){e=v(g,"DIV",{class:!0});var p=C(e);K(t.$$.fragment,p),a=V(p),r=v(p,"P",{class:!0});var D=C(r);n=R(D,l[1]),D.forEach(m),s=V(p),c&&c.l(p),o=V(p),h&&h.l(p),p.forEach(m),this.h()},h(){$(r,"class","font-medium text-sm"),$(e,"class",i="text-center "+l[4][l[3]]+" text-gray-500 dark:text-gray-400")},m(g,p){S(g,e,p),J(t,e,null),d(e,a),d(e,r),d(r,n),d(e,s),c&&c.m(e,null),d(e,o),h&&h.m(e,null),f=!0},p(g,[p]){const D={};p&1&&(D.name=g[0]),p&40&&(D.class=g[5][g[3]]+" mx-auto mb-2 text-gray-400 dark:text-gray-500"),t.$set(D),(!f||p&2)&&oe(n,g[1]),g[2]?c?c.p(g,p):(c=Wt(g),c.c(),c.m(e,o)):c&&(c.d(1),c=null),h&&h.p&&(!f||p&64)&&$t(h,u,g,g[6],f?kt(u,g[6],p,fl):Et(g[6]),Kt),(!f||p&24&&i!==(i="text-center "+g[4][g[3]]+" text-gray-500 dark:text-gray-400"))&&$(e,"class",i)},i(g){f||(k(t.$$.fragment,g),k(h,g),f=!0)},o(g){y(t.$$.fragment,g),y(h,g),f=!1},d(g){g&&m(e),G(t),c&&c.d(),h&&h.d(g)}}}function ul(l,e,t){let a,r,{$$slots:n={},$$scope:s}=e,{icon:o}=e,{message:i}=e,{description:f=""}=e,{size:c="md"}=e;return l.$$set=u=>{"icon"in u&&t(0,o=u.icon),"message"in u&&t(1,i=u.message),"description"in u&&t(2,f=u.description),"size"in u&&t(3,c=u.size),"$$scope"in u&&t(6,s=u.$$scope)},t(5,a={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}),t(4,r={sm:"py-4",md:"py-8",lg:"py-12"}),[o,i,f,c,r,a,s,n]}class At extends Ue{constructor(e){super(),Qe(this,e,ul,cl,Ge,{icon:0,message:1,description:2,size:3})}}const dl=l=>({}),Xt=l=>({}),ml=l=>({}),Yt=l=>({}),gl=l=>({}),Zt=l=>({});function ea(l){let e,t;const a=l[6].actions,r=bt(a,l,l[5],Yt);return{c(){e=b("div"),r&&r.c(),this.h()},l(n){e=v(n,"DIV",{class:!0});var s=C(e);r&&r.l(s),s.forEach(m),this.h()},h(){$(e,"class","flex-shrink-0 ml-4")},m(n,s){S(n,e,s),r&&r.m(e,null),t=!0},p(n,s){r&&r.p&&(!t||s&32)&&$t(r,a,n,n[5],t?kt(a,n[5],s,ml):Et(n[5]),Yt)},i(n){t||(k(r,n),t=!0)},o(n){y(r,n),t=!1},d(n){n&&m(e),r&&r.d(n)}}}function hl(l){let e,t,a,r,n,s,o,i;const f=l[6].content,c=bt(f,l,l[5],Zt);let u=l[1].actions&&ea(l);const h=l[6].footer,g=bt(h,l,l[5],Xt);return{c(){e=b("div"),t=b("div"),a=b("div"),c&&c.c(),r=q(),u&&u.c(),n=q(),g&&g.c(),this.h()},l(p){e=v(p,"DIV",{class:!0});var D=C(e);t=v(D,"DIV",{class:!0});var w=C(t);a=v(w,"DIV",{class:!0});var F=C(a);c&&c.l(F),F.forEach(m),r=V(w),u&&u.l(w),w.forEach(m),n=V(D),g&&g.l(D),D.forEach(m),this.h()},h(){$(a,"class","flex-1 min-w-0"),$(t,"class","flex justify-between items-start"),$(e,"class",l[0])},m(p,D){S(p,e,D),d(e,t),d(t,a),c&&c.m(a,null),d(t,r),u&&u.m(t,null),d(e,n),g&&g.m(e,null),s=!0,o||(i=je(e,"click",l[7]),o=!0)},p(p,[D]){c&&c.p&&(!s||D&32)&&$t(c,f,p,p[5],s?kt(f,p[5],D,gl):Et(p[5]),Zt),p[1].actions?u?(u.p(p,D),D&2&&k(u,1)):(u=ea(p),u.c(),k(u,1),u.m(t,null)):u&&(ve(),y(u,1,1,()=>{u=null}),be()),g&&g.p&&(!s||D&32)&&$t(g,h,p,p[5],s?kt(h,p[5],D,dl):Et(p[5]),Xt),(!s||D&1)&&$(e,"class",p[0])},i(p){s||(k(c,p),k(u),k(g,p),s=!0)},o(p){y(c,p),y(u),y(g,p),s=!1},d(p){p&&m(e),c&&c.d(p),u&&u.d(),g&&g.d(p),o=!1,i()}}}function pl(l,e,t){let a,{$$slots:r={},$$scope:n}=e;const s=nr(r);let{className:o=""}=e,{hoverable:i=!1}=e,{clickable:f=!1}=e;function c(u){ft.call(this,l,u)}return l.$$set=u=>{"className"in u&&t(2,o=u.className),"hoverable"in u&&t(3,i=u.hoverable),"clickable"in u&&t(4,f=u.clickable),"$$scope"in u&&t(5,n=u.$$scope)},l.$$.update=()=>{l.$$.dirty&28&&t(0,a=["border border-gray-200 dark:border-gray-700 rounded-sm p-4",i?"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors":"",f?"cursor-pointer":"",o].filter(Boolean).join(" "))},[a,s,o,i,f,n,r,c]}class lr extends Ue{constructor(e){super(),Qe(this,e,pl,hl,Ge,{className:2,hoverable:3,clickable:4})}}function ta(l,e,t){const a=l.slice();return a[26]=e[t],a[27]=e,a[28]=t,a}function aa(l){let e,t,a,r,n,s,o,i,f,c,u,h,g,p,D,w,F,N,x,z,O,U;r=new ut({props:{title:"Nova Entrega de EPI",objectType:"NOVA ENTREGA",iconName:"PlusOutline",primaryAction:{text:l[1]?"Salvando...":"Criar Entrega",icon:l[1]?"":"CheckOutline",disabled:!l[6]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[14]),r.$on("primaryAction",l[13]),r.$on("secondaryAction",l[14]),i=new Ke({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[_l]},$$scope:{ctx:l}}}),c=new lt({props:{options:l[7],value:l[3],placeholder:"Selecione um respons√°vel...",disabled:l[1]}}),c.$on("change",l[17]),p=new Ke({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[vl]},$$scope:{ctx:l}}}),w=new Oe({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[bl]},$$scope:{ctx:l}}}),w.$on("click",l[8]);const T=[El,$l],L=[];function X(_,A){return _[0].length===0?0:1}return N=X(l),x=L[N]=T[N](l),{c(){e=b("div"),t=q(),a=b("div"),W(r.$$.fragment),n=q(),s=b("div"),o=b("div"),W(i.$$.fragment),f=q(),W(c.$$.fragment),u=q(),h=b("div"),g=b("div"),W(p.$$.fragment),D=q(),W(w.$$.fragment),F=q(),x.c(),this.h()},l(_){e=v(_,"DIV",{class:!0,role:!0}),C(e).forEach(m),t=V(_),a=v(_,"DIV",{class:!0,role:!0,"aria-modal":!0});var A=C(a);K(r.$$.fragment,A),n=V(A),s=v(A,"DIV",{class:!0,style:!0});var I=C(s);o=v(I,"DIV",{class:!0});var E=C(o);K(i.$$.fragment,E),f=V(E),K(c.$$.fragment,E),E.forEach(m),u=V(I),h=v(I,"DIV",{class:!0});var P=C(h);g=v(P,"DIV",{class:!0});var H=C(g);K(p.$$.fragment,H),D=V(H),K(w.$$.fragment,H),H.forEach(m),F=V(P),x.l(P),P.forEach(m),I.forEach(m),A.forEach(m),this.h()},h(){$(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),$(e,"role","presentation"),$(o,"class","mb-6"),$(g,"class","flex items-center justify-between mb-4"),$(h,"class","mb-6"),$(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(s,"height","calc(100% - 80px)"),$(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),$(a,"role","dialog"),$(a,"aria-modal","true")},m(_,A){S(_,e,A),S(_,t,A),S(_,a,A),J(r,a,null),d(a,n),d(a,s),d(s,o),J(i,o,null),d(o,f),J(c,o,null),d(s,u),d(s,h),d(h,g),J(p,g,null),d(g,D),J(w,g,null),d(h,F),L[N].m(h,null),z=!0,O||(U=[je(e,"click",l[14]),je(a,"click",Ct(l[16]))],O=!0)},p(_,A){const I={};A&66&&(I.primaryAction={text:_[1]?"Salvando...":"Criar Entrega",icon:_[1]?"":"CheckOutline",disabled:!_[6]}),A&2&&(I.secondaryAction={text:"Cancelar",disabled:_[1]}),r.$set(I);const E={};A&536870912&&(E.$$scope={dirty:A,ctx:_}),i.$set(E);const P={};A&128&&(P.options=_[7]),A&8&&(P.value=_[3]),A&2&&(P.disabled=_[1]),c.$set(P);const H={};A&536870912&&(H.$$scope={dirty:A,ctx:_}),p.$set(H);const ee={};A&2&&(ee.disabled=_[1]),A&536870912&&(ee.$$scope={dirty:A,ctx:_}),w.$set(ee);let te=N;N=X(_),N===te?L[N].p(_,A):(ve(),y(L[te],1,1,()=>{L[te]=null}),be(),x=L[N],x?x.p(_,A):(x=L[N]=T[N](_),x.c()),k(x,1),x.m(h,null))},i(_){z||(k(r.$$.fragment,_),k(i.$$.fragment,_),k(c.$$.fragment,_),k(p.$$.fragment,_),k(w.$$.fragment,_),k(x),z=!0)},o(_){y(r.$$.fragment,_),y(i.$$.fragment,_),y(c.$$.fragment,_),y(p.$$.fragment,_),y(w.$$.fragment,_),y(x),z=!1},d(_){_&&(m(e),m(t),m(a)),G(r),G(i),G(c),G(p),G(w),L[N].d(),O=!1,Dt(U)}}}function _l(l){let e;return{c(){e=M("Respons√°vel pela Entrega *")},l(t){e=R(t,"Respons√°vel pela Entrega *")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function vl(l){let e;return{c(){e=M("EPIs para Entrega *")},l(t){e=R(t,"EPIs para Entrega *")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function bl(l){let e,t,a;return e=new ot({props:{class:"w-4 h-4 mr-2"}}),{c(){W(e.$$.fragment),t=M(`
              Adicionar Item`)},l(r){K(e.$$.fragment,r),t=R(r,`
              Adicionar Item`)},m(r,n){J(e,r,n),S(r,t,n),a=!0},p:Ve,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),G(e,r)}}}function $l(l){let e,t,a,r=xe(l[4]),n=[];for(let i=0;i<r.length;i+=1)n[i]=na(ta(l,r,i));const s=i=>y(n[i],1,1,()=>{n[i]=null});let o=l[4].length===0&&sa(l);return{c(){e=b("div");for(let i=0;i<n.length;i+=1)n[i].c();t=q(),o&&o.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var f=C(e);for(let c=0;c<n.length;c+=1)n[c].l(f);t=V(f),o&&o.l(f),f.forEach(m),this.h()},h(){$(e,"class","space-y-4")},m(i,f){S(i,e,f);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);d(e,t),o&&o.m(e,null),a=!0},p(i,f){if(f&3634){r=xe(i[4]);let c;for(c=0;c<r.length;c+=1){const u=ta(i,r,c);n[c]?(n[c].p(u,f),k(n[c],1)):(n[c]=na(u),n[c].c(),k(n[c],1),n[c].m(e,t))}for(ve(),c=r.length;c<n.length;c+=1)s(c);be()}i[4].length===0?o?(o.p(i,f),f&16&&k(o,1)):(o=sa(i),o.c(),k(o,1),o.m(e,null)):o&&(ve(),y(o,1,1,()=>{o=null}),be())},i(i){if(!a){for(let f=0;f<r.length;f+=1)k(n[f]);k(o),a=!0}},o(i){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)y(n[f]);y(o),a=!1},d(i){i&&m(e),It(n,i),o&&o.d()}}}function El(l){let e,t,a,r,n,s="Nenhum EPI Dispon√≠vel",o,i,f="N√£o h√° EPIs dispon√≠veis para entrega no momento. Verifique o estoque ou entre em contato com o administrador.",c;return a=new Nt({props:{class:"mx-auto mb-2 text-red-500 w-8 h-8"}}),{c(){e=b("div"),t=b("div"),W(a.$$.fragment),r=q(),n=b("h4"),n.textContent=s,o=q(),i=b("p"),i.textContent=f,this.h()},l(u){e=v(u,"DIV",{class:!0});var h=C(e);t=v(h,"DIV",{class:!0});var g=C(t);K(a.$$.fragment,g),r=V(g),n=v(g,"H4",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-1y6kxv5"&&(n.textContent=s),o=V(g),i=v(g,"P",{class:!0,"data-svelte-h":!0}),De(i)!=="svelte-4gen4i"&&(i.textContent=f),g.forEach(m),h.forEach(m),this.h()},h(){$(n,"class","text-sm font-medium text-red-800 dark:text-red-200 mb-1"),$(i,"class","text-sm text-red-600 dark:text-red-400"),$(t,"class","text-center"),$(e,"class","p-4 border-2 border-dashed border-red-300 rounded-lg bg-red-50 dark:bg-red-900/20")},m(u,h){S(u,e,h),d(e,t),J(a,t,null),d(t,r),d(t,n),d(t,o),d(t,i),c=!0},p:Ve,i(u){c||(k(a.$$.fragment,u),c=!0)},o(u){y(a.$$.fragment,u),c=!1},d(u){u&&m(e),G(a)}}}function ra(l){let e,t,a,r,n;t=new er({props:{class:"w-4 h-4"}});function s(){return l[18](l[28])}return{c(){e=b("button"),W(t.$$.fragment),this.h()},l(o){e=v(o,"BUTTON",{class:!0,title:!0});var i=C(e);K(t.$$.fragment,i),i.forEach(m),this.h()},h(){$(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],$(e,"title","Remover item")},m(o,i){S(o,e,i),J(t,e,null),a=!0,r||(n=je(e,"click",s),r=!0)},p(o,i){l=o,(!a||i&2)&&(e.disabled=l[1])},i(o){a||(k(t.$$.fragment,o),a=!0)},o(o){y(t.$$.fragment,o),a=!1},d(o){o&&m(e),G(t),r=!1,n()}}}function kl(l){let e;return{c(){e=M("Equipamento")},l(t){e=R(t,"Equipamento")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function wl(l){let e;return{c(){e=M("Quantidade")},l(t){e=R(t,"Quantidade")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function la(l){let e,t,a,r,n=l[26].nomeEquipamento+"",s,o,i,f,c=l[26].registroCA+"",u,h,g,p,D,w=l[26].quantidade+"",F;return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),s=M(n),o=q(),i=b("p"),f=M("CA "),u=M(c),h=q(),g=b("div"),p=b("p"),D=M("Qtd: "),F=M(w),this.h()},l(N){e=v(N,"DIV",{class:!0});var x=C(e);t=v(x,"DIV",{class:!0});var z=C(t);a=v(z,"DIV",{});var O=C(a);r=v(O,"P",{class:!0});var U=C(r);s=R(U,n),U.forEach(m),o=V(O),i=v(O,"P",{class:!0});var T=C(i);f=R(T,"CA "),u=R(T,c),T.forEach(m),O.forEach(m),h=V(z),g=v(z,"DIV",{class:!0});var L=C(g);p=v(L,"P",{class:!0});var X=C(p);D=R(X,"Qtd: "),F=R(X,w),X.forEach(m),L.forEach(m),z.forEach(m),x.forEach(m),this.h()},h(){$(r,"class","text-sm font-medium text-gray-900 dark:text-white"),$(i,"class","text-xs text-gray-500 dark:text-gray-400"),$(p,"class","text-sm font-medium text-gray-900 dark:text-white"),$(g,"class","text-right"),$(t,"class","flex items-center justify-between"),$(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(N,x){S(N,e,x),d(e,t),d(t,a),d(a,r),d(r,s),d(a,o),d(a,i),d(i,f),d(i,u),d(t,h),d(t,g),d(g,p),d(p,D),d(p,F)},p(N,x){x&16&&n!==(n=N[26].nomeEquipamento+"")&&oe(s,n),x&16&&c!==(c=N[26].registroCA+"")&&oe(u,c),x&16&&w!==(w=N[26].quantidade+"")&&oe(F,w)},d(N){N&&m(e)}}}function na(l){let e,t,a,r,n=l[28]+1+"",s,o,i,f,c,u,h,g,p,D,w,F,N,x,z,O,U,T=l[4].length>1&&ra(l);u=new Ke({props:{for:"epi-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[kl]},$$scope:{ctx:l}}});function L(...E){return l[19](l[28],...E)}g=new lt({props:{options:l[5],value:l[26].episDisponivelId,placeholder:"Selecione um EPI...",disabled:l[1]}}),g.$on("change",L),w=new Ke({props:{for:"quantidade-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[wl]},$$scope:{ctx:l}}});function X(E){l[20](E,l[26])}function _(...E){return l[21](l[28],...E)}let A={id:"quantidade-"+l[28],type:"number",min:"1",max:"100",class:"rounded-sm",disabled:l[1]};l[26].quantidade!==void 0&&(A.value=l[26].quantidade),N=new Pt({props:A}),Re.push(()=>Me(N,"value",X)),N.$on("input",_);let I=l[26].nomeEquipamento&&la(l);return{c(){e=b("div"),t=b("div"),a=b("h4"),r=M("Item "),s=M(n),o=q(),T&&T.c(),i=q(),f=b("div"),c=b("div"),W(u.$$.fragment),h=q(),W(g.$$.fragment),p=q(),D=b("div"),W(w.$$.fragment),F=q(),W(N.$$.fragment),z=q(),I&&I.c(),O=q(),this.h()},l(E){e=v(E,"DIV",{class:!0});var P=C(e);t=v(P,"DIV",{class:!0});var H=C(t);a=v(H,"H4",{class:!0});var ee=C(a);r=R(ee,"Item "),s=R(ee,n),ee.forEach(m),o=V(H),T&&T.l(H),H.forEach(m),i=V(P),f=v(P,"DIV",{class:!0});var te=C(f);c=v(te,"DIV",{class:!0});var le=C(c);K(u.$$.fragment,le),h=V(le),K(g.$$.fragment,le),le.forEach(m),p=V(te),D=v(te,"DIV",{});var ae=C(D);K(w.$$.fragment,ae),F=V(ae),K(N.$$.fragment,ae),ae.forEach(m),te.forEach(m),z=V(P),I&&I.l(P),O=V(P),P.forEach(m),this.h()},h(){$(a,"class","text-sm font-medium text-gray-900 dark:text-white"),$(t,"class","flex items-start justify-between mb-4"),$(c,"class","md:col-span-2"),$(f,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),$(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(E,P){S(E,e,P),d(e,t),d(t,a),d(a,r),d(a,s),d(t,o),T&&T.m(t,null),d(e,i),d(e,f),d(f,c),J(u,c,null),d(c,h),J(g,c,null),d(f,p),d(f,D),J(w,D,null),d(D,F),J(N,D,null),d(e,z),I&&I.m(e,null),d(e,O),U=!0},p(E,P){l=E,l[4].length>1?T?(T.p(l,P),P&16&&k(T,1)):(T=ra(l),T.c(),k(T,1),T.m(t,null)):T&&(ve(),y(T,1,1,()=>{T=null}),be());const H={};P&536870912&&(H.$$scope={dirty:P,ctx:l}),u.$set(H);const ee={};P&32&&(ee.options=l[5]),P&16&&(ee.value=l[26].episDisponivelId),P&2&&(ee.disabled=l[1]),g.$set(ee);const te={};P&536870912&&(te.$$scope={dirty:P,ctx:l}),w.$set(te);const le={};P&2&&(le.disabled=l[1]),!x&&P&16&&(x=!0,le.value=l[26].quantidade,Le(()=>x=!1)),N.$set(le),l[26].nomeEquipamento?I?I.p(l,P):(I=la(l),I.c(),I.m(e,O)):I&&(I.d(1),I=null)},i(E){U||(k(T),k(u.$$.fragment,E),k(g.$$.fragment,E),k(w.$$.fragment,E),k(N.$$.fragment,E),U=!0)},o(E){y(T),y(u.$$.fragment,E),y(g.$$.fragment,E),y(w.$$.fragment,E),y(N.$$.fragment,E),U=!1},d(E){E&&m(e),T&&T.d(),G(u),G(g),G(w),G(N),I&&I.d()}}}function sa(l){let e,t,a,r,n="Nenhum item adicionado",s,o,i;return t=new ot({props:{class:"w-8 h-8 mx-auto mb-3 text-gray-400"}}),o=new Oe({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Dl]},$$scope:{ctx:l}}}),o.$on("click",l[8]),{c(){e=b("div"),W(t.$$.fragment),a=q(),r=b("p"),r.textContent=n,s=q(),W(o.$$.fragment),this.h()},l(f){e=v(f,"DIV",{class:!0});var c=C(e);K(t.$$.fragment,c),a=V(c),r=v(c,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1e863on"&&(r.textContent=n),s=V(c),K(o.$$.fragment,c),c.forEach(m),this.h()},h(){$(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),$(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(f,c){S(f,e,c),J(t,e,null),d(e,a),d(e,r),d(e,s),J(o,e,null),i=!0},p(f,c){const u={};c&2&&(u.disabled=f[1]),c&536870912&&(u.$$scope={dirty:c,ctx:f}),o.$set(u)},i(f){i||(k(t.$$.fragment,f),k(o.$$.fragment,f),i=!0)},o(f){y(t.$$.fragment,f),y(o.$$.fragment,f),i=!1},d(f){f&&m(e),G(t),G(o)}}}function Dl(l){let e;return{c(){e=M("Adicionar Primeiro Item")},l(t){e=R(t,"Adicionar Primeiro Item")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Cl(l){let e,t,a=l[2]&&aa(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),S(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&k(a,1)):(a=aa(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(ve(),y(a,1,1,()=>{a=null}),be())},i(r){t||(k(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Il(l,e,t){let a,r,n,{episDisponiveis:s=[]}=e,{usuarios:o=[]}=e,{loading:i=!1}=e,{show:f=!1}=e;const c=Ye();let u="",h="",g=[];function p(){u="",t(3,h=""),t(4,g=[])}function D(){t(4,g=[...g,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function w(I){t(4,g=g.filter((E,P)=>P!==I))}function F(I,E){const P=s.find(H=>H.id===E);P&&t(4,g[I]={...g[I],episDisponivelId:E,nomeEquipamento:P.nomeEquipamento,registroCA:P.numeroCA||P.registroCA},g)}function N(I,E){t(4,g[I]={...g[I],quantidade:E},g)}function x(I){const E=o.find(P=>P.id===I);E&&(t(3,h=I),u=E.nome)}function z(){if(console.log("üìù NovaEntregaDrawer: Preparando dados do formul√°rio..."),console.log("üìã Itens selecionados originais:",g),console.log("üë§ Usuario respons√°vel ID:",h),console.log("üì¶ Validando itens..."),!h.trim()){console.error("‚ùå Erro: usu√°rio respons√°vel n√£o selecionado");return}if(g.length===0){console.error("‚ùå Erro: nenhum item selecionado");return}const I=g.filter(H=>H.episDisponivelId&&H.quantidade>0);if(I.length===0){console.error("‚ùå Erro: nenhum item v√°lido selecionado");return}const E={responsavel:u.trim(),usuarioResponsavelId:h.trim(),itens:I.map(H=>({episDisponivelId:H.episDisponivelId,nomeEquipamento:H.nomeEquipamento,registroCA:H.registroCA,quantidade:H.quantidade}))};console.log("‚úÖ FormData montado:",{responsavel:E.responsavel,usuarioId:E.usuarioResponsavelId,totalItens:E.itens.length,itens:E.itens.map((H,ee)=>({index:ee+1,id:H.episDisponivelId,nome:H.nomeEquipamento,ca:H.registroCA,quantidade:H.quantidade}))});const P=new Set(E.itens.map(H=>H.episDisponivelId));console.log(`üéØ Verifica√ß√£o de tipos √∫nicos: ${P.size} tipos √∫nicos de ${E.itens.length} itens totais`),P.size<E.itens.length&&console.warn("‚ö†Ô∏è ALERTA: Alguns itens t√™m o mesmo episDisponivelId - isso pode causar problemas na expans√£o"),c("salvar",E)}function O(){c("cancelar")}function U(I){ft.call(this,l,I)}const T=I=>x(I.detail),L=I=>w(I),X=(I,E)=>F(I,E.detail);function _(I,E){l.$$.not_equal(E.quantidade,I)&&(E.quantidade=I,t(4,g))}const A=(I,E)=>N(I,parseInt(E.target.value)||1);return l.$$set=I=>{"episDisponiveis"in I&&t(0,s=I.episDisponiveis),"usuarios"in I&&t(15,o=I.usuarios),"loading"in I&&t(1,i=I.loading),"show"in I&&t(2,f=I.show)},l.$$.update=()=>{l.$$.dirty&20&&f&&g.length===0&&(p(),D()),l.$$.dirty&32776&&o.length>0&&!h&&(t(3,h=o[0].id),u=o[0].nome),l.$$.dirty&1&&t(5,a=[{value:"",label:"Selecione um EPI..."},...s.map(I=>({value:I.id,label:`${I.nomeEquipamento} (CA ${I.numeroCA||I.registroCA}) - ${I.quantidadeDisponivel} dispon√≠veis`}))]),l.$$.dirty&33&&(s==null?void 0:s.length)>0&&(console.log("üéØ NovaEntregaDrawer: EPIs dispon√≠veis atualizados:",s.length),console.log("üì¶ Amostra de EPIs no drawer:",s.slice(0,2)),console.log("üîß Op√ß√µes do select:",a.slice(0,3))),l.$$.dirty&32768&&t(7,r=[{value:"",label:"Selecione um respons√°vel..."},...o.map(I=>({value:I.id,label:`${I.nome} (${I.email})`}))]),l.$$.dirty&27&&t(6,n=h.trim()&&g.length>0&&!i&&s.length>0)},[s,i,f,h,g,a,n,r,D,w,F,N,x,z,O,o,U,T,L,X,_,A]}class yl extends Ue{constructor(e){super(),Qe(this,e,Il,Cl,Ge,{episDisponiveis:0,usuarios:15,loading:1,show:2})}}function oa(l,e,t){const a=l.slice();return a[27]=e[t],a[28]=e,a[29]=t,a}function ia(l){var $e;let e,t,a,r,n,s,o,i,f,c,u,h,g,p,D,w,F,N,x,z,O,U,T,L,X,_,A,I,E,P,H,ee,te,le;r=new ut({props:{title:"Editar Entrega #"+((($e=l[0])==null?void 0:$e.id)||"")}}),r.$on("close",l[13]);let ae=l[0]&&fa(l);c=new Ke({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Pl]},$$scope:{ctx:l}}});function re(B){l[16](B)}let ue={id:"responsavel",type:"text",placeholder:"Nome do respons√°vel pela entrega",class:"rounded-sm "+(l[5].responsavel?"border-red-500":""),disabled:l[1]};l[3]!==void 0&&(ue.value=l[3]),h=new Pt({props:ue}),Re.push(()=>Me(h,"value",re));let me=l[5].responsavel&&ca(l);N=new Ke({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[Al]},$$scope:{ctx:l}}}),z=new Oe({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Fl]},$$scope:{ctx:l}}}),z.$on("click",l[8]);let ge=l[5].items&&ua(l),pe=xe(l[4]),fe=[];for(let B=0;B<pe.length;B+=1)fe[B]=pa(oa(l,pe,B));const Y=B=>y(fe[B],1,1,()=>{fe[B]=null});let Z=l[4].length===0&&_a(l),ie=l[4].length>0&&va(l);return E=new Oe({props:{color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Nl]},$$scope:{ctx:l}}}),E.$on("click",l[13]),H=new Oe({props:{color:"primary",class:"rounded-sm",disabled:!l[6],$$slots:{default:[zl]},$$scope:{ctx:l}}}),H.$on("click",l[12]),{c(){e=b("div"),t=q(),a=b("div"),W(r.$$.fragment),n=q(),s=b("div"),o=b("div"),ae&&ae.c(),i=q(),f=b("div"),W(c.$$.fragment),u=q(),W(h.$$.fragment),p=q(),me&&me.c(),D=q(),w=b("div"),F=b("div"),W(N.$$.fragment),x=q(),W(z.$$.fragment),O=q(),ge&&ge.c(),U=q(),T=b("div");for(let B=0;B<fe.length;B+=1)fe[B].c();L=q(),Z&&Z.c(),X=q(),ie&&ie.c(),_=q(),A=b("div"),I=b("div"),W(E.$$.fragment),P=q(),W(H.$$.fragment),this.h()},l(B){e=v(B,"DIV",{class:!0,role:!0}),C(e).forEach(m),t=V(B),a=v(B,"DIV",{class:!0,role:!0,"aria-modal":!0});var se=C(a);K(r.$$.fragment,se),n=V(se),s=v(se,"DIV",{class:!0});var Ee=C(s);o=v(Ee,"DIV",{class:!0,style:!0});var ke=C(o);ae&&ae.l(ke),i=V(ke),f=v(ke,"DIV",{class:!0});var we=C(f);K(c.$$.fragment,we),u=V(we),K(h.$$.fragment,we),p=V(we),me&&me.l(we),we.forEach(m),D=V(ke),w=v(ke,"DIV",{class:!0});var qe=C(w);F=v(qe,"DIV",{class:!0});var ye=C(F);K(N.$$.fragment,ye),x=V(ye),K(z.$$.fragment,ye),ye.forEach(m),O=V(qe),ge&&ge.l(qe),U=V(qe),T=v(qe,"DIV",{class:!0});var Pe=C(T);for(let de=0;de<fe.length;de+=1)fe[de].l(Pe);L=V(Pe),Z&&Z.l(Pe),Pe.forEach(m),qe.forEach(m),X=V(ke),ie&&ie.l(ke),ke.forEach(m),_=V(Ee),A=v(Ee,"DIV",{class:!0});var Ne=C(A);I=v(Ne,"DIV",{class:!0});var Se=C(I);K(E.$$.fragment,Se),P=V(Se),K(H.$$.fragment,Se),Se.forEach(m),Ne.forEach(m),Ee.forEach(m),se.forEach(m),this.h()},h(){$(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),$(e,"role","presentation"),$(f,"class","mb-6"),$(F,"class","flex items-center justify-between mb-4"),$(T,"class","space-y-4"),$(w,"class","mb-6"),$(o,"class","flex-1 overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(o,"height","calc(100% - 80px)"),$(I,"class","flex items-center justify-end space-x-3"),$(A,"class","flex-shrink-0 bg-gray-50 dark:bg-gray-800 px-6 py-4 border-t border-gray-200 dark:border-gray-700"),$(s,"class","flex flex-col h-full"),$(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),$(a,"role","dialog"),$(a,"aria-modal","true")},m(B,se){S(B,e,se),S(B,t,se),S(B,a,se),J(r,a,null),d(a,n),d(a,s),d(s,o),ae&&ae.m(o,null),d(o,i),d(o,f),J(c,f,null),d(f,u),J(h,f,null),d(f,p),me&&me.m(f,null),d(o,D),d(o,w),d(w,F),J(N,F,null),d(F,x),J(z,F,null),d(w,O),ge&&ge.m(w,null),d(w,U),d(w,T);for(let Ee=0;Ee<fe.length;Ee+=1)fe[Ee]&&fe[Ee].m(T,null);d(T,L),Z&&Z.m(T,null),d(o,X),ie&&ie.m(o,null),d(s,_),d(s,A),d(A,I),J(E,I,null),d(I,P),J(H,I,null),ee=!0,te||(le=[je(e,"click",l[13]),je(a,"click",Ct(l[15]))],te=!0)},p(B,se){var Se;const Ee={};se&1&&(Ee.title="Editar Entrega #"+(((Se=B[0])==null?void 0:Se.id)||"")),r.$set(Ee),B[0]?ae?ae.p(B,se):(ae=fa(B),ae.c(),ae.m(o,i)):ae&&(ae.d(1),ae=null);const ke={};se&1073741824&&(ke.$$scope={dirty:se,ctx:B}),c.$set(ke);const we={};se&32&&(we.class="rounded-sm "+(B[5].responsavel?"border-red-500":"")),se&2&&(we.disabled=B[1]),!g&&se&8&&(g=!0,we.value=B[3],Le(()=>g=!1)),h.$set(we),B[5].responsavel?me?me.p(B,se):(me=ca(B),me.c(),me.m(f,null)):me&&(me.d(1),me=null);const qe={};se&1073741824&&(qe.$$scope={dirty:se,ctx:B}),N.$set(qe);const ye={};if(se&2&&(ye.disabled=B[1]),se&1073741824&&(ye.$$scope={dirty:se,ctx:B}),z.$set(ye),B[5].items?ge?ge.p(B,se):(ge=ua(B),ge.c(),ge.m(w,U)):ge&&(ge.d(1),ge=null),se&3762){pe=xe(B[4]);let de;for(de=0;de<pe.length;de+=1){const j=oa(B,pe,de);fe[de]?(fe[de].p(j,se),k(fe[de],1)):(fe[de]=pa(j),fe[de].c(),k(fe[de],1),fe[de].m(T,L))}for(ve(),de=pe.length;de<fe.length;de+=1)Y(de);be()}B[4].length===0?Z?(Z.p(B,se),se&16&&k(Z,1)):(Z=_a(B),Z.c(),k(Z,1),Z.m(T,null)):Z&&(ve(),y(Z,1,1,()=>{Z=null}),be()),B[4].length>0?ie?ie.p(B,se):(ie=va(B),ie.c(),ie.m(o,null)):ie&&(ie.d(1),ie=null);const Pe={};se&2&&(Pe.disabled=B[1]),se&1073741824&&(Pe.$$scope={dirty:se,ctx:B}),E.$set(Pe);const Ne={};se&64&&(Ne.disabled=!B[6]),se&1073741826&&(Ne.$$scope={dirty:se,ctx:B}),H.$set(Ne)},i(B){if(!ee){k(r.$$.fragment,B),k(c.$$.fragment,B),k(h.$$.fragment,B),k(N.$$.fragment,B),k(z.$$.fragment,B);for(let se=0;se<pe.length;se+=1)k(fe[se]);k(Z),k(E.$$.fragment,B),k(H.$$.fragment,B),ee=!0}},o(B){y(r.$$.fragment,B),y(c.$$.fragment,B),y(h.$$.fragment,B),y(N.$$.fragment,B),y(z.$$.fragment,B),fe=fe.filter(Boolean);for(let se=0;se<fe.length;se+=1)y(fe[se]);y(Z),y(E.$$.fragment,B),y(H.$$.fragment,B),ee=!1},d(B){B&&(m(e),m(t),m(a)),G(r),ae&&ae.d(),G(c),G(h),me&&me.d(),G(N),G(z),ge&&ge.d(),It(fe,B),Z&&Z.d(),ie&&ie.d(),G(E),G(H),te=!1,Dt(le)}}}function fa(l){let e,t,a="Informa√ß√µes da Entrega Original",r,n,s,o,i=new Date(l[0].dataEntrega).toLocaleDateString("pt-BR")+"",f,c,u,h,g=l[0].status==="assinado"?"Assinado":"Pendente Assinatura",p,D,w,F,N=l[0].id+"",x;return{c(){e=b("div"),t=b("h4"),t.textContent=a,r=q(),n=b("div"),s=b("p"),o=M("‚Ä¢ Data: "),f=M(i),c=q(),u=b("p"),h=M("‚Ä¢ Status: "),p=M(g),D=q(),w=b("p"),F=M("‚Ä¢ ID: #"),x=M(N),this.h()},l(z){e=v(z,"DIV",{class:!0});var O=C(e);t=v(O,"H4",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1p8cqi4"&&(t.textContent=a),r=V(O),n=v(O,"DIV",{class:!0});var U=C(n);s=v(U,"P",{});var T=C(s);o=R(T,"‚Ä¢ Data: "),f=R(T,i),T.forEach(m),c=V(U),u=v(U,"P",{});var L=C(u);h=R(L,"‚Ä¢ Status: "),p=R(L,g),L.forEach(m),D=V(U),w=v(U,"P",{});var X=C(w);F=R(X,"‚Ä¢ ID: #"),x=R(X,N),X.forEach(m),U.forEach(m),O.forEach(m),this.h()},h(){$(t,"class","text-sm font-medium text-blue-900 dark:text-blue-100 mb-2"),$(n,"class","text-sm text-blue-800 dark:text-blue-200"),$(e,"class","mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800")},m(z,O){S(z,e,O),d(e,t),d(e,r),d(e,n),d(n,s),d(s,o),d(s,f),d(n,c),d(n,u),d(u,h),d(u,p),d(n,D),d(n,w),d(w,F),d(w,x)},p(z,O){O&1&&i!==(i=new Date(z[0].dataEntrega).toLocaleDateString("pt-BR")+"")&&oe(f,i),O&1&&g!==(g=z[0].status==="assinado"?"Assinado":"Pendente Assinatura")&&oe(p,g),O&1&&N!==(N=z[0].id+"")&&oe(x,N)},d(z){z&&m(e)}}}function Pl(l){let e;return{c(){e=M("Respons√°vel pela Entrega *")},l(t){e=R(t,"Respons√°vel pela Entrega *")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function ca(l){let e,t=l[5].responsavel+"",a;return{c(){e=b("p"),a=M(t),this.h()},l(r){e=v(r,"P",{class:!0});var n=C(e);a=R(n,t),n.forEach(m),this.h()},h(){$(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){S(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].responsavel+"")&&oe(a,t)},d(r){r&&m(e)}}}function Al(l){let e;return{c(){e=M("EPIs da Entrega *")},l(t){e=R(t,"EPIs da Entrega *")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Fl(l){let e,t,a;return e=new ot({props:{class:"mr-2 w-4 h-4"}}),{c(){W(e.$$.fragment),t=M(`
              Adicionar Item`)},l(r){K(e.$$.fragment,r),t=R(r,`
              Adicionar Item`)},m(r,n){J(e,r,n),S(r,t,n),a=!0},p:Ve,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),G(e,r)}}}function ua(l){let e,t=l[5].items+"",a;return{c(){e=b("p"),a=M(t),this.h()},l(r){e=v(r,"P",{class:!0});var n=C(e);a=R(n,t),n.forEach(m),this.h()},h(){$(e,"class","mb-3 text-sm text-red-600 dark:text-red-400")},m(r,n){S(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].items+"")&&oe(a,t)},d(r){r&&m(e)}}}function da(l){let e,t,a,r,n;t=new er({props:{class:"w-4 h-4"}});function s(){return l[17](l[29])}return{c(){e=b("button"),W(t.$$.fragment),this.h()},l(o){e=v(o,"BUTTON",{class:!0,title:!0});var i=C(e);K(t.$$.fragment,i),i.forEach(m),this.h()},h(){$(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],$(e,"title","Remover item")},m(o,i){S(o,e,i),J(t,e,null),a=!0,r||(n=je(e,"click",s),r=!0)},p(o,i){l=o,(!a||i&2)&&(e.disabled=l[1])},i(o){a||(k(t.$$.fragment,o),a=!0)},o(o){y(t.$$.fragment,o),a=!1},d(o){o&&m(e),G(t),r=!1,n()}}}function Vl(l){let e;return{c(){e=M("Equipamento")},l(t){e=R(t,"Equipamento")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function ma(l){let e,t=l[5][`item-${l[29]}`]+"",a;return{c(){e=b("p"),a=M(t),this.h()},l(r){e=v(r,"P",{class:!0});var n=C(e);a=R(n,t),n.forEach(m),this.h()},h(){$(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){S(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5][`item-${r[29]}`]+"")&&oe(a,t)},d(r){r&&m(e)}}}function ql(l){let e;return{c(){e=M("Quantidade")},l(t){e=R(t,"Quantidade")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function ga(l){let e,t=l[5][`quantidade-${l[29]}`]+"",a;return{c(){e=b("p"),a=M(t),this.h()},l(r){e=v(r,"P",{class:!0});var n=C(e);a=R(n,t),n.forEach(m),this.h()},h(){$(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){S(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5][`quantidade-${r[29]}`]+"")&&oe(a,t)},d(r){r&&m(e)}}}function ha(l){let e,t,a,r,n=l[27].nomeEquipamento+"",s,o,i,f,c=l[27].registroCA+"",u,h,g,p,D,w=l[27].quantidade+"",F;return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),s=M(n),o=q(),i=b("p"),f=M("CA "),u=M(c),h=q(),g=b("div"),p=b("p"),D=M("Qtd: "),F=M(w),this.h()},l(N){e=v(N,"DIV",{class:!0});var x=C(e);t=v(x,"DIV",{class:!0});var z=C(t);a=v(z,"DIV",{});var O=C(a);r=v(O,"P",{class:!0});var U=C(r);s=R(U,n),U.forEach(m),o=V(O),i=v(O,"P",{class:!0});var T=C(i);f=R(T,"CA "),u=R(T,c),T.forEach(m),O.forEach(m),h=V(z),g=v(z,"DIV",{class:!0});var L=C(g);p=v(L,"P",{class:!0});var X=C(p);D=R(X,"Qtd: "),F=R(X,w),X.forEach(m),L.forEach(m),z.forEach(m),x.forEach(m),this.h()},h(){$(r,"class","text-sm font-medium text-gray-900 dark:text-white"),$(i,"class","text-xs text-gray-500 dark:text-gray-400"),$(p,"class","text-sm font-medium text-gray-900 dark:text-white"),$(g,"class","text-right"),$(t,"class","flex items-center justify-between"),$(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(N,x){S(N,e,x),d(e,t),d(t,a),d(a,r),d(r,s),d(a,o),d(a,i),d(i,f),d(i,u),d(t,h),d(t,g),d(g,p),d(p,D),d(p,F)},p(N,x){x&16&&n!==(n=N[27].nomeEquipamento+"")&&oe(s,n),x&16&&c!==(c=N[27].registroCA+"")&&oe(u,c),x&16&&w!==(w=N[27].quantidade+"")&&oe(F,w)},d(N){N&&m(e)}}}function pa(l){let e,t,a,r,n=l[29]+1+"",s,o,i,f,c,u,h,g,p,D,w,F,N,x,z,O,U,T,L,X,_=l[4].length>1&&da(l);u=new Ke({props:{for:"epi-"+l[29],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Vl]},$$scope:{ctx:l}}});function A(re){l[18](re,l[27])}function I(...re){return l[19](l[29],...re)}let E={id:"epi-"+l[29],items:l[7],class:"rounded-sm "+(l[5][`item-${l[29]}`]?"border-red-500":""),disabled:l[1]};l[27].episDisponivelId!==void 0&&(E.value=l[27].episDisponivelId),g=new Ya({props:E}),Re.push(()=>Me(g,"value",A)),g.$on("change",I);let P=l[5][`item-${l[29]}`]&&ma(l);N=new Ke({props:{for:"quantidade-"+l[29],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[ql]},$$scope:{ctx:l}}});function H(re){l[20](re,l[27])}function ee(...re){return l[21](l[29],...re)}let te={id:"quantidade-"+l[29],type:"number",min:"1",max:"100",class:"rounded-sm "+(l[5][`quantidade-${l[29]}`]?"border-red-500":""),disabled:l[1]};l[27].quantidade!==void 0&&(te.value=l[27].quantidade),z=new Pt({props:te}),Re.push(()=>Me(z,"value",H)),z.$on("input",ee);let le=l[5][`quantidade-${l[29]}`]&&ga(l),ae=l[27].nomeEquipamento&&ha(l);return{c(){e=b("div"),t=b("div"),a=b("h4"),r=M("Item "),s=M(n),o=q(),_&&_.c(),i=q(),f=b("div"),c=b("div"),W(u.$$.fragment),h=q(),W(g.$$.fragment),D=q(),P&&P.c(),w=q(),F=b("div"),W(N.$$.fragment),x=q(),W(z.$$.fragment),U=q(),le&&le.c(),T=q(),ae&&ae.c(),L=q(),this.h()},l(re){e=v(re,"DIV",{class:!0});var ue=C(e);t=v(ue,"DIV",{class:!0});var me=C(t);a=v(me,"H4",{class:!0});var ge=C(a);r=R(ge,"Item "),s=R(ge,n),ge.forEach(m),o=V(me),_&&_.l(me),me.forEach(m),i=V(ue),f=v(ue,"DIV",{class:!0});var pe=C(f);c=v(pe,"DIV",{class:!0});var fe=C(c);K(u.$$.fragment,fe),h=V(fe),K(g.$$.fragment,fe),D=V(fe),P&&P.l(fe),fe.forEach(m),w=V(pe),F=v(pe,"DIV",{});var Y=C(F);K(N.$$.fragment,Y),x=V(Y),K(z.$$.fragment,Y),U=V(Y),le&&le.l(Y),Y.forEach(m),pe.forEach(m),T=V(ue),ae&&ae.l(ue),L=V(ue),ue.forEach(m),this.h()},h(){$(a,"class","text-sm font-medium text-gray-900 dark:text-white"),$(t,"class","flex items-start justify-between mb-4"),$(c,"class","md:col-span-2"),$(f,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),$(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(re,ue){S(re,e,ue),d(e,t),d(t,a),d(a,r),d(a,s),d(t,o),_&&_.m(t,null),d(e,i),d(e,f),d(f,c),J(u,c,null),d(c,h),J(g,c,null),d(c,D),P&&P.m(c,null),d(f,w),d(f,F),J(N,F,null),d(F,x),J(z,F,null),d(F,U),le&&le.m(F,null),d(e,T),ae&&ae.m(e,null),d(e,L),X=!0},p(re,ue){l=re,l[4].length>1?_?(_.p(l,ue),ue&16&&k(_,1)):(_=da(l),_.c(),k(_,1),_.m(t,null)):_&&(ve(),y(_,1,1,()=>{_=null}),be());const me={};ue&1073741824&&(me.$$scope={dirty:ue,ctx:l}),u.$set(me);const ge={};ue&128&&(ge.items=l[7]),ue&32&&(ge.class="rounded-sm "+(l[5][`item-${l[29]}`]?"border-red-500":"")),ue&2&&(ge.disabled=l[1]),!p&&ue&16&&(p=!0,ge.value=l[27].episDisponivelId,Le(()=>p=!1)),g.$set(ge),l[5][`item-${l[29]}`]?P?P.p(l,ue):(P=ma(l),P.c(),P.m(c,null)):P&&(P.d(1),P=null);const pe={};ue&1073741824&&(pe.$$scope={dirty:ue,ctx:l}),N.$set(pe);const fe={};ue&32&&(fe.class="rounded-sm "+(l[5][`quantidade-${l[29]}`]?"border-red-500":"")),ue&2&&(fe.disabled=l[1]),!O&&ue&16&&(O=!0,fe.value=l[27].quantidade,Le(()=>O=!1)),z.$set(fe),l[5][`quantidade-${l[29]}`]?le?le.p(l,ue):(le=ga(l),le.c(),le.m(F,null)):le&&(le.d(1),le=null),l[27].nomeEquipamento?ae?ae.p(l,ue):(ae=ha(l),ae.c(),ae.m(e,L)):ae&&(ae.d(1),ae=null)},i(re){X||(k(_),k(u.$$.fragment,re),k(g.$$.fragment,re),k(N.$$.fragment,re),k(z.$$.fragment,re),X=!0)},o(re){y(_),y(u.$$.fragment,re),y(g.$$.fragment,re),y(N.$$.fragment,re),y(z.$$.fragment,re),X=!1},d(re){re&&m(e),_&&_.d(),G(u),G(g),P&&P.d(),G(N),G(z),le&&le.d(),ae&&ae.d()}}}function _a(l){let e,t,a,r,n="Nenhum item na entrega",s,o,i;return t=new ot({props:{class:"mx-auto mb-3 text-gray-400 w-8 h-8"}}),o=new Oe({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Sl]},$$scope:{ctx:l}}}),o.$on("click",l[8]),{c(){e=b("div"),W(t.$$.fragment),a=q(),r=b("p"),r.textContent=n,s=q(),W(o.$$.fragment),this.h()},l(f){e=v(f,"DIV",{class:!0});var c=C(e);K(t.$$.fragment,c),a=V(c),r=v(c,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-iymvfb"&&(r.textContent=n),s=V(c),K(o.$$.fragment,c),c.forEach(m),this.h()},h(){$(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),$(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(f,c){S(f,e,c),J(t,e,null),d(e,a),d(e,r),d(e,s),J(o,e,null),i=!0},p(f,c){const u={};c&2&&(u.disabled=f[1]),c&1073741824&&(u.$$scope={dirty:c,ctx:f}),o.$set(u)},i(f){i||(k(t.$$.fragment,f),k(o.$$.fragment,f),i=!0)},o(f){y(t.$$.fragment,f),y(o.$$.fragment,f),i=!1},d(f){f&&m(e),G(t),G(o)}}}function Sl(l){let e;return{c(){e=M("Adicionar Primeiro Item")},l(t){e=R(t,"Adicionar Primeiro Item")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function va(l){let e,t,a="Resumo das Altera√ß√µes",r,n,s,o,i=l[4].length+"",f,c,u,h,g=l[4].reduce(ba,0)+"",p,D,w,F,N,x=(l[3]||"N√£o informado")+"",z;return{c(){e=b("div"),t=b("h4"),t.textContent=a,r=q(),n=b("div"),s=b("p"),o=M("‚Ä¢ Total de itens: "),f=M(i),c=q(),u=b("p"),h=M("‚Ä¢ Quantidade total: "),p=M(g),D=M(" unidades"),w=q(),F=b("p"),N=M("‚Ä¢ Respons√°vel: "),z=M(x),this.h()},l(O){e=v(O,"DIV",{class:!0});var U=C(e);t=v(U,"H4",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-sxfnj2"&&(t.textContent=a),r=V(U),n=v(U,"DIV",{class:!0});var T=C(n);s=v(T,"P",{});var L=C(s);o=R(L,"‚Ä¢ Total de itens: "),f=R(L,i),L.forEach(m),c=V(T),u=v(T,"P",{});var X=C(u);h=R(X,"‚Ä¢ Quantidade total: "),p=R(X,g),D=R(X," unidades"),X.forEach(m),w=V(T),F=v(T,"P",{});var _=C(F);N=R(_,"‚Ä¢ Respons√°vel: "),z=R(_,x),_.forEach(m),T.forEach(m),U.forEach(m),this.h()},h(){$(t,"class","text-sm font-medium text-yellow-900 dark:text-yellow-100 mb-2"),$(n,"class","text-sm text-yellow-800 dark:text-yellow-200"),$(e,"class","mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800")},m(O,U){S(O,e,U),d(e,t),d(e,r),d(e,n),d(n,s),d(s,o),d(s,f),d(n,c),d(n,u),d(u,h),d(u,p),d(u,D),d(n,w),d(n,F),d(F,N),d(F,z)},p(O,U){U&16&&i!==(i=O[4].length+"")&&oe(f,i),U&16&&g!==(g=O[4].reduce(ba,0)+"")&&oe(p,g),U&8&&x!==(x=(O[3]||"N√£o informado")+"")&&oe(z,x)},d(O){O&&m(e)}}}function Nl(l){let e;return{c(){e=M("Cancelar")},l(t){e=R(t,"Cancelar")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function xl(l){let e,t,a;return e=new Cr({props:{class:"mr-2 w-4 h-4"}}),{c(){W(e.$$.fragment),t=M(`
              Salvar Altera√ß√µes`)},l(r){K(e.$$.fragment,r),t=R(r,`
              Salvar Altera√ß√µes`)},m(r,n){J(e,r,n),S(r,t,n),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),G(e,r)}}}function Ol(l){let e,t,a;return e=new Za({props:{class:"mr-2 animate-spin w-4 h-4"}}),{c(){W(e.$$.fragment),t=M(`
              Salvando...`)},l(r){K(e.$$.fragment,r),t=R(r,`
              Salvando...`)},m(r,n){J(e,r,n),S(r,t,n),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),G(e,r)}}}function zl(l){let e,t,a,r;const n=[Ol,xl],s=[];function o(i,f){return i[1]?0:1}return e=o(l),t=s[e]=n[e](l),{c(){t.c(),a=Ce()},l(i){t.l(i),a=Ce()},m(i,f){s[e].m(i,f),S(i,a,f),r=!0},p(i,f){let c=e;e=o(i),e!==c&&(ve(),y(s[c],1,1,()=>{s[c]=null}),be(),t=s[e],t||(t=s[e]=n[e](i),t.c()),k(t,1),t.m(a.parentNode,a))},i(i){r||(k(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),s[e].d(i)}}}function Tl(l){let e,t,a=l[2]&&ia(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),S(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&k(a,1)):(a=ia(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(ve(),y(a,1,1,()=>{a=null}),be())},i(r){t||(k(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}const ba=(l,e)=>l+e.quantidade;function Rl(l,e,t){let a,r,{episDisponiveis:n=[]}=e,{entrega:s=null}=e,{loading:o=!1}=e,{show:i=!1}=e;const f=Ye();let c="",u=[],h={};function g(){s&&(t(3,c="Respons√°vel da Entrega"),t(4,u=[{episDisponivelId:"1",nomeEquipamento:"Capacete de Seguran√ßa",registroCA:"31469",quantidade:1}]),t(5,h={}))}function p(){t(4,u=[...u,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function D(E){t(4,u=u.filter((P,H)=>H!==E))}function w(E,P){const H=P.target;F(E,H.value)}function F(E,P){const H=n.find(ee=>ee.id===P);H&&(t(4,u[E]={...u[E],episDisponivelId:P,nomeEquipamento:H.nomeEquipamento,registroCA:H.registroCA},u),delete h[`item-${E}`],t(5,h={...h}))}function N(E,P){t(4,u[E]={...u[E],quantidade:P},u),delete h[`quantidade-${E}`],t(5,h={...h})}function x(){const E={};return c.trim()||(E.responsavel="Respons√°vel √© obrigat√≥rio"),u.length===0&&(E.items="Adicione pelo menos um item"),u.forEach((P,H)=>{P.episDisponivelId||(E[`item-${H}`]="Selecione um EPI"),P.quantidade<1&&(E[`quantidade-${H}`]="Quantidade deve ser maior que 0")}),t(5,h=E),Object.keys(E).length===0}function z(){if(!x())return;const E={responsavel:c.trim(),itens:u.map(P=>({episDisponivelId:P.episDisponivelId,nomeEquipamento:P.nomeEquipamento,registroCA:P.registroCA,quantidade:P.quantidade}))};f("salvar",E)}function O(){f("cancelar")}function U(E){ft.call(this,l,E)}function T(E){c=E,t(3,c)}const L=E=>D(E);function X(E,P){l.$$.not_equal(P.episDisponivelId,E)&&(P.episDisponivelId=E,t(4,u))}const _=(E,P)=>w(E,P);function A(E,P){l.$$.not_equal(P.quantidade,E)&&(P.quantidade=E,t(4,u))}const I=(E,P)=>N(E,parseInt(P.target.value)||1);return l.$$set=E=>{"episDisponiveis"in E&&t(14,n=E.episDisponiveis),"entrega"in E&&t(0,s=E.entrega),"loading"in E&&t(1,o=E.loading),"show"in E&&t(2,i=E.show)},l.$$.update=()=>{l.$$.dirty&5&&i&&s&&g(),l.$$.dirty&16384&&t(7,a=[{value:"",label:"Selecione um EPI..."},...n.filter(E=>E.disponivel).map(E=>({value:E.id,label:`${E.nomeEquipamento} (CA ${E.registroCA})${E.quantidade?` - ${E.quantidade} dispon√≠veis`:""}`}))]),l.$$.dirty&26&&t(6,r=c.trim()&&u.length>0&&!o)},[s,o,i,c,u,h,r,a,p,D,w,N,z,O,n,U,T,L,X,_,A,I]}class Ml extends Ue{constructor(e){super(),Qe(this,e,Rl,Tl,Ge,{episDisponiveis:14,entrega:0,loading:1,show:2})}}function $a(l){let e,t,a,r,n,s,o,i,f;r=new ut({props:{title:l[0]?`Devolver ${l[0].nomeEquipamento}`:"Devolver Equipamento",objectType:"DEVOLU√á√ÉO EPI",iconName:"TrashBinOutline",primaryAction:{text:l[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:l[1]?"":"CheckOutline",disabled:!l[8]}}}),r.$on("close",l[11]),r.$on("primaryAction",l[10]);let c=l[0]&&Ea(l);return{c(){e=b("div"),t=q(),a=b("div"),W(r.$$.fragment),n=q(),s=b("div"),c&&c.c(),this.h()},l(u){e=v(u,"DIV",{class:!0,role:!0}),C(e).forEach(m),t=V(u),a=v(u,"DIV",{class:!0,role:!0,"aria-modal":!0});var h=C(a);K(r.$$.fragment,h),n=V(h),s=v(h,"DIV",{class:!0});var g=C(s);c&&c.l(g),g.forEach(m),h.forEach(m),this.h()},h(){$(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),$(e,"role","presentation"),$(s,"class","flex-1 overflow-y-auto p-6 custom-scrollbar svelte-fw4j42"),$(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),$(a,"role","dialog"),$(a,"aria-modal","true")},m(u,h){S(u,e,h),S(u,t,h),S(u,a,h),J(r,a,null),d(a,n),d(a,s),c&&c.m(s,null),o=!0,i||(f=[je(e,"click",l[11]),je(a,"click",Ct(l[12]))],i=!0)},p(u,h){const g={};h&1&&(g.title=u[0]?`Devolver ${u[0].nomeEquipamento}`:"Devolver Equipamento"),h&258&&(g.primaryAction={text:u[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:u[1]?"":"CheckOutline",disabled:!u[8]}),r.$set(g),u[0]?c?(c.p(u,h),h&1&&k(c,1)):(c=Ea(u),c.c(),k(c,1),c.m(s,null)):c&&(ve(),y(c,1,1,()=>{c=null}),be())},i(u){o||(k(r.$$.fragment,u),k(c),o=!0)},o(u){y(r.$$.fragment,u),y(c),o=!1},d(u){u&&(m(e),m(t),m(a)),G(r),c&&c.d(),i=!1,Dt(f)}}}function Ea(l){let e,t,a,r="1",n,s,o,i=l[0].nomeEquipamento+"",f,c,u,h,g=l[0].registroCA+"",p,D,w=l[0].entregaId+"",F,N,x,z,O,U,T="Prazo de Devolu√ß√£o",L,X,_=wt(l[0].prazoMaximoDevolucao)+"",A,I,E,P,H,ee,te,le,ae,re,ue,me,ge,pe,fe,Y,Z,ie,$e,B,se="Campo opcional para detalhes espec√≠ficos da devolu√ß√£o",Ee,ke,we;const qe=[jl,Ll],ye=[];function Pe(ne,ce){return ne[7]?0:1}P=Pe(l),H=ye[P]=qe[P](l),le=new Ke({props:{for:"motivo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Hl]},$$scope:{ctx:l}}});function Ne(ne){l[13](ne)}let Se={id:"motivo",class:"rounded-sm "+(l[5].motivo?"border-red-500":""),disabled:l[1],items:l[9]};l[3]!==void 0&&(Se.value=l[3]),re=new Ya({props:Se}),Re.push(()=>Me(re,"value",Ne));let de=l[5].motivo&&ka(l);fe=new Ke({props:{for:"observacoes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Bl]},$$scope:{ctx:l}}});function j(ne){l[14](ne)}let Q={id:"observacoes",placeholder:"Observa√ß√µes adicionais sobre a devolu√ß√£o...",rows:2,class:"rounded-sm",disabled:l[1]};l[4]!==void 0&&(Q.value=l[4]),Z=new wr({props:Q}),Re.push(()=>Me(Z,"value",j));let he=l[7]&&wa(l);return{c(){e=b("div"),t=b("div"),a=b("div"),a.textContent=r,n=q(),s=b("div"),o=b("h4"),f=M(i),c=q(),u=b("p"),h=M("CA "),p=M(g),D=M(" ‚Ä¢ Entrega #"),F=M(w),N=q(),x=b("div"),z=b("div"),O=b("div"),U=b("p"),U.textContent=T,L=q(),X=b("p"),A=M(_),I=q(),E=b("div"),H.c(),ee=q(),te=b("div"),W(le.$$.fragment),ae=q(),W(re.$$.fragment),me=q(),de&&de.c(),ge=q(),pe=b("div"),W(fe.$$.fragment),Y=q(),W(Z.$$.fragment),$e=q(),B=b("p"),B.textContent=se,Ee=q(),he&&he.c(),ke=Ce(),this.h()},l(ne){e=v(ne,"DIV",{class:!0});var ce=C(e);t=v(ce,"DIV",{class:!0});var Ae=C(t);a=v(Ae,"DIV",{class:!0,"data-svelte-h":!0}),De(a)!=="svelte-bog2zm"&&(a.textContent=r),n=V(Ae),s=v(Ae,"DIV",{class:!0});var Te=C(s);o=v(Te,"H4",{class:!0});var Ie=C(o);f=R(Ie,i),Ie.forEach(m),c=V(Te),u=v(Te,"P",{class:!0});var _e=C(u);h=R(_e,"CA "),p=R(_e,g),D=R(_e," ‚Ä¢ Entrega #"),F=R(_e,w),_e.forEach(m),Te.forEach(m),Ae.forEach(m),N=V(ce),x=v(ce,"DIV",{class:!0});var Fe=C(x);z=v(Fe,"DIV",{class:!0});var He=C(z);O=v(He,"DIV",{});var Be=C(O);U=v(Be,"P",{class:!0,"data-svelte-h":!0}),De(U)!=="svelte-13u3t5e"&&(U.textContent=T),L=V(Be),X=v(Be,"P",{class:!0});var et=C(X);A=R(et,_),et.forEach(m),Be.forEach(m),I=V(He),E=v(He,"DIV",{class:!0});var Ze=C(E);H.l(Ze),Ze.forEach(m),He.forEach(m),Fe.forEach(m),ce.forEach(m),ee=V(ne),te=v(ne,"DIV",{class:!0});var We=C(te);K(le.$$.fragment,We),ae=V(We),K(re.$$.fragment,We),me=V(We),de&&de.l(We),We.forEach(m),ge=V(ne),pe=v(ne,"DIV",{class:!0});var Je=C(pe);K(fe.$$.fragment,Je),Y=V(Je),K(Z.$$.fragment,Je),$e=V(Je),B=v(Je,"P",{class:!0,"data-svelte-h":!0}),De(B)!=="svelte-1gkgsxh"&&(B.textContent=se),Je.forEach(m),Ee=V(ne),he&&he.l(ne),ke=Ce(),this.h()},h(){$(a,"class","flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-md flex items-center justify-center font-semibold text-sm"),$(o,"class","font-medium text-gray-900 dark:text-white"),$(u,"class","text-sm text-gray-500 dark:text-gray-400"),$(s,"class","flex-1"),$(t,"class","flex items-start space-x-3 mb-3"),$(U,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),$(X,"class","text-sm text-gray-900 dark:text-white"),$(E,"class","text-right"),$(z,"class","flex items-center justify-between"),$(x,"class","pt-3 border-t border-gray-200 dark:border-gray-700"),$(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),$(te,"class","mb-6"),$(B,"class","mt-1 text-xs text-gray-500 dark:text-gray-400"),$(pe,"class","mb-6")},m(ne,ce){S(ne,e,ce),d(e,t),d(t,a),d(t,n),d(t,s),d(s,o),d(o,f),d(s,c),d(s,u),d(u,h),d(u,p),d(u,D),d(u,F),d(e,N),d(e,x),d(x,z),d(z,O),d(O,U),d(O,L),d(O,X),d(X,A),d(z,I),d(z,E),ye[P].m(E,null),S(ne,ee,ce),S(ne,te,ce),J(le,te,null),d(te,ae),J(re,te,null),d(te,me),de&&de.m(te,null),S(ne,ge,ce),S(ne,pe,ce),J(fe,pe,null),d(pe,Y),J(Z,pe,null),d(pe,$e),d(pe,B),S(ne,Ee,ce),he&&he.m(ne,ce),S(ne,ke,ce),we=!0},p(ne,ce){(!we||ce&1)&&i!==(i=ne[0].nomeEquipamento+"")&&oe(f,i),(!we||ce&1)&&g!==(g=ne[0].registroCA+"")&&oe(p,g),(!we||ce&1)&&w!==(w=ne[0].entregaId+"")&&oe(F,w),(!we||ce&1)&&_!==(_=wt(ne[0].prazoMaximoDevolucao)+"")&&oe(A,_);let Ae=P;P=Pe(ne),P===Ae?ye[P].p(ne,ce):(ve(),y(ye[Ae],1,1,()=>{ye[Ae]=null}),be(),H=ye[P],H?H.p(ne,ce):(H=ye[P]=qe[P](ne),H.c()),k(H,1),H.m(E,null));const Te={};ce&262144&&(Te.$$scope={dirty:ce,ctx:ne}),le.$set(Te);const Ie={};ce&32&&(Ie.class="rounded-sm "+(ne[5].motivo?"border-red-500":"")),ce&2&&(Ie.disabled=ne[1]),!ue&&ce&8&&(ue=!0,Ie.value=ne[3],Le(()=>ue=!1)),re.$set(Ie),ne[5].motivo?de?de.p(ne,ce):(de=ka(ne),de.c(),de.m(te,null)):de&&(de.d(1),de=null);const _e={};ce&262144&&(_e.$$scope={dirty:ce,ctx:ne}),fe.$set(_e);const Fe={};ce&2&&(Fe.disabled=ne[1]),!ie&&ce&16&&(ie=!0,Fe.value=ne[4],Le(()=>ie=!1)),Z.$set(Fe),ne[7]?he?(he.p(ne,ce),ce&128&&k(he,1)):(he=wa(ne),he.c(),k(he,1),he.m(ke.parentNode,ke)):he&&(ve(),y(he,1,1,()=>{he=null}),be())},i(ne){we||(k(H),k(le.$$.fragment,ne),k(re.$$.fragment,ne),k(fe.$$.fragment,ne),k(Z.$$.fragment,ne),k(he),we=!0)},o(ne){y(H),y(le.$$.fragment,ne),y(re.$$.fragment,ne),y(fe.$$.fragment,ne),y(Z.$$.fragment,ne),y(he),we=!1},d(ne){ne&&(m(e),m(ee),m(te),m(ge),m(pe),m(Ee),m(ke)),ye[P].d(),G(le),G(re),de&&de.d(),G(fe),G(Z),he&&he.d(ne)}}}function Ll(l){let e,t,a,r;return t=new rr({props:{class:"mr-1 w-3 h-3"}}),{c(){e=b("div"),W(t.$$.fragment),a=M(`
                  No prazo`),this.h()},l(n){e=v(n,"DIV",{class:!0});var s=C(e);K(t.$$.fragment,s),a=R(s,`
                  No prazo`),s.forEach(m),this.h()},h(){$(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200")},m(n,s){S(n,e,s),J(t,e,null),d(e,a),r=!0},p:Ve,i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&m(e),G(t)}}}function jl(l){let e,t,a,r,n,s;return t=new Nt({props:{class:"mr-1 w-3 h-3"}}),{c(){e=b("div"),W(t.$$.fragment),a=M(`
                  Vencido h√° `),r=M(l[6]),n=M(" dias"),this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);K(t.$$.fragment,i),a=R(i,`
                  Vencido h√° `),r=R(i,l[6]),n=R(i," dias"),i.forEach(m),this.h()},h(){$(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200")},m(o,i){S(o,e,i),J(t,e,null),d(e,a),d(e,r),d(e,n),s=!0},p(o,i){(!s||i&64)&&oe(r,o[6])},i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),G(t)}}}function Hl(l){let e;return{c(){e=M("Motivo da Devolu√ß√£o *")},l(t){e=R(t,"Motivo da Devolu√ß√£o *")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function ka(l){let e,t=l[5].motivo+"",a;return{c(){e=b("p"),a=M(t),this.h()},l(r){e=v(r,"P",{class:!0});var n=C(e);a=R(n,t),n.forEach(m),this.h()},h(){$(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){S(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].motivo+"")&&oe(a,t)},d(r){r&&m(e)}}}function Bl(l){let e;return{c(){e=M("Observa√ß√µes (opcional)")},l(t){e=R(t,"Observa√ß√µes (opcional)")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function wa(l){let e,t,a,r,n,s,o="Equipamento com prazo vencido",i,f,c,u,h,g;return a=new Nt({props:{class:"text-red-600 dark:text-red-400 mt-0.5 mr-3 w-5 h-5"}}),{c(){e=b("div"),t=b("div"),W(a.$$.fragment),r=q(),n=b("div"),s=b("h4"),s.textContent=o,i=q(),f=b("p"),c=M("Este equipamento est√° "),u=M(l[6]),h=M(" dias em atraso para devolu√ß√£o."),this.h()},l(p){e=v(p,"DIV",{class:!0});var D=C(e);t=v(D,"DIV",{class:!0});var w=C(t);K(a.$$.fragment,w),r=V(w),n=v(w,"DIV",{});var F=C(n);s=v(F,"H4",{class:!0,"data-svelte-h":!0}),De(s)!=="svelte-1l5do2t"&&(s.textContent=o),i=V(F),f=v(F,"P",{class:!0});var N=C(f);c=R(N,"Este equipamento est√° "),u=R(N,l[6]),h=R(N," dias em atraso para devolu√ß√£o."),N.forEach(m),F.forEach(m),w.forEach(m),D.forEach(m),this.h()},h(){$(s,"class","text-sm font-medium text-red-800 dark:text-red-200"),$(f,"class","text-sm text-red-700 dark:text-red-300 mt-1"),$(t,"class","flex items-start"),$(e,"class","mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800")},m(p,D){S(p,e,D),d(e,t),J(a,t,null),d(t,r),d(t,n),d(n,s),d(n,i),d(n,f),d(f,c),d(f,u),d(f,h),g=!0},p(p,D){(!g||D&64)&&oe(u,p[6])},i(p){g||(k(a.$$.fragment,p),g=!0)},o(p){y(a.$$.fragment,p),g=!1},d(p){p&&m(e),G(a)}}}function Ul(l){let e,t,a=l[2]&&$a(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),S(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&k(a,1)):(a=$a(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(ve(),y(a,1,1,()=>{a=null}),be())},i(r){t||(k(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Ql(l,e,t){let a,r,n,{equipamento:s=null}=e,{loading:o=!1}=e,{show:i=!1}=e;const f=Ye();let c="devolu√ß√£o padr√£o",u="",h={};const g=[{value:"devolu√ß√£o padr√£o",name:"Devolu√ß√£o Padr√£o - Fim do per√≠odo de uso"},{value:"danificado",name:"Danificado - EPI com defeito ou quebrado"},{value:"troca",name:"Troca - Substitui√ß√£o por outro equipamento"},{value:"outros",name:"Outros - Outro motivo espec√≠fico"}];function p(){t(3,c="devolu√ß√£o padr√£o"),t(4,u=""),t(5,h={})}function D(){const O={};return c||(O.motivo="Motivo da devolu√ß√£o √© obrigat√≥rio"),t(5,h=O),Object.keys(O).length===0}function w(){D()&&f("confirmar",{motivo:c,observacoes:u.trim()||void 0})}function F(){f("cancelar")}function N(O){ft.call(this,l,O)}function x(O){c=O,t(3,c)}function z(O){u=O,t(4,u)}return l.$$set=O=>{"equipamento"in O&&t(0,s=O.equipamento),"loading"in O&&t(1,o=O.loading),"show"in O&&t(2,i=O.show)},l.$$.update=()=>{l.$$.dirty&5&&i&&s&&p(),l.$$.dirty&10&&t(8,a=c&&!o),l.$$.dirty&1&&t(7,r=(s==null?void 0:s.vencido)||!1),l.$$.dirty&1&&t(6,n=(s==null?void 0:s.diasVencido)||0)},[s,o,i,c,u,h,n,r,a,g,w,F,N,x,z]}class Gl extends Ue{constructor(e){super(),Qe(this,e,Ql,Ul,Ge,{equipamento:0,loading:1,show:2})}}function Da(l){let e,t,a,r,n,s,o,i,f;r=new ut({props:{title:l[0]?`Assinatura da Entrega #${l[0].id}`:"Confirmar Assinatura Digital",objectType:"ASSINATURA DIGITAL",iconName:"TabletOutline",primaryAction:{text:l[1]?"Processando...":l[3]?"Assinatura Confirmada":"Foi assinado",icon:l[1]?"":l[3]?"CheckOutline":"CheckCircleOutline",disabled:!l[4]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[5]),r.$on("primaryAction",l[6]),r.$on("secondaryAction",l[5]);let c=l[0]&&Ca(l);return{c(){e=b("div"),t=q(),a=b("div"),W(r.$$.fragment),n=q(),s=b("div"),c&&c.c(),this.h()},l(u){e=v(u,"DIV",{class:!0,role:!0}),C(e).forEach(m),t=V(u),a=v(u,"DIV",{class:!0,role:!0,"aria-modal":!0});var h=C(a);K(r.$$.fragment,h),n=V(h),s=v(h,"DIV",{class:!0,style:!0});var g=C(s);c&&c.l(g),g.forEach(m),h.forEach(m),this.h()},h(){$(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),$(e,"role","presentation"),$(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(s,"height","calc(100% - 80px)"),$(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),$(a,"role","dialog"),$(a,"aria-modal","true")},m(u,h){S(u,e,h),S(u,t,h),S(u,a,h),J(r,a,null),d(a,n),d(a,s),c&&c.m(s,null),o=!0,i||(f=[je(e,"click",l[5]),je(a,"click",Ct(l[7]))],i=!0)},p(u,h){const g={};h&1&&(g.title=u[0]?`Assinatura da Entrega #${u[0].id}`:"Confirmar Assinatura Digital"),h&26&&(g.primaryAction={text:u[1]?"Processando...":u[3]?"Assinatura Confirmada":"Foi assinado",icon:u[1]?"":u[3]?"CheckOutline":"CheckCircleOutline",disabled:!u[4]}),h&2&&(g.secondaryAction={text:"Cancelar",disabled:u[1]}),r.$set(g),u[0]?c?(c.p(u,h),h&1&&k(c,1)):(c=Ca(u),c.c(),k(c,1),c.m(s,null)):c&&(ve(),y(c,1,1,()=>{c=null}),be())},i(u){o||(k(r.$$.fragment,u),k(c),o=!0)},o(u){y(r.$$.fragment,u),y(c),o=!1},d(u){u&&(m(e),m(t),m(a)),G(r),c&&c.d(),i=!1,Dt(f)}}}function Ca(l){let e,t,a,r,n="Entrega",s,o,i,f=l[0].id+"",c,u,h,g,p="Data da Entrega",D,w,F=wt(l[0].dataEntrega)+"",N,x,z,O='<h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-3">EPIs a serem confirmados:</h4> <div class="space-y-2"><div class="flex items-center justify-between py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-sm border border-gray-200 dark:border-gray-600"><div class="flex flex-col"><span class="text-sm text-gray-900 dark:text-white font-medium">Capacete de Seguran√ßa</span> <span class="text-xs text-gray-500 dark:text-gray-400">CA 31469</span></div> <div class="text-right"><span class="text-sm font-medium text-gray-900 dark:text-white">Qtd: 1</span></div></div></div>',U,T,L,X,_,A,I,E,P="Assinatura Digital",H,ee,te="Assine digitalmente atrav√©s do link ou QR Code",le,ae,re,ue,me,ge,pe,fe,Y,Z="Escaneie o QR Code para assinar",ie,$e,B,se,Ee,ke,we,qe="Assinatura Manual",ye,Pe,Ne="Imprima o documento para assinatura f√≠sica",Se,de,j,Q,he,ne="Ap√≥s assinatura f√≠sica, confirme abaixo",ce,Ae,Te;_=new Ir({props:{class:"text-blue-600 dark:text-blue-400 mt-0.5 mr-3 w-5 h-5"}}),re=new Oe({props:{size:"xs",color:"primary",class:"rounded-sm w-full",$$slots:{default:[Jl]},$$scope:{ctx:l}}}),pe=new yr({props:{class:"text-gray-400 w-8 h-8"}}),se=new Pr({props:{class:"text-green-600 dark:text-green-400 mt-0.5 mr-3 w-5 h-5"}}),j=new Oe({props:{size:"xs",color:"alternative",class:"rounded-sm w-full",$$slots:{default:[Kl]},$$scope:{ctx:l}}});let Ie=l[3]&&Ia();return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),r.textContent=n,s=q(),o=b("p"),i=M("#"),c=M(f),u=q(),h=b("div"),g=b("p"),g.textContent=p,D=q(),w=b("p"),N=M(F),x=q(),z=b("div"),z.innerHTML=O,U=q(),T=b("div"),L=b("div"),X=b("div"),W(_.$$.fragment),A=q(),I=b("div"),E=b("h4"),E.textContent=P,H=q(),ee=b("p"),ee.textContent=te,le=q(),ae=b("div"),W(re.$$.fragment),ue=q(),me=b("div"),ge=b("div"),W(pe.$$.fragment),fe=q(),Y=b("p"),Y.textContent=Z,ie=q(),$e=b("div"),B=b("div"),W(se.$$.fragment),Ee=q(),ke=b("div"),we=b("h4"),we.textContent=qe,ye=q(),Pe=b("p"),Pe.textContent=Ne,Se=q(),de=b("div"),W(j.$$.fragment),Q=q(),he=b("p"),he.textContent=ne,ce=q(),Ie&&Ie.c(),Ae=Ce(),this.h()},l(_e){e=v(_e,"DIV",{class:!0});var Fe=C(e);t=v(Fe,"DIV",{class:!0});var He=C(t);a=v(He,"DIV",{});var Be=C(a);r=v(Be,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-15muixn"&&(r.textContent=n),s=V(Be),o=v(Be,"P",{class:!0});var et=C(o);i=R(et,"#"),c=R(et,f),et.forEach(m),Be.forEach(m),u=V(He),h=v(He,"DIV",{});var Ze=C(h);g=v(Ze,"P",{class:!0,"data-svelte-h":!0}),De(g)!=="svelte-1nce9zk"&&(g.textContent=p),D=V(Ze),w=v(Ze,"P",{class:!0});var We=C(w);N=R(We,F),We.forEach(m),Ze.forEach(m),He.forEach(m),Fe.forEach(m),x=V(_e),z=v(_e,"DIV",{class:!0,"data-svelte-h":!0}),De(z)!=="svelte-udbm6m"&&(z.innerHTML=O),U=V(_e),T=v(_e,"DIV",{class:!0});var Je=C(T);L=v(Je,"DIV",{class:!0});var xt=C(L);X=v(xt,"DIV",{class:!0});var dt=C(X);K(_.$$.fragment,dt),A=V(dt),I=v(dt,"DIV",{});var tt=C(I);E=v(tt,"H4",{class:!0,"data-svelte-h":!0}),De(E)!=="svelte-1yxfyqp"&&(E.textContent=P),H=V(tt),ee=v(tt,"P",{class:!0,"data-svelte-h":!0}),De(ee)!=="svelte-mz9p7b"&&(ee.textContent=te),le=V(tt),ae=v(tt,"DIV",{class:!0});var at=C(ae);K(re.$$.fragment,at),ue=V(at),me=v(at,"DIV",{class:!0});var Ot=C(me);ge=v(Ot,"DIV",{class:!0});var zt=C(ge);K(pe.$$.fragment,zt),zt.forEach(m),Ot.forEach(m),fe=V(at),Y=v(at,"P",{class:!0,"data-svelte-h":!0}),De(Y)!=="svelte-1u6pcnc"&&(Y.textContent=Z),at.forEach(m),tt.forEach(m),dt.forEach(m),xt.forEach(m),ie=V(Je),$e=v(Je,"DIV",{class:!0});var Tt=C($e);B=v(Tt,"DIV",{class:!0});var mt=C(B);K(se.$$.fragment,mt),Ee=V(mt),ke=v(mt,"DIV",{});var rt=C(ke);we=v(rt,"H4",{class:!0,"data-svelte-h":!0}),De(we)!=="svelte-uzpa23"&&(we.textContent=qe),ye=V(rt),Pe=v(rt,"P",{class:!0,"data-svelte-h":!0}),De(Pe)!=="svelte-1vt0diy"&&(Pe.textContent=Ne),Se=V(rt),de=v(rt,"DIV",{class:!0});var gt=C(de);K(j.$$.fragment,gt),Q=V(gt),he=v(gt,"P",{class:!0,"data-svelte-h":!0}),De(he)!=="svelte-kjygt1"&&(he.textContent=ne),gt.forEach(m),rt.forEach(m),mt.forEach(m),Tt.forEach(m),Je.forEach(m),ce=V(_e),Ie&&Ie.l(_e),Ae=Ce(),this.h()},h(){$(r,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),$(o,"class","text-sm text-gray-900 dark:text-white font-semibold"),$(g,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),$(w,"class","text-sm text-gray-900 dark:text-white font-semibold"),$(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),$(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),$(z,"class","mb-6"),$(E,"class","text-sm font-medium text-blue-900 dark:text-blue-100"),$(ee,"class","text-sm text-blue-800 dark:text-blue-200 mt-1"),$(ge,"class","w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center"),$(me,"class","flex items-center justify-center p-3 bg-white dark:bg-gray-700 rounded border"),$(Y,"class","text-xs text-blue-700 dark:text-blue-300 text-center"),$(ae,"class","mt-3 space-y-2"),$(X,"class","flex items-start"),$(L,"class","p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"),$(we,"class","text-sm font-medium text-green-900 dark:text-green-100"),$(Pe,"class","text-sm text-green-800 dark:text-green-200 mt-1"),$(he,"class","text-xs text-green-700 dark:text-green-300 text-center"),$(de,"class","mt-3 space-y-2"),$(B,"class","flex items-start"),$($e,"class","p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"),$(T,"class","mb-6 grid grid-cols-1 md:grid-cols-2 gap-4")},m(_e,Fe){S(_e,e,Fe),d(e,t),d(t,a),d(a,r),d(a,s),d(a,o),d(o,i),d(o,c),d(t,u),d(t,h),d(h,g),d(h,D),d(h,w),d(w,N),S(_e,x,Fe),S(_e,z,Fe),S(_e,U,Fe),S(_e,T,Fe),d(T,L),d(L,X),J(_,X,null),d(X,A),d(X,I),d(I,E),d(I,H),d(I,ee),d(I,le),d(I,ae),J(re,ae,null),d(ae,ue),d(ae,me),d(me,ge),J(pe,ge,null),d(ae,fe),d(ae,Y),d(T,ie),d(T,$e),d($e,B),J(se,B,null),d(B,Ee),d(B,ke),d(ke,we),d(ke,ye),d(ke,Pe),d(ke,Se),d(ke,de),J(j,de,null),d(de,Q),d(de,he),S(_e,ce,Fe),Ie&&Ie.m(_e,Fe),S(_e,Ae,Fe),Te=!0},p(_e,Fe){(!Te||Fe&1)&&f!==(f=_e[0].id+"")&&oe(c,f),(!Te||Fe&1)&&F!==(F=wt(_e[0].dataEntrega)+"")&&oe(N,F);const He={};Fe&2048&&(He.$$scope={dirty:Fe,ctx:_e}),re.$set(He);const Be={};Fe&2048&&(Be.$$scope={dirty:Fe,ctx:_e}),j.$set(Be),_e[3]?Ie?Fe&8&&k(Ie,1):(Ie=Ia(),Ie.c(),k(Ie,1),Ie.m(Ae.parentNode,Ae)):Ie&&(ve(),y(Ie,1,1,()=>{Ie=null}),be())},i(_e){Te||(k(_.$$.fragment,_e),k(re.$$.fragment,_e),k(pe.$$.fragment,_e),k(se.$$.fragment,_e),k(j.$$.fragment,_e),k(Ie),Te=!0)},o(_e){y(_.$$.fragment,_e),y(re.$$.fragment,_e),y(pe.$$.fragment,_e),y(se.$$.fragment,_e),y(j.$$.fragment,_e),y(Ie),Te=!1},d(_e){_e&&(m(e),m(x),m(z),m(U),m(T),m(ce),m(Ae)),G(_),G(re),G(pe),G(se),G(j),Ie&&Ie.d(_e)}}}function Jl(l){let e,t,a;return e=new Ar({props:{class:"mr-2 w-3 h-3"}}),{c(){W(e.$$.fragment),t=M(`
                  Abrir Link de Assinatura`)},l(r){K(e.$$.fragment,r),t=R(r,`
                  Abrir Link de Assinatura`)},m(r,n){J(e,r,n),S(r,t,n),a=!0},p:Ve,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),G(e,r)}}}function Kl(l){let e,t,a;return e=new Fr({props:{class:"mr-2 w-3 h-3"}}),{c(){W(e.$$.fragment),t=M(`
                  Imprimir Documento`)},l(r){K(e.$$.fragment,r),t=R(r,`
                  Imprimir Documento`)},m(r,n){J(e,r,n),S(r,t,n),a=!0},p:Ve,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),G(e,r)}}}function Ia(l){let e,t,a,r,n,s='<h4 class="text-sm font-medium text-green-900 dark:text-green-100">Assinatura Confirmada</h4> <p class="text-sm text-green-800 dark:text-green-200">Processando assinatura digital...</p>',o;return a=new rr({props:{class:"text-green-600 dark:text-green-400 mr-3 w-5 h-5"}}),{c(){e=b("div"),t=b("div"),W(a.$$.fragment),r=q(),n=b("div"),n.innerHTML=s,this.h()},l(i){e=v(i,"DIV",{class:!0});var f=C(e);t=v(f,"DIV",{class:!0});var c=C(t);K(a.$$.fragment,c),r=V(c),n=v(c,"DIV",{"data-svelte-h":!0}),De(n)!=="svelte-9s52he"&&(n.innerHTML=s),c.forEach(m),f.forEach(m),this.h()},h(){$(t,"class","flex items-center"),$(e,"class","mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800")},m(i,f){S(i,e,f),d(e,t),J(a,t,null),d(t,r),d(t,n),o=!0},i(i){o||(k(a.$$.fragment,i),o=!0)},o(i){y(a.$$.fragment,i),o=!1},d(i){i&&m(e),G(a)}}}function Wl(l){let e,t,a=l[2]&&Da(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),S(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&k(a,1)):(a=Da(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(ve(),y(a,1,1,()=>{a=null}),be())},i(r){t||(k(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Xl(l,e,t){let a,{entrega:r=null}=e,{loading:n=!1}=e,{show:s=!1}=e;const o=Ye();let i=!1;function f(){t(3,i=!1)}function c(){const p=`assinatura_digital_${Date.now()}`;o("confirmar",{assinatura:p})}function u(){o("cancelar")}function h(){t(3,i=!0),setTimeout(()=>{c()},500)}function g(p){ft.call(this,l,p)}return l.$$set=p=>{"entrega"in p&&t(0,r=p.entrega),"loading"in p&&t(1,n=p.loading),"show"in p&&t(2,s=p.show)},l.$$.update=()=>{l.$$.dirty&4&&s&&f(),l.$$.dirty&10&&t(4,a=!n&&!i)},[r,n,s,i,a,u,h,g]}class Yl extends Ue{constructor(e){super(),Qe(this,e,Xl,Wl,Ge,{entrega:0,loading:1,show:2})}}function ya(l,e,t){const a=l.slice();return a[74]=e[t],a}function Pa(l,e,t){const a=l.slice();return a[65]=e[t],a}function Aa(l,e,t){const a=l.slice();return a[71]=e[t],a}function Fa(l,e,t){const a=l.slice();return a[68]=e[t],a}function Va(l,e,t){const a=l.slice();return a[62]=e[t],a}function qa(l,e,t){const a=l.slice();return a[59]=e[t],a}function Sa(l,e,t){const a=l.slice();return a[77]=e[t],a}function Zl(l){let e,t="<p>Nenhum dado dispon√≠vel</p>";return{c(){e=b("div"),e.innerHTML=t,this.h()},l(a){e=v(a,"DIV",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-tlgdc6"&&(e.innerHTML=t),this.h()},h(){$(e,"class","text-center py-8 text-gray-500 dark:text-gray-400")},m(a,r){S(a,e,r)},p:Ve,i:Ve,o:Ve,d(a){a&&m(e)}}}function en(l){let e,t,a,r,n,s,o,i=xe([{id:"equipamentos",label:"Equipamentos",count:l[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:l[19].length},{id:"entregas",label:"Entregas",count:l[18].length},{id:"historico",label:"Hist√≥rico",count:l[17].length}]),f=[];for(let g=0;g<4;g+=1)f[g]=Na(Sa(l,i,g));const c=[sn,nn,ln,rn],u=[];function h(g,p){return g[21]==="equipamentos"?0:g[21]==="devolucoes"?1:g[21]==="entregas"?2:g[21]==="historico"?3:-1}return~(n=h(l))&&(s=u[n]=c[n](l)),{c(){e=b("div"),t=b("nav");for(let g=0;g<4;g+=1)f[g].c();a=q(),r=b("div"),s&&s.c(),this.h()},l(g){e=v(g,"DIV",{class:!0});var p=C(e);t=v(p,"NAV",{class:!0,"aria-label":!0});var D=C(t);for(let F=0;F<4;F+=1)f[F].l(D);D.forEach(m),p.forEach(m),a=V(g),r=v(g,"DIV",{class:!0});var w=C(r);s&&s.l(w),w.forEach(m),this.h()},h(){$(t,"class","flex space-x-8 px-6"),$(t,"aria-label","Tabs"),$(e,"class","border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"),$(r,"class","p-6")},m(g,p){S(g,e,p),d(e,t);for(let D=0;D<4;D+=1)f[D]&&f[D].m(t,null);S(g,a,p),S(g,r,p),~n&&u[n].m(r,null),o=!0},p(g,p){if(p[0]&4063232){i=xe([{id:"equipamentos",label:"Equipamentos",count:g[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:g[19].length},{id:"entregas",label:"Entregas",count:g[18].length},{id:"historico",label:"Hist√≥rico",count:g[17].length}]);let w;for(w=0;w<4;w+=1){const F=Sa(g,i,w);f[w]?f[w].p(F,p):(f[w]=Na(F),f[w].c(),f[w].m(t,null))}for(;w<4;w+=1)f[w].d(1)}let D=n;n=h(g),n===D?~n&&u[n].p(g,p):(s&&(ve(),y(u[D],1,1,()=>{u[D]=null}),be()),~n?(s=u[n],s?s.p(g,p):(s=u[n]=c[n](g),s.c()),k(s,1),s.m(r,null)):s=null)},i(g){o||(k(s),o=!0)},o(g){y(s),o=!1},d(g){g&&(m(e),m(a),m(r)),It(f,g),~n&&u[n].d()}}}function tn(l){let e,t;return e=new St({props:{message:l[7]}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p(a,r){const n={};r[0]&128&&(n.message=a[7]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function an(l){let e,t,a;return t=new yt({}),{c(){e=b("div"),W(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var n=C(e);K(t.$$.fragment,n),n.forEach(m),this.h()},h(){$(e,"class","flex justify-center items-center py-12")},m(r,n){S(r,e,n),J(t,e,null),a=!0},p:Ve,i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),G(t)}}}function Na(l){let e,t=l[77].label+"",a,r,n,s=l[77].count+"",o,i,f,c,u;function h(){return l[37](l[77])}return{c(){e=b("button"),a=M(t),r=q(),n=b("span"),o=M(s),i=q(),this.h()},l(g){e=v(g,"BUTTON",{class:!0});var p=C(e);a=R(p,t),r=V(p),n=v(p,"SPAN",{class:!0});var D=C(n);o=R(D,s),D.forEach(m),i=V(p),p.forEach(m),this.h()},h(){$(n,"class","ml-2 py-0.5 px-2 rounded-full text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),$(e,"class",f="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))},m(g,p){S(g,e,p),d(e,a),d(e,r),d(e,n),d(n,o),d(e,i),c||(u=je(e,"click",h),c=!0)},p(g,p){l=g,p[0]&1966080&&t!==(t=l[77].label+"")&&oe(a,t),p[0]&1966080&&s!==(s=l[77].count+"")&&oe(o,s),p[0]&4063232&&f!==(f="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))&&$(e,"class",f)},d(g){g&&m(e),c=!1,u()}}}function rn(l){let e,t,a="Hist√≥rico Completo",r,n,s,o;const i=[fn,on],f=[];function c(u,h){return u[17].length===0?0:1}return n=c(l),s=f[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=q(),s.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var h=C(e);t=v(h,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-n7dg6t"&&(t.textContent=a),r=V(h),s.l(h),h.forEach(m),this.h()},h(){$(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),$(e,"class","space-y-4")},m(u,h){S(u,e,h),d(e,t),d(e,r),f[n].m(e,null),o=!0},p(u,h){let g=n;n=c(u),n===g?f[n].p(u,h):(ve(),y(f[g],1,1,()=>{f[g]=null}),be(),s=f[n],s?s.p(u,h):(s=f[n]=i[n](u),s.c()),k(s,1),s.m(e,null))},i(u){o||(k(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),f[n].d()}}}function ln(l){let e,t,a="Entregas Registradas",r,n,s,o;const i=[un,cn],f=[];function c(u,h){return u[18].length===0?0:1}return n=c(l),s=f[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=q(),s.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var h=C(e);t=v(h,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-s07e4q"&&(t.textContent=a),r=V(h),s.l(h),h.forEach(m),this.h()},h(){$(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),$(e,"class","space-y-4")},m(u,h){S(u,e,h),d(e,t),d(e,r),f[n].m(e,null),o=!0},p(u,h){let g=n;n=c(u),n===g?f[n].p(u,h):(ve(),y(f[g],1,1,()=>{f[g]=null}),be(),s=f[n],s?s.p(u,h):(s=f[n]=i[n](u),s.c()),k(s,1),s.m(e,null))},i(u){o||(k(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),f[n].d()}}}function nn(l){let e,t,a="Devolu√ß√µes Efetuadas",r,n,s,o;const i=[kn,En],f=[];function c(u,h){return u[19].length===0?0:1}return n=c(l),s=f[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=q(),s.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var h=C(e);t=v(h,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1yyam8h"&&(t.textContent=a),r=V(h),s.l(h),h.forEach(m),this.h()},h(){$(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),$(e,"class","space-y-4")},m(u,h){S(u,e,h),d(e,t),d(e,r),f[n].m(e,null),o=!0},p(u,h){let g=n;n=c(u),n===g?f[n].p(u,h):(ve(),y(f[g],1,1,()=>{f[g]=null}),be(),s=f[n],s?s.p(u,h):(s=f[n]=i[n](u),s.c()),k(s,1),s.m(e,null))},i(u){o||(k(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),f[n].d()}}}function sn(l){let e,t,a='<h3 class="text-xl font-semibold text-gray-900 dark:text-white">Equipamentos com o Colaborador</h3>',r,n,s,o;const i=[In,Cn],f=[];function c(u,h){return u[20].length===0?0:1}return n=c(l),s=f[n]=i[n](l),{c(){e=b("div"),t=b("div"),t.innerHTML=a,r=q(),s.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var h=C(e);t=v(h,"DIV",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1ffw2a3"&&(t.innerHTML=a),r=V(h),s.l(h),h.forEach(m),this.h()},h(){$(t,"class","flex justify-between items-center"),$(e,"class","space-y-4")},m(u,h){S(u,e,h),d(e,t),d(e,r),f[n].m(e,null),o=!0},p(u,h){let g=n;n=c(u),n===g?f[n].p(u,h):(ve(),y(f[g],1,1,()=>{f[g]=null}),be(),s=f[n],s?s.p(u,h):(s=f[n]=i[n](u),s.c()),k(s,1),s.m(e,null))},i(u){o||(k(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),f[n].d()}}}function on(l){let e,t=[],a=new Map,r,n=xe(l[17]);const s=o=>o[74].id;for(let o=0;o<n.length;o+=1){let i=ya(l,n,o),f=s(i);a.set(f,t[o]=za(f,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);for(let f=0;f<t.length;f+=1)t[f].l(i);i.forEach(m),this.h()},h(){$(e,"class","space-y-4")},m(o,i){S(o,e,i);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);r=!0},p(o,i){i[0]&131072|i[1]&3&&(n=xe(o[17]),ve(),t=nt(t,i,s,1,o,n,a,e,ct,za,null,ya),be())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function fn(l){let e,t;return e=new At({props:{icon:"ClockOutline",message:"Nenhum evento registrado",description:"N√£o h√° hist√≥rico de atividades para esta ficha"}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p:Ve,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function xa(l){let e,t=l[74].mudancaStatus+"",a;return{c(){e=b("p"),a=M(t),this.h()},l(r){e=v(r,"P",{class:!0});var n=C(e);a=R(n,t),n.forEach(m),this.h()},h(){$(e,"class","text-sm text-blue-600 dark:text-blue-400 mt-1")},m(r,n){S(r,e,n),d(e,a)},p(r,n){n[0]&131072&&t!==(t=r[74].mudancaStatus+"")&&oe(a,t)},d(r){r&&m(e)}}}function Oa(l){let e,t=l[74].detalhes.resumo+"",a;return{c(){e=b("p"),a=M(t),this.h()},l(r){e=v(r,"P",{class:!0});var n=C(e);a=R(n,t),n.forEach(m),this.h()},h(){$(e,"class","text-sm text-gray-600 dark:text-gray-300 mt-1")},m(r,n){S(r,e,n),d(e,a)},p(r,n){n[0]&131072&&t!==(t=r[74].detalhes.resumo+"")&&oe(a,t)},d(r){r&&m(e)}}}function za(l,e){var ee;let t,a,r,n,s,o,i,f,c,u=e[74].tipoDisplay.label+"",h,g,p,D=e[74].acao+"",w,F,N,x=e[74].dataFormatada+"",z,O,U,T,L,X,_=e[74].responsavel+"",A,I,E;r=new ar({props:{name:e[31](e[74].tipoDisplay.tipo),class:"w-5 h-5"}});let P=e[74].mudancaStatus&&xa(e),H=((ee=e[74].detalhes)==null?void 0:ee.resumo)&&Oa(e);return{key:l,first:null,c(){t=b("div"),a=b("div"),W(r.$$.fragment),s=q(),o=b("div"),i=b("div"),f=b("div"),c=b("h4"),h=M(u),g=q(),p=b("p"),w=M(D),F=q(),N=b("span"),z=M(x),O=q(),P&&P.c(),U=q(),H&&H.c(),T=q(),L=b("p"),X=M("Respons√°vel: "),A=M(_),I=q(),this.h()},l(te){t=v(te,"DIV",{class:!0});var le=C(t);a=v(le,"DIV",{class:!0});var ae=C(a);K(r.$$.fragment,ae),ae.forEach(m),s=V(le),o=v(le,"DIV",{class:!0});var re=C(o);i=v(re,"DIV",{class:!0});var ue=C(i);f=v(ue,"DIV",{});var me=C(f);c=v(me,"H4",{class:!0});var ge=C(c);h=R(ge,u),ge.forEach(m),g=V(me),p=v(me,"P",{class:!0});var pe=C(p);w=R(pe,D),pe.forEach(m),me.forEach(m),F=V(ue),N=v(ue,"SPAN",{class:!0});var fe=C(N);z=R(fe,x),fe.forEach(m),ue.forEach(m),O=V(re),P&&P.l(re),U=V(re),H&&H.l(re),T=V(re),L=v(re,"P",{class:!0});var Y=C(L);X=R(Y,"Respons√°vel: "),A=R(Y,_),Y.forEach(m),re.forEach(m),I=V(le),le.forEach(m),this.h()},h(){$(a,"class",n=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`),$(c,"class","font-medium text-gray-900 dark:text-white"),$(p,"class","text-sm text-gray-600 dark:text-gray-300"),$(N,"class","text-sm text-gray-500 dark:text-gray-400"),$(i,"class","flex items-center justify-between"),$(L,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),$(o,"class","flex-1 min-w-0"),$(t,"class","flex items-start space-x-4"),this.first=t},m(te,le){S(te,t,le),d(t,a),J(r,a,null),d(t,s),d(t,o),d(o,i),d(i,f),d(f,c),d(c,h),d(f,g),d(f,p),d(p,w),d(i,F),d(i,N),d(N,z),d(o,O),P&&P.m(o,null),d(o,U),H&&H.m(o,null),d(o,T),d(o,L),d(L,X),d(L,A),d(t,I),E=!0},p(te,le){var re;e=te;const ae={};le[0]&131072&&(ae.name=e[31](e[74].tipoDisplay.tipo)),r.$set(ae),(!E||le[0]&131072&&n!==(n=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`))&&$(a,"class",n),(!E||le[0]&131072)&&u!==(u=e[74].tipoDisplay.label+"")&&oe(h,u),(!E||le[0]&131072)&&D!==(D=e[74].acao+"")&&oe(w,D),(!E||le[0]&131072)&&x!==(x=e[74].dataFormatada+"")&&oe(z,x),e[74].mudancaStatus?P?P.p(e,le):(P=xa(e),P.c(),P.m(o,U)):P&&(P.d(1),P=null),(re=e[74].detalhes)!=null&&re.resumo?H?H.p(e,le):(H=Oa(e),H.c(),H.m(o,T)):H&&(H.d(1),H=null),(!E||le[0]&131072)&&_!==(_=e[74].responsavel+"")&&oe(A,_)},i(te){E||(k(r.$$.fragment,te),E=!0)},o(te){y(r.$$.fragment,te),E=!1},d(te){te&&m(t),G(r),P&&P.d(),H&&H.d()}}}function cn(l){let e,t=[],a=new Map,r,n=xe(l[18]);const s=o=>o[65].id;for(let o=0;o<n.length;o+=1){let i=Pa(l,n,o),f=s(i);a.set(f,t[o]=Ma(f,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);for(let f=0;f<t.length;f+=1)t[f].l(i);i.forEach(m),this.h()},h(){$(e,"class","space-y-3")},m(o,i){S(o,e,i);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);r=!0},p(o,i){i[0]&1476657152&&(n=xe(o[18]),ve(),t=nt(t,i,s,1,o,n,a,e,ct,Ma,null,Pa),be())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function un(l){let e,t;return e=new At({props:{icon:"TruckOutline",message:"Nenhuma entrega registrada",description:"N√£o h√° hist√≥rico de entregas para este colaborador"}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p:Ve,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function dn(l){let e=l[65].statusDisplay.label+"",t;return{c(){t=M(e)},l(a){t=R(a,e)},m(a,r){S(a,t,r)},p(a,r){r[0]&262144&&e!==(e=a[65].statusDisplay.label+"")&&oe(t,e)},d(a){a&&m(t)}}}function Ta(l,e){let t,a,r=e[71].quantidade+"",n,s,o,i=e[71].nomeEquipamento+"",f,c,u=(e[71].numeroCA||e[71].registroCA)+"",h,g,p;return{key:l,first:null,c(){t=b("div"),a=b("span"),n=M(r),s=q(),o=b("div"),f=M(i),c=M(" (CA: "),h=M(u),g=M(")"),p=q(),this.h()},l(D){t=v(D,"DIV",{class:!0});var w=C(t);a=v(w,"SPAN",{class:!0});var F=C(a);n=R(F,r),F.forEach(m),s=V(w),o=v(w,"DIV",{class:!0});var N=C(o);f=R(N,i),c=R(N," (CA: "),h=R(N,u),g=R(N,")"),N.forEach(m),p=V(w),w.forEach(m),this.h()},h(){$(a,"class","inline-flex items-center justify-center w-5 h-5 text-xs font-medium text-white bg-gray-700 rounded"),$(o,"class","px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono text-gray-800 dark:text-gray-200"),$(t,"class","flex items-center space-x-2"),this.first=t},m(D,w){S(D,t,w),d(t,a),d(a,n),d(t,s),d(t,o),d(o,f),d(o,c),d(o,h),d(o,g),d(t,p)},p(D,w){e=D,w[0]&262144&&r!==(r=e[71].quantidade+"")&&oe(n,r),w[0]&262144&&i!==(i=e[71].nomeEquipamento+"")&&oe(f,i),w[0]&262144&&u!==(u=(e[71].numeroCA||e[71].registroCA)+"")&&oe(h,u)},d(D){D&&m(t)}}}function mn(l){let e,t,a,r=l[65].numero+"",n,s,o,i,f=l[65].dataEntrega+"",c,u,h,g,p,D,w,F="Itens:",N,x,z=[],O=new Map,U,T;g=new st({props:{color:Xe.getBadgeColor(l[65].statusDisplay.cor),class:"rounded-sm",$$slots:{default:[dn]},$$scope:{ctx:l}}});let L=xe(l[65].itens);const X=_=>_[71].id;for(let _=0;_<L.length;_+=1){let A=Aa(l,L,_),I=X(A);O.set(I,z[_]=Ta(I,A))}return{c(){e=b("div"),t=b("h4"),a=M("Entrega "),n=M(r),s=q(),o=b("p"),i=M("Data: "),c=M(f),u=q(),h=b("div"),W(g.$$.fragment),p=q(),D=b("div"),w=b("p"),w.textContent=F,N=q(),x=b("div");for(let _=0;_<z.length;_+=1)z[_].c();U=q(),this.h()},l(_){e=v(_,"DIV",{slot:!0});var A=C(e);t=v(A,"H4",{class:!0});var I=C(t);a=R(I,"Entrega "),n=R(I,r),I.forEach(m),s=V(A),o=v(A,"P",{class:!0});var E=C(o);i=R(E,"Data: "),c=R(E,f),E.forEach(m),u=V(A),h=v(A,"DIV",{class:!0});var P=C(h);K(g.$$.fragment,P),P.forEach(m),p=V(A),D=v(A,"DIV",{class:!0});var H=C(D);w=v(H,"P",{class:!0,"data-svelte-h":!0}),De(w)!=="svelte-tel3c5"&&(w.textContent=F),N=V(H),x=v(H,"DIV",{class:!0});var ee=C(x);for(let te=0;te<z.length;te+=1)z[te].l(ee);ee.forEach(m),H.forEach(m),U=V(A),A.forEach(m),this.h()},h(){$(t,"class","font-medium text-gray-900 dark:text-white"),$(o,"class","text-sm text-gray-600 dark:text-gray-300"),$(h,"class","mt-2"),$(w,"class","text-sm font-medium text-gray-900 dark:text-white"),$(x,"class","mt-1 space-y-1"),$(D,"class","mt-2"),$(e,"slot","content")},m(_,A){S(_,e,A),d(e,t),d(t,a),d(t,n),d(e,s),d(e,o),d(o,i),d(o,c),d(e,u),d(e,h),J(g,h,null),d(e,p),d(e,D),d(D,w),d(D,N),d(D,x);for(let I=0;I<z.length;I+=1)z[I]&&z[I].m(x,null);d(e,U),T=!0},p(_,A){(!T||A[0]&262144)&&r!==(r=_[65].numero+"")&&oe(n,r),(!T||A[0]&262144)&&f!==(f=_[65].dataEntrega+"")&&oe(c,f);const I={};A[0]&262144&&(I.color=Xe.getBadgeColor(_[65].statusDisplay.cor)),A[0]&262144|A[2]&262144&&(I.$$scope={dirty:A,ctx:_}),g.$set(I),A[0]&262144&&(L=xe(_[65].itens),z=nt(z,A,X,1,_,L,O,x,cr,Ta,null,Aa))},i(_){T||(k(g.$$.fragment,_),T=!0)},o(_){y(g.$$.fragment,_),T=!1},d(_){_&&m(e),G(g);for(let A=0;A<z.length;A+=1)z[A].d()}}}function gn(l){let e,t;function a(){return l[41](l[65])}return e=new Oe({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[_n]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){W(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){J(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function hn(l){let e,t;function a(){return l[40](l[65])}return e=new Oe({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[vn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){W(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){J(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function pn(l){let e,t;function a(){return l[39](l[65])}return e=new Oe({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[bn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){W(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){J(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function _n(l){let e;return{c(){e=M("Editar")},l(t){e=R(t,"Editar")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function vn(l){let e;return{c(){e=M("Imprimir")},l(t){e=R(t,"Imprimir")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function bn(l){let e;return{c(){e=M("Assinar")},l(t){e=R(t,"Assinar")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Ra(l){let e,t,a,r;const n=[pn,hn,gn],s=[];function o(i,f){return i[68]==="assinar"?0:i[68]==="imprimir"?1:i[68]==="editar"?2:-1}return~(e=o(l))&&(t=s[e]=n[e](l)),{c(){t&&t.c(),a=Ce()},l(i){t&&t.l(i),a=Ce()},m(i,f){~e&&s[e].m(i,f),S(i,a,f),r=!0},p(i,f){let c=e;e=o(i),e===c?~e&&s[e].p(i,f):(t&&(ve(),y(s[c],1,1,()=>{s[c]=null}),be()),~e?(t=s[e],t?t.p(i,f):(t=s[e]=n[e](i),t.c()),k(t,1),t.m(a.parentNode,a)):t=null)},i(i){r||(k(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),~e&&s[e].d(i)}}}function $n(l){let e,t,a,r=xe(l[65].acoes),n=[];for(let o=0;o<r.length;o+=1)n[o]=Ra(Fa(l,r,o));const s=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){e=b("div");for(let o=0;o<n.length;o+=1)n[o].c();t=q(),this.h()},l(o){e=v(o,"DIV",{slot:!0,class:!0});var i=C(e);for(let f=0;f<n.length;f+=1)n[f].l(i);t=V(i),i.forEach(m),this.h()},h(){$(e,"slot","actions"),$(e,"class","flex space-x-2")},m(o,i){S(o,e,i);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);d(e,t),a=!0},p(o,i){if(i[0]&1476657152){r=xe(o[65].acoes);let f;for(f=0;f<r.length;f+=1){const c=Fa(o,r,f);n[f]?(n[f].p(c,i),k(n[f],1)):(n[f]=Ra(c),n[f].c(),k(n[f],1),n[f].m(e,t))}for(ve(),f=r.length;f<n.length;f+=1)s(f);be()}},i(o){if(!a){for(let i=0;i<r.length;i+=1)k(n[i]);a=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)y(n[i]);a=!1},d(o){o&&m(e),It(n,o)}}}function Ma(l,e){let t,a,r;return a=new lr({props:{$$slots:{actions:[$n],content:[mn]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ce(),W(a.$$.fragment),this.h()},l(n){t=Ce(),K(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){S(n,t,s),J(a,n,s),r=!0},p(n,s){e=n;const o={};s[0]&262144|s[2]&262144&&(o.$$scope={dirty:s,ctx:e}),a.$set(o)},i(n){r||(k(a.$$.fragment,n),r=!0)},o(n){y(a.$$.fragment,n),r=!1},d(n){n&&m(t),G(a,n)}}}function En(l){let e,t=[],a=new Map,r,n=xe(l[19]);const s=o=>o[62].id;for(let o=0;o<n.length;o+=1){let i=Va(l,n,o),f=s(i);a.set(f,t[o]=Ha(f,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);for(let f=0;f<t.length;f+=1)t[f].l(i);i.forEach(m),this.h()},h(){$(e,"class","space-y-3")},m(o,i){S(o,e,i);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);r=!0},p(o,i){i[0]&524288&&(n=xe(o[19]),ve(),t=nt(t,i,s,1,o,n,a,e,ct,Ha,null,Va),be())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function kn(l){let e,t;return e=new At({props:{icon:"TrashBinOutline",message:"Nenhuma devolu√ß√£o registrada",description:"N√£o h√° hist√≥rico de devolu√ß√µes para este colaborador"}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p:Ve,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function wn(l){let e=l[62].status==="processada"?"Processada":"Cancelada",t;return{c(){t=M(e)},l(a){t=R(a,e)},m(a,r){S(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].status==="processada"?"Processada":"Cancelada")&&oe(t,e)},d(a){a&&m(t)}}}function La(l){let e,t,a;return t=new st({props:{color:l[62].condicaoItem==="DANIFICADO"?"yellow":"red",class:"rounded-sm text-xs",$$slots:{default:[Dn]},$$scope:{ctx:l}}}),{c(){e=b("div"),W(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var n=C(e);K(t.$$.fragment,n),n.forEach(m),this.h()},h(){$(e,"class","flex items-center space-x-2")},m(r,n){S(r,e,n),J(t,e,null),a=!0},p(r,n){const s={};n[0]&524288&&(s.color=r[62].condicaoItem==="DANIFICADO"?"yellow":"red"),n[0]&524288|n[2]&262144&&(s.$$scope={dirty:n,ctx:r}),t.$set(s)},i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),G(t)}}}function Dn(l){let e=l[62].condicaoItem+"",t;return{c(){t=M(e)},l(a){t=R(a,e)},m(a,r){S(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].condicaoItem+"")&&oe(t,e)},d(a){a&&m(t)}}}function ja(l){let e,t,a,r=l[62].observacoes+"",n,s;return{c(){e=b("div"),t=b("p"),a=M('"'),n=M(r),s=M('"'),this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);t=v(i,"P",{class:!0});var f=C(t);a=R(f,'"'),n=R(f,r),s=R(f,'"'),f.forEach(m),i.forEach(m),this.h()},h(){$(t,"class","text-sm text-gray-700 dark:text-gray-300 italic"),$(e,"class","mt-3 p-2 bg-gray-50 dark:bg-gray-700 rounded border-l-4 border-blue-400")},m(o,i){S(o,e,i),d(e,t),d(t,a),d(t,n),d(t,s)},p(o,i){i[0]&524288&&r!==(r=o[62].observacoes+"")&&oe(n,r)},d(o){o&&m(e)}}}function Ha(l,e){let t,a,r,n,s,o=e[62].nomeEquipamento+"",i,f,c,u,h,g,p,D="CA / Categoria",w,F,N=e[62].numeroCA+"",x,z,O=e[62].categoria+"",U,T,L,X,_="Data Devolu√ß√£o",A,I,E=e[62].dataDevolucao+"",P,H,ee,te,le="Motivo",ae,re,ue=e[62].motivoDisplay+"",me,ge,pe,fe,Y;c=new st({props:{color:e[62].status==="processada"?"green":"red",class:"rounded-sm",$$slots:{default:[wn]},$$scope:{ctx:e}}});let Z=e[62].condicaoItem&&e[62].condicaoItem!=="BOM"&&La(e),ie=e[62].observacoes&&ja(e);return{key:l,first:null,c(){t=b("div"),a=b("div"),r=b("div"),n=b("div"),s=b("h4"),i=M(o),f=q(),W(c.$$.fragment),u=q(),h=b("div"),g=b("div"),p=b("span"),p.textContent=D,w=q(),F=b("p"),x=M(N),z=M(" ‚Ä¢ "),U=M(O),T=q(),L=b("div"),X=b("span"),X.textContent=_,A=q(),I=b("p"),P=M(E),H=q(),ee=b("div"),te=b("span"),te.textContent=le,ae=q(),re=b("p"),me=M(ue),ge=q(),Z&&Z.c(),pe=q(),ie&&ie.c(),fe=q(),this.h()},l($e){t=v($e,"DIV",{class:!0});var B=C(t);a=v(B,"DIV",{class:!0});var se=C(a);r=v(se,"DIV",{class:!0});var Ee=C(r);n=v(Ee,"DIV",{class:!0});var ke=C(n);s=v(ke,"H4",{class:!0});var we=C(s);i=R(we,o),we.forEach(m),f=V(ke),K(c.$$.fragment,ke),ke.forEach(m),u=V(Ee),h=v(Ee,"DIV",{class:!0});var qe=C(h);g=v(qe,"DIV",{});var ye=C(g);p=v(ye,"SPAN",{class:!0,"data-svelte-h":!0}),De(p)!=="svelte-1uekrmz"&&(p.textContent=D),w=V(ye),F=v(ye,"P",{class:!0});var Pe=C(F);x=R(Pe,N),z=R(Pe," ‚Ä¢ "),U=R(Pe,O),Pe.forEach(m),ye.forEach(m),T=V(qe),L=v(qe,"DIV",{});var Ne=C(L);X=v(Ne,"SPAN",{class:!0,"data-svelte-h":!0}),De(X)!=="svelte-1nqkj5n"&&(X.textContent=_),A=V(Ne),I=v(Ne,"P",{class:!0});var Se=C(I);P=R(Se,E),Se.forEach(m),Ne.forEach(m),qe.forEach(m),H=V(Ee),ee=v(Ee,"DIV",{class:!0});var de=C(ee);te=v(de,"SPAN",{class:!0,"data-svelte-h":!0}),De(te)!=="svelte-ti63bd"&&(te.textContent=le),ae=V(de),re=v(de,"P",{class:!0});var j=C(re);me=R(j,ue),j.forEach(m),de.forEach(m),ge=V(Ee),Z&&Z.l(Ee),pe=V(Ee),ie&&ie.l(Ee),Ee.forEach(m),se.forEach(m),fe=V(B),B.forEach(m),this.h()},h(){$(s,"class","font-semibold text-gray-900 dark:text-white"),$(n,"class","flex items-center justify-between mb-3"),$(p,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),$(F,"class","text-sm text-gray-900 dark:text-white"),$(X,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),$(I,"class","text-sm text-gray-900 dark:text-white"),$(h,"class","grid grid-cols-2 gap-4 mb-3"),$(te,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),$(re,"class","text-sm text-gray-900 dark:text-white"),$(ee,"class","mb-3"),$(r,"class","flex-1"),$(a,"class","flex justify-between items-start"),$(t,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"),this.first=t},m($e,B){S($e,t,B),d(t,a),d(a,r),d(r,n),d(n,s),d(s,i),d(n,f),J(c,n,null),d(r,u),d(r,h),d(h,g),d(g,p),d(g,w),d(g,F),d(F,x),d(F,z),d(F,U),d(h,T),d(h,L),d(L,X),d(L,A),d(L,I),d(I,P),d(r,H),d(r,ee),d(ee,te),d(ee,ae),d(ee,re),d(re,me),d(r,ge),Z&&Z.m(r,null),d(r,pe),ie&&ie.m(r,null),d(t,fe),Y=!0},p($e,B){e=$e,(!Y||B[0]&524288)&&o!==(o=e[62].nomeEquipamento+"")&&oe(i,o);const se={};B[0]&524288&&(se.color=e[62].status==="processada"?"green":"red"),B[0]&524288|B[2]&262144&&(se.$$scope={dirty:B,ctx:e}),c.$set(se),(!Y||B[0]&524288)&&N!==(N=e[62].numeroCA+"")&&oe(x,N),(!Y||B[0]&524288)&&O!==(O=e[62].categoria+"")&&oe(U,O),(!Y||B[0]&524288)&&E!==(E=e[62].dataDevolucao+"")&&oe(P,E),(!Y||B[0]&524288)&&ue!==(ue=e[62].motivoDisplay+"")&&oe(me,ue),e[62].condicaoItem&&e[62].condicaoItem!=="BOM"?Z?(Z.p(e,B),B[0]&524288&&k(Z,1)):(Z=La(e),Z.c(),k(Z,1),Z.m(r,pe)):Z&&(ve(),y(Z,1,1,()=>{Z=null}),be()),e[62].observacoes?ie?ie.p(e,B):(ie=ja(e),ie.c(),ie.m(r,null)):ie&&(ie.d(1),ie=null)},i($e){Y||(k(c.$$.fragment,$e),k(Z),Y=!0)},o($e){y(c.$$.fragment,$e),y(Z),Y=!1},d($e){$e&&m(t),G(c),Z&&Z.d(),ie&&ie.d()}}}function Cn(l){let e,t=[],a=new Map,r,n=xe(l[20]);const s=o=>o[59].id;for(let o=0;o<n.length;o+=1){let i=qa(l,n,o),f=s(i);a.set(f,t[o]=Ua(f,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);for(let f=0;f<t.length;f+=1)t[f].l(i);i.forEach(m),this.h()},h(){$(e,"class","space-y-3")},m(o,i){S(o,e,i);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);r=!0},p(o,i){i[0]&537919488&&(n=xe(o[20]),ve(),t=nt(t,i,s,1,o,n,a,e,ct,Ua,null,qa),be())},i(o){if(!r){for(let i=0;i<n.length;i+=1)k(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function In(l){let e,t;return e=new At({props:{icon:"ClipboardDocumentListOutline",message:"Nenhum equipamento em posse",description:"Este colaborador n√£o possui equipamentos atualmente"}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p:Ve,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function yn(l){let e=l[59].statusVencimentoDisplay.texto+"",t;return{c(){t=M(e)},l(a){t=R(a,e)},m(a,r){S(a,t,r)},p(a,r){r[0]&1048576&&e!==(e=a[59].statusVencimentoDisplay.texto+"")&&oe(t,e)},d(a){a&&m(t)}}}function Pn(l){let e,t,a=l[59].nomeEquipamento+"",r,n,s,o,i=(l[59].numeroCA||l[59].registroCA)+"",f,c,u=l[59].categoria+"",h,g,p,D,w=l[59].dataEntrega+"",F,N,x,z,O,U,T=Xe.formatDaysRemaining(l[59].statusVencimentoDisplay.diasRestantes,l[59].statusVencimentoDisplay.statusDetalhado)+"",L,X,_;return z=new st({props:{color:Xe.getBadgeColor(l[59].statusVencimentoDisplay.cor),class:"rounded-sm",$$slots:{default:[yn]},$$scope:{ctx:l}}}),{c(){e=b("div"),t=b("h4"),r=M(a),n=q(),s=b("p"),o=M("CA: "),f=M(i),c=M(" ‚Ä¢ "),h=M(u),g=q(),p=b("p"),D=M("Entregue em: "),F=M(w),N=q(),x=b("div"),W(z.$$.fragment),O=q(),U=b("span"),L=M(T),X=q(),this.h()},l(A){e=v(A,"DIV",{slot:!0});var I=C(e);t=v(I,"H4",{class:!0});var E=C(t);r=R(E,a),E.forEach(m),n=V(I),s=v(I,"P",{class:!0});var P=C(s);o=R(P,"CA: "),f=R(P,i),c=R(P," ‚Ä¢ "),h=R(P,u),P.forEach(m),g=V(I),p=v(I,"P",{class:!0});var H=C(p);D=R(H,"Entregue em: "),F=R(H,w),H.forEach(m),N=V(I),x=v(I,"DIV",{class:!0});var ee=C(x);K(z.$$.fragment,ee),O=V(ee),U=v(ee,"SPAN",{class:!0});var te=C(U);L=R(te,T),te.forEach(m),ee.forEach(m),X=V(I),I.forEach(m),this.h()},h(){$(t,"class","font-medium text-gray-900 dark:text-white"),$(s,"class","text-sm text-gray-600 dark:text-gray-300"),$(p,"class","text-sm text-gray-600 dark:text-gray-300"),$(U,"class","ml-2 text-sm text-gray-600 dark:text-gray-300"),$(x,"class","mt-2"),$(e,"slot","content")},m(A,I){S(A,e,I),d(e,t),d(t,r),d(e,n),d(e,s),d(s,o),d(s,f),d(s,c),d(s,h),d(e,g),d(e,p),d(p,D),d(p,F),d(e,N),d(e,x),J(z,x,null),d(x,O),d(x,U),d(U,L),d(e,X),_=!0},p(A,I){(!_||I[0]&1048576)&&a!==(a=A[59].nomeEquipamento+"")&&oe(r,a),(!_||I[0]&1048576)&&i!==(i=(A[59].numeroCA||A[59].registroCA)+"")&&oe(f,i),(!_||I[0]&1048576)&&u!==(u=A[59].categoria+"")&&oe(h,u),(!_||I[0]&1048576)&&w!==(w=A[59].dataEntrega+"")&&oe(F,w);const E={};I[0]&1048576&&(E.color=Xe.getBadgeColor(A[59].statusVencimentoDisplay.cor)),I[0]&1048576|I[2]&262144&&(E.$$scope={dirty:I,ctx:A}),z.$set(E),(!_||I[0]&1048576)&&T!==(T=Xe.formatDaysRemaining(A[59].statusVencimentoDisplay.diasRestantes,A[59].statusVencimentoDisplay.statusDetalhado)+"")&&oe(L,T)},i(A){_||(k(z.$$.fragment,A),_=!0)},o(A){y(z.$$.fragment,A),_=!1},d(A){A&&m(e),G(z)}}}function Ba(l){let e,t;function a(){return l[38](l[59])}return e=new Oe({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[An]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){W(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){J(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function An(l){let e;return{c(){e=M("Devolver")},l(t){e=R(t,"Devolver")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Fn(l){let e,t,a,r=l[59].podeDevolver&&Ba(l);return{c(){e=b("div"),r&&r.c(),t=q(),this.h()},l(n){e=v(n,"DIV",{slot:!0});var s=C(e);r&&r.l(s),t=V(s),s.forEach(m),this.h()},h(){$(e,"slot","actions")},m(n,s){S(n,e,s),r&&r.m(e,null),d(e,t),a=!0},p(n,s){n[59].podeDevolver?r?(r.p(n,s),s[0]&1048576&&k(r,1)):(r=Ba(n),r.c(),k(r,1),r.m(e,t)):r&&(ve(),y(r,1,1,()=>{r=null}),be())},i(n){a||(k(r),a=!0)},o(n){y(r),a=!1},d(n){n&&m(e),r&&r.d()}}}function Ua(l,e){let t,a,r;return a=new lr({props:{$$slots:{actions:[Fn],content:[Pn]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ce(),W(a.$$.fragment),this.h()},l(n){t=Ce(),K(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){S(n,t,s),J(a,n,s),r=!0},p(n,s){e=n;const o={};s[0]&1048576|s[2]&262144&&(o.$$scope={dirty:s,ctx:e}),a.$set(o)},i(n){r||(k(a.$$.fragment,n),r=!0)},o(n){y(a.$$.fragment,n),r=!1},d(n){n&&m(t),G(a,n)}}}function Vn(l){var c,u,h;let e,t,a,r,n,s;e=new ut({props:{title:((c=l[15])==null?void 0:c.nome)||"Nome n√£o dispon√≠vel",objectType:"FICHA EPI",iconName:"UserOutline",status:(h=(u=l[16])==null?void 0:u.ficha)==null?void 0:h.status,statusType:"ficha",additionalInfo:l[23],primaryAction:{text:"Nova Entrega",icon:"PlusOutline"}}}),e.$on("close",l[25]),e.$on("primaryAction",l[26]);const o=[an,tn,en,Zl],i=[];function f(g,p){return g[6]?0:g[7]?1:g[16]?2:3}return a=f(l),r=i[a]=o[a](l),{c(){W(e.$$.fragment),t=q(),r.c(),n=Ce()},l(g){K(e.$$.fragment,g),t=V(g),r.l(g),n=Ce()},m(g,p){J(e,g,p),S(g,t,p),i[a].m(g,p),S(g,n,p),s=!0},p(g,p){var F,N,x;const D={};p[0]&32768&&(D.title=((F=g[15])==null?void 0:F.nome)||"Nome n√£o dispon√≠vel"),p[0]&65536&&(D.status=(x=(N=g[16])==null?void 0:N.ficha)==null?void 0:x.status),p[0]&8388608&&(D.additionalInfo=g[23]),e.$set(D);let w=a;a=f(g),a===w?i[a].p(g,p):(ve(),y(i[w],1,1,()=>{i[w]=null}),be(),r=i[a],r?r.p(g,p):(r=i[a]=o[a](g),r.c()),k(r,1),r.m(n.parentNode,n))},i(g){s||(k(e.$$.fragment,g),k(r),s=!0)},o(g){y(e.$$.fragment,g),y(r),s=!1},d(g){g&&(m(t),m(n)),G(e,g),i[a].d(g)}}}function qn(l){let e,t,a,r,n,s,o,i,f,c,u,h,g,p,D;function w(_){l[42](_)}let F={placement:"right",width:"w-full max-w-[940px]",backdrop:!l[22],activateClickOutside:!l[22],bgOpacity:"bg-black/50",position:"fixed",id:"ficha-detail-drawer",class:"drawer-ficha",$$slots:{default:[Vn]},$$scope:{ctx:l}};l[14]!==void 0&&(F.hidden=l[14]),e=new Dr({props:F}),Re.push(()=>Me(e,"hidden",w));function N(_){l[43](_)}let x={episDisponiveis:l[4],usuarios:l[5],loading:l[8]};l[0]!==void 0&&(x.show=l[0]),r=new yl({props:x}),Re.push(()=>Me(r,"show",N)),r.$on("salvar",l[44]),r.$on("cancelar",l[45]);function z(_){l[46](_)}let O={episDisponiveis:l[4],entrega:l[11],loading:l[8]};l[1]!==void 0&&(O.show=l[1]),o=new Ml({props:O}),Re.push(()=>Me(o,"show",z)),o.$on("salvar",l[47]),o.$on("cancelar",l[48]);function U(_){l[49](_)}let T={equipamento:l[12],loading:l[10]};l[2]!==void 0&&(T.show=l[2]),c=new Gl({props:T}),Re.push(()=>Me(c,"show",U)),c.$on("confirmar",l[50]),c.$on("cancelar",l[51]);function L(_){l[52](_)}let X={entrega:l[13],loading:l[9]};return l[3]!==void 0&&(X.show=l[3]),g=new Yl({props:X}),Re.push(()=>Me(g,"show",L)),g.$on("confirmar",l[53]),g.$on("cancelar",l[54]),{c(){W(e.$$.fragment),a=q(),W(r.$$.fragment),s=q(),W(o.$$.fragment),f=q(),W(c.$$.fragment),h=q(),W(g.$$.fragment)},l(_){K(e.$$.fragment,_),a=V(_),K(r.$$.fragment,_),s=V(_),K(o.$$.fragment,_),f=V(_),K(c.$$.fragment,_),h=V(_),K(g.$$.fragment,_)},m(_,A){J(e,_,A),S(_,a,A),J(r,_,A),S(_,s,A),J(o,_,A),S(_,f,A),J(c,_,A),S(_,h,A),J(g,_,A),D=!0},p(_,A){const I={};A[0]&4194304&&(I.backdrop=!_[22]),A[0]&4194304&&(I.activateClickOutside=!_[22]),A[0]&12550336|A[2]&262144&&(I.$$scope={dirty:A,ctx:_}),!t&&A[0]&16384&&(t=!0,I.hidden=_[14],Le(()=>t=!1)),e.$set(I);const E={};A[0]&16&&(E.episDisponiveis=_[4]),A[0]&32&&(E.usuarios=_[5]),A[0]&256&&(E.loading=_[8]),!n&&A[0]&1&&(n=!0,E.show=_[0],Le(()=>n=!1)),r.$set(E);const P={};A[0]&16&&(P.episDisponiveis=_[4]),A[0]&2048&&(P.entrega=_[11]),A[0]&256&&(P.loading=_[8]),!i&&A[0]&2&&(i=!0,P.show=_[1],Le(()=>i=!1)),o.$set(P);const H={};A[0]&4096&&(H.equipamento=_[12]),A[0]&1024&&(H.loading=_[10]),!u&&A[0]&4&&(u=!0,H.show=_[2],Le(()=>u=!1)),c.$set(H);const ee={};A[0]&8192&&(ee.entrega=_[13]),A[0]&512&&(ee.loading=_[9]),!p&&A[0]&8&&(p=!0,ee.show=_[3],Le(()=>p=!1)),g.$set(ee)},i(_){D||(k(e.$$.fragment,_),k(r.$$.fragment,_),k(o.$$.fragment,_),k(c.$$.fragment,_),k(g.$$.fragment,_),D=!0)},o(_){y(e.$$.fragment,_),y(r.$$.fragment,_),y(o.$$.fragment,_),y(c.$$.fragment,_),y(g.$$.fragment,_),D=!1},d(_){_&&(m(a),m(s),m(f),m(h)),G(e,_),G(r,_),G(o,_),G(c,_),G(g,_)}}}function Sn(l,e,t){let a,r,n,s,o,i,f,c,{fichaCompleteData:u=null}=e,{episDisponiveis:h=[]}=e,{usuarios:g=[]}=e,{loading:p=!1}=e,{error:D=null}=e,{entregaLoading:w=!1}=e,{assinaturaLoading:F=!1}=e,{devolucaoLoading:N=!1}=e,{showNovaEntregaDrawer:x=!1}=e,{showEditarEntregaDrawer:z=!1}=e,{showDevolucaoModal:O=!1}=e,{showAssinaturaModal:U=!1}=e,{entregaEdicao:T=null}=e,{equipamentoDevolucao:L=null}=e,{entregaAssinatura:X=null}=e,{open:_=!1}=e,A=!_,I=_,E="equipamentos";const P=Ye();function H(){P("close")}let ee=A;function te(){P("novaEntrega")}function le(Q){P("editarEntrega",{entrega:Q})}function ae(Q){P("assinarEntrega",{entrega:Q})}function re(Q){P("devolverEquipamento",{equipamento:Q})}function ue(Q){P("imprimirEntrega",{entrega:Q})}function me(Q){return Xe.getEventIcon(Q)}function ge(Q){return Xe.getColorClasses(Q)}const pe=Q=>t(21,E=Q.id),fe=Q=>re(Q),Y=Q=>ae(Q),Z=Q=>ue(Q),ie=Q=>le(Q);function $e(Q){A=Q,t(14,A),t(34,_),t(35,I)}function B(Q){x=Q,t(0,x)}const se=Q=>P("salvarNovaEntrega",Q.detail),Ee=()=>P("cancelarNovaEntrega");function ke(Q){z=Q,t(1,z)}const we=Q=>P("salvarEdicaoEntrega",Q.detail),qe=()=>P("cancelarEdicaoEntrega");function ye(Q){O=Q,t(2,O)}const Pe=Q=>P("confirmarDevolucao",Q.detail),Ne=()=>P("cancelarDevolucao");function Se(Q){U=Q,t(3,U)}const de=Q=>P("confirmarAssinatura",Q.detail),j=()=>P("cancelarAssinatura");return l.$$set=Q=>{"fichaCompleteData"in Q&&t(33,u=Q.fichaCompleteData),"episDisponiveis"in Q&&t(4,h=Q.episDisponiveis),"usuarios"in Q&&t(5,g=Q.usuarios),"loading"in Q&&t(6,p=Q.loading),"error"in Q&&t(7,D=Q.error),"entregaLoading"in Q&&t(8,w=Q.entregaLoading),"assinaturaLoading"in Q&&t(9,F=Q.assinaturaLoading),"devolucaoLoading"in Q&&t(10,N=Q.devolucaoLoading),"showNovaEntregaDrawer"in Q&&t(0,x=Q.showNovaEntregaDrawer),"showEditarEntregaDrawer"in Q&&t(1,z=Q.showEditarEntregaDrawer),"showDevolucaoModal"in Q&&t(2,O=Q.showDevolucaoModal),"showAssinaturaModal"in Q&&t(3,U=Q.showAssinaturaModal),"entregaEdicao"in Q&&t(11,T=Q.entregaEdicao),"equipamentoDevolucao"in Q&&t(12,L=Q.equipamentoDevolucao),"entregaAssinatura"in Q&&t(13,X=Q.entregaAssinatura),"open"in Q&&t(34,_=Q.open)},l.$$.update=()=>{var Q,he;l.$$.dirty[0]&16384|l.$$.dirty[1]&24&&_!==I&&(console.log("üîÑ Sincronizando drawer (open changed):",{open:_,hidden:A,lastOpen:I}),t(14,A=!_),t(35,I=_)),l.$$.dirty[0]&16448|l.$$.dirty[1]&12&&_&&console.log("üéØ FichaDetailPresenter: Drawer foi aberto, carregando dados...",{open:_,hidden:A,fichaCompleteData:!!u,loading:p}),l.$$.dirty[1]&4&&t(16,a=u==null?void 0:u.data),l.$$.dirty[0]&65536&&t(15,r=(Q=a==null?void 0:a.ficha)==null?void 0:Q.colaborador),l.$$.dirty[0]&65536&&t(20,n=(a==null?void 0:a.equipamentosEmPosse)||[]),l.$$.dirty[0]&65536&&t(19,s=(a==null?void 0:a.devolucoes)||[]),l.$$.dirty[0]&65536&&t(18,o=(a==null?void 0:a.entregas)||[]),l.$$.dirty[0]&65536&&t(17,i=(a==null?void 0:a.historico)||[]),l.$$.dirty[0]&65536&&(a==null||a.estatisticas),l.$$.dirty[0]&2031616&&a&&(console.log("üéØ FichaDetailPresenter - dados reativos atualizados:"),console.log("  - Equipamentos em posse:",(n==null?void 0:n.length)||0),console.log("  - Devolu√ß√µes:",(s==null?void 0:s.length)||0),console.log("  - Entregas:",(o==null?void 0:o.length)||0),console.log("  - Hist√≥rico:",(i==null?void 0:i.length)||0)),l.$$.dirty[0]&65536&&(he=a==null?void 0:a.ficha)!=null&&he.statusDisplay&&Xe.getStatusConfig(a.ficha.statusDisplay.label,a.ficha.statusDisplay.cor),l.$$.dirty[0]&32768&&t(23,f=r?[r.cpfDisplay||r.cpf||"CPF n√£o dispon√≠vel",`${r.cargo||"Cargo n√£o informado"} ‚Ä¢ ${r.empresa||"Empresa n√£o informada"}`]:[]),l.$$.dirty[0]&16384|l.$$.dirty[1]&40&&A!==ee&&(console.log("üîÑ Hidden changed:",{hidden:A,lastHidden:ee,open:_}),A&&_&&(console.log("üéØ Drawer fechado externamente, notificando Container"),P("close")),t(36,ee=A)),l.$$.dirty[0]&15&&t(22,c=x||z||O||U)},[x,z,O,U,h,g,p,D,w,F,N,T,L,X,A,r,a,i,o,s,n,E,c,f,P,H,te,le,ae,re,ue,me,ge,u,_,I,ee,pe,fe,Y,Z,ie,$e,B,se,Ee,ke,we,qe,ye,Pe,Ne,Se,de,j]}class Nn extends Ue{constructor(e){super(),Qe(this,e,Sn,qn,Ge,{fichaCompleteData:33,episDisponiveis:4,usuarios:5,loading:6,error:7,entregaLoading:8,assinaturaLoading:9,devolucaoLoading:10,showNovaEntregaDrawer:0,showEditarEntregaDrawer:1,showDevolucaoModal:2,showAssinaturaModal:3,entregaEdicao:11,equipamentoDevolucao:12,entregaAssinatura:13,open:34},null,[-1,-1,-1])}}function xn(l){let e,t;const a=[l[0]];let r={};for(let n=0;n<a.length;n+=1)r=sr(r,a[n]);return e=new Nn({props:r}),e.$on("close",l[1]),e.$on("novaEntrega",l[2]),e.$on("salvarNovaEntrega",l[3]),e.$on("cancelarNovaEntrega",l[4]),e.$on("editarEntrega",l[5]),e.$on("salvarEdicaoEntrega",l[6]),e.$on("cancelarEdicaoEntrega",l[7]),e.$on("assinarEntrega",l[8]),e.$on("confirmarAssinatura",l[9]),e.$on("cancelarAssinatura",l[10]),e.$on("devolverEquipamento",l[11]),e.$on("confirmarDevolucao",l[12]),e.$on("cancelarDevolucao",l[13]),e.$on("cancelarEntrega",l[14]),e.$on("imprimirEntrega",l[15]),{c(){W(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,s){J(e,n,s),t=!0},p(n,s){const o=s[0]&1?br(a,[$r(n[0])]):{};e.$set(o)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}function On(l,e,t){let a,r;Vt(l,il,Y=>t(34,r=Y));let{open:n=!1}=e,{fichaId:s=null}=e;const o=Ye();let i=null,f=[],c=[],u=!0,h=null,g=!1,p=!1,D=!1,w=!1,F=!1,N=!1,x=!1,z=null,O=null,U=null,T=null;Xa(()=>{console.log("üöÄ FichaDetailContainer: Inicializando..."),Promise.all([X(),_()])});async function L(){var Y,Z,ie,$e,B,se,Ee,ke;if(s){t(21,u=!0),t(22,h=null),t(33,T=s);try{console.log("üìã FichaDetailContainer: Carregando ficha completa:",s),t(18,i=await vt.getFichaComplete(s)),console.log("‚úÖ Dados da ficha carregados"),console.log("üîç Equipamentos em posse:",((Z=(Y=i==null?void 0:i.data)==null?void 0:Y.equipamentosEmPosse)==null?void 0:Z.length)||0),console.log("üîÑ Devolu√ß√µes:",(($e=(ie=i==null?void 0:i.data)==null?void 0:ie.devolucoes)==null?void 0:$e.length)||0),console.log("üöö Entregas:",((se=(B=i==null?void 0:i.data)==null?void 0:B.entregas)==null?void 0:se.length)||0),console.log("üìù Hist√≥rico:",((ke=(Ee=i==null?void 0:i.data)==null?void 0:Ee.historico)==null?void 0:ke.length)||0)}catch(we){console.error("‚ùå Erro ao carregar ficha:",we),t(22,h=we instanceof Error?we.message:"Erro desconhecido"),ze.error("Erro ao carregar ficha","N√£o foi poss√≠vel carregar os dados da ficha")}finally{t(21,u=!1)}}}async function X(){try{console.log("üöÄ FichaDetailContainer: Carregando EPIs dispon√≠veis..."),t(19,f=await vt.getEPIsDisponiveis()),console.log("üì¶ EPIs dispon√≠veis carregados:",f.length),console.log("üì¶ Estrutura dos EPIs:",f.slice(0,2));const Y=f.filter(Z=>Z.disponivel&&Z.quantidadeDisponivel>0);console.log("üéØ EPIs com estoque dispon√≠vel:",Y.length),Y.length===0&&(console.warn("‚ö†Ô∏è ATEN√á√ÉO: Nenhum EPI com estoque dispon√≠vel encontrado!"),console.log("üîç EPIs sem estoque:",f.map(Z=>({nome:Z.nomeEquipamento,quantidade:Z.quantidadeDisponivel,disponivel:Z.disponivel}))))}catch(Y){throw console.error("‚ùå Erro ao carregar EPIs dispon√≠veis:",Y),Y}}async function _(){try{console.log("üë§ FichaDetailContainer: Carregando usu√°rios..."),t(20,c=await vt.getUsuarios()),console.log("üë• Usu√°rios carregados:",c==null?void 0:c.length),console.log("üë• Estrutura dos usu√°rios:",c==null?void 0:c.slice(0,2))}catch(Y){throw console.error("‚ùå Erro ao carregar usu√°rios:",Y),Y}}function A(){t(16,n=!1),t(33,T=null),t(18,i=null),t(22,h=null),t(23,g=!1),t(24,p=!1),t(25,D=!1),t(26,w=!1),o("close"),console.log("‚ùå Drawer fechado")}async function I(){console.log("‚ûï Abrindo formul√°rio de nova entrega"),console.log("üì¶ Estado atual dos EPIs:",f.length,"EPIs carregados"),f.length===0&&(console.log("üîÑ EPIs n√£o carregados, carregando agora..."),await X(),console.log("üì¶ Ap√≥s recarregar:",f.length,"EPIs dispon√≠veis")),console.log("üì¶ EPIs que ser√£o passados para o drawer:",f),t(23,g=!0)}async function E(Y){var Z;if(s){t(27,F=!0);try{if(console.log("üíæ FichaDetailContainer: Criando nova entrega..."),console.log("üîç Respons√°vel ID:",Y.detail.usuarioResponsavelId),console.log("üîç Quantidade de itens:",((Z=Y.detail.itens)==null?void 0:Z.length)||0),!Y.detail.usuarioResponsavelId)throw new Error("usuarioResponsavelId √© obrigat√≥rio");if(!Y.detail.itens||Y.detail.itens.length===0)throw new Error("Pelo menos um item deve ser selecionado");const ie={fichaEpiId:s,responsavelId:Y.detail.usuarioResponsavelId,itens:Y.detail.itens.map(B=>{const se=f.find(Ee=>Ee.episDisponivelId===B.episDisponivelId);return{estoqueItemId:(se==null?void 0:se.estoqueItemId)||B.episDisponivelId,quantidade:B.quantidade}}),observacoes:Y.detail.observacoes||""};console.log("üìã Payload da entrega:",ie);const $e=await _t.createDelivery(ie);t(23,g=!1),await L(),ze.success("Entrega criada",`Entrega ${$e.data.entregaId} criada com ${$e.data.totalItens} itens`),o("fichaUpdated",{fichaId:s})}catch(ie){console.error("‚ùå Erro ao salvar nova entrega:",ie);let $e="Erro ao criar entrega",B="Erro desconhecido";if(ie instanceof Error)switch(ie.name){case"EstoqueItemNotFoundError":$e="Item de estoque n√£o encontrado",B="Os EPIs selecionados n√£o possuem estoque dispon√≠vel no almoxarifado. Verifique se h√° itens em estoque antes de criar a entrega.";break;case"ValidationError":$e="Dados de entrega inv√°lidos",B="Verifique se todos os campos obrigat√≥rios est√£o preenchidos e tente novamente.";break;default:ie.message.includes("Cannot GET")||ie.message.includes("404")?($e="Servi√ßo indispon√≠vel",B="O servi√ßo de entregas est√° temporariamente indispon√≠vel. Alguns endpoints do backend n√£o est√£o implementados. Tente novamente mais tarde."):ie.message.includes("Network error")||ie.message.includes("timeout")?($e="Erro de conex√£o",B="Problema de conex√£o com o servidor. Verifique sua internet e tente novamente."):ie.message.includes("Validation error")?($e="Dados inv√°lidos",B="Os dados fornecidos s√£o inv√°lidos. Verifique os campos e tente novamente. Detalhes: "+ie.message):B=ie.message;break}ze.error($e,B),console.log("‚ÑπÔ∏è Drawer mantido aberto para corre√ß√£o dos dados")}finally{t(27,F=!1)}}}function P(){t(23,g=!1),console.log("‚ùå Nova entrega cancelada")}function H(Y){t(30,z=Y.detail.entrega),t(24,p=!0),console.log("‚úèÔ∏è Editando entrega:",z.id)}async function ee(Y){if(z){t(27,F=!0);try{console.log("üíæ FichaDetailContainer: Editando entrega:",Y.detail);const Z={responsavelId:Y.detail.responsavelId,itens:Y.detail.itens.map(ie=>({estoqueItemId:ie.estoqueItemId,quantidade:ie.quantidade})),observacoes:Y.detail.observacoes};await _t.updateDelivery(z.id,Z),t(24,p=!1),t(30,z=null),await L(),ze.success("Entrega atualizada","Entrega foi atualizada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Z){console.error("‚ùå Erro ao editar entrega:",Z),ze.error("Erro ao editar","N√£o foi poss√≠vel atualizar a entrega")}finally{t(27,F=!1)}}}function te(){t(24,p=!1),t(30,z=null),console.log("‚ùå Edi√ß√£o de entrega cancelada")}function le(Y){t(32,U=Y.detail.entrega),t(26,w=!0),console.log("‚úçÔ∏è Iniciando assinatura da entrega:",U.id)}async function ae(Y){if(U){t(28,N=!0);try{console.log("‚úçÔ∏è FichaDetailContainer: Confirmando assinatura:",Y.detail);const Z={assinatura:Y.detail.assinatura};await _t.confirmSignature(U.id,Z),t(26,w=!1),t(32,U=null),await L(),ze.success("Assinatura registrada","Entrega foi assinada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Z){console.error("‚ùå Erro ao processar assinatura:",Z),ze.error("Erro na assinatura","N√£o foi poss√≠vel registrar a assinatura")}finally{t(28,N=!1)}}}function re(){t(26,w=!1),t(32,U=null),console.log("‚ùå Assinatura cancelada")}function ue(Y){t(31,O=Y.detail.equipamento),t(25,D=!0),console.log("üîÑ Iniciando devolu√ß√£o:",O.id)}async function me(Y){if(O){t(29,x=!0);try{console.log("üîÑ FichaDetailContainer: Processando devolu√ß√£o:",Y.detail);const Z={devolucoes:[{equipamentoId:O.id,motivo:Y.detail.motivo,observacoes:Y.detail.observacoes||"Devolu√ß√£o via interface da ficha"}]},ie=await Er.processReturns(Z);if(ie.data.erros.length>0)throw new Error(`Erro na devolu√ß√£o: ${ie.data.erros[0].erro}`);t(25,D=!1),t(31,O=null),await L(),ze.success("Devolu√ß√£o registrada","Equipamento foi devolvido com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Z){console.error("‚ùå Erro ao processar devolu√ß√£o:",Z),ze.error("Erro na devolu√ß√£o","N√£o foi poss√≠vel registrar a devolu√ß√£o")}finally{t(29,x=!1)}}}function ge(){t(25,D=!1),t(31,O=null),console.log("‚ùå Devolu√ß√£o cancelada")}async function pe(Y){try{console.log("‚ùå FichaDetailContainer: Cancelando entrega:",Y.detail);const Z={motivo:Y.detail.motivo};await _t.cancelDelivery(Y.detail.entrega.id,Z),await L(),ze.success("Entrega cancelada","Entrega foi cancelada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Z){console.error("‚ùå Erro ao cancelar entrega:",Z),ze.error("Erro ao cancelar","N√£o foi poss√≠vel cancelar a entrega")}}function fe(Y){console.log("üñ®Ô∏è Imprimindo entrega:",Y.detail.entrega.id),ze.info("Fun√ß√£o em desenvolvimento","Impress√£o ser√° implementada em breve")}return l.$$set=Y=>{"open"in Y&&t(16,n=Y.open),"fichaId"in Y&&t(17,s=Y.fichaId)},l.$$.update=()=>{if(l.$$.dirty[0]&196608&&n&&s&&console.log("üéØ FichaDetailContainer: Estado open mudou para true, fichaId:",s),l.$$.dirty[0]&393216|l.$$.dirty[1]&8&&s&&r.has(s)){const Y=r.get(s);Y&&i!==Y&&(t(18,i=Y),console.log("üîÑ Dados completos atualizados via store reativo:",s))}l.$$.dirty[0]&196608|l.$$.dirty[1]&4&&n&&s&&s!==T&&L(),l.$$.dirty[0]&2147287040|l.$$.dirty[1]&3&&t(0,a={fichaCompleteData:i,episDisponiveis:f,usuarios:c,loading:u,error:h,entregaLoading:F,assinaturaLoading:N,devolucaoLoading:x,showNovaEntregaDrawer:g,showEditarEntregaDrawer:p,showDevolucaoModal:D,showAssinaturaModal:w,entregaEdicao:z,equipamentoDevolucao:O,entregaAssinatura:U,open:n})},[a,A,I,E,P,H,ee,te,le,ae,re,ue,me,ge,pe,fe,n,s,i,f,c,u,h,g,p,D,w,F,N,x,z,O,U,T,r]}class zn extends Ue{constructor(e){super(),Qe(this,e,On,xn,Ge,{open:16,fichaId:17},null,[-1,-1])}}function Qa(l){let e,t;return e=new St({props:{error:l[2],onRetry:l[14]}}),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p(a,r){const n={};r&4&&(n.error=a[2]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function Tn(l){let e,t;return e=new lt({props:{options:l[3],value:l[6],placeholder:"Selecione uma contratada...",disabled:l[1]}}),e.$on("change",l[11]),{c(){W(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p(a,r){const n={};r&8&&(n.options=a[3]),r&64&&(n.value=a[6]),r&2&&(n.disabled=a[1]),e.$set(n)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function Rn(l){let e,t,a,r,n="Carregando...",s;return t=new yt({props:{size:"sm"}}),{c(){e=b("div"),W(t.$$.fragment),a=q(),r=b("span"),r.textContent=n,this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);K(t.$$.fragment,i),a=V(i),r=v(i,"SPAN",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1v5o0hb"&&(r.textContent=n),i.forEach(m),this.h()},h(){$(r,"class","ml-2 text-sm text-gray-600"),$(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(o,i){S(o,e,i),J(t,e,null),d(e,a),d(e,r),s=!0},p:Ve,i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),G(t)}}}function Mn(l){let e,t,a,r;e=new lt({props:{options:l[9],value:l[7],placeholder:l[6]?"Selecione um colaborador sem ficha...":"Primeiro selecione uma contratada",disabled:l[1]||!l[6]}}),e.$on("change",l[12]);let n=l[9].length===0&&l[6]&&Ga();return{c(){W(e.$$.fragment),t=q(),n&&n.c(),a=Ce()},l(s){K(e.$$.fragment,s),t=V(s),n&&n.l(s),a=Ce()},m(s,o){J(e,s,o),S(s,t,o),n&&n.m(s,o),S(s,a,o),r=!0},p(s,o){const i={};o&512&&(i.options=s[9]),o&128&&(i.value=s[7]),o&64&&(i.placeholder=s[6]?"Selecione um colaborador sem ficha...":"Primeiro selecione uma contratada"),o&66&&(i.disabled=s[1]||!s[6]),e.$set(i),s[9].length===0&&s[6]?n||(n=Ga(),n.c(),n.m(a.parentNode,a)):n&&(n.d(1),n=null)},i(s){r||(k(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){s&&(m(t),m(a)),G(e,s),n&&n.d(s)}}}function Ln(l){let e,t,a,r,n="Carregando...",s;return t=new yt({props:{size:"sm"}}),{c(){e=b("div"),W(t.$$.fragment),a=q(),r=b("span"),r.textContent=n,this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);K(t.$$.fragment,i),a=V(i),r=v(i,"SPAN",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1v5o0hb"&&(r.textContent=n),i.forEach(m),this.h()},h(){$(r,"class","ml-2 text-sm text-gray-600"),$(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(o,i){S(o,e,i),J(t,e,null),d(e,a),d(e,r),s=!0},p:Ve,i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),G(t)}}}function Ga(l){let e,t="Todos os colaboradores desta contratada j√° possuem ficha EPI";return{c(){e=b("p"),e.textContent=t,this.h()},l(a){e=v(a,"P",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1689xbi"&&(e.textContent=t),this.h()},h(){$(e,"class","text-sm text-gray-500 mt-1")},m(a,r){S(a,e,r)},d(a){a&&m(e)}}}function jn(l){let e,t,a,r,n="Contratada",s,o,i,f,c,u,h="Colaborador",g,p,D,w,F=l[2]&&Qa(l);const N=[Rn,Tn],x=[];function z(L,X){return L[4]?0:1}o=z(l),i=x[o]=N[o](l);const O=[Ln,Mn],U=[];function T(L,X){return L[5]?0:1}return p=T(l),D=U[p]=O[p](l),{c(){F&&F.c(),e=q(),t=b("div"),a=b("div"),r=b("label"),r.textContent=n,s=q(),i.c(),f=q(),c=b("div"),u=b("label"),u.textContent=h,g=q(),D.c(),this.h()},l(L){F&&F.l(L),e=V(L),t=v(L,"DIV",{class:!0});var X=C(t);a=v(X,"DIV",{});var _=C(a);r=v(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),De(r)!=="svelte-6kjk6u"&&(r.textContent=n),s=V(_),i.l(_),_.forEach(m),f=V(X),c=v(X,"DIV",{});var A=C(c);u=v(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),De(u)!=="svelte-funhjy"&&(u.textContent=h),g=V(A),D.l(A),A.forEach(m),X.forEach(m),this.h()},h(){$(r,"for","contratada-select"),$(r,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),$(u,"for","colaborador-select"),$(u,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),$(t,"class","space-y-4")},m(L,X){F&&F.m(L,X),S(L,e,X),S(L,t,X),d(t,a),d(a,r),d(a,s),x[o].m(a,null),d(t,f),d(t,c),d(c,u),d(c,g),U[p].m(c,null),w=!0},p(L,X){L[2]?F?(F.p(L,X),X&4&&k(F,1)):(F=Qa(L),F.c(),k(F,1),F.m(e.parentNode,e)):F&&(ve(),y(F,1,1,()=>{F=null}),be());let _=o;o=z(L),o===_?x[o].p(L,X):(ve(),y(x[_],1,1,()=>{x[_]=null}),be(),i=x[o],i?i.p(L,X):(i=x[o]=N[o](L),i.c()),k(i,1),i.m(a,null));let A=p;p=T(L),p===A?U[p].p(L,X):(ve(),y(U[A],1,1,()=>{U[A]=null}),be(),D=U[p],D?D.p(L,X):(D=U[p]=O[p](L),D.c()),k(D,1),D.m(c,null))},i(L){w||(k(F),k(i),k(D),w=!0)},o(L){y(F),y(i),y(D),w=!1},d(L){L&&(m(e),m(t)),F&&F.d(L),x[o].d(),U[p].d()}}}function Hn(l){let e;return{c(){e=M("Cancelar")},l(t){e=R(t,"Cancelar")},m(t,a){S(t,e,a)},d(t){t&&m(e)}}}function Bn(l){let e;return{c(){e=M("Criar Ficha")},l(t){e=R(t,"Criar Ficha")},m(t,a){S(t,e,a)},i:Ve,o:Ve,d(t){t&&m(e)}}}function Un(l){let e,t,a;return e=new _r({props:{class:"mr-2",size:"4"}}),{c(){W(e.$$.fragment),t=M(`
        Criando...`)},l(r){K(e.$$.fragment,r),t=R(r,`
        Criando...`)},m(r,n){J(e,r,n),S(r,t,n),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),G(e,r)}}}function Qn(l){let e,t,a,r;const n=[Un,Bn],s=[];function o(i,f){return i[1]?0:1}return e=o(l),t=s[e]=n[e](l),{c(){t.c(),a=Ce()},l(i){t.l(i),a=Ce()},m(i,f){s[e].m(i,f),S(i,a,f),r=!0},p(i,f){let c=e;e=o(i),e!==c&&(ve(),y(s[c],1,1,()=>{s[c]=null}),be(),t=s[e],t||(t=s[e]=n[e](i),t.c()),k(t,1),t.m(a.parentNode,a))},i(i){r||(k(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),s[e].d(i)}}}function Gn(l){let e,t,a,r;return e=new Oe({props:{color:"alternative",size:"sm",class:"rounded-sm",disabled:l[1],$$slots:{default:[Hn]},$$scope:{ctx:l}}}),e.$on("click",l[10]),a=new Oe({props:{color:"primary",size:"sm",class:"rounded-sm",disabled:!l[8],$$slots:{default:[Qn]},$$scope:{ctx:l}}}),a.$on("click",l[13]),{c(){W(e.$$.fragment),t=q(),W(a.$$.fragment)},l(n){K(e.$$.fragment,n),t=V(n),K(a.$$.fragment,n)},m(n,s){J(e,n,s),S(n,t,s),J(a,n,s),r=!0},p(n,s){const o={};s&2&&(o.disabled=n[1]),s&524288&&(o.$$scope={dirty:s,ctx:n}),e.$set(o);const i={};s&256&&(i.disabled=!n[8]),s&524290&&(i.$$scope={dirty:s,ctx:n}),a.$set(i)},i(n){r||(k(e.$$.fragment,n),k(a.$$.fragment,n),r=!0)},o(n){y(e.$$.fragment,n),y(a.$$.fragment,n),r=!1},d(n){n&&m(t),G(e,n),G(a,n)}}}function Jn(l){let e,t,a;function r(s){l[16](s)}let n={size:"md",outsideclose:!l[1],autoclose:!1,$$slots:{footer:[Gn],default:[jn]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.open=l[0]),e=new Vr({props:n}),Re.push(()=>Me(e,"open",r)),{c(){W(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,o){J(e,s,o),a=!0},p(s,[o]){const i={};o&2&&(i.outsideclose=!s[1]),o&525310&&(i.$$scope={dirty:o,ctx:s}),!t&&o&1&&(t=!0,i.open=s[0],Le(()=>t=!1)),e.$set(i)},i(s){a||(k(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){G(e,s)}}}function Kn(l,e,t){let a,r,{open:n=!1}=e,{submitting:s=!1}=e,{error:o=null}=e,{contratadas:i=[]}=e,{colaboradores:f=[]}=e,{loadingContratadas:c=!1}=e,{loadingColaboradores:u=!1}=e;const h=Ye();let g="",p="";function D(){s||(t(6,g=""),t(7,p=""),h("close"))}function w(O){t(6,g=O.detail),t(7,p=""),h("contratadaChange",g)}function F(O){t(7,p=O.detail),h("colaboradorChange",p)}function N(){a&&h("submit",{contratadaId:g,colaboradorId:p})}function x(){h("retry")}function z(O){n=O,t(0,n)}return l.$$set=O=>{"open"in O&&t(0,n=O.open),"submitting"in O&&t(1,s=O.submitting),"error"in O&&t(2,o=O.error),"contratadas"in O&&t(3,i=O.contratadas),"colaboradores"in O&&t(15,f=O.colaboradores),"loadingContratadas"in O&&t(4,c=O.loadingContratadas),"loadingColaboradores"in O&&t(5,u=O.loadingColaboradores)},l.$$.update=()=>{l.$$.dirty&1&&(n||(t(6,g=""),t(7,p=""))),l.$$.dirty&194&&t(8,a=!!g&&!!p&&!s),l.$$.dirty&32832&&t(9,r=f.filter(O=>!g||O.empresa===g))},[n,s,o,i,c,u,g,p,a,r,D,w,F,N,x,f,z]}class Wn extends Ue{constructor(e){super(),Qe(this,e,Kn,Jn,Ge,{open:0,submitting:1,error:2,contratadas:3,colaboradores:15,loadingContratadas:4,loadingColaboradores:5})}}function Ja(l){let e,t,a;function r(s){l[42](s)}let n={fichaId:l[1]};return l[0]!==void 0&&(n.open=l[0]),e=new zn({props:n}),Re.push(()=>Me(e,"open",r)),e.$on("close",l[17]),e.$on("fichaUpdated",l[18]),{c(){W(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,o){J(e,s,o),a=!0},p(s,o){const i={};o[0]&2&&(i.fichaId=s[1]),!t&&o[0]&1&&(t=!0,i.open=s[0],Le(()=>t=!1)),e.$set(i)},i(s){a||(k(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){G(e,s)}}}function Ka(l){let e,t,a;function r(s){l[43](s)}let n={contratadas:l[3],colaboradores:l[4],loadingContratadas:l[5],loadingColaboradores:l[6],submitting:l[7]};return l[2]!==void 0&&(n.open=l[2]),e=new Wn({props:n}),Re.push(()=>Me(e,"open",r)),e.$on("close",l[23]),e.$on("contratadaChange",l[44]),e.$on("colaboradorChange",l[45]),e.$on("submit",l[22]),e.$on("retry",l[24]),{c(){W(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,o){J(e,s,o),a=!0},p(s,o){const i={};o[0]&8&&(i.contratadas=s[3]),o[0]&16&&(i.colaboradores=s[4]),o[0]&32&&(i.loadingContratadas=s[5]),o[0]&64&&(i.loadingColaboradores=s[6]),o[0]&128&&(i.submitting=s[7]),!t&&o[0]&4&&(t=!0,i.open=s[2],Le(()=>t=!1)),e.$set(i)},i(s){a||(k(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){G(e,s)}}}function Xn(l){let e,t,a,r,n;e=new ol({props:{items:l[8].items,loading:l[8].loading,error:l[8].error,pagination:l[8].pagination,filters:l[8].filters,filterOptions:l[8].filterOptions}}),e.$on("searchChange",l[35]),e.$on("empresaFilterChange",l[36]),e.$on("cargoFilterChange",l[37]),e.$on("devolucaoPendenteChange",l[38]),e.$on("clearFilters",l[14]),e.$on("pageChange",l[39]),e.$on("pageSizeChange",l[40]),e.$on("viewDetail",l[41]),e.$on("refresh",l[19]),e.$on("novaFicha",l[20]);let s=l[0]&&Ja(l),o=l[2]&&Ka(l);return{c(){W(e.$$.fragment),t=q(),s&&s.c(),a=q(),o&&o.c(),r=Ce()},l(i){K(e.$$.fragment,i),t=V(i),s&&s.l(i),a=V(i),o&&o.l(i),r=Ce()},m(i,f){J(e,i,f),S(i,t,f),s&&s.m(i,f),S(i,a,f),o&&o.m(i,f),S(i,r,f),n=!0},p(i,f){const c={};f[0]&256&&(c.items=i[8].items),f[0]&256&&(c.loading=i[8].loading),f[0]&256&&(c.error=i[8].error),f[0]&256&&(c.pagination=i[8].pagination),f[0]&256&&(c.filters=i[8].filters),f[0]&256&&(c.filterOptions=i[8].filterOptions),e.$set(c),i[0]?s?(s.p(i,f),f[0]&1&&k(s,1)):(s=Ja(i),s.c(),k(s,1),s.m(a.parentNode,a)):s&&(ve(),y(s,1,1,()=>{s=null}),be()),i[2]?o?(o.p(i,f),f[0]&4&&k(o,1)):(o=Ka(i),o.c(),k(o,1),o.m(r.parentNode,r)):o&&(ve(),y(o,1,1,()=>{o=null}),be())},i(i){n||(k(e.$$.fragment,i),k(s),k(o),n=!0)},o(i){y(e.$$.fragment,i),y(s),y(o),n=!1},d(i){i&&(m(t),m(a),m(r)),G(e,i),s&&s.d(i),o&&o.d(i)}}}function Yn(l){console.log("Page size change solicitado para fichas:",l)}function Zn(l){console.log("üë§ Colaborador selecionado:",l)}function es(l,e,t){let a,r,n,s;Vt(l,or,j=>t(34,s=j));let{initialPageSize:o=10}=e,{autoRefresh:i=!1}=e,{refreshInterval:f=3e4}=e;const c=ir(j=>vt.getFichasList({page:j.page||1,limit:j.limit||o,search:j.search||void 0,empresaFilter:j.empresaFilter!=="todas"?j.empresaFilter:void 0,cargo:j.cargo!=="todos"?j.cargo:void 0,status:j.status!=="todos"?j.status:void 0,devolucaoPendente:!!j.devolucaoPendente}).then(Q=>({data:Q.items,total:Q.total,page:Q.page||j.page||1,pageSize:Q.pageSize||j.limit||o,totalPages:Math.ceil(Q.total/(j.limit||o))})),{initialPageSize:o});Vt(l,c,j=>t(33,n=j));let u=!1,h=null,g=!1,p=[],D=[],w=!1,F=!1,N=!1,x=[{value:"todas",label:"Todas as Empresas"}],z=[{value:"todos",label:"Todos os Cargos"}],O=!1;Xa(async()=>{console.log("üöÄ FichasContainer: Inicializando..."),await fr.initialize(),await Promise.all([X(),L()]),U(),console.log("‚úÖ FichasContainer: Inicializado com sucesso")});function U(){const j=s.url.searchParams.get("ficha");j&&(console.log("üîó Link direto detectado para ficha:",j),T(j))}function T(j){j&&j!==h&&(console.log("üîó Abrindo ficha via link direto:",j),t(1,h=j),t(0,u=!0))}async function L(){try{await c.fetchPage(),console.log("üìã Dados de fichas carregados")}catch(j){console.error("‚ùå Erro ao carregar fichas:",j),ze.error("Erro ao carregar fichas","N√£o foi poss√≠vel carregar os dados das fichas")}}async function X(){try{O=!0,console.log("üîÑ Carregando op√ß√µes de filtros...");const j=await it.get("/contratadas");if(j.success&&j.data){const Q=j.data.contratadas||j.data;Array.isArray(Q)&&(t(28,x=[{value:"todas",label:"Todas as Empresas"},...Q.map(he=>({value:he.id,label:he.nome}))]),console.log("‚úÖ Op√ß√µes de empresa carregadas:",{total:x.length,exemplos:x.slice(0,3).map(he=>({id:he.value,nome:he.label}))}))}try{const Q=await it.get("/colaboradores?limit=100");if(Q.success&&Q.data){const he=Array.isArray(Q.data)?Q.data:Q.data.items||[],ne=[...new Set(he.map(ce=>ce.cargo).filter(ce=>ce&&ce.trim()))].sort();t(29,z=[{value:"todos",label:"Todos os Cargos"},...ne.map(ce=>({value:ce,label:ce}))]),console.log("‚úÖ Op√ß√µes de cargo carregadas dinamicamente:",z.length)}}catch(Q){console.warn("‚ö†Ô∏è Erro ao carregar cargos, usando fallback:",Q),t(29,z=[{value:"todos",label:"Todos os Cargos"},{value:"operador",label:"Operador"},{value:"tecnico",label:"T√©cnico"},{value:"supervisor",label:"Supervisor"},{value:"gerente",label:"Gerente"}])}}catch(j){console.error("‚ùå Erro ao carregar op√ß√µes de filtros:",j)}finally{O=!1}}let _={empresa:"todas",cargo:"todos",devolucaoPendente:!1},A="";function I(j){t(31,A=j),te()}function E(j){t(30,_={..._,empresa:j}),te()}function P(j){t(30,_={..._,cargo:j}),te()}function H(j){t(30,_={..._,devolucaoPendente:j}),te()}function ee(){console.log("üßπ Limpando todos os filtros..."),t(31,A=""),t(30,_={empresa:"todas",cargo:"todos",devolucaoPendente:!1}),c.reset(),c.fetchPage(),console.log("‚úÖ Filtros limpos, store resetado e dados recarregados")}function te(){const j={};A&&A.trim()!==""&&(j.search=A.trim()),_.empresa&&_.empresa!=="todas"&&(j.empresaFilter=_.empresa),_.cargo&&_.cargo!=="todos"&&(j.cargo=_.cargo),_.devolucaoPendente&&(j.devolucaoPendente=!0),console.log("üîß Aplicando filtros de fichas:",{original:_,processed:j,searchTerm:A,empresa:_.empresa,cargo:_.cargo,devolucaoPendente:_.devolucaoPendente}),c.setFilters(j)}function le(j){c.goToPage(j)}function ae(j){t(1,h=j),t(0,u=!0);const Q=new URL(s.url);Q.searchParams.set("ficha",j),Ft(Q.toString(),{replaceState:!0,noScroll:!0}),console.log("üëÄ Abrindo detalhes da ficha:",j)}function re(){t(0,u=!1),t(1,h=null);const j=new URL(s.url);j.searchParams.delete("ficha"),Ft(j.toString(),{replaceState:!0,noScroll:!0})}function ue(){console.log("üîÑ Ficha atualizada, recarregando lista"),L()}function me(){L()}function ge(){t(2,g=!0),pe()}async function pe(){if(!(p.length>0))try{t(5,w=!0),console.log("üîÑ Carregando contratadas da API...");const j=await it.get("/contratadas");if(console.log("üì¶ Raw API response for contratadas:",j),console.log("üì¶ result.data structure:",j.data),j.success&&j.data){const Q=j.data.contratadas||j.data;if(Array.isArray(Q))t(3,p=Q.map(he=>({value:he.id,label:he.nome}))),console.log("‚úÖ Contratadas carregadas da API:",p.length);else throw new Error("Dados de contratadas n√£o s√£o um array")}else throw new Error("Resposta inv√°lida da API de contratadas")}catch(j){console.error("‚ùå Erro ao carregar contratadas:",j);const Q=j instanceof Error?j.message:"Erro desconhecido";ze.error("Erro ao carregar contratadas",`N√£o foi poss√≠vel carregar a lista de empresas: ${Q}`),t(3,p=[{value:"empresa-alpha",label:"Empresa Alpha LTDA"},{value:"empresa-beta",label:"Empresa Beta Servi√ßos"},{value:"empresa-gamma",label:"Gamma Constru√ß√µes"}])}finally{t(5,w=!1)}}async function fe(j){try{t(6,F=!0),console.log("üîÑ Carregando colaboradores SEM FICHA para contratada:",j);const Q=new URLSearchParams;Q.set("contratadaId",j),Q.set("semFicha","true"),Q.set("limit","100");const he=`/colaboradores?${Q.toString()}`;console.log("üîó URL (com semFicha=true):",he);const ne=await it.get(he);if(console.log("üìã FILTRADO: Mostrar√° APENAS colaboradores sem ficha EPI"),console.log("üì¶ Raw API response for colaboradores:",ne),console.log("üì¶ result.data structure:",ne.data),ne.success&&ne.data){const ce=ne.data;if(console.log("üìã Colaboradores sem ficha encontrados:",ce.length),Array.isArray(ce))t(4,D=ce.map(Ae=>({value:Ae.id,label:Ae.nome,empresa:j,cpf:Ae.cpfFormatado||Ae.cpf,cargo:Ae.cargo||"-",matricula:Ae.matricula||"-",setor:Ae.setor||"-"}))),console.log("‚úÖ Colaboradores sem ficha carregados da API:",D.length);else throw new Error("Dados de colaboradores n√£o s√£o um array")}else throw new Error("Resposta inv√°lida da API de colaboradores")}catch(Q){console.error("‚ùå Erro ao carregar colaboradores sem ficha:",Q);const he=Q instanceof Error?Q.message:"Erro desconhecido";ze.error("Erro ao carregar colaboradores",`N√£o foi poss√≠vel carregar a lista de profissionais sem ficha: ${he}`),t(4,D=[{value:`mock-colab-001-${j}`,label:"Carlos Oliveira (Mock - Sem Ficha)",empresa:j,cpf:"123.456.789-01",cargo:"Operador"},{value:`mock-colab-002-${j}`,label:"Ana Santos (Mock - Sem Ficha)",empresa:j,cpf:"987.654.321-02",cargo:"T√©cnica"},{value:`mock-colab-003-${j}`,label:"Jo√£o Silva (Mock - Sem Ficha)",empresa:j,cpf:"456.789.123-03",cargo:"Supervisor"}]),console.log("‚ö†Ô∏è Usando dados mock para colaboradores sem ficha:",D.length)}finally{t(6,F=!1)}}function Y(j){console.log("üè¢ Contratada selecionada:",j),j?fe(j):t(4,D=[])}async function Z(j){const{contratadaId:Q,colaboradorId:he}=j.detail;try{t(7,N=!0),console.log("üìù Criando nova ficha:",{contratadaId:Q,colaboradorId:he});const ne={colaboradorId:he,status:"ATIVA"};console.log("üì§ Enviando payload para cria√ß√£o de ficha:",ne);const ce=await it.post("/fichas-epi",ne);if(console.log("üì• Resposta da API ao criar ficha:",ce),ce.success){t(2,g=!1),await L();const Ae=D.find(Ie=>Ie.value===he),Te=(Ae==null?void 0:Ae.label)||"Colaborador";if(ze.success("Ficha criada com sucesso",`Ficha de EPI criada para ${Te}`),console.log("‚úÖ Nova ficha criada com sucesso:",ce.data),ce.data&&ce.data.id){console.log("üéØ Abrindo ficha rec√©m-criada:",ce.data.id),t(1,h=ce.data.id),t(0,u=!0);const Ie=new URL(s.url);Ie.searchParams.set("ficha",ce.data.id),Ft(Ie.toString(),{replaceState:!0,noScroll:!0})}}else throw new Error(ce.message||"Erro ao criar ficha")}catch(ne){console.error("‚ùå Erro ao criar nova ficha:",ne),ze.error("Erro ao criar ficha","N√£o foi poss√≠vel criar a ficha de EPI")}finally{t(7,N=!1)}}function ie(){t(2,g=!1),t(4,D=[])}function $e(){t(3,p=[]),pe()}const B=j=>I(j.detail),se=j=>E(j.detail),Ee=j=>P(j.detail),ke=j=>H(j.detail),we=j=>le(j.detail),qe=j=>Yn(j.detail),ye=j=>ae(j.detail);function Pe(j){u=j,t(0,u)}function Ne(j){g=j,t(2,g)}const Se=j=>Y(j.detail),de=j=>Zn(j.detail);return l.$$set=j=>{"initialPageSize"in j&&t(25,o=j.initialPageSize),"autoRefresh"in j&&t(26,i=j.autoRefresh),"refreshInterval"in j&&t(27,f=j.refreshInterval)},l.$$.update=()=>{l.$$.dirty[1]&8&&s.url.searchParams.get("ficha")&&T(s.url.searchParams.get("ficha")),l.$$.dirty[0]&1073741824|l.$$.dirty[1]&1&&t(32,a=A!==""||_.empresa!=="todas"||_.cargo!=="todos"||_.devolucaoPendente),l.$$.dirty[0]&1879048192|l.$$.dirty[1]&7&&t(8,r={items:n.items||[],loading:n.loading,error:n.error,pagination:{currentPage:n.page,totalPages:n.totalPages,pageSize:n.pageSize,total:n.total,hasNext:c.hasNext(),hasPrev:c.hasPrev()},filters:{searchTerm:A,empresaFilter:_.empresa,cargoFilter:_.cargo,devolucaoPendente:_.devolucaoPendente,hasActiveFilters:a},filterOptions:{empresas:x,cargos:z}})},[u,h,g,p,D,w,F,N,r,c,I,E,P,H,ee,le,ae,re,ue,me,ge,Y,Z,ie,$e,o,i,f,x,z,_,A,a,n,s,B,se,Ee,ke,we,qe,ye,Pe,Ne,Se,de]}class ts extends Ue{constructor(e){super(),Qe(this,e,es,Xn,Ge,{initialPageSize:25,autoRefresh:26,refreshInterval:27},null,[-1,-1])}}function as(l){let e,t,a;return t=new ts({props:{initialPageSize:10,autoRefresh:!1}}),{c(){e=q(),W(t.$$.fragment),this.h()},l(r){Wa("svelte-161hi6l",document.head).forEach(m),e=V(r),K(t.$$.fragment,r),this.h()},h(){document.title="Fichas de EPI - DataLife EPI"},m(r,n){S(r,e,n),J(t,r,n),a=!0},p:Ve,i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),G(t,r)}}}class xs extends Ue{constructor(e){super(),Qe(this,e,null,as,Ge,{})}}export{xs as component};
